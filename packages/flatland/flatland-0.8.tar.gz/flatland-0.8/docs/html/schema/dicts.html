<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Dicts &mdash; flatland 0.0.hg-tip documentation</title>
    
    <link rel="stylesheet" href="../_static/flatland.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.hg-tip',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="flatland 0.0.hg-tip documentation" href="../index.html" />
    <link rel="up" title="Defining and Using Forms" href="index.html" />
    <link rel="next" title="Lists" href="lists.html" />
    <link rel="prev" title="Dates and Times" href="datetimes.html" /> 
  </head>
  <body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="dicts">
<h1>Dicts<a class="headerlink" href="#dicts" title="Permalink to this headline">¶</a></h1>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">intro</p>
</div>
<div class="section" id="set-policy">
<span id="id1"></span><h2><tt class="docutils literal"><span class="pre">set()</span></tt> Policy<a class="headerlink" href="#set-policy" title="Permalink to this headline">¶</a></h2>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">strict, duck, etc.</p>
</div>
</div>
<div class="section" id="validation">
<h2>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h2>
<p>If <a class="reference internal" href="../api.html#flatland.schema.containers.Container.descent_validators" title="flatland.schema.containers.Container.descent_validators"><tt class="xref py py-attr docutils literal"><span class="pre">descent_validators</span></tt></a> is defined, these validators
will be run first, before member elements are validated.</p>
<p>If <a class="reference internal" href="schema.html#flatland.schema.base.Element.validators" title="flatland.schema.base.Element.validators"><tt class="xref py py-attr docutils literal"><span class="pre">validators</span></tt></a> is defined, these
validators will be run after member elements are validated.</p>
</div>
<div class="section" id="dict">
<h2><tt class="docutils literal"><span class="pre">Dict</span></tt><a class="headerlink" href="#dict" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flatland.schema.containers.Dict">
<em class="property">class </em><tt class="descname">Dict</tt><big>(</big><em>value=Unspecified</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#flatland.schema.containers.Dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="../api.html#flatland.schema.containers.Mapping" title="flatland.schema.containers.Mapping"><tt class="xref py py-class docutils literal"><span class="pre">flatland.schema.containers.Mapping</span></tt></a>, <a class="reference external" href="http://docs.python.org/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a></p>
<p>A mapping Container with named members.</p>
<dl class="attribute">
<dt id="flatland.schema.containers.Dict.policy">
<tt class="descname">policy</tt><em class="property"> = 'subset'</em><a class="headerlink" href="#flatland.schema.containers.Dict.policy" title="Permalink to this definition">¶</a></dt>
<dd><p>Deprecated.  One of &#8216;strict&#8217;, &#8216;subset&#8217; or &#8216;duck&#8217;.  Default &#8216;subset&#8217;.</p>
<p>Operates as <a class="reference internal" href="../validation/builtin.html#flatland.validation.containers.SetWithAllFields" title="flatland.validation.containers.SetWithAllFields"><tt class="xref py py-class docutils literal"><span class="pre">SetWithAllFields</span></tt></a>
and <a class="reference internal" href="../validation/builtin.html#flatland.validation.containers.SetWithKnownFields" title="flatland.validation.containers.SetWithKnownFields"><tt class="xref py py-class docutils literal"><span class="pre">SetWithKnownFields</span></tt></a>, except
raises an exception immediately upon <a class="reference internal" href="#flatland.schema.containers.Dict.set" title="flatland.schema.containers.Dict.set"><tt class="xref py py-meth docutils literal"><span class="pre">set()</span></tt></a>.</p>
<p>To migrate to the new validators, set <a class="reference internal" href="#flatland.schema.containers.Dict.policy" title="flatland.schema.containers.Dict.policy"><tt class="xref py py-attr docutils literal"><span class="pre">policy</span></tt></a> to <tt class="docutils literal"><span class="pre">None</span></tt> to
disable the policy behavior.</p>
</dd></dl>

<dl class="classmethod">
<dt id="flatland.schema.containers.Dict.of">
<em class="property">classmethod </em><tt class="descname">of</tt><big>(</big><em>*fields</em><big>)</big><a class="headerlink" href="#flatland.schema.containers.Dict.of" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition-todo admonition" id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">doc of()</p>
</div>
</dd></dl>

<dl class="classmethod">
<dt id="flatland.schema.containers.Dict.from_object">
<em class="property">classmethod </em><tt class="descname">from_object</tt><big>(</big><em>obj</em>, <em>include=None</em>, <em>omit=None</em>, <em>rename=None</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#flatland.schema.containers.Dict.from_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an element initialized with an object&#8217;s attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>obj</strong> &#8211; any object</li>
<li><strong>include</strong> &#8211; optional, an iterable of attribute names to pull from
<em>obj</em>, if present on the object.  Only these attributes will be
included.</li>
<li><strong>omit</strong> &#8211; optional, an iterable of attribute names to ignore on
<strong>obj</strong>.  All other attributes matching a named field on the
mapping will be included.</li>
<li><strong>rename</strong> &#8211; optional, a mapping of attribute-to-field name
transformations.  Attributes specified in the mapping will be
included regardless of <em>include</em> or <em>omit</em>.</li>
<li><strong>**kw</strong> &#8211; keyword arguments will be passed to the element&#8217;s
constructor.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><em>include</em> and <em>omit</em> are mutually exclusive.</p>
<p>This is a convenience constructor for <a class="reference internal" href="#flatland.schema.containers.Dict.set_by_object" title="flatland.schema.containers.Dict.set_by_object"><tt class="xref py py-meth docutils literal"><span class="pre">set_by_object()</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">element</span> <span class="o">=</span> <span class="n">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
<span class="n">element</span><span class="o">.</span><span class="n">set_by_object</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">omit</span><span class="p">,</span> <span class="n">rename</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.set">
<tt class="descname">set</tt><big>(</big><em>value</em>, <em>policy=None</em><big>)</big><a class="headerlink" href="#flatland.schema.containers.Dict.set" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition-todo admonition" id="index-3">
<p class="first admonition-title">Todo</p>
<p class="last">doc set()</p>
</div>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.set_by_object">
<tt class="descname">set_by_object</tt><big>(</big><em>obj</em>, <em>include=None</em>, <em>omit=None</em>, <em>rename=None</em><big>)</big><a class="headerlink" href="#flatland.schema.containers.Dict.set_by_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Set fields with an object&#8217;s attributes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>obj</strong> &#8211; any object</li>
<li><strong>include</strong> &#8211; optional, an iterable of attribute names to pull from
<em>obj</em>, if present on the object.  Only these attributes will be
included.</li>
<li><strong>omit</strong> &#8211; optional, an iterable of attribute names to ignore on
<strong>obj</strong>.  All other attributes matching a named field on the
mapping will be included.</li>
<li><strong>rename</strong> &#8211; optional, a mapping of attribute-to-field name
transformations.  Attributes specified in the mapping will be
included regardless of <em>include</em> or <em>omit</em>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><em>include</em> and <em>omit</em> are mutually exclusive.</p>
<p>Sets fields on <em>self</em>, using as many attributes as possible from
<em>obj</em>.  Object attributes that do not correspond to field names are
ignored.</p>
<p>Mapping instances have two corresponding methods useful for
round-tripping values in and out of your domain objects.</p>
<p><a class="reference internal" href="#flatland.schema.containers.Dict.update_object" title="flatland.schema.containers.Dict.update_object"><tt class="xref py py-meth docutils literal"><span class="pre">update_object()</span></tt></a> performs the inverse of <tt class="xref py py-meth docutils literal"><span class="pre">set_object()</span></tt>, and
<a class="reference internal" href="#flatland.schema.containers.Dict.slice" title="flatland.schema.containers.Dict.slice"><tt class="xref py py-meth docutils literal"><span class="pre">slice()</span></tt></a> is useful for constructing new objects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="s">&#39;biff&#39;</span><span class="p">,</span> <span class="s">&#39;secret&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span> <span class="o">=</span> <span class="n">UserForm</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span><span class="o">.</span><span class="n">set_by_object</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span><span class="p">[</span><span class="s">&#39;login&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
<span class="go">u&#39;biff&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span><span class="p">[</span><span class="s">&#39;password&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">u&#39;new-password&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">form</span><span class="o">.</span><span class="n">update_object</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">omit</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;verify_password&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user</span><span class="o">.</span><span class="n">password</span>
<span class="go">u&#39;new-password&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_keywords</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="n">omit</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;verify_password&#39;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">user_keywords</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">[&#39;login&#39;, &#39;password&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="o">**</span><span class="n">user_keywords</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.update_object">
<tt class="descname">update_object</tt><big>(</big><em>obj</em>, <em>include=None</em>, <em>omit=None</em>, <em>rename=None</em>, <em>key=&lt;function identifier_transform at 0x10578f488&gt;</em><big>)</big><a class="headerlink" href="#flatland.schema.containers.Dict.update_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Update an object&#8217;s attributes using the element&#8217;s values.</p>
<p>Produces a <a class="reference internal" href="#flatland.schema.containers.Dict.slice" title="flatland.schema.containers.Dict.slice"><tt class="xref py py-meth docutils literal"><span class="pre">slice()</span></tt></a> using <em>include</em>, <em>omit</em>, <em>rename</em> and
<em>key</em>, and sets the selected attributes on <em>obj</em> using
<tt class="docutils literal"><span class="pre">setattr</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">nothing. <em>obj</em> is modified directly.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="flatland.schema.containers.Dict.slice">
<tt class="descname">slice</tt><big>(</big><em>include=None</em>, <em>omit=None</em>, <em>rename=None</em>, <em>key=None</em><big>)</big><a class="headerlink" href="#flatland.schema.containers.Dict.slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <tt class="docutils literal"><span class="pre">dict</span></tt> containing a subset of the element&#8217;s values.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="sparsedict">
<h2><tt class="docutils literal"><span class="pre">SparseDict</span></tt><a class="headerlink" href="#sparsedict" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="flatland.schema.containers.SparseDict">
<em class="property">class </em><tt class="descname">SparseDict</tt><big>(</big><em>value=Unspecified</em>, <em>**kw</em><big>)</big><a class="headerlink" href="#flatland.schema.containers.SparseDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#flatland.schema.containers.Dict" title="flatland.schema.containers.Dict"><tt class="xref py py-class docutils literal"><span class="pre">flatland.schema.containers.Dict</span></tt></a></p>
<p>A Mapping which may contain a subset of the schema&#8217;s allowed keys.</p>
<p>This differs from <a class="reference internal" href="#flatland.schema.containers.Dict" title="flatland.schema.containers.Dict"><tt class="xref py py-class docutils literal"><span class="pre">Dict</span></tt></a> in that new instances are not created with
empty values for all possible keys.  In addition, mutating operations are
allowed so long as the operations operate within the schema.  For example,
you may <tt class="xref py py-meth docutils literal"><span class="pre">pop()</span></tt> and <tt class="docutils literal"><span class="pre">del</span></tt> members of the mapping.</p>
<dl class="attribute">
<dt id="flatland.schema.containers.SparseDict.minimum_fields">
<tt class="descname">minimum_fields</tt><em class="property"> = None</em><a class="headerlink" href="#flatland.schema.containers.SparseDict.minimum_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>The subset of fields to autovivify on instantiation.</p>
<p>May be <tt class="docutils literal"><span class="pre">None</span></tt> or <tt class="docutils literal"><span class="pre">'required'</span></tt>.  If <tt class="docutils literal"><span class="pre">None</span></tt>, mappings will be
created empty and mutation operations are unrestricted within the
bounds of the <tt class="xref py py-attr docutils literal"><span class="pre">field_schema</span></tt>.  If <tt class="docutils literal"><span class="pre">required</span></tt>, fields with
<tt class="xref py py-attr docutils literal"><span class="pre">optional</span></tt> of <tt class="docutils literal"><span class="pre">False</span></tt> will always be present after
instantiation, and attempts to remove them from the mapping with <tt class="docutils literal"><span class="pre">del</span></tt>
and friends will raise <tt class="docutils literal"><span class="pre">TypeError</span></tt>.</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/flatland.png" alt="Logo"/>
            </a></p>
  <h3>Contents</h3>
  <ul>
    <li><ul>
<li><a class="reference internal" href="#">Dicts</a><ul>
<li><a class="reference internal" href="#set-policy"><tt class="docutils literal"><span class="pre">set()</span></tt> Policy</a></li>
<li><a class="reference internal" href="#validation">Validation</a></li>
<li><a class="reference internal" href="#dict"><tt class="docutils literal"><span class="pre">Dict</span></tt></a></li>
<li><a class="reference internal" href="#sparsedict"><tt class="docutils literal"><span class="pre">SparseDict</span></tt></a></li>
</ul>
</li>
</ul>
</li>
  </ul>
<h3>Topics</h3>
<ul>
  <li><ul>
  <li><a href="index.html">Defining and Using Forms</a><ul>
      <li>Previous: <a href="datetimes.html" title="previous chapter">Dates and Times</a></li>
      <li>Next: <a href="lists.html" title="next chapter">Lists</a></li>
  </ul></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2013, the flatland authors and contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>