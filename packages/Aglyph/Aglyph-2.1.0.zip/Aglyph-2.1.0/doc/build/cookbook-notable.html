

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Other notable usage scenarios &mdash; Aglyph 2.1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Aglyph 2.1.0 documentation" href="index.html"/>
        <link rel="up" title="Aglyph cookbook" href="cookbook.html"/>
        <link rel="next" title="Integrating Aglyph" href="cookbook-integration.html"/>
        <link rel="prev" title="Component inheritance using templates" href="cookbook-templating.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> Aglyph</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What&#8217;s new in release 2.1.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="whats-new.html#previous-releases-of-aglyph">Previous releases of Aglyph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="get-started.html">Getting started with Aglyph</a><ul>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#download-and-install-aglyph">1. Download and install Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#download-extract-and-run-the-movielisterapp-application">2. Download, extract, and run the <em>movielisterapp</em> application</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#a-very-brief-introduction-to-dependency-injection">3. A <em>(very)</em> brief introduction to Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#make-some-general-improvements-to-the-movielisterapp-application">4. Make some general improvements to the <em>movielisterapp</em> application</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#add-dependency-injection-support-to-the-movielisterapp-application">5. Add Dependency Injection support to the <em>movielisterapp</em> application</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#make-changes-to-the-movielisterapp-application">6. Make changes to the <em>movielisterapp</em> application</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#suggested-next-steps">Suggested next steps</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="cookbook.html">Aglyph cookbook</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cookbook-understanding.html">Understand the general features of Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-configuration.html">Choose a configuration approach for Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-common.html">Common usage scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-templating.html">Component inheritance using templates</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Other notable usage scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-integration.html">Integrating Aglyph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api-ref.html">Aglyph API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aglyph.html"><tt class="docutils literal"><span class="pre">aglyph</span></tt> &#8212; Dependency Injection for Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.assembler.html"><tt class="docutils literal"><span class="pre">aglyph.assembler</span></tt> &#8212; The Aglyph component assembler</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.binder.html"><tt class="docutils literal"><span class="pre">aglyph.binder</span></tt> &#8212; The Aglyph component binder</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.cache.html"><tt class="docutils literal"><span class="pre">aglyph.cache</span></tt> &#8212; Simple object caching support for Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.compat.html"><tt class="docutils literal"><span class="pre">aglyph.compat</span></tt> &#8212; Python version/variant compatibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.compat.ipyetree.html"><tt class="docutils literal"><span class="pre">aglyph.compat.ipyetree</span></tt> &#8212; an <em>ElementTree</em> parser for <em>IronPython</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.component.html"><tt class="docutils literal"><span class="pre">aglyph.component</span></tt> &#8212; Defining components and their dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.context.html"><tt class="docutils literal"><span class="pre">aglyph.context</span></tt> &#8212; Defining component contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.integration.cherrypy.html"><tt class="docutils literal"><span class="pre">aglyph.integration.cherrypy</span></tt> &#8212; Integrating Aglyph with CherryPy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Aglyph 2.1.0 testing summary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id1">CPython</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id2">PyPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id3">Stackless Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id4">IronPython</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id5">Jython</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#previous-releases-of-aglyph">Previous releases of Aglyph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap for future releases</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Aglyph</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="cookbook.html">Aglyph cookbook</a> &raquo;</li>
      
    <li>Other notable usage scenarios</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/cookbook-notable.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="other-notable-usage-scenarios">
<h1>Other notable usage scenarios<a class="headerlink" href="#other-notable-usage-scenarios" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="#staticmethod-classmethod-nestedclass-component"><em>Describe components for static methods, class methods, or nested classes</em></a></li>
<li><a class="reference internal" href="#member-component"><em>Describe components for module or class members</em></a></li>
<li><a class="reference internal" href="#impl-specific-component"><em>Describe components for Python implementation-specific objects (Stackless, PyPy, IronPython, Jython)</em></a></li>
<li><a class="reference internal" href="#custom-xmlcontext-parser"><em>Use a custom XML parser for XMLContext</em></a></li>
<li><a class="reference internal" href="#clear-caches"><em>Clear the Aglyph singleton, weakref, and borg memory caches</em></a></li>
</ul>
<div class="section" id="describe-components-for-static-methods-class-methods-or-nested-classes">
<span id="staticmethod-classmethod-nestedclass-component"></span><h2>Describe components for static methods, class methods, or nested classes<a class="headerlink" href="#describe-components-for-static-methods-class-methods-or-nested-classes" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
<p>You may encounter cases where objects for which you want to describe components
are created through static methods (<tt class="docutils literal"><span class="pre">&#64;staticmethod</span></tt>), class methods
(<tt class="docutils literal"><span class="pre">&#64;classmethod</span></tt>), or nested classes.</p>
<p>Recall that an Aglyph component must have an <em>importable</em> dotted name.
Unfortunately, the dotted names for static methods, class methods, and nested
classes are <strong>not</strong> importable.</p>
<p>Aglyph components support an optional
<a class="reference internal" href="aglyph.component.html#aglyph.component.Component.factory_name" title="aglyph.component.Component.factory_name"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.component.Component.factory_name</span></tt></a> property to address these
cases. The <tt class="docutils literal"><span class="pre">factory_name</span></tt> is itself a dotted name, but it is <em>relative to</em>
<a class="reference internal" href="aglyph.component.html#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.component.Component.dotted_name</span></tt></a>.</p>
<p>The following sample <em>delorean.py</em> module helps to illustrate the concepts, and
will be used in the code examples below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">EquipmentFoundry</span><span class="p">:</span>

    <span class="k">class</span> <span class="nc">FluxCapacitor</span><span class="p">:</span>

        <span class="nd">@classmethod</span>
        <span class="k">def</span> <span class="nf">with_capacitor_drive</span><span class="p">(</span><span class="n">capacitor_drive</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;Return a fully-operational FluxCapacitor.&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_default_capacitor_drive</span><span class="p">():</span>
        <span class="sd">&quot;&quot;&quot;Return an experimental CapacitorDrive.&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The objects which we wish to describe as components (<tt class="docutils literal"><span class="pre">FluxCapacitor</span></tt> and
<tt class="docutils literal"><span class="pre">CapacitorDrive</span></tt>), are created by callables having dotted names that are
<strong>not importable</strong>:</p>
<ol class="arabic simple">
<li>The class named <tt class="docutils literal"><span class="pre">delorean.EquipmentFoundry.FluxCapacitor</span></tt>.</li>
<li>The class method named
<tt class="docutils literal"><span class="pre">delorean.EquipmentFoundry.FluxCapacitor.with_capacitor_drive</span></tt>.</li>
<li>The static method named
<tt class="docutils literal"><span class="pre">delorean.EquipmentFoundry.get_default_capacitor_drive</span></tt>.</li>
</ol>
<p>However, we can use either of the dotted names that <em>are</em> importable (the
module named <tt class="docutils literal"><span class="pre">delorean</span></tt> and the class named <tt class="docutils literal"><span class="pre">delorean.EquipmentFoundry</span></tt>) to
define our components, and specify <em>relative</em> dotted names as
<a class="reference internal" href="aglyph.component.html#aglyph.component.Component.factory_name" title="aglyph.component.Component.factory_name"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.component.Component.factory_name</span></tt></a> values to enable Aglyph to
assemble <tt class="docutils literal"><span class="pre">FluxCapacitor</span></tt> and <tt class="docutils literal"><span class="pre">CapacitorDrive</span></tt> as components.</p>
<div class="section" id="using-declarative-xml-configuration">
<h3>Using declarative XML configuration<a class="headerlink" href="#using-declarative-xml-configuration" title="Permalink to this headline">¶</a></h3>
<p>In a <em>delorean-context.xml</em> document:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;context id=&quot;delorean-context&quot;&gt;
    &lt;component id=&quot;default-drive&quot;
            dotted-name=&quot;delorean&quot;
            factory-name=&quot;EquipmentFoundry.get_default_capacitor_drive&quot; /&gt;
    &lt;component id=&quot;capacitor-nodrive&quot;
            dotted-name=&quot;delorean.EquipmentFoundry&quot;
            factory-name=&quot;FluxCapacitor&quot; /&gt;
    &lt;component id=&quot;capacitor-withdrive&quot;
            dotted-name=&quot;delorean.EquipmentFoundry&quot;
            factory-name=&quot;FluxCapacitor.with_capacitor_drive&quot;&gt;
        &lt;init&gt;
            &lt;arg ref=&quot;default-drive&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>Key things to note in this configuration:</p>
<ul class="simple">
<li>For <strong>any</strong> of the components, we have the option of using either
<tt class="docutils literal"><span class="pre">delorean</span></tt> or <tt class="docutils literal"><span class="pre">delorean.EquipmentFoundry</span></tt> as a component&#8217;s dotted name
because both of these names are importable. Which we choose influences how
the factory name must be specified - it must be <em>relative to</em> the dotted
name.</li>
<li>Any factory name is just a dotted name - but split into its individual names,
it must represent a callable object that can be obtained via attribute access
on the module or class identified by the dotted name.</li>
</ul>
<p>We can now assemble the <em>&#8220;capacitor-nodrive&#8221;</em> and <em>&#8220;capacitor-withdrive&#8221;</em>
components as we would any other Aglyph components:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="kn">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="kn">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s">&quot;delorean-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flux_capacitor_without_drive</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s">&quot;capacitor-nodrive&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flux_capacitor_with_drive</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s">&quot;capacitor-withdrive&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you remember nothing else, remember this:</p>
<ol class="last arabic simple">
<li><a class="reference internal" href="aglyph.component.html#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.component.Component.dotted_name</span></tt></a> must be <strong>importable</strong>.</li>
<li><a class="reference internal" href="aglyph.component.html#aglyph.component.Component.factory_name" title="aglyph.component.Component.factory_name"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.component.Component.factory_name</span></tt></a> must be <em>relative to</em>
the importable <tt class="docutils literal"><span class="pre">dotted_name</span></tt>.</li>
</ol>
</div>
</div>
<div class="section" id="using-programmatic-binder-configuration">
<h3>Using programmatic Binder configuration<a class="headerlink" href="#using-programmatic-binder-configuration" title="Permalink to this headline">¶</a></h3>
<p>Here is an equivalent programmatic configuration in a <em>bindings.py</em> module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">aglyph.binder</span> <span class="kn">import</span> <span class="n">Binder</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="kn">import</span> <span class="n">Reference</span>

<span class="n">binder</span> <span class="o">=</span> <span class="n">Binder</span><span class="p">(</span><span class="s">&quot;delorean-binder&quot;</span><span class="p">)</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;default-drive&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;delorean&quot;</span><span class="p">,</span>
            <span class="n">factory</span><span class="o">=</span><span class="s">&quot;EquipmentFoundry.get_default_capacitor_drive&quot;</span><span class="p">)</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;capacitor-nodrive&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;delorean.EquipmentFoundry&quot;</span><span class="p">,</span>
            <span class="n">factory</span><span class="o">=</span><span class="s">&quot;FluxCapacitor&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;capacitor-withdrive&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;delorean.EquipmentFoundry&quot;</span><span class="p">,</span>
             <span class="n">factory</span><span class="o">=</span><span class="s">&quot;FluxCapacitor.with_capacitor_drive&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">(</span><span class="n">Reference</span><span class="p">(</span><span class="s">&quot;default-drive&quot;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="describe-components-for-module-or-class-members">
<span id="member-component"></span><h2>Describe components for module or class members<a class="headerlink" href="#describe-components-for-module-or-class-members" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0.</span></p>
</div>
<p>Similar in nature to the <tt class="docutils literal"><span class="pre">factory_name</span></tt> property explained in the previous
section, the <a class="reference internal" href="aglyph.component.html#aglyph.component.Component.member_name" title="aglyph.component.Component.member_name"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.component.Component.member_name</span></tt></a> property provides a
way to access objects that are not directly importable.</p>
<p>But there are two key differences between <tt class="docutils literal"><span class="pre">member_name</span></tt> and <tt class="docutils literal"><span class="pre">factory_name</span></tt>:</p>
<ol class="arabic simple">
<li>The object identified by a <tt class="docutils literal"><span class="pre">member_name</span></tt> is not required to be callable.
Instead, the object itself is considered to <strong>be</strong> the component object.</li>
<li>Even if the object identified by a <tt class="docutils literal"><span class="pre">member_name</span></tt> <em>is</em> callable, Aglyph
will <strong>not</strong> call it.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>As a consequence of #1, any initialization arguments or keywords that are
specified for a component that also specifies a <tt class="docutils literal"><span class="pre">member_name</span></tt> are
<strong>ignored</strong> (i.e. Aglyph does <strong>not</strong> initialize the <tt class="docutils literal"><span class="pre">member_name</span></tt>
object). However, any &#8220;setter&#8221; dependencies (setter methods, fields,
properties) defined for such a component <strong>are</strong> processed.</p>
<p class="last">As a consequence of #2, you can define components whose objects are of <em>any</em>
type, including class types, function types, and (sub)module types.</p>
</div>
<p>In the examples below, we will use the Python standard library
<a class="reference external" href="http://docs.python.org/3/library/http.server.html#http.server.HTTPServer" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">http.server.HTTPServer</span></tt></a> class (whose initializer accepts a <tt class="docutils literal"><span class="pre">class</span></tt>
object for the request handler class) to demonstrate one possible use of the
<a class="reference internal" href="aglyph.component.html#aglyph.component.Component.member_name" title="aglyph.component.Component.member_name"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.component.Component.member_name</span></tt></a> property.</p>
<div class="section" id="id1">
<h3>Using declarative XML configuration<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>In a <em>cookbook-context.xml</em> document:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;context id=&quot;cookbook-context&quot;&gt;
    &lt;component id=&quot;request-handler-class&quot;
            dotted-name=&quot;http.server&quot;
            member-name=&quot;BaseHTTPRequestHandler&quot; /&gt;
    &lt;component id=&quot;http-server&quot; dotted-name=&quot;http.server.HTTPServer&quot;&gt;
        &lt;init&gt;
            &lt;arg&gt;
                &lt;tuple&gt;
                    &lt;str&gt;localhost&lt;/str&gt;
                    &lt;int&gt;8080&lt;/int&gt;
                &lt;/tuple&gt;
            &lt;/arg&gt;
            &lt;arg reference=&quot;request-handler-class&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>When the <em>&#8220;http-server&#8221;</em> component is assembled, its second initialization
argument is actually the <em>class</em> <tt class="docutils literal"><span class="pre">http.server.BaseHTTPRequestHandler</span></tt> (as
opposed to an <em>instance</em> thereof):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="kn">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="kn">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s">&quot;cookbook-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">httpd</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s">&quot;http-server&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">httpd</span><span class="o">.</span><span class="n">RequestHandlerClass</span>
<span class="go">&lt;class &#39;http.server.BaseHTTPRequestHandler&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s">&quot;request-handler-class&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">httpd</span><span class="o">.</span><span class="n">RequestHandlerClass</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Using programmatic Binder configuration<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Here is an equivalent programmatic configuration in a <em>bindings.py</em> module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">aglyph.binder</span> <span class="kn">import</span> <span class="n">Binder</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="kn">import</span> <span class="n">Reference</span>

<span class="n">binder</span> <span class="o">=</span> <span class="n">Binder</span><span class="p">(</span><span class="s">&quot;cookbook-binder&quot;</span><span class="p">)</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;request-handler-class&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;http.server&quot;</span><span class="p">,</span>
            <span class="n">member</span><span class="o">=</span><span class="s">&quot;BaseHTTPRequestHandler&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;http-server&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;http.server.HTTPServer&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">((</span><span class="s">&quot;localhost&quot;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">),</span> <span class="n">Reference</span><span class="p">(</span><span class="s">&quot;request-handler-class&quot;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="describe-components-for-python-implementation-specific-objects-stackless-pypy-ironpython-jython">
<span id="impl-specific-component"></span><h2>Describe components for Python implementation-specific objects (Stackless, PyPy, IronPython, Jython)<a class="headerlink" href="#describe-components-for-python-implementation-specific-objects-stackless-pypy-ironpython-jython" title="Permalink to this headline">¶</a></h2>
<p>Strictly speaking, there is nothing &#8220;special&#8221; (from an Aglyph perspective)
about the examples presented in the following subsections. They just build
upon the previous cookbook recipes <a class="reference internal" href="cookbook-common.html#simple-component"><em>Describe a simple component (a class or an unbound factory function)</em></a>,
<a class="reference internal" href="cookbook-common.html#component-reference"><em>Use a reference to another component as a dependency</em></a>, and
<a class="reference internal" href="#staticmethod-classmethod-nestedclass-component"><em>Describe components for static methods, class methods, or nested classes</em></a> to once again demonstrate
that Aglyph can assemble <em>any</em> component that can be described using dotted
name notation, even when the class or function is only available to a specific
implementation of Python.</p>
<div class="section" id="example-1-describe-a-component-for-a-stackless-python-or-pypy-tasklet">
<h3>Example 1: Describe a component for a Stackless Python or PyPy tasklet<a class="headerlink" href="#example-1-describe-a-component-for-a-stackless-python-or-pypy-tasklet" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="http://www.stackless.com/">Stackless Python</a> and
<a class="reference external" href="http://pypy.org/">PyPy</a> Python implementations support the
<a class="reference external" href="http://www.stackless.com/wiki/Tasklets">stackless.tasklet</a> wrapper, which
allows any callable to run as a microthread.</p>
<p>The examples below demonstrate the Aglyph configuration for a variation of the
sample code given in the <a class="reference external" href="http://www.stackless.com/wiki/Tasklets">Stackless Python &#8220;Tasklets&#8221;</a> Wiki article.</p>
<div class="section" id="id3">
<h4>Using declarative XML configuration<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>In a <em>cookbook-context.xml</em> document:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;context id=&quot;cookbook-context&quot;&gt;
    &lt;component id=&quot;aCallable-func&quot; dotted-name=&quot;cookbook&quot;
            member-name=&quot;aCallable&quot; /&gt;
    &lt;component id=&quot;aCallable-task&quot; dotted-name=&quot;stackless.tasklet&quot;&gt;
        &lt;init&gt;
            &lt;arg reference=&quot;aCallable-func&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>Assembling and running this tasklet looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="kn">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="kn">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s">&quot;cookbook-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s">&quot;aCallable-task&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="s">&quot;assembled by Aglyph&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">&#39;aCallable: assembled by Aglyph&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h4>Using programmatic Binder configuration<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>Below is an example of programmatic configuration, but with a twist - we allow
Aglyph to inject the function argument into the task so that we only need to
assemble and run it. This works because the <tt class="docutils literal"><span class="pre">stackless.tasklet.setup</span></tt> method
has setter method semantics.</p>
<p>In a <em>bindings.py</em> module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">aglyph.binder</span> <span class="kn">import</span> <span class="n">Binder</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="kn">import</span> <span class="n">Reference</span>

<span class="n">binder</span> <span class="o">=</span> <span class="n">Binder</span><span class="p">(</span><span class="s">&quot;cookbook-binder&quot;</span><span class="p">)</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;aCallable-func&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;cookbook&quot;</span><span class="p">,</span> <span class="n">member</span><span class="o">=</span><span class="s">&quot;aCallable&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;aCallable-task&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;stackless.tasklet&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">(</span><span class="n">Reference</span><span class="p">(</span><span class="s">&quot;aCallable-func&quot;</span><span class="p">))</span><span class="o">.</span>
    <span class="n">attributes</span><span class="p">(</span><span class="n">setup</span><span class="o">=</span><span class="s">&quot;injected by Aglyph&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Assembling and running this tasklet looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bindings</span> <span class="kn">import</span> <span class="n">binder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span> <span class="o">=</span> <span class="n">binder</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="s">&quot;aCallable-task&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">task</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">&#39;aCallable: injected by Aglyph&#39;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-2-describe-a-component-for-a-net-xmlreader">
<h3>Example 2: Describe a component for a .NET XmlReader<a class="headerlink" href="#example-2-describe-a-component-for-a-net-xmlreader" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://ironpython.net/">IronPython</a> developers have access to the .NET
Framework Standard Library and any custom assemblies via the <tt class="docutils literal"><span class="pre">clr</span></tt> module,
allowing any .NET namespace to be loaded into the IronPython runtime and used.</p>
<p>In the examples below, we use <a class="reference external" href="http://msdn.microsoft.com/en-us/library/system.xml.dtdprocessing.aspx">System.Xml.DtdProcessing</a>,
<a class="reference external" href="http://msdn.microsoft.com/en-us/library/system.xml.validationtype.aspx">System.Xml.ValidationType</a>,
<a class="reference external" href="http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.aspx">System.Xml.XmlReaderSettings</a>,
and <a class="reference external" href="http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx">System.Xml.XmlReader</a> to
configure an XML reader that parses a fictitious &#8220;AppConfig.xml&#8221; document.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When using IronPython, the .NET namespace for any class referenced in an
Aglyph component <strong>must</strong> be loaded prior to asking Aglyph to assemble the
component. (Otherwise, those classes would not be importable in IronPython.)</p>
<p>In the examples given below, this means that the following statements must
be executed <em>before</em> <a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.assemble" title="aglyph.assembler.Assembler.assemble"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.assemble()</span></tt></a> or
<a class="reference internal" href="aglyph.binder.html#aglyph.binder.Binder.lookup" title="aglyph.binder.Binder.lookup"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.binder.Binder.lookup()</span></tt></a> is called (because the &#8220;System.Xml&#8221;
namespace is not present by default):</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clr</span><span class="o">.</span><span class="n">AddReference</span><span class="p">(</span><span class="s">&quot;System.Xml&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h4>Using declarative XML configuration<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>In a <em>dotnet-context.xml</em> document:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot; ?&gt;
&lt;context id=&quot;dotnet-context&quot;&gt;
    &lt;component id=&quot;dtd-parse&quot; dotted-name=&quot;System.Xml&quot;
            member-name=&quot;DtdProcessing.Parse&quot; /&gt;
    &lt;component id=&quot;dtd-validate&quot; dotted-name=&quot;System.Xml&quot;
            member-name=&quot;ValidationType.DTD&quot; /&gt;
    &lt;component id=&quot;xmlreader-settings&quot; dotted-name=&quot;System.Xml.XmlReaderSettings&quot;&gt;
        &lt;attributes&gt;
            &lt;attribute name=&quot;IgnoreComments&quot;&gt;&lt;true /&gt;&lt;/attribute&gt;
            &lt;attribute name=&quot;IgnoreProcessingInstructions&quot;&gt;&lt;true /&gt;&lt;/attribute&gt;
            &lt;attribute name=&quot;IgnoreWhitespace&quot;&gt;&lt;true /&gt;&lt;/attribute&gt;
            &lt;attribute name=&quot;DtdProcessing&quot; reference=&quot;dtd-parse&quot; /&gt;
            &lt;attribute name=&quot;ValidationType&quot; reference=&quot;dtd-validate&quot; /&gt;
        &lt;/attributes&gt;
    &lt;/component&gt;
    &lt;component id=&quot;app-config-reader&quot; dotted-name=&quot;System.Xml.XmlReader&quot;
            factory-name=&quot;Create&quot;&gt;
        &lt;init&gt;
            &lt;arg&gt;&lt;str&gt;file:///C:/Example/Settings/AppConfig.xml&lt;/str&gt;&lt;/arg&gt;
            &lt;arg reference=&quot;xmlreader-settings&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>With the Aglyph context in place, we can now assemble an XML reader for our
fictitious application configuration reader:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clr</span><span class="o">.</span><span class="n">AddReference</span><span class="p">(</span><span class="s">&quot;System.Xml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="kn">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="kn">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s">&quot;dotnet-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s">&quot;app-config-reader&quot;</span><span class="p">)</span>
<span class="go">&lt;System.Xml.XmlValidatingReaderImpl object at 0x000000000000002B [System.Xml.XmlValidatingReaderImpl]&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h4>Using programmatic Binder configuration<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>Here is an equivalent programmatic configuration in a <em>bindings.py</em> module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">aglyph.binder</span> <span class="kn">import</span> <span class="n">Binder</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="kn">import</span> <span class="n">Reference</span>

<span class="n">binder</span> <span class="o">=</span> <span class="n">Binder</span><span class="p">(</span><span class="s">&quot;dotnet-binder&quot;</span><span class="p">)</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;dtd-parse&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;System.Xml&quot;</span><span class="p">,</span> <span class="n">member</span><span class="o">=</span><span class="s">&quot;DtdProcessing.Parse&quot;</span><span class="p">)</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;dtd-validate&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;System.Xml&quot;</span><span class="p">,</span> <span class="n">member</span><span class="o">=</span><span class="s">&quot;ValidationType.DTD&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;xmlreader-settings&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;System.Xml.XmlReaderSettings&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">attributes</span><span class="p">(</span><span class="n">IgnoreComments</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
               <span class="n">IgnoreProcessingInstructions</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
               <span class="n">IgnoreWhitespace</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
               <span class="n">DtdProcessing</span><span class="o">=</span><span class="n">Reference</span><span class="p">(</span><span class="s">&quot;dtd-parse&quot;</span><span class="p">),</span>
               <span class="n">ValidationType</span><span class="o">=</span><span class="n">Reference</span><span class="p">(</span><span class="s">&quot;dtd-validate&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;app-config-reader&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;System.Xml.XmlReader&quot;</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="s">&quot;Create&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">(</span><span class="s">&quot;file:///C:/Example/Settings/AppConfig.xml&quot;</span><span class="p">,</span>
         <span class="n">Reference</span><span class="p">(</span><span class="s">&quot;xmlreader-settings&quot;</span><span class="p">)))</span>
</pre></div>
</div>
<p>The code to assemble the fictitious application configuration reader looks like
this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">clr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">clr</span><span class="o">.</span><span class="n">AddReference</span><span class="p">(</span><span class="s">&quot;System.Xml&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bindings</span> <span class="kn">import</span> <span class="n">binder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">binder</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="s">&quot;app-config-reader&quot;</span><span class="p">)</span>
<span class="go">&lt;System.Xml.XmlValidatingReaderImpl object at 0x000000000000002B [System.Xml.XmlValidatingReaderImpl]&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-3-describe-a-component-for-a-java-linkedhashmap">
<h3>Example 3: Describe a component for a Java™ LinkedHashMap<a class="headerlink" href="#example-3-describe-a-component-for-a-java-linkedhashmap" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.jython.org/">Jython</a> developers have direct access to the
Java™ Platform API and any custom JARs in the runtime <em>CLASSPATH</em>.</p>
<p>In the examples below, we use
<a class="reference external" href="http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedMap(java.util.Map)">java.util.Collections#synchronizedMap(java.util.Map)</a>
and <a class="reference external" href="http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html">java.util.LinkedHashMap</a> to
configure a thread-safe, insertion-order hash map.</p>
<div class="section" id="id7">
<h4>Using declarative XML configuration<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>In a <em>java-context.xml</em> document:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;context id=&quot;java-context&quot;&gt;
    &lt;component id=&quot;java.util.LinkedHashMap&quot; /&gt;
    &lt;component id=&quot;threadsafe-ordered-map&quot; dotted-name=&quot;java.util.Collections&quot;
            factory-name=&quot;synchronizedMap&quot;&gt;
        &lt;init&gt;
            &lt;arg reference=&quot;java.util.LinkedHashMap&quot; /&gt;
        &lt;/init&gt;
    &lt;/component&gt;
&lt;/context&gt;
</pre></div>
</div>
<p>To assemble our map:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.assembler</span> <span class="kn">import</span> <span class="n">Assembler</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aglyph.context</span> <span class="kn">import</span> <span class="n">XMLContext</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assembler</span> <span class="o">=</span> <span class="n">Assembler</span><span class="p">(</span><span class="n">XMLContext</span><span class="p">(</span><span class="s">&quot;java-context.xml&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span> <span class="o">=</span> <span class="n">assembler</span><span class="o">.</span><span class="n">assemble</span><span class="p">(</span><span class="s">&quot;threadsafe-ordered-map&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="o">.</span><span class="n">__class__</span>
<span class="go">&lt;type &#39;java.util.Collections$SynchronizedMap&#39;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h4>Using programmatic Binder configuration<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p>Here is an equivalent programmatic configuration in a <em>bindings.py</em> module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">aglyph.binder</span> <span class="kn">import</span> <span class="n">Binder</span>
<span class="kn">from</span> <span class="nn">aglyph.component</span> <span class="kn">import</span> <span class="n">Reference</span>

<span class="n">binder</span> <span class="o">=</span> <span class="n">Binder</span><span class="p">(</span><span class="s">&quot;java-binder&quot;</span><span class="p">)</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;java.util.LinkedHashMap&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;threadsafe-ordered-map&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="s">&quot;java.util.Collections&quot;</span><span class="p">,</span>
             <span class="n">factory</span><span class="o">=</span><span class="s">&quot;synchronizedMap&quot;</span><span class="p">)</span><span class="o">.</span>
    <span class="n">init</span><span class="p">(</span><span class="n">Reference</span><span class="p">(</span><span class="s">&quot;java.util.LinkedHashMap&quot;</span><span class="p">)))</span>
</pre></div>
</div>
<p>Assembling the map looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bindings</span> <span class="kn">import</span> <span class="n">binder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span> <span class="o">=</span> <span class="n">binder</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="s">&quot;threadsafe-ordered-map&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mapping</span><span class="o">.</span><span class="n">__class__</span>
<span class="go">&lt;type &#39;java.util.Collections$SynchronizedMap&#39;&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="use-a-custom-xml-parser-for-xmlcontext">
<span id="custom-xmlcontext-parser"></span><h2>Use a custom XML parser for XMLContext<a class="headerlink" href="#use-a-custom-xml-parser-for-xmlcontext" title="Permalink to this headline">¶</a></h2>
<p>Aglyph uses the <a class="reference external" href="http://docs.python.org/3/library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">xml.etree.ElementTree</span></tt></a> API for processing context
documents. By default, ElementTree uses the <a class="reference external" href="http://expat.sourceforge.net/">expat</a> XML parser (via
<a class="reference external" href="http://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">xml.etree.ElementTree.XMLParser</span></tt></a>) to build element structures.</p>
<p>However, developers may subclass <a class="reference external" href="http://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">xml.etree.ElementTree.XMLParser</span></tt></a> to
use <em>any</em> XML parser; simply pass an instance of the subclass to
<a class="reference internal" href="aglyph.context.html#aglyph.context.XMLContext" title="aglyph.context.XMLContext"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.context.XMLContext</span></tt></a> as the <tt class="docutils literal"><span class="pre">parser</span></tt> keyword argument.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For an example, please refer to <tt class="xref py py-class docutils literal"><span class="pre">aglyph.compat.ipytree.CLRXMLParser</span></tt>,
which is an <a class="reference external" href="http://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">xml.etree.ElementTree.XMLParser</span></tt></a> subclass that uses the
.NET <a class="reference external" href="http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx">System.Xml.XmlReader</a>
parser.</p>
</div>
</div>
<div class="section" id="clear-the-aglyph-singleton-weakref-and-borg-memory-caches">
<span id="clear-caches"></span><h2>Clear the Aglyph singleton, weakref, and borg memory caches<a class="headerlink" href="#clear-the-aglyph-singleton-weakref-and-borg-memory-caches" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.assembler.Assembler</span></tt></a> automatically caches objects of
<strong>singleton</strong> and <strong>weakref</strong> components, as well as the shared-state
dictionaries of <strong>borg</strong> components, in memory. There is no automatic eviction
strategy.</p>
<p>These caches may be cleared explicitly by calling
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_singletons" title="aglyph.assembler.Assembler.clear_singletons"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_singletons()</span></tt></a>,
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_weakrefs" title="aglyph.assembler.Assembler.clear_weakrefs"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_weakrefs()</span></tt></a>,  or
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_borgs" title="aglyph.assembler.Assembler.clear_borgs"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_borgs()</span></tt></a>, respectively. Each method
returns a list of component IDs that were evicted.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There are some limitations on weakref caching, particularly with respect to
<a class="reference internal" href="aglyph.component.html#lifecycle-methods"><em>lifecycle methods</em></a>. Please see
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_weakrefs" title="aglyph.assembler.Assembler.clear_weakrefs"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_weakrefs()</span></tt></a> for details.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cookbook-integration.html" class="btn btn-neutral float-right" title="Integrating Aglyph">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cookbook-templating.html" class="btn btn-neutral" title="Component inheritance using templates"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006-2015, Matthew Zipay.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>