

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aglyph.component — Defining components and their dependencies &mdash; Aglyph 2.1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Aglyph 2.1.0 documentation" href="index.html"/>
        <link rel="up" title="Aglyph API reference" href="api-ref.html"/>
        <link rel="next" title="aglyph.context — Defining component contexts" href="aglyph.context.html"/>
        <link rel="prev" title="aglyph.compat.ipyetree — an ElementTree parser for IronPython" href="aglyph.compat.ipyetree.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> Aglyph</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whats-new.html">What&#8217;s new in release 2.1.0?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="whats-new.html#previous-releases-of-aglyph">Previous releases of Aglyph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="get-started.html">Getting started with Aglyph</a><ul>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#download-and-install-aglyph">1. Download and install Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#download-extract-and-run-the-movielisterapp-application">2. Download, extract, and run the <em>movielisterapp</em> application</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#a-very-brief-introduction-to-dependency-injection">3. A <em>(very)</em> brief introduction to Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#make-some-general-improvements-to-the-movielisterapp-application">4. Make some general improvements to the <em>movielisterapp</em> application</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#add-dependency-injection-support-to-the-movielisterapp-application">5. Add Dependency Injection support to the <em>movielisterapp</em> application</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#make-changes-to-the-movielisterapp-application">6. Make changes to the <em>movielisterapp</em> application</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html#suggested-next-steps">Suggested next steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Aglyph cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cookbook-understanding.html">Understand the general features of Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-configuration.html">Choose a configuration approach for Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-common.html">Common usage scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-templating.html">Component inheritance using templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-notable.html">Other notable usage scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="cookbook-integration.html">Integrating Aglyph</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="api-ref.html">Aglyph API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="aglyph.html"><tt class="docutils literal"><span class="pre">aglyph</span></tt> &#8212; Dependency Injection for Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.assembler.html"><tt class="docutils literal"><span class="pre">aglyph.assembler</span></tt> &#8212; The Aglyph component assembler</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.binder.html"><tt class="docutils literal"><span class="pre">aglyph.binder</span></tt> &#8212; The Aglyph component binder</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.cache.html"><tt class="docutils literal"><span class="pre">aglyph.cache</span></tt> &#8212; Simple object caching support for Aglyph</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.compat.html"><tt class="docutils literal"><span class="pre">aglyph.compat</span></tt> &#8212; Python version/variant compatibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.compat.ipyetree.html"><tt class="docutils literal"><span class="pre">aglyph.compat.ipyetree</span></tt> &#8212; an <em>ElementTree</em> parser for <em>IronPython</em></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href=""><tt class="docutils literal"><span class="pre">aglyph.component</span></tt> &#8212; Defining components and their dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.context.html"><tt class="docutils literal"><span class="pre">aglyph.context</span></tt> &#8212; Defining component contexts</a></li>
<li class="toctree-l2"><a class="reference internal" href="aglyph.integration.cherrypy.html"><tt class="docutils literal"><span class="pre">aglyph.integration.cherrypy</span></tt> &#8212; Integrating Aglyph with CherryPy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Aglyph 2.1.0 testing summary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id1">CPython</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id2">PyPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id3">Stackless Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id4">IronPython</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#id5">Jython</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html#previous-releases-of-aglyph">Previous releases of Aglyph</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">Roadmap for future releases</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Aglyph</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
          <li><a href="api-ref.html">Aglyph API reference</a> &raquo;</li>
      
    <li><tt class="docutils literal"><span class="pre">aglyph.component</span></tt> &#8212; Defining components and their dependencies</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/aglyph.component.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="module-aglyph.component">
<span id="aglyph-component-defining-components-and-their-dependencies"></span><h1><a class="reference internal" href="#module-aglyph.component" title="aglyph.component"><tt class="xref py py-mod docutils literal"><span class="pre">aglyph.component</span></tt></a> &#8212; Defining components and their dependencies<a class="headerlink" href="#module-aglyph.component" title="Permalink to this headline">¶</a></h1>
<p>The classes in this module are used to define components and their
dependencies.</p>
<dl class="data">
<dt id="aglyph.component.LifecycleState">
<tt class="descclassname">aglyph.component.</tt><tt class="descname">LifecycleState</tt><em class="property"> = LifecycleState(AFTER_INJECT='after_inject', BEFORE_CLEAR='before_clear')</em><a class="headerlink" href="#aglyph.component.LifecycleState" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the lifecycle states for which Aglyph will call object methods
on your behalf.</p>
<p class="rubric" id="lifecycle-methods">Lifecycle methods</p>
<p>Lifecycle methods are called with <strong>no arguments</strong> (positional or
keyword).</p>
<p>If a called lifecycle method raises an exception, the exception is
caught, logged at <tt class="xref py py-attr docutils literal"><span class="pre">logging.ERROR</span></tt> level (including a traceback) to
the &#8220;aglyph.assembler.Assembler&#8221; channel, and a <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeWarning" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">RuntimeWarning</span></tt></a>
is issued.</p>
<p>A method may be registered for a lifecycle state by specifying the
method name at the context (least specific), template, and/or component
(most specific) level.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Aglyph only calls <strong>one</strong> method on an object for any lifecycle
state. Refer to <strong>The lifecycle method lookup process</strong> (below) for
details.</p>
</div>
<p>Aglyph recognizes the following lifecycle states:</p>
<p class="rubric">&#8220;after_inject&#8221;</p>
<p>A component object is in this state after <strong>all</strong> dependencies (both
initialization arguments and attributes) have been injected into a
newly-created instance, but before the object is cached and/or returned
to the caller.</p>
<p>Aglyph will only call <strong>one</strong> &#8220;after_inject&#8221; method on any object, and
will determine which method to call by using the lookup process
described below.</p>
<p class="rubric">&#8220;before_clear&#8221;</p>
<p>A component object is in this state after is has been removed from an
internal cache (singleton, borg, or weakref), but before the object
itself is actually discarded.</p>
<p>Aglyph will only call <strong>one</strong> &#8220;before_clear&#8221; method on any object, and
will determine which method to call by using the lookup process
described below.</p>
<p class="rubric" id="lifecycle-method-lookup-process">The lifecycle method lookup process</p>
<p>Lifecyle methods may be specified at the context (least specific),
template, and component (most specific) levels.</p>
<p>In order to determine which named method is called for a particular
object, Aglyph looks up the appropriate lifecycle method name in the
following order, using the <strong>first</strong> one found that is not <tt class="docutils literal"><span class="pre">None</span></tt>
<em>and</em> is actually defined on the object:</p>
<ol class="arabic simple">
<li>The method named by the object&#8217;s <tt class="docutils literal"><span class="pre">Component.&lt;lifecycle-state&gt;</span></tt>
property.</li>
<li>If the object&#8217;s <tt class="xref py py-attr docutils literal"><span class="pre">Component.parent_id</span></tt> is not <tt class="docutils literal"><span class="pre">None</span></tt>, the
method named by the corresponding parent
<tt class="docutils literal"><span class="pre">Template.&lt;lifecycle-state&gt;</span></tt> or <tt class="docutils literal"><span class="pre">Component.&lt;lifecycle-state&gt;</span></tt>
property.
(If necessary, lookup continues by examining the
parent-of-the-parent and so on.)</li>
<li>The method named by the <tt class="docutils literal"><span class="pre">Context.&lt;lifecycle-state&gt;</span></tt> property.</li>
</ol>
<p>When Aglyph finds a named lifecycle method that applies to an object,
but the object itself does not define that method, a
<tt class="xref py py-attr docutils literal"><span class="pre">logging.WARNING</span></tt> message is emitted.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Either a <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><tt class="xref py py-class docutils literal"><span class="pre">Component</span></tt></a> or <a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><tt class="xref py py-attr docutils literal"><span class="pre">Template</span></tt></a> may serve as the
parent identified by a <tt class="docutils literal"><span class="pre">parent_id</span></tt>.</p>
<p class="last">However, only a <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><tt class="xref py py-class docutils literal"><span class="pre">Component</span></tt></a> may actually be assembled into
a usable object. (A <a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><tt class="xref py py-attr docutils literal"><span class="pre">Template</span></tt></a> is like an abstract class -
it defines common dependencies and/or lifecycle methods, but it
cannot be assembled.)</p>
</div>
</dd></dl>

<dl class="class">
<dt id="aglyph.component.Template">
<em class="property">class </em><tt class="descclassname">aglyph.component.</tt><tt class="descname">Template</tt><big>(</big><em>template_id</em>, <em>parent_id=None</em>, <em>after_inject=None</em>, <em>before_clear=None</em><big>)</big><a class="reference internal" href="_modules/aglyph/component.html#Template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Template" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">aglyph.component._DependencySupport</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>template_id</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; context-unique identifier for this                              template</li>
<li><strong>parent_id</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; specifies the ID of a template or                                component that describes the default                                dependencies and/or lifecyle methods                                for this template</li>
<li><strong>after_inject</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; specifies the name of the method                                   that will be called on objects of                                   components that reference this                                   template after all component                                   dependencies have been injected</li>
<li><strong>before_clear</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; specifies the name of the method                                   that will be called on objects of                                   components that reference this                                   template immediately before they are                                   cleared from cache</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A <tt class="docutils literal"><span class="pre">Template</span></tt> cannot be assembled (it is equivalent to an
abstract class).</p>
<p class="last">However, a <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><tt class="xref py py-class docutils literal"><span class="pre">Component</span></tt></a> can also serve as a template,
so if you need the ability to assemble an object <em>and</em> use
its definition as the basis for other components, then define
the default dependencies and/or lifecycle methods in a
<a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><tt class="xref py py-class docutils literal"><span class="pre">Component</span></tt></a> and use that component&#8217;s ID as the
<tt class="xref py py-attr docutils literal"><span class="pre">Component.parent_id</span></tt> in other components.</p>
</div>
<p><em>unique_id</em> must be a user-provided identifier that is unique
within the context to which this template is added. A component
may then be instructed to use a template by specifying the same
value for <tt class="xref py py-attr docutils literal"><span class="pre">Component.parent_id</span></tt>.</p>
<p><em>parent_id</em> is <strong>another</strong> <tt class="xref py py-attr docutils literal"><span class="pre">Component.unique_id</span></tt> or
<a class="reference internal" href="#aglyph.component.Template.unique_id" title="aglyph.component.Template.unique_id"><tt class="xref py py-attr docutils literal"><span class="pre">Template.unique_id</span></tt></a> in the same context that descibes
<strong>this</strong> template&#8217;s default dependencies and/or lifecycle
methods.</p>
<p><em>after_inject</em> is the name of a method <em>of objects of this
component</em> that will be called after <strong>all</strong> dependencies have
been injected, but before the object is returned to the caller.
This method will be called with <strong>no</strong> arguments (positional or
keyword). Exceptions raised by this method are not caught.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">Template.after_inject</span></tt>, if specified, <strong>replaces</strong>
<a class="reference internal" href="aglyph.context.html#aglyph.context.Context.after_inject" title="aglyph.context.Context.after_inject"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.context.Context.after_inject</span></tt></a> for any component
that uses the template.</p>
</div>
<p><em>before_clear</em> is the name of a method <em>of objects of this
component</em> that will be called immediately before the object is
cleared from cache via
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_singletons" title="aglyph.assembler.Assembler.clear_singletons"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_singletons()</span></tt></a>,
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_borgs" title="aglyph.assembler.Assembler.clear_borgs"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_borgs()</span></tt></a>, or
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_weakrefs" title="aglyph.assembler.Assembler.clear_weakrefs"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_weakrefs()</span></tt></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">Template.before_clear</span></tt>, if specified, <strong>replaces</strong>
<a class="reference internal" href="aglyph.context.html#aglyph.context.Context.before_clear" title="aglyph.context.Context.before_clear"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.context.Context.before_clear</span></tt></a> for any component
that uses the template.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The <em>before_clear</em> keyword argument has no meaning for and is
ignored by &#8220;prototype&#8221; components. If <em>before_clear</em> is
specified for a prototype, a <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeWarning" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">RuntimeWarning</span></tt></a> will be
issued.</p>
<p class="last">For &#8220;weakref&#8221; components, there is a possibility that the
object no longer exists at the moment when the <em>before_clear</em>
method would be called. In such cases, the <em>before_clear</em>
method is <strong>not</strong> called. No warning is issued, but a
<tt class="xref py py-attr docutils literal"><span class="pre">logging.WARNING</span></tt> message is emitted.</p>
</div>
<dl class="attribute">
<dt id="aglyph.component.Template.unique_id">
<tt class="descname">unique_id</tt><a class="reference internal" href="_modules/aglyph/component.html#Template.unique_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Template.unique_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Uniquely identifies this template in a context <em>(read-only)</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Template.parent_id">
<tt class="descname">parent_id</tt><a class="reference internal" href="_modules/aglyph/component.html#Template.parent_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Template.parent_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Identifies this template&#8217;s parent template or component
<em>(read-only)</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Template.after_inject">
<tt class="descname">after_inject</tt><a class="reference internal" href="_modules/aglyph/component.html#Template.after_inject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Template.after_inject" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the component object method that will be called
after <strong>all</strong> dependencies have been injected.</p>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Template.before_clear">
<tt class="descname">before_clear</tt><a class="reference internal" href="_modules/aglyph/component.html#Template.before_clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Template.before_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the component object method that will be called
immediately before the object is cleared from cache.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This property is not applicable to &#8220;prototype&#8221; component
objects, and is <strong>not</strong> guaranteed to be called for &#8220;weakref&#8221;
component objects.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aglyph.component.Component">
<em class="property">class </em><tt class="descclassname">aglyph.component.</tt><tt class="descname">Component</tt><big>(</big><em>component_id</em>, <em>dotted_name=None</em>, <em>factory_name=None</em>, <em>member_name=None</em>, <em>strategy='prototype'</em>, <em>parent_id=None</em>, <em>after_inject=None</em>, <em>before_clear=None</em><big>)</big><a class="reference internal" href="_modules/aglyph/component.html#Component"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Component" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.component.Template</span></tt></a></p>
<p>Define a component and the dependencies needed to create a new
object of that component at runtime.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>component_id</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; context-unique identifier for this                               component</li>
<li><strong>dotted_name</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; an <strong>importable</strong> dotted name</li>
<li><strong>factory_name</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; names a <a class="reference external" href="http://docs.python.org/3/library/functions.html#callable" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">callable</span></tt></a> member of                                   the object identified by                                   <em>component_id</em> or <em>dotted_name</em></li>
<li><strong>member_name</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; names <strong>any</strong> member of the object                                  identified by <em>component_id</em> or                                  <em>dotted_name</em></li>
<li><strong>strategy</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; specifies the component assembly strategy</li>
<li><strong>parent_id</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; specifies the ID of a template or                                component that describes the default                                dependencies and/or lifecyle methods                                for this component</li>
<li><strong>after_inject</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; specifies the name of the method                                   that will be called on objects of                                   this component after all of its                                   dependencies have been injected</li>
<li><strong>before_clear</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><em>str</em></a>) &#8211; specifies the name of the method                                   that will be called on objects of                                   this component immediately before                                   they are cleared from cache</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference internal" href="aglyph.html#aglyph.AglyphError" title="aglyph.AglyphError"><strong>aglyph.AglyphError</strong></a> &#8211; if both <em>factory_name</em> and                                   <em>member_name</em> are specified</li>
<li><a class="reference external" href="http://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.4)"><strong>ValueError</strong></a> &#8211; if <em>strategy</em> is not a recognized assembly                           strategy</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><em>component_id</em> must be a user-provided identifier that is unique
within the context to which this component is added. An
<strong>importable</strong> dotted name may be used (see
<a class="reference internal" href="aglyph.html#aglyph.resolve_dotted_name" title="aglyph.resolve_dotted_name"><tt class="xref py py-func docutils literal"><span class="pre">aglyph.resolve_dotted_name()</span></tt></a>).</p>
<p><em>dotted_name</em>, if provided, must be an <strong>importable</strong> dotted
name (see <a class="reference internal" href="aglyph.html#aglyph.resolve_dotted_name" title="aglyph.resolve_dotted_name"><tt class="xref py py-func docutils literal"><span class="pre">aglyph.resolve_dotted_name()</span></tt></a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <em>dotted_name</em> is not specified, then <em>component_id</em>
will be used as the component&#8217;s dotted name. In this case,
<em>component_id</em> <strong>must</strong> be an importable dotted name.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0: </span>the <em>factory_name</em> keyword argument</p>
</div>
<p><em>factory_name</em> is the name of a <a class="reference external" href="http://docs.python.org/3/library/functions.html#callable" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">callable</span></tt></a> member of
<em>dotted-name</em> (i.e. a function, class, staticmethod, or
classmethod). When provided, the assembler will call this member
to create an object of this component.</p>
<p><em>factory_name</em> enables Aglyph to inject dependencies into
objects that can only be initialized via nested classes,
<a class="reference external" href="http://docs.python.org/3/library/functions.html#staticmethod" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">staticmethod</span></tt></a>, or <a class="reference external" href="http://docs.python.org/3/library/functions.html#classmethod" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">classmethod</span></tt></a>. See
<a class="reference internal" href="#aglyph.component.Component.factory_name" title="aglyph.component.Component.factory_name"><tt class="xref py py-attr docutils literal"><span class="pre">factory_name</span></tt></a> for details.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.0: </span>the <em>member_name</em> keyword argument</p>
</div>
<p><em>member_name</em> is the name of a member of <em>dotted-name</em>, which
<strong>may or may not</strong> be callable.</p>
<p><em>member_name</em> differs from <em>factory_name</em> in two ways:</p>
<ol class="arabic simple">
<li><em>member_name</em> is not restricted to callable members; it may
identify attributes and/or properties as well.</li>
<li>When an assembler assembles a component with a
<em>member_name</em>, initialization of the object is <em>bypassed</em>
(i.e. the assembler will not call the member, and any
initialization arguments defined for the component will be
<strong>ignored</strong>).</li>
</ol>
<p><em>member_name</em> enables Aglyph to reference class, function,
<a class="reference external" href="http://docs.python.org/3/library/functions.html#staticmethod" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">staticmethod</span></tt></a>, and <a class="reference external" href="http://docs.python.org/3/library/functions.html#classmethod" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">classmethod</span></tt></a> obejcts, as well as
simple attributes or properties, as components and dependencies.
See <a class="reference internal" href="#aglyph.component.Component.member_name" title="aglyph.component.Component.member_name"><tt class="xref py py-attr docutils literal"><span class="pre">member_name</span></tt></a> for details.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Both <em>factory_name</em> and <em>member_name</em> can be dot-separated
names to reference nested members.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <em>factory_name</em> and <em>member_name</em> arguments are mutually
exclusive. An exception is raised if both are provided.</p>
</div>
<p><em>strategy</em> must be a recognized component assembly strategy, and
defaults to <tt class="docutils literal"><span class="pre">Strategy.PROTOTYPE</span></tt> (<em>&#8220;prototype&#8221;</em>) if not
specified.</p>
<p>Please see <a class="reference internal" href="#aglyph.component.Strategy" title="aglyph.component.Strategy"><tt class="xref py py-data docutils literal"><span class="pre">Strategy</span></tt></a> for a description of the component
assembly strategies supported by Aglyph.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <tt class="docutils literal"><span class="pre">Strategy.BORG</span></tt> (<em>&#8220;borg&#8221;</em>) component assembly strategy
is only supported for classes that <strong>do not</strong> define or
inherit <tt class="docutils literal"><span class="pre">__slots__</span></tt>!</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.0: </span>the <em>parent_id</em> keyword argument</p>
</div>
<p><em>parent_id</em> is the context-unique ID of a <a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><tt class="xref py py-class docutils literal"><span class="pre">Template</span></tt></a> (or
another <tt class="docutils literal"><span class="pre">Component</span></tt>) that defines default dependencies and/or
lifecycle methods for this component.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.0: </span>the <em>after_inject</em> keyword argument</p>
</div>
<p><em>after_inject</em> is the name of a method <em>of objects of this
component</em> that will be called after <strong>all</strong> dependencies have
been injected, but before the object is returned to the caller.
This method will be called with <strong>no</strong> arguments (positional or
keyword). Exceptions raised by this method are not caught.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">Component.after_inject</span></tt>, if specified, <strong>replaces</strong> either
<a class="reference internal" href="#aglyph.component.Template.after_inject" title="aglyph.component.Template.after_inject"><tt class="xref py py-attr docutils literal"><span class="pre">Template.after_inject</span></tt></a> (if this component also
specifies <tt class="xref py py-attr docutils literal"><span class="pre">parent_id</span></tt>) or
<a class="reference internal" href="aglyph.context.html#aglyph.context.Context.after_inject" title="aglyph.context.Context.after_inject"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.context.Context.after_inject</span></tt></a>.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.0: </span>the <em>before_clear</em> keyword argument</p>
</div>
<p><em>before_clear</em> is the name of a method <em>of objects of this
component</em> that will be called immediately before the object is
cleared from cache via
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_singletons" title="aglyph.assembler.Assembler.clear_singletons"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_singletons()</span></tt></a>,
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_borgs" title="aglyph.assembler.Assembler.clear_borgs"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_borgs()</span></tt></a>, or
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler.clear_weakrefs" title="aglyph.assembler.Assembler.clear_weakrefs"><tt class="xref py py-meth docutils literal"><span class="pre">aglyph.assembler.Assembler.clear_weakrefs()</span></tt></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">Component.before_clear</span></tt>, if specified, <strong>replaces</strong> either
<a class="reference internal" href="#aglyph.component.Template.before_clear" title="aglyph.component.Template.before_clear"><tt class="xref py py-attr docutils literal"><span class="pre">Template.before_clear</span></tt></a> (if this component also
specifies <tt class="xref py py-attr docutils literal"><span class="pre">parent_id</span></tt>) or
<a class="reference internal" href="aglyph.context.html#aglyph.context.Context.before_clear" title="aglyph.context.Context.before_clear"><tt class="xref py py-attr docutils literal"><span class="pre">aglyph.context.Context.before_clear</span></tt></a>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>The <em>before_clear</em> keyword argument has no meaning for and is
ignored by &#8220;prototype&#8221; components. If <em>before_clear</em> is
specified for a prototype, a <a class="reference external" href="http://docs.python.org/3/library/exceptions.html#RuntimeWarning" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">RuntimeWarning</span></tt></a> will be
issued.</p>
<p class="last">For &#8220;weakref&#8221; components, there is a possibility that the
object no longer exists at the moment when the <em>before_clear</em>
method would be called. In such cases, the <em>before_clear</em>
method is <strong>not</strong> called. No warning is issued, but a
<tt class="xref py py-attr docutils literal"><span class="pre">logging.WARNING</span></tt> message is emitted.</p>
</div>
<p>Once a <tt class="docutils literal"><span class="pre">Component</span></tt> instance is initialized, the <tt class="docutils literal"><span class="pre">args</span></tt>
(<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">list</span></tt></a>), <tt class="docutils literal"><span class="pre">keywords</span></tt> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">dict</span></tt></a>), and <tt class="docutils literal"><span class="pre">attributes</span></tt>
(<a class="reference external" href="http://docs.python.org/3/library/collections.html#collections.OrderedDict" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">collections.OrderedDict</span></tt></a>) members can be modified
in-place to define the dependencies that must be injected into
objects of this component at assembly time. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s">&quot;http.client.HTTPConnection&quot;</span><span class="p">)</span>
<span class="n">component</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;www.ninthtest.net&quot;</span><span class="p">)</span>
<span class="n">component</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">80</span><span class="p">)</span>
<span class="n">component</span><span class="o">.</span><span class="n">keywords</span><span class="p">[</span><span class="s">&quot;strict&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">component</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s">&quot;set_debuglevel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>In Aglyph, a component may:</p>
<ul class="simple">
<li>be assembled directly by an
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.assembler.Assembler</span></tt></a> or
<a class="reference internal" href="aglyph.binder.html#aglyph.binder.Binder" title="aglyph.binder.Binder"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.binder.Binder</span></tt></a></li>
<li>identify other components as dependencies (using a
<a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><tt class="xref py py-class docutils literal"><span class="pre">Reference</span></tt></a>)</li>
<li>be used by other components as a dependency</li>
<li>use common dependencies and behaviors (<em>after_inject</em>,
<em>before_clear</em>) defined in a
<a class="reference internal" href="#aglyph.component.Template" title="aglyph.component.Template"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.component.Template</span></tt></a></li>
<li>use any combination of the above behaviors</li>
</ul>
<dl class="attribute">
<dt id="aglyph.component.Component.component_id">
<tt class="descname">component_id</tt><a class="reference internal" href="_modules/aglyph/component.html#Component.component_id"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Component.component_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The unique component identifier <em>(read-only)</em>.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 2.1.0: </span>use <tt class="xref py py-attr docutils literal"><span class="pre">unique_id</span></tt> instead.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Component.dotted_name">
<tt class="descname">dotted_name</tt><a class="reference internal" href="_modules/aglyph/component.html#Component.dotted_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Component.dotted_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The importable dotted name for objects of this component
<em>(read-only)</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Component.factory_name">
<tt class="descname">factory_name</tt><a class="reference internal" href="_modules/aglyph/component.html#Component.factory_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Component.factory_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of a <a class="reference external" href="http://docs.python.org/3/library/functions.html#callable" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">callable</span></tt></a> member of <a class="reference internal" href="#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><tt class="xref py py-attr docutils literal"><span class="pre">dotted_name</span></tt></a>
<em>(read-only)</em>.</p>
<p><tt class="docutils literal"><span class="pre">factory_name</span></tt> can be used to initialize objects of the
component when a class is not directly importable (e.g. the
component class is a nested class), or when component objects
need to be initialized via <a class="reference external" href="http://docs.python.org/3/library/functions.html#staticmethod" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">staticmethod</span></tt></a> or
<a class="reference external" href="http://docs.python.org/3/library/functions.html#classmethod" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">classmethod</span></tt></a>.</p>
<p>Consider the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># module.py</span>
<span class="k">class</span> <span class="nc">Example</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">Nested</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>The following examples show how to define a component that will
produce an <em>instance</em> of the <tt class="docutils literal"><span class="pre">module.Example.Nested</span></tt> class
when assembled.</p>
<p>Programmatic configuration using <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><tt class="xref py py-class docutils literal"><span class="pre">Component</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s">&quot;nested-object&quot;</span><span class="p">,</span>
                      <span class="n">dotted_name</span><span class="o">=</span><span class="s">&quot;module.Example&quot;</span><span class="p">,</span>
                      <span class="n">factory_name</span><span class="o">=</span><span class="s">&quot;Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Programmatic configuration using <a class="reference internal" href="aglyph.binder.html#aglyph.binder.Binder" title="aglyph.binder.Binder"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.binder.Binder</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">aglyph.binder</span> <span class="kn">import</span> <span class="n">Binder</span>
<span class="kn">from</span> <span class="nn">module</span> <span class="kn">import</span> <span class="n">Example</span>

<span class="n">binder</span> <span class="o">=</span> <span class="n">Binder</span><span class="p">()</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;nested-object&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="n">Example</span><span class="p">,</span> <span class="n">factory</span><span class="o">=</span><span class="s">&quot;Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Declarative XML configuration:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;component id=&quot;nested-object&quot; dotted-name=&quot;module.Example&quot;
    factory-name=&quot;Nested&quot; /&gt;
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">factory_name</span></tt> may also be a dot-separated name to specify an
arbitrarily-nested callable:</p>
<p>Programmatic configuration using <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><tt class="xref py py-class docutils literal"><span class="pre">Component</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s">&quot;nested-object&quot;</span><span class="p">,</span> <span class="n">dotted_name</span><span class="o">=</span><span class="s">&quot;module&quot;</span><span class="p">,</span>
                      <span class="n">factory_name</span><span class="o">=</span><span class="s">&quot;Example.Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Programmatic configuration using <a class="reference internal" href="aglyph.binder.html#aglyph.binder.Binder" title="aglyph.binder.Binder"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.binder.Binder</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">aglyph.binder</span> <span class="kn">import</span> <span class="n">Binder</span>
<span class="kn">import</span> <span class="nn">module</span>

<span class="n">binder</span> <span class="o">=</span> <span class="n">Binder</span><span class="p">()</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;nested-object&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="n">module</span><span class="p">,</span>
            <span class="n">factory</span><span class="o">=</span><span class="s">&quot;Example.Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Declarative XML configuration:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;component id=&quot;nested-object&quot; dotted-name=&quot;module&quot;
    factory-name=&quot;Example.Nested&quot; /&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The important thing to remember is that <a class="reference internal" href="#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><tt class="xref py py-attr docutils literal"><span class="pre">dotted_name</span></tt></a>
must be <strong>importable</strong>, and <tt class="docutils literal"><span class="pre">factory_name</span></tt> must be
accessible from the imported class or module via attribute
access.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Component.member_name">
<tt class="descname">member_name</tt><a class="reference internal" href="_modules/aglyph/component.html#Component.member_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Component.member_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of any member of <a class="reference internal" href="#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><tt class="xref py py-attr docutils literal"><span class="pre">dotted_name</span></tt></a> <em>(read-only)</em>.</p>
<p><tt class="docutils literal"><span class="pre">member_name</span></tt> can be used to obtain an object <em>directly</em> from
an importable module or class. The named member is simply
accessed and returned (it is <strong>not</strong> called, even if it is
callable).</p>
<p>Consider the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># module.py</span>
<span class="k">class</span> <span class="nc">Example</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">Nested</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
<p>The following examples show how to define a component that will
produce the <tt class="docutils literal"><span class="pre">module.Example.Nested</span></tt> class <em>itself</em> when
assembled.</p>
<p>Programmatic configuration using <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><tt class="xref py py-class docutils literal"><span class="pre">Component</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s">&quot;nested-class&quot;</span><span class="p">,</span>
                      <span class="n">dotted_name</span><span class="o">=</span><span class="s">&quot;module.Example&quot;</span><span class="p">,</span>
                      <span class="n">member_name</span><span class="o">=</span><span class="s">&quot;Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Programmatic configuration using <a class="reference internal" href="aglyph.binder.html#aglyph.binder.Binder" title="aglyph.binder.Binder"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.binder.Binder</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">aglyph.binder</span> <span class="kn">import</span> <span class="n">Binder</span>
<span class="kn">from</span> <span class="nn">module</span> <span class="kn">import</span> <span class="n">Example</span>

<span class="n">binder</span> <span class="o">=</span> <span class="n">Binder</span><span class="p">()</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;nested-class&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="n">Example</span><span class="p">,</span> <span class="n">member</span><span class="o">=</span><span class="s">&quot;Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Declarative XML configuration:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;component id=&quot;nested-class&quot; dotted-name=&quot;module.Example&quot;
    member-name=&quot;Nested&quot; /&gt;
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">member_name</span></tt> may also be a dot-separated name to specify an
arbitrarily-nested member:</p>
<p>Programmatic configuration using <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><tt class="xref py py-class docutils literal"><span class="pre">Component</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">component</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="s">&quot;nested-class&quot;</span><span class="p">,</span> <span class="n">dotted_name</span><span class="o">=</span><span class="s">&quot;module&quot;</span><span class="p">,</span>
                      <span class="n">member_name</span><span class="o">=</span><span class="s">&quot;Example.Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Programmatic configuration using <a class="reference internal" href="aglyph.binder.html#aglyph.binder.Binder" title="aglyph.binder.Binder"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.binder.Binder</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">aglyph.binder</span> <span class="kn">import</span> <span class="n">Binder</span>
<span class="kn">import</span> <span class="nn">module</span>

<span class="n">binder</span> <span class="o">=</span> <span class="n">Binder</span><span class="p">()</span>
<span class="n">binder</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&quot;nested-class&quot;</span><span class="p">,</span> <span class="n">to</span><span class="o">=</span><span class="n">module</span><span class="p">,</span>
            <span class="n">member</span><span class="o">=</span><span class="s">&quot;Example.Nested&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Declarative XML configuration:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;component id=&quot;nested-class&quot; dotted-name=&quot;module&quot;
    member-name=&quot;Example.Nested&quot; /&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The important thing to remember is that <a class="reference internal" href="#aglyph.component.Component.dotted_name" title="aglyph.component.Component.dotted_name"><tt class="xref py py-attr docutils literal"><span class="pre">dotted_name</span></tt></a>
must be <strong>importable</strong>, and <tt class="docutils literal"><span class="pre">member_name</span></tt> must be
accessible from the imported class or module via attribute
access.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When a component specifies <tt class="docutils literal"><span class="pre">member_name</span></tt>, initialization is
assumed. In other words, Aglyph <strong>will not</strong> attempt to
initialize the member, and will <strong>ignore</strong> any
<a class="reference internal" href="#aglyph.component.Component.init_args" title="aglyph.component.Component.init_args"><tt class="xref py py-attr docutils literal"><span class="pre">init_args</span></tt></a> or <a class="reference internal" href="#aglyph.component.Component.init_keywords" title="aglyph.component.Component.init_keywords"><tt class="xref py py-attr docutils literal"><span class="pre">init_keywords</span></tt></a>.</p>
<p>On assembly, if any initialization arguments and/or keyword
arguments have been defined for such a component, they are
discarded and a WARN-level log record is emitted to the
&#8220;aglyph.assembler.Assembler&#8221; channel.</p>
<p class="last">Any <tt class="xref py py-attr docutils literal"><span class="pre">attributes</span></tt> that have been specified for the
component will still be processed as setter injection
dependencies, however.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Component.strategy">
<tt class="descname">strategy</tt><a class="reference internal" href="_modules/aglyph/component.html#Component.strategy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Component.strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>The component assembly strategy <em>(read-only)</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Component.init_args">
<tt class="descname">init_args</tt><a class="reference internal" href="_modules/aglyph/component.html#Component.init_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Component.init_args" title="Permalink to this definition">¶</a></dt>
<dd><p>The positional arguments for constructor injection of
component object dependencies.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 2.1.0: </span>use <tt class="xref py py-attr docutils literal"><span class="pre">args</span></tt> instead.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This property may not be set; it must be modified by
reference.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aglyph.component.Component.init_keywords">
<tt class="descname">init_keywords</tt><a class="reference internal" href="_modules/aglyph/component.html#Component.init_keywords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Component.init_keywords" title="Permalink to this definition">¶</a></dt>
<dd><p>The keyword arguments for constructor injection of component
object dependencies.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 2.1.0: </span>use <tt class="xref py py-attr docutils literal"><span class="pre">keywords</span></tt> instead.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This property may not be set; it must be modified by
reference.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="data">
<dt id="aglyph.component.Strategy">
<tt class="descclassname">aglyph.component.</tt><tt class="descname">Strategy</tt><em class="property"> = Strategy(PROTOTYPE='prototype', SINGLETON='singleton', BORG='borg', WEAKREF='weakref')</em><a class="headerlink" href="#aglyph.component.Strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Define the component assembly strategies implemented by Aglyph.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.0: </span><tt class="docutils literal"><span class="pre">Strategy</span></tt> is now a named tuple. In prior versions, it was a class.</p>
</div>
<p class="rubric">&#8220;prototype&#8221;</p>
<p>A new object is always created, initialized, wired, and returned.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">&#8220;prototype&#8221; is the default assembly strategy for Aglyph components.</p>
</div>
<p class="rubric">&#8220;singleton&#8221;</p>
<p>The cached object is returned if it exists. Otherwise, the object is
created, initialized, wired, cached, and returned.</p>
<p>Singleton component objects are cached by <tt class="xref py py-attr docutils literal"><span class="pre">Component.unique_id</span></tt>.</p>
<p class="rubric">&#8220;borg&#8221;</p>
<p>A new instance is always created. The shared-state is assigned to the
new instance&#8217;s <tt class="docutils literal"><span class="pre">__dict__</span></tt> if it exists. Otherwise, the new instance is
initialized and wired, its instance <tt class="docutils literal"><span class="pre">__dict__</span></tt> is cached, and then the
instance is returned.</p>
<p>Borg component instance shared-states are cached by
<a class="reference internal" href="#aglyph.component.Component.component_id" title="aglyph.component.Component.component_id"><tt class="xref py py-attr docutils literal"><span class="pre">Component.component_id</span></tt></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>The borg assembly strategy is <strong>only</strong> supported for
components that are non-builtin classes.</li>
<li>The borg assembly strategy is <strong>not</strong> supported for
classes that define or inherit a <tt class="docutils literal"><span class="pre">__slots__</span></tt> member.</li>
</ul>
</div>
<p class="rubric">&#8220;weakref&#8221;</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.1.0.</span></p>
</div>
<p>In the simplest terms, this is a &#8220;prototype&#8221; that can exhibit
&#8220;singleton&#8221; behavior: as long as there is at least one &#8220;live&#8221; reference
to the assembled object in the application runtime, then requests to
assemble this component will return the same (cached) object.</p>
<p>When the only reference to the assembled object that remains is the
cached weak reference, the Python garbage collector is free to destroy
the object, at which point it is automatically removed from the Aglyph
cache.</p>
<p>Subsequent requests to assemble the same component will cause a new
object to be created, initialized, wired, cached (as a weak reference),
and returned.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please refer to the <a class="reference external" href="http://docs.python.org/3/library/weakref.html#module-weakref" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">weakref</span></tt></a> module for a detailed explanation
of weak reference behavior.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="aglyph.component.Reference">
<em class="property">class </em><tt class="descclassname">aglyph.component.</tt><tt class="descname">Reference</tt><a class="reference internal" href="_modules/aglyph/component.html#Reference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Reference" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">builtins.str</span></tt></p>
<p>A place-holder used to refer to another <a class="reference internal" href="#aglyph.component.Component" title="aglyph.component.Component"><tt class="xref py py-class docutils literal"><span class="pre">Component</span></tt></a>.</p>
<p>A <tt class="docutils literal"><span class="pre">Reference</span></tt> is used as an alias to identify a component that is a
dependency of another component. The value of a <tt class="docutils literal"><span class="pre">Reference</span></tt> can be
either a dotted-name or a user-provided unique ID.</p>
<p>A <tt class="docutils literal"><span class="pre">Reference</span></tt> value MUST correspond to a component ID in the same
context.</p>
<p>A <tt class="docutils literal"><span class="pre">Reference</span></tt> can be used as an argument for an
<a class="reference internal" href="#aglyph.component.Evaluator" title="aglyph.component.Evaluator"><tt class="xref py py-class docutils literal"><span class="pre">Evaluator</span></tt></a>, and can be assembled directly by an
<a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.assembler.Assembler</span></tt></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In Python versions &lt; 3.0, a <tt class="docutils literal"><span class="pre">Reference</span></tt> representing a
dotted-name <em>must</em> consist only of characters in the ASCII
subset of the source encoding (see <span class="target" id="index-0"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0263"><strong>PEP 0263</strong></a>).</p>
<p>But in Python versions &gt;= 3.0, a <tt class="docutils literal"><span class="pre">Reference</span></tt> representing a
dotted-name <em>may</em> contain non-ASCII characters
(see <span class="target" id="index-1"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-3131"><strong>PEP 3131</strong></a>).</p>
<p class="last">However, a <tt class="docutils literal"><span class="pre">Reference</span></tt> may also represent a user-defined
identifier. To accommodate all cases, the super class of
<tt class="docutils literal"><span class="pre">Reference</span></tt> is &#8220;dynamic&#8221; with respect to the version of Python
under which Aglyph is running (<tt class="xref py py-class docutils literal"><span class="pre">unicode</span></tt> under Python 2,
<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">str</span></tt></a> under Python 3). This documentation shows the base
class as <tt class="docutils literal"><span class="pre">str</span></tt> because the <a class="reference external" href="http://sphinx-doc.org/">Sphinx</a>
documentation generator runs under CPython 3.</p>
</div>
</dd></dl>

<dl class="class">
<dt id="aglyph.component.Evaluator">
<em class="property">class </em><tt class="descclassname">aglyph.component.</tt><tt class="descname">Evaluator</tt><big>(</big><em>func</em>, <em>*args</em>, <em>**keywords</em><big>)</big><a class="reference internal" href="_modules/aglyph/component.html#Evaluator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Evaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">aglyph.component._InitializationSupport</span></tt></p>
<p>Perform lazy creation of objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> (<a class="reference external" href="http://docs.python.org/3/library/functions.html#callable" title="(in Python v3.4)"><em>callable</em></a>) &#8211; any callable that returns an object</li>
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.4)"><em>tuple</em></a>) &#8211; the positional arguments to <em>func</em></li>
<li><strong>keywords</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.4)"><em>dict</em></a>) &#8211; the keyword arguments to <em>func</em></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>An <tt class="docutils literal"><span class="pre">Evaluator</span></tt> is similar to a <a class="reference external" href="http://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.4)"><tt class="xref py py-func docutils literal"><span class="pre">functools.partial()</span></tt></a> in
that they both collect a function and related arguments into a
<a class="reference external" href="http://docs.python.org/3/library/functions.html#callable" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">callable</span></tt></a> object with a simplified signature that can be
called repeatedly to produce a new object.</p>
<p><em>Unlike</em> a partial function, an <tt class="docutils literal"><span class="pre">Evaluator</span></tt> may have arguments
that are not truly &#8220;frozen,&#8221; in the sense that any argument may
be defined as a <a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><tt class="xref py py-class docutils literal"><span class="pre">Reference</span></tt></a>, a <a class="reference external" href="http://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.4)"><tt class="xref py py-func docutils literal"><span class="pre">functools.partial()</span></tt></a>,
or even another <tt class="docutils literal"><span class="pre">Evaluator</span></tt>, which needs to be resolved (i.e.
assembled/called) before calling <em>func</em>.</p>
<p>When an <tt class="docutils literal"><span class="pre">Evaluator</span></tt> is called, its arguments (positional and
keyword) are each resolve in one of the following ways:</p>
<ul class="simple">
<li>If the argument value is a <a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><tt class="xref py py-class docutils literal"><span class="pre">Reference</span></tt></a>, it is assembled
(by an <a class="reference internal" href="aglyph.assembler.html#aglyph.assembler.Assembler" title="aglyph.assembler.Assembler"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.assembler.Assembler</span></tt></a> or
<a class="reference internal" href="aglyph.binder.html#aglyph.binder.Binder" title="aglyph.binder.Binder"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.binder.Binder</span></tt></a> reference passed to
<a class="reference internal" href="#aglyph.component.Evaluator.__call__" title="aglyph.component.Evaluator.__call__"><tt class="xref py py-meth docutils literal"><span class="pre">__call__()</span></tt></a>)</li>
<li>If the argument value is an <tt class="docutils literal"><span class="pre">Evaluator</span></tt> or a
<a class="reference external" href="http://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.4)"><tt class="xref py py-func docutils literal"><span class="pre">functools.partial()</span></tt></a>, it is called to produce its value.</li>
<li>If the argument is a dictionary or a sequence other than a
string type, each item is resolved according to these rules.</li>
<li>If none of the above cases apply, the argument value is used
as-is.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An <tt class="docutils literal"><span class="pre">Evaluator</span></tt> can handle any level of nesting (e.g. a
<a class="reference external" href="http://docs.python.org/3/library/functools.html#functools.partial" title="(in Python v3.4)"><tt class="xref py py-func docutils literal"><span class="pre">functools.partial()</span></tt></a> within an <tt class="docutils literal"><span class="pre">Evaluator</span></tt> within
<em>another</em> <tt class="docutils literal"><span class="pre">Evaluator</span></tt>).</p>
</div>
<dl class="attribute">
<dt id="aglyph.component.Evaluator.func">
<tt class="descname">func</tt><a class="reference internal" href="_modules/aglyph/component.html#Evaluator.func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Evaluator.func" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference external" href="http://docs.python.org/3/library/functions.html#callable" title="(in Python v3.4)"><tt class="xref py py-obj docutils literal"><span class="pre">callable</span></tt></a> that creates new objects <em>(read-only)</em>.</p>
</dd></dl>

<dl class="method">
<dt id="aglyph.component.Evaluator.__call__">
<tt class="descname">__call__</tt><big>(</big><em>assembler</em><big>)</big><a class="reference internal" href="_modules/aglyph/component.html#Evaluator.__call__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aglyph.component.Evaluator.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <tt class="docutils literal"><span class="pre">func(*args,</span> <span class="pre">**keywords)</span></tt> and return the new object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>assembler</strong> &#8211; a reference to an                          <tt class="xref py py-class docutils literal"><span class="pre">aglyph.assembly.Assembler</span></tt> or                          <a class="reference internal" href="aglyph.binder.html#aglyph.binder.Binder" title="aglyph.binder.Binder"><tt class="xref py py-class docutils literal"><span class="pre">aglyph.binder.Binder</span></tt></a></td>
</tr>
</tbody>
</table>
<p><em>assembler</em> is used to assemble any <a class="reference internal" href="#aglyph.component.Reference" title="aglyph.component.Reference"><tt class="xref py py-class docutils literal"><span class="pre">Reference</span></tt></a> that is
encountered in the function arguments.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="aglyph.context.html" class="btn btn-neutral float-right" title="aglyph.context — Defining component contexts">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="aglyph.compat.ipyetree.html" class="btn btn-neutral" title="aglyph.compat.ipyetree — an ElementTree parser for IronPython"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006-2015, Matthew Zipay.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>