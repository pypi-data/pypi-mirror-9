<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>trigger.utils — CLI tools and utilities library &mdash; Trigger 1.5 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Trigger 1.5 documentation" href="../index.html" />
    <link rel="prev" title="trigger.twister — Asynchronous device interaction library" href="twister.html" />
 
<style type="text/css">
    span.changelog-support {color: #4070A0;}
    span.changelog-bug {color: #A04040;}
    span.changelog-feature {color: #40A056;}
    a.changelog-release {font-weight: bold;}
</style>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="twister.html" title="trigger.twister — Asynchronous device interaction library"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Trigger 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-trigger.utils">
<span id="trigger-utils-cli-tools-and-utilities-library"></span><h1><a class="reference internal" href="#module-trigger.utils" title="trigger.utils"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.utils</span></tt></a> &#8212; CLI tools and utilities library<a class="headerlink" href="#module-trigger.utils" title="Permalink to this headline">¶</a></h1>
<p>A collection of CLI tools and utilities used by Trigger.</p>
<dl class="class">
<dt id="trigger.utils.JuniperElement">
<em class="property">class </em><tt class="descclassname">trigger.utils.</tt><tt class="descname">JuniperElement</tt><a class="headerlink" href="#trigger.utils.JuniperElement" title="Permalink to this definition">¶</a></dt>
<dd><p>JuniperElement(key, value)</p>
<dl class="attribute">
<dt id="trigger.utils.JuniperElement.key">
<tt class="descname">key</tt><a class="headerlink" href="#trigger.utils.JuniperElement.key" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="trigger.utils.JuniperElement.value">
<tt class="descname">value</tt><a class="headerlink" href="#trigger.utils.JuniperElement.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="attribute">
<dt id="trigger.utils.NodePort">
<tt class="descclassname">trigger.utils.</tt><tt class="descname">NodePort</tt><a class="headerlink" href="#trigger.utils.NodePort" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">HostPort</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.crypt_md5">
<tt class="descclassname">trigger.utils.</tt><tt class="descname">crypt_md5</tt><big>(</big><em>passwd</em><big>)</big><a class="headerlink" href="#trigger.utils.crypt_md5" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an md5-crypt hash of a clear-text password.</p>
<p>To get md5-crypt from <tt class="docutils literal"><span class="pre">crypt(3)</span></tt> you must pass an 8-char string starting with
&#8216;$1$&#8217; and ending with &#8216;$&#8217;, resulting in a 12-char salt. This only works on
systems where md5-crypt is default and is currently assumed to be Linux.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>passwd</strong> &#8211; Password string to be encrypted</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.parse_node_port">
<tt class="descclassname">trigger.utils.</tt><tt class="descname">parse_node_port</tt><big>(</big><em>nodeport</em>, <em>delimiter=':'</em><big>)</big><a class="headerlink" href="#trigger.utils.parse_node_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string in format &#8216;hostname&#8217; or &#8216;hostname:port&#8217;  and return them
as a 2-tuple.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.strip_juniper_namespace">
<tt class="descclassname">trigger.utils.</tt><tt class="descname">strip_juniper_namespace</tt><big>(</big><em>path</em>, <em>key</em>, <em>value</em><big>)</big><a class="headerlink" href="#trigger.utils.strip_juniper_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a Juniper XML element, strip the namespace and return a 2-tuple.</p>
<p>This is designed to be used as a <tt class="docutils literal"><span class="pre">postprocessor</span></tt> with
<tt class="xref py py-obj docutils literal"><span class="pre">parse()</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> &#8211; The attribute name of the element.</li>
<li><strong>value</strong> &#8211; The value of the element.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="module-trigger.utils.cli">
<span id="trigger-utils-cli"></span><h2><a class="reference internal" href="#module-trigger.utils.cli" title="trigger.utils.cli"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.utils.cli</span></tt></a><a class="headerlink" href="#module-trigger.utils.cli" title="Permalink to this headline">¶</a></h2>
<p>Command-line interface utilities for Trigger tools. Intended for re-usable
pieces of code like user prompts, that don&#8217;t fit in other utils modules.</p>
<dl class="function">
<dt id="trigger.utils.cli.yesno">
<tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">yesno</tt><big>(</big><em>prompt</em>, <em>default=False</em>, <em>autoyes=False</em><big>)</big><a class="headerlink" href="#trigger.utils.cli.yesno" title="Permalink to this definition">¶</a></dt>
<dd><p>Present a yes-or-no prompt, get input, and return a boolean.</p>
<p>The <tt class="docutils literal"><span class="pre">default</span></tt> argument is ignored if <tt class="docutils literal"><span class="pre">autoyes</span></tt> is set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>prompt</strong> &#8211; Prompt text</li>
<li><strong>default</strong> &#8211; Yes if True; No if False</li>
<li><strong>autoyes</strong> &#8211; Automatically return True</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Default behavior (hitting &#8220;enter&#8221; returns <tt class="docutils literal"><span class="pre">False</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">yesno</span><span class="p">(</span><span class="s">&#39;Blow up the moon?&#39;</span><span class="p">)</span>
<span class="go">Blow up the moon? (y/N)</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Reversed behavior (hitting &#8220;enter&#8221; returns <tt class="docutils literal"><span class="pre">True</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">yesno</span><span class="p">(</span><span class="s">&#39;Blow up the moon?&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">Blow up the moon? (Y/n)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Automatically return <tt class="docutils literal"><span class="pre">True</span></tt> with <tt class="docutils literal"><span class="pre">autoyes</span></tt>; no prompt is displayed:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">yesno</span><span class="p">(</span><span class="s">&#39;Blow up the moon?&#39;</span><span class="p">,</span> <span class="n">autoyes</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.get_terminal_width">
<tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">get_terminal_width</tt><big>(</big><big>)</big><a class="headerlink" href="#trigger.utils.cli.get_terminal_width" title="Permalink to this definition">¶</a></dt>
<dd><p>Find and return stdout&#8217;s terminal width, if applicable.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.get_terminal_size">
<tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">get_terminal_size</tt><big>(</big><big>)</big><a class="headerlink" href="#trigger.utils.cli.get_terminal_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Find and return stdouts terminal size as (height, width)</p>
</dd></dl>

<dl class="class">
<dt id="trigger.utils.cli.Whirlygig">
<em class="property">class </em><tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">Whirlygig</tt><big>(</big><em>start_msg=''</em>, <em>done_msg=''</em>, <em>max=100</em><big>)</big><a class="headerlink" href="#trigger.utils.cli.Whirlygig" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a whirlygig for use in displaying pending operation in a command-line tool.
Guaranteed to make the user feel warm and fuzzy and be 1000% bug-free.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start_msg</strong> &#8211; The status message displayed to the user (e.g. &#8220;Doing stuff:&#8221;)</li>
<li><strong>done_msg</strong> &#8211; The completion message displayed upon completion (e.g. &#8220;Done.&#8221;)</li>
<li><strong>max</strong> &#8211; Integer of the number of whirlygig repetitions to perform</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Whirlygig</span><span class="p">(</span><span class="s">&quot;Doing stuff:&quot;</span><span class="p">,</span> <span class="s">&quot;Done.&quot;</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="trigger.utils.cli.Whirlygig.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#trigger.utils.cli.Whirlygig.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes the whirlygig!</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.utils.cli.NullDevice">
<em class="property">class </em><tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">NullDevice</tt><a class="headerlink" href="#trigger.utils.cli.NullDevice" title="Permalink to this definition">¶</a></dt>
<dd><p>Used to supress output to <tt class="docutils literal"><span class="pre">sys.stdout</span></tt> (aka <tt class="docutils literal"><span class="pre">print</span></tt>).</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.utils.cli</span> <span class="kn">import</span> <span class="n">NullDevice</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;1 - this will print to STDOUT&quot;</span>
<span class="go">1 - this will print to STDOUT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">original_stdout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span>  <span class="c"># keep a reference to STDOUT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">NullDevice</span><span class="p">()</span>     <span class="c"># redirect the real STDOUT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;2 - this won&#39;t print&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">original_stdout</span>  <span class="c"># turn STDOUT back on</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&quot;3 - this will print to SDTDOUT&quot;</span>
<span class="go">3 - this will print to SDTDOUT</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.print_severed_head">
<tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">print_severed_head</tt><big>(</big><big>)</big><a class="headerlink" href="#trigger.utils.cli.print_severed_head" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a demon holding a severed head. Best used when things go wrong, like
production-impacting network outages caused by fat-fingered ACL changes.</p>
<p>Thanks to Jeff Sullivan for this best error message ever.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.min_sec">
<tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">min_sec</tt><big>(</big><em>secs</em><big>)</big><a class="headerlink" href="#trigger.utils.cli.min_sec" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes an epoch timestamp and returns string of minutes:seconds.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>secs</strong> &#8211; Timestamp (in seconds)</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c"># Wait a few seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finish</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">min_sec</span><span class="p">(</span><span class="n">finish</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span>
<span class="go">&#39;0:11&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.pretty_time">
<tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">pretty_time</tt><big>(</big><em>t</em><big>)</big><a class="headerlink" href="#trigger.utils.cli.pretty_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a pretty version of timestamp, including timezone info. Expects
the incoming datetime object to have proper tzinfo.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>t</strong> &#8211; A <tt class="docutils literal"><span class="pre">datetime.datetime</span></tt> object</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pytz</span> <span class="kn">import</span> <span class="n">timezone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">localzone</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">(</span><span class="s">&#39;US/Eastern&#39;</span><span class="p">)</span>
<span class="go">&lt;DstTzInfo &#39;US/Eastern&#39; EST-1 day, 19:00:00 STD&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">localzone</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">t</span>
<span class="go">2011-07-19 12:40:30.820920-04:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">pretty_time</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">09:40 PDT</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2011</span><span class="p">,</span><span class="mo">07</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mo">04</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">localzone</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">t</span>
<span class="go">2011-07-20 04:13:00-05:00</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">pretty_time</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">tomorrow 02:13 PDT</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.proceed">
<tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">proceed</tt><big>(</big><big>)</big><a class="headerlink" href="#trigger.utils.cli.proceed" title="Permalink to this definition">¶</a></dt>
<dd><p>Present a proceed prompt. Return <tt class="docutils literal"><span class="pre">True</span></tt> if Y, else <tt class="docutils literal"><span class="pre">False</span></tt></p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.cli.get_user">
<tt class="descclassname">trigger.utils.cli.</tt><tt class="descname">get_user</tt><big>(</big><big>)</big><a class="headerlink" href="#trigger.utils.cli.get_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the current user.</p>
</dd></dl>

</div>
<div class="section" id="module-trigger.utils.importlib">
<span id="trigger-utils-importlib"></span><h2><a class="reference internal" href="#module-trigger.utils.importlib" title="trigger.utils.importlib"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.utils.importlib</span></tt></a><a class="headerlink" href="#module-trigger.utils.importlib" title="Permalink to this headline">¶</a></h2>
<p>Utils to import modules.</p>
<p>Taken verbatim from <tt class="docutils literal"><span class="pre">django.utils.importlib</span></tt> in Django 1.4.</p>
<dl class="function">
<dt id="trigger.utils.importlib.import_module">
<tt class="descclassname">trigger.utils.importlib.</tt><tt class="descname">import_module</tt><big>(</big><em>name</em>, <em>package=None</em><big>)</big><a class="headerlink" href="#trigger.utils.importlib.import_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a module and return the module object.</p>
<p>The <tt class="docutils literal"><span class="pre">package</span></tt> argument is required when performing a relative import. It
specifies the package to use as the anchor point from which to resolve the
relative import to an absolute import.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.importlib.import_module_from_path">
<tt class="descclassname">trigger.utils.importlib.</tt><tt class="descname">import_module_from_path</tt><big>(</big><em>full_path</em>, <em>global_name</em><big>)</big><a class="headerlink" href="#trigger.utils.importlib.import_module_from_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a module from a file path and return the module object.</p>
<p>Allows one to import from anywhere, something <tt class="docutils literal"><span class="pre">__import__()</span></tt> does not do.
The module is added to <tt class="docutils literal"><span class="pre">sys.modules</span></tt> as <tt class="docutils literal"><span class="pre">global_name</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>full_path</strong> &#8211; The absolute path to the module .py file</li>
<li><strong>global_name</strong> &#8211; The name assigned to the module in sys.modules. To avoid
confusion, the global_name should be the same as the variable to which
you&#8217;re assigning the returned module.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-trigger.utils.network">
<span id="trigger-utils-network"></span><h2><a class="reference internal" href="#module-trigger.utils.network" title="trigger.utils.network"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.utils.network</span></tt></a><a class="headerlink" href="#module-trigger.utils.network" title="Permalink to this headline">¶</a></h2>
<p>Functions that perform network-based things like ping, port tests, etc.</p>
<dl class="function">
<dt id="trigger.utils.network.ping">
<tt class="descclassname">trigger.utils.network.</tt><tt class="descname">ping</tt><big>(</big><em>host</em>, <em>count=1</em>, <em>timeout=5</em><big>)</big><a class="headerlink" href="#trigger.utils.network.ping" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pass/fail for a ping. Supports POSIX only.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; Hostname or address</li>
<li><strong>count</strong> &#8211; Repeat count</li>
<li><strong>timeout</strong> &#8211; Timeout in seconds</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.utils</span> <span class="kn">import</span> <span class="n">network</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">network</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s">&#39;aol.com&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">network</span><span class="o">.</span><span class="n">ping</span><span class="p">(</span><span class="s">&#39;192.168.199.253&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.network.test_tcp_port">
<tt class="descclassname">trigger.utils.network.</tt><tt class="descname">test_tcp_port</tt><big>(</big><em>host</em>, <em>port=23</em>, <em>timeout=5</em>, <em>check_result=False</em>, <em>expected_result=''</em><big>)</big><a class="headerlink" href="#trigger.utils.network.test_tcp_port" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempts to connect to a TCP port. Returns a Boolean.</p>
<p>If <tt class="docutils literal"><span class="pre">check_result</span></tt> is set, the first line of output is retreived from the
connection and the starting characters must match <tt class="docutils literal"><span class="pre">expected_result</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; Hostname or address</li>
<li><strong>port</strong> &#8211; Destination port</li>
<li><strong>timeout</strong> &#8211; Timeout in seconds</li>
<li><strong>check_result</strong> &#8211; Whether or not to do a string check (e.g. version banner)</li>
<li><strong>expected_result</strong> &#8211; The expected result!</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test_tcp_port</span><span class="p">(</span><span class="s">&#39;aol.com&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_tcp_port</span><span class="p">(</span><span class="s">&#39;aol.com&#39;</span><span class="p">,</span> <span class="mi">12345</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.network.test_ssh">
<tt class="descclassname">trigger.utils.network.</tt><tt class="descname">test_ssh</tt><big>(</big><em>host</em>, <em>port=22</em>, <em>timeout=5</em>, <em>version=('SSH-1.99'</em>, <em>'SSH-2.0')</em><big>)</big><a class="headerlink" href="#trigger.utils.network.test_ssh" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to a TCP port and confirm the SSH version. Defaults to SSHv2.</p>
<p>Note that the default of (&#8216;SSH-1.99&#8217;, &#8216;SSH-2.0&#8217;) both indicate SSHv2 per
RFC 4253. (Ref: <a class="reference external" href="http://en.wikipedia.org/wiki/Secure_Shell#Version_1.99">http://en.wikipedia.org/wiki/Secure_Shell#Version_1.99</a>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> &#8211; Hostname or address</li>
<li><strong>port</strong> &#8211; Destination port</li>
<li><strong>timeout</strong> &#8211; Timeout in seconds</li>
<li><strong>version</strong> &#8211; The SSH version prefix (e.g. &#8220;SSH-2.0&#8221;). This may also be a tuple of
prefixes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">test_ssh</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_ssh</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="s">&#39;SSH-1.5&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.network.address_is_internal">
<tt class="descclassname">trigger.utils.network.</tt><tt class="descname">address_is_internal</tt><big>(</big><em>ip</em><big>)</big><a class="headerlink" href="#trigger.utils.network.address_is_internal" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines if an IP address is internal to your network. Relies on
networks specified in <tt class="xref py py-mod docutils literal"><span class="pre">settings.INTERNAL_NETWORKS</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ip</strong> &#8211; IP address to test.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">address_is_internal</span><span class="p">(</span><span class="s">&#39;1.1.1.1&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="trigger-utils-notifications">
<h2><a class="reference internal" href="#module-trigger.utils.notifications" title="trigger.utils.notifications"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.utils.notifications</span></tt></a><a class="headerlink" href="#trigger-utils-notifications" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-trigger.utils.notifications"></span><p>Pluggable event notification system for Trigger.</p>
<dl class="function">
<dt id="trigger.utils.notifications.send_email">
<tt class="descclassname">trigger.utils.notifications.</tt><tt class="descname">send_email</tt><big>(</big><em>addresses</em>, <em>subject</em>, <em>body</em>, <em>sender</em>, <em>mailhost='localhost'</em><big>)</big><a class="headerlink" href="#trigger.utils.notifications.send_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an email to a list of recipients. Returns <tt class="docutils literal"><span class="pre">True</span></tt> when done.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>addresses</strong> &#8211; List of email recipients</li>
<li><strong>subject</strong> &#8211; The email subject</li>
<li><strong>body</strong> &#8211; The email body</li>
<li><strong>sender</strong> &#8211; The email sender</li>
<li><strong>mailhost</strong> &#8211; (Optional) Mail server address</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.notifications.send_notification">
<tt class="descclassname">trigger.utils.notifications.</tt><tt class="descname">send_notification</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#trigger.utils.notifications.send_notification" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple entry point into <a class="reference internal" href="#trigger.utils.notifications.handlers.notify" title="trigger.utils.notifications.handlers.notify"><tt class="xref py py-obj docutils literal"><span class="pre">notify</span></tt></a> that
takes any arguments and tries to handle them to send a notification.</p>
<p>This relies on handlers to be definied within
<tt class="docutils literal"><span class="pre">settings.NOTIFICATION_HANDLERS</span></tt>.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.notifications.email_handler">
<tt class="descclassname">trigger.utils.notifications.</tt><tt class="descname">email_handler</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#trigger.utils.notifications.email_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Default email notification handler.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.notifications.notify">
<tt class="descclassname">trigger.utils.notifications.</tt><tt class="descname">notify</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#trigger.utils.notifications.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate thru registered handlers to handle events and send notifications.</p>
<p>Handlers should return <tt class="docutils literal"><span class="pre">True</span></tt> if they have performed the desired action
or <tt class="docutils literal"><span class="pre">None</span></tt> if they have not.</p>
</dd></dl>

<div class="section" id="module-trigger.utils.notifications.handlers">
<span id="trigger-utils-notifications-handlers"></span><h3><a class="reference internal" href="#module-trigger.utils.notifications.handlers" title="trigger.utils.notifications.handlers"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.utils.notifications.handlers</span></tt></a><a class="headerlink" href="#module-trigger.utils.notifications.handlers" title="Permalink to this headline">¶</a></h3>
<p>Handlers for event notifications.</p>
<p>Handlers are specified by full module path within
<tt class="docutils literal"><span class="pre">settings.NOTIFICATION_HANDLERS</span></tt>. These are then imported and registered
internally in this module.</p>
<p>The primary public interface to this module is
<a class="reference internal" href="#trigger.utils.notifications.handlers.notify" title="trigger.utils.notifications.handlers.notify"><tt class="xref py py-obj docutils literal"><span class="pre">notify</span></tt></a> which is in turn called by
<a class="reference internal" href="#trigger.utils.notifications.send_notification" title="trigger.utils.notifications.send_notification"><tt class="xref py py-obj docutils literal"><span class="pre">send_notification</span></tt></a> to send notifications.</p>
<p>Handlers should return <tt class="docutils literal"><span class="pre">True</span></tt> if they have performed the desired action
or <tt class="docutils literal"><span class="pre">None</span></tt> if they have not.</p>
<p>A handler can either define its own custom behavior, or leverage a custom
<a class="reference internal" href="#trigger.utils.notifications.events.Event" title="trigger.utils.notifications.events.Event"><tt class="xref py py-obj docutils literal"><span class="pre">Event</span></tt></a> object. The goal was to provide a
simple public interface to customizing event notifications.</p>
<p>If not customized within <a class="reference internal" href="../usage/configuration.html#std:setting-NOTIFICATION_HANDLERS"><tt class="xref std std-setting docutils literal"><span class="pre">NOTIFICATION_HANDLERS</span></tt></a>, the default
notification type is an <tt class="xref py py-obj docutils literal"><span class="pre">EmailEvent</span></tt> that is
handled by <a class="reference internal" href="#trigger.utils.notifications.handlers.email_handler" title="trigger.utils.notifications.handlers.email_handler"><tt class="xref py py-obj docutils literal"><span class="pre">email_handler</span></tt></a>.</p>
<dl class="function">
<dt id="trigger.utils.notifications.handlers.email_handler">
<tt class="descclassname">trigger.utils.notifications.handlers.</tt><tt class="descname">email_handler</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#trigger.utils.notifications.handlers.email_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>Default email notification handler.</p>
</dd></dl>

<dl class="function">
<dt id="trigger.utils.notifications.handlers.notify">
<tt class="descclassname">trigger.utils.notifications.handlers.</tt><tt class="descname">notify</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#trigger.utils.notifications.handlers.notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate thru registered handlers to handle events and send notifications.</p>
<p>Handlers should return <tt class="docutils literal"><span class="pre">True</span></tt> if they have performed the desired action
or <tt class="docutils literal"><span class="pre">None</span></tt> if they have not.</p>
</dd></dl>

</div>
<div class="section" id="module-trigger.utils.notifications.events">
<span id="trigger-utils-notifications-events"></span><h3><a class="reference internal" href="#module-trigger.utils.notifications.events" title="trigger.utils.notifications.events"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.utils.notifications.events</span></tt></a><a class="headerlink" href="#module-trigger.utils.notifications.events" title="Permalink to this headline">¶</a></h3>
<p>Event objects for the notification system.</p>
<p>These are intended to be used within event handlers such as
<a class="reference internal" href="#trigger.utils.notifications.handlers.email_handler" title="trigger.utils.notifications.handlers.email_handler"><tt class="xref py py-obj docutils literal"><span class="pre">email_handler()</span></tt></a>.</p>
<p>If not customized within <a class="reference internal" href="../usage/configuration.html#std:setting-NOTIFICATION_HANDLERS"><tt class="xref std std-setting docutils literal"><span class="pre">NOTIFICATION_HANDLERS</span></tt></a>, the default
notification type is an <tt class="xref py py-obj docutils literal"><span class="pre">EmailEvent</span></tt> that is
handled by <a class="reference internal" href="#trigger.utils.notifications.handlers.email_handler" title="trigger.utils.notifications.handlers.email_handler"><tt class="xref py py-obj docutils literal"><span class="pre">email_handler</span></tt></a>.</p>
<dl class="class">
<dt id="trigger.utils.notifications.events.Event">
<em class="property">class </em><tt class="descclassname">trigger.utils.notifications.events.</tt><tt class="descname">Event</tt><big>(</big><em>**kwargs</em><big>)</big><a class="headerlink" href="#trigger.utils.notifications.events.Event" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for events.</p>
<p>It just populates the attribute dict with all keyword arguments thrown at
the constructor.</p>
<p>All <tt class="docutils literal"><span class="pre">Event</span></tt> objects are expected to have a <tt class="docutils literal"><span class="pre">.handle()</span></tt> method that
willl be called by a handler function. Any user-defined event objects must
have a working <tt class="docutils literal"><span class="pre">.handle()</span></tt> method that returns <tt class="docutils literal"><span class="pre">True</span></tt> upon success or
<tt class="docutils literal"><span class="pre">None</span></tt> upon a failure when handling the event passed to it.</p>
<p>If you specify <tt class="docutils literal"><span class="pre">required_args</span></tt>, these must have a value other than
<tt class="docutils literal"><span class="pre">None</span></tt> when passed to the constructor.</p>
</dd></dl>

<dl class="class">
<dt id="trigger.utils.notifications.events.Notification">
<em class="property">class </em><tt class="descclassname">trigger.utils.notifications.events.</tt><tt class="descname">Notification</tt><big>(</big><em>title=None</em>, <em>message=None</em>, <em>sender=None</em>, <em>recipients=None</em>, <em>event_status='failure'</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#trigger.utils.notifications.events.Notification" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for notification events.</p>
<p>The <tt class="docutils literal"><span class="pre">title</span></tt> and <tt class="docutils literal"><span class="pre">message</span></tt> arguments are the only two that are required.
This is to simplify the interface when sending notifications and will cause
notifications to send from the default <tt class="docutils literal"><span class="pre">sender</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">default</span>
<span class="pre">``recipients</span></tt> that are specified withing the global settings.</p>
<p>If <tt class="docutils literal"><span class="pre">sender</span></tt> or <tt class="docutils literal"><span class="pre">recipients</span></tt> are specified, they will override the
global defaults.</p>
<p>Note that this base class has no <tt class="docutils literal"><span class="pre">.handle()</span></tt> method defined.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>title</strong> &#8211; The title/subject of the notification</li>
<li><strong>message</strong> &#8211; The message/body of the notification</li>
<li><strong>sender</strong> &#8211; A string representing the sender of the notification (such as an email
address or a hostname)</li>
<li><strong>recipients</strong> &#8211; An iterable containing strings representing the recipients of of the
notification (such as a list of emails or hostnames)</li>
<li><strong>event_status</strong> &#8211; Whether this event is a <tt class="xref py py-obj docutils literal"><span class="pre">failure</span></tt> or a <tt class="xref py py-obj docutils literal"><span class="pre">success</span></tt></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="trigger.utils.notifications.events.EmailEvent">
<em class="property">class </em><tt class="descclassname">trigger.utils.notifications.events.</tt><tt class="descname">EmailEvent</tt><big>(</big><em>title=None</em>, <em>message=None</em>, <em>sender=None</em>, <em>recipients=None</em>, <em>event_status='failure'</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#trigger.utils.notifications.events.EmailEvent" title="Permalink to this definition">¶</a></dt>
<dd><p>An email notification event.</p>
</dd></dl>

</div>
</div>
<div class="section" id="module-trigger.utils.rcs">
<span id="trigger-utils-rcs"></span><h2><a class="reference internal" href="#module-trigger.utils.rcs" title="trigger.utils.rcs"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.utils.rcs</span></tt></a><a class="headerlink" href="#module-trigger.utils.rcs" title="Permalink to this headline">¶</a></h2>
<p>Provides a CVS like wrapper for local RCS (Revision Control System) with common commands.</p>
<dl class="class">
<dt id="trigger.utils.rcs.RCS">
<em class="property">class </em><tt class="descclassname">trigger.utils.rcs.</tt><tt class="descname">RCS</tt><big>(</big><em>filename</em>, <em>create=True</em><big>)</big><a class="headerlink" href="#trigger.utils.rcs.RCS" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple wrapper for CLI <tt class="docutils literal"><span class="pre">rcs</span></tt> command. An instance is bound to a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>file</strong> &#8211; The filename (or path) to use</li>
<li><strong>create</strong> &#8211; If set, create the file if it doesn&#8217;t exist</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.utils.rcs</span> <span class="kn">import</span> <span class="n">RCS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span> <span class="o">=</span> <span class="n">RCS</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;foo&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;bar</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">checkin</span><span class="p">(</span><span class="s">&#39;This is my commit message&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">rcs</span><span class="o">.</span><span class="n">log</span><span class="p">()</span>
<span class="go">RCS file: RCS/foo,v</span>
<span class="go">Working file: foo</span>
<span class="go">head: 1.2</span>
<span class="go">branch:</span>
<span class="go">locks: strict</span>
<span class="go">access list:</span>
<span class="go">symbolic names:</span>
<span class="go">keyword substitution: kv</span>
<span class="go">total revisions: 2;     selected revisions: 2</span>
<span class="go">description:</span>
<span class="go">----------------------------</span>
<span class="go">revision 1.2</span>
<span class="go">date: 2011/07/08 21:01:28;  author: jathan;  state: Exp;  lines: +1 -0</span>
<span class="go">This is my commit message</span>
<span class="go">----------------------------</span>
<span class="go">revision 1.1</span>
<span class="go">date: 2011/07/08 20:56:53;  author: jathan;  state: Exp;</span>
<span class="go">first commit</span>
</pre></div>
</div>
<dl class="method">
<dt id="trigger.utils.rcs.RCS.checkin">
<tt class="descname">checkin</tt><big>(</big><em>logmsg='none'</em>, <em>initial=False</em>, <em>verbose=False</em><big>)</big><a class="headerlink" href="#trigger.utils.rcs.RCS.checkin" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an RCS checkin. If successful this also unlocks the file, so
there is no need to unlock it afterward.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logmsg</strong> &#8211; The RCS commit message</li>
<li><strong>initial</strong> &#8211; Initialize a new RCS file, but do not deposit any revision</li>
<li><strong>verbose</strong> &#8211; Print command output</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">checkin</span><span class="p">(</span><span class="s">&#39;This is my commit message&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="trigger.utils.rcs.RCS.lock">
<tt class="descname">lock</tt><big>(</big><em>verbose=False</em><big>)</big><a class="headerlink" href="#trigger.utils.rcs.RCS.lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an RCS checkout with lock. Returns boolean of whether lock
was sucessful.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>verbose</strong> &#8211; Print command output</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">lock</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="trigger.utils.rcs.RCS.lock_loop">
<tt class="descname">lock_loop</tt><big>(</big><em>callback=None</em>, <em>timeout=5</em>, <em>verbose=False</em><big>)</big><a class="headerlink" href="#trigger.utils.rcs.RCS.lock_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep trying to lock the file until a lock is obtained.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>callback</strong> &#8211; The function to call after lock is complete</li>
<li><strong>timeout</strong> &#8211; How long to sleep between lock attempts</li>
<li><strong>verbose</strong> &#8211; Print command output</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Default:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">lock_loop</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> 
<span class="go">Sleeping to wait for the lock on the file: foo</span>
<span class="go">Sleeping to wait for the lock on the file: foo</span>
</pre></div>
</div>
</dd>
<dt>Verbose:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">lock_loop</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">RCS/foo,v  --&gt;  foo</span>
<span class="go">co: RCS/foo,v: Revision 1.2 is already locked by joe.</span>
<span class="go">Sleeping to wait for the lock on the file: foo</span>
<span class="go">RCS/foo,v  --&gt;  foo</span>
<span class="go">co: RCS/foo,v: Revision 1.2 is already locked by joe.</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="trigger.utils.rcs.RCS.log">
<tt class="descname">log</tt><big>(</big><big>)</big><a class="headerlink" href="#trigger.utils.rcs.RCS.log" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the RCS log as a string (see above).</p>
</dd></dl>

<dl class="method">
<dt id="trigger.utils.rcs.RCS.unlock">
<tt class="descname">unlock</tt><big>(</big><em>verbose=False</em><big>)</big><a class="headerlink" href="#trigger.utils.rcs.RCS.unlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform an RCS checkout with unlock (for cancelling changes).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>verbose</strong> &#8211; Print command output</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">rcs</span><span class="o">.</span><span class="n">unlock</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">trigger.utils</span></tt> &#8212; CLI tools and utilities library</a><ul>
<li><a class="reference internal" href="#module-trigger.utils.cli"><tt class="docutils literal"><span class="pre">trigger.utils.cli</span></tt></a></li>
<li><a class="reference internal" href="#module-trigger.utils.importlib"><tt class="docutils literal"><span class="pre">trigger.utils.importlib</span></tt></a></li>
<li><a class="reference internal" href="#module-trigger.utils.network"><tt class="docutils literal"><span class="pre">trigger.utils.network</span></tt></a></li>
<li><a class="reference internal" href="#trigger-utils-notifications"><tt class="docutils literal"><span class="pre">trigger.utils.notifications</span></tt></a><ul>
<li><a class="reference internal" href="#module-trigger.utils.notifications.handlers"><tt class="docutils literal"><span class="pre">trigger.utils.notifications.handlers</span></tt></a></li>
<li><a class="reference internal" href="#module-trigger.utils.notifications.events"><tt class="docutils literal"><span class="pre">trigger.utils.notifications.events</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-trigger.utils.rcs"><tt class="docutils literal"><span class="pre">trigger.utils.rcs</span></tt></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="twister.html"
                        title="previous chapter"><tt class="docutils literal"><span class="pre">trigger.twister</span></tt> &#8212; Asynchronous device interaction library</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/api/utils.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="twister.html" title="trigger.twister — Asynchronous device interaction library"
             >previous</a> |</li>
        <li><a href="../index.html">Trigger 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2015, AOL Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>