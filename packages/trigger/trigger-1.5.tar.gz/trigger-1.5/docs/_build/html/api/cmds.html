<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>trigger.cmds — Command execution library &mdash; Trigger 1.5 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Trigger 1.5 documentation" href="../index.html" />
    <link rel="next" title="trigger.conf — Configuration &amp; Settings module" href="conf.html" />
    <link rel="prev" title="trigger.changemgmt — Change management library" href="changemgmt.html" />
 
<style type="text/css">
    span.changelog-support {color: #4070A0;}
    span.changelog-bug {color: #A04040;}
    span.changelog-feature {color: #40A056;}
    a.changelog-release {font-weight: bold;}
</style>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="conf.html" title="trigger.conf — Configuration &amp; Settings module"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="changemgmt.html" title="trigger.changemgmt — Change management library"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Trigger 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-trigger.cmds">
<span id="trigger-cmds-command-execution-library"></span><h1><a class="reference internal" href="#module-trigger.cmds" title="trigger.cmds"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.cmds</span></tt></a> &#8212; Command execution library<a class="headerlink" href="#module-trigger.cmds" title="Permalink to this headline">¶</a></h1>
<p>This module abstracts the asynchronous execution of commands on multiple
network devices. It allows for integrated parsing and event-handling of return
data for rapid integration to existing or newly-created tools.</p>
<p>The <a class="reference internal" href="#trigger.cmds.Commando" title="trigger.cmds.Commando"><tt class="xref py py-obj docutils literal"><span class="pre">Commando</span></tt></a> class is designed to be extended but can still be
used as-is to execute commands and return the results as-is.</p>
<dl class="class">
<dt id="trigger.cmds.Commando">
<em class="property">class </em><tt class="descclassname">trigger.cmds.</tt><tt class="descname">Commando</tt><big>(</big><em>devices=None</em>, <em>commands=None</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>max_conns=10</em>, <em>verbose=False</em>, <em>timeout=30</em>, <em>production_only=True</em>, <em>allow_fallback=True</em>, <em>with_errors=True</em>, <em>force_cli=False</em>, <em>with_acls=False</em><big>)</big><a class="headerlink" href="#trigger.cmds.Commando" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute commands asynchronously on multiple network devices.</p>
<p>This class is designed to be extended but can still be used as-is to execute
commands and return the results as-is.</p>
<p>At the bare minimum you must specify a list of <tt class="docutils literal"><span class="pre">devices</span></tt> to interact with.
You may optionally specify a list of <tt class="docutils literal"><span class="pre">commands</span></tt> to execute on those
devices, but doing so will execute the same commands on every device
regardless of platform.</p>
<p>If <tt class="docutils literal"><span class="pre">commands</span></tt> are not specified, they will be expected to be emitted by
the <tt class="docutils literal"><span class="pre">generate</span></tt> method for a given platform. Otherwise no commands will be
executed.</p>
<p>If you wish to customize the commands executed by device, you must define a
<tt class="docutils literal"><span class="pre">to_{vendor_name}</span></tt> method containing your custom logic.</p>
<p>If you wish to customize what is done with command results returned from a
device, you must define a <tt class="docutils literal"><span class="pre">from_{vendor_name}</span></tt> method containing your
custom logic.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>devices</strong> &#8211; A list of device hostnames or <a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><tt class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></tt></a> objects</li>
<li><strong>commands</strong> &#8211; (Optional) A list of commands to execute on the <tt class="docutils literal"><span class="pre">devices</span></tt>.</li>
<li><strong>creds</strong> &#8211; (Optional) A 3-tuple of (username, password, realm). If only (username,
password) are provided, realm will be populated from
<a class="reference internal" href="../usage/configuration.html#std:setting-DEFAULT_REALM"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_REALM</span></tt></a>. If unset it will fetch from <tt class="docutils literal"><span class="pre">.tacacsrc</span></tt>.</li>
<li><strong>incremental</strong> &#8211; (Optional) A callback that will be called with an empty sequence upon
connection and then called every time a result comes back from the
device, with the list of all results.</li>
<li><strong>max_conns</strong> &#8211; (Optional) The maximum number of simultaneous connections to keep open.</li>
<li><strong>verbose</strong> &#8211; (Optional) Whether or not to display informational messages to the
console.</li>
<li><strong>timeout</strong> &#8211; (Optional) Time in seconds to wait for each command executed to return a
result. Set to <tt class="docutils literal"><span class="pre">None</span></tt> to disable timeout (not recommended).</li>
<li><strong>production_only</strong> &#8211; (Optional) If set, includes all devices instead of excluding any devices
where <tt class="docutils literal"><span class="pre">adminStatus</span></tt> is not set to <tt class="docutils literal"><span class="pre">PRODUCTION</span></tt>.</li>
<li><strong>allow_fallback</strong> &#8211; If set (default), allow fallback to base parse/generate methods when
they are not customized in a subclass, otherwise an exception is raised
when a method is called that has not been explicitly defined.</li>
<li><strong>with_errors</strong> &#8211; (Optional) Return exceptions as results instead of raising them. The
default is to always return them.</li>
<li><strong>force_cli</strong> &#8211; (Optional) Juniper only. If set, sends commands using CLI instead of
Junoscript.</li>
<li><strong>with_acls</strong> &#8211; Whether to load ACL associations (requires Redis). Defaults to whatever
is specified in settings.WITH_ACLS</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="trigger.cmds.Commando.errback">
<tt class="descname">errback</tt><big>(</big><em>failure</em>, <em>device</em><big>)</big><a class="headerlink" href="#trigger.cmds.Commando.errback" title="Permalink to this definition">¶</a></dt>
<dd><p>The default errback. Overload for custom behavior but make sure it
always decrements the connections.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>failure</strong> &#8211; Usually a Twisted <tt class="docutils literal"><span class="pre">Failure</span></tt> instance.</li>
<li><strong>device</strong> &#8211; A <a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><tt class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></tt></a> object</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.Commando.generate">
<tt class="descname">generate</tt><big>(</big><em>device</em>, <em>commands=None</em>, <em>extra=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.Commando.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate commands to be run on a device. If you don&#8217;t provide
<tt class="docutils literal"><span class="pre">commands</span></tt> to the class constructor, this will return an empty list.</p>
<p>Define a &#8216;to_{vendor_name}&#8217; method to customize the behavior for each
platform.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> (<a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><tt class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></tt></a>) &#8211; NetDevice object</li>
<li><strong>commands</strong> (<em>list</em>) &#8211; (Optional) A list of commands to execute on the device. If not
specified in they will be inherited from commands passed to the
class constructor.</li>
<li><strong>extra</strong> &#8211; (Optional) A dictionary of extra data to send to the generate
method for the device.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.Commando.map_results">
<tt class="descname">map_results</tt><big>(</big><em>commands=None</em>, <em>results=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.Commando.map_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dict of <tt class="docutils literal"><span class="pre">{command:</span> <span class="pre">result,</span> <span class="pre">...}</span></tt></p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.Commando.parse">
<tt class="descname">parse</tt><big>(</big><em>results</em>, <em>device</em>, <em>commands=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.Commando.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse output from a device. Calls to <tt class="docutils literal"><span class="pre">self._lookup_method</span></tt> to find
specific <tt class="docutils literal"><span class="pre">from</span></tt> method.</p>
<p>Define a &#8216;from_{vendor_name}&#8217; method to customize the behavior for each
platform.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>results</strong> (<em>list</em>) &#8211; The results of the commands executed on the device</li>
<li><strong>device</strong> (<a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><tt class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></tt></a>) &#8211; Device object</li>
<li><strong>commands</strong> (<em>list</em>) &#8211; (Optional) A list of commands to execute on the device. If not
specified in they will be inherited from commands passed to the
class constructor.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="trigger.cmds.Commando.reactor_running">
<tt class="descname">reactor_running</tt><a class="headerlink" href="#trigger.cmds.Commando.reactor_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether reactor event loop is running or not</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.Commando.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#trigger.cmds.Commando.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Nothing happens until you execute this to perform the actual work.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.Commando.select_next_device">
<tt class="descname">select_next_device</tt><big>(</big><em>jobs=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.Commando.select_next_device" title="Permalink to this definition">¶</a></dt>
<dd><p>Select another device for the active queue.</p>
<p>Currently only returns the next device in the job queue. This is
abstracted out so that this behavior may be customized, such as for
future support for incremental callbacks.</p>
<p>If a device is determined to be invalid, you must return <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jobs</strong> &#8211; (Optional) The jobs queue. If not set, uses <tt class="docutils literal"><span class="pre">self.jobs</span></tt>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A <a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><tt class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></tt></a> object or <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.Commando.store_error">
<tt class="descname">store_error</tt><big>(</big><em>device</em>, <em>error</em><big>)</big><a class="headerlink" href="#trigger.cmds.Commando.store_error" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple method for storing an error called by all default
parse/generate methods.</p>
<p>If you want to customize the default method for storing results,
overload this in your subclass.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> &#8211; A <a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><tt class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></tt></a> object</li>
<li><strong>error</strong> &#8211; The error to store. Anything you want really, but usually a Twisted
<tt class="docutils literal"><span class="pre">Failure</span></tt> instance.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.Commando.store_results">
<tt class="descname">store_results</tt><big>(</big><em>device</em>, <em>results</em><big>)</big><a class="headerlink" href="#trigger.cmds.Commando.store_results" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple method for storing results called by all default
parse/generate methods.</p>
<p>If you want to customize the default method for storing results,
overload this in your subclass.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>device</strong> &#8211; A <a class="reference internal" href="netdevices.html#trigger.netdevices.NetDevice" title="trigger.netdevices.NetDevice"><tt class="xref py py-obj docutils literal"><span class="pre">NetDevice</span></tt></a> object</li>
<li><strong>results</strong> &#8211; The results to store. Anything you want really.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.Commando.to_juniper">
<tt class="descname">to_juniper</tt><big>(</big><em>device</em>, <em>commands=None</em>, <em>extra=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.Commando.to_juniper" title="Permalink to this definition">¶</a></dt>
<dd><p>This just creates a series of <tt class="docutils literal"><span class="pre">&lt;command&gt;foo&lt;/command&gt;</span></tt> elements to
pass along to execute_junoscript()</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.cmds.ReactorlessCommando">
<em class="property">class </em><tt class="descclassname">trigger.cmds.</tt><tt class="descname">ReactorlessCommando</tt><big>(</big><em>devices=None</em>, <em>commands=None</em>, <em>creds=None</em>, <em>incremental=None</em>, <em>max_conns=10</em>, <em>verbose=False</em>, <em>timeout=30</em>, <em>production_only=True</em>, <em>allow_fallback=True</em>, <em>with_errors=True</em>, <em>force_cli=False</em>, <em>with_acls=False</em><big>)</big><a class="headerlink" href="#trigger.cmds.ReactorlessCommando" title="Permalink to this definition">¶</a></dt>
<dd><p>A reactor-less Commando subclass.</p>
<p>This allows multiple instances to coexist, with the side-effect that you
have to manage the reactor start/stop manually.</p>
<p>An example of how this could be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">twisted.internet</span> <span class="kn">import</span> <span class="n">defer</span><span class="p">,</span> <span class="n">reactor</span>

<span class="n">devices</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dev1&#39;</span><span class="p">,</span> <span class="s">&#39;dev2&#39;</span><span class="p">]</span>

<span class="c"># Our Commando instances. This is an example  to show we have two instances</span>
<span class="c"># co-existing under the same reactor.</span>
<span class="n">c1</span> <span class="o">=</span> <span class="n">ShowClock</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span>
<span class="n">c2</span> <span class="o">=</span> <span class="n">ShowUsers</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span>
<span class="n">instances</span> <span class="o">=</span> <span class="p">[</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">]</span>

<span class="c"># Call the run method for each instance to get a list of Deferred task objects.</span>
<span class="n">deferreds</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
    <span class="n">deferreds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">run</span><span class="p">())</span>

<span class="c"># Here we use a DeferredList to track a list of Deferred tasks that only</span>
<span class="c"># returns once they&#39;ve all completed.</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">defer</span><span class="o">.</span><span class="n">DeferredList</span><span class="p">(</span><span class="n">deferreds</span><span class="p">)</span>

<span class="c"># Once every task has returned a result, stop the reactor</span>
<span class="n">d</span><span class="o">.</span><span class="n">addBoth</span><span class="p">(</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span> <span class="n">reactor</span><span class="o">.</span><span class="n">stop</span><span class="p">())</span>

<span class="c"># And... finally, start the reactor to kick things off.</span>
<span class="n">reactor</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="c"># Inspect your results</span>
<span class="k">print</span> <span class="n">d</span><span class="o">.</span><span class="n">result</span>
</pre></div>
</div>
<dl class="method">
<dt id="trigger.cmds.ReactorlessCommando.monitor_result">
<tt class="descname">monitor_result</tt><big>(</big><em>result</em>, <em>reactor</em><big>)</big><a class="headerlink" href="#trigger.cmds.ReactorlessCommando.monitor_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop periodically or until the factory stops to check if we&#8217;re
<tt class="docutils literal"><span class="pre">all_done</span></tt> and then return the results.</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.ReactorlessCommando.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#trigger.cmds.ReactorlessCommando.run" title="Permalink to this definition">¶</a></dt>
<dd><p>We&#8217;ve overloaded the run method to return a Deferred task object.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="trigger.cmds.NetACLInfo">
<em class="property">class </em><tt class="descclassname">trigger.cmds.</tt><tt class="descname">NetACLInfo</tt><big>(</big><em>**args</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to fetch and parse interface information. Exposes a config
attribute which is a dictionary of devices passed to the constructor and
their interface information.</p>
<p>Each device is a dictionary of interfaces. Each interface field will
default to an empty list if not populated after parsing.  Below is a
skeleton of the basic config, with expected fields:</p>
<div class="highlight-python"><div class="highlight"><pre>config {
    &#39;device1&#39;: {
        &#39;interface1&#39;: {
            &#39;acl_in&#39;: [],
            &#39;acl_out&#39;: [],
            &#39;addr&#39;: [],
            &#39;description&#39;: [],
            &#39;subnets&#39;: [],
        }
    }
}
</pre></div>
</div>
<p>Interface field descriptions:</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">addr:</th><td class="field-body">List of <tt class="docutils literal"><span class="pre">IPy.IP</span></tt> objects of interface addresses</td>
</tr>
<tr class="field-even field"><th class="field-name">acl_in:</th><td class="field-body">List of inbound ACL names</td>
</tr>
<tr class="field-odd field"><th class="field-name">acl_out:</th><td class="field-body">List of outbound ACL names</td>
</tr>
<tr class="field-even field"><th class="field-name">description:</th><td class="field-body">List of interface description(s)</td>
</tr>
<tr class="field-odd field"><th class="field-name">subnets:</th><td class="field-body">List of <tt class="docutils literal"><span class="pre">IPy.IP</span></tt> objects of interface networks/CIDRs</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">NetACLInfo</span><span class="p">(</span><span class="n">devices</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;jm10-cc101-lab.lab.aol.net&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Fetching jm10-cc101-lab.lab.aol.net</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&lt;NetDevice: jm10-cc101-lab.lab.aol.net&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">keys</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">dev</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;lo0.0&#39;, &#39;ge-0/0/0.0&#39;, &#39;ge-0/2/0.0&#39;, &#39;ge-0/1/0.0&#39;, &#39;fxp0.0&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">dev</span><span class="p">][</span><span class="s">&#39;lo0.0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;acl_in&#39;, &#39;subnets&#39;, &#39;addr&#39;, &#39;acl_out&#39;, &#39;description&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lo0</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">dev</span><span class="p">][</span><span class="s">&#39;lo0.0&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lo0</span><span class="p">[</span><span class="s">&#39;acl_in&#39;</span><span class="p">];</span> <span class="n">lo0</span><span class="p">[</span><span class="s">&#39;addr&#39;</span><span class="p">]</span>
<span class="go">[&#39;abc123&#39;]</span>
<span class="go">[IP(&#39;66.185.128.160&#39;)]</span>
</pre></div>
</div>
<p>This accepts all arguments from the <a class="reference internal" href="#trigger.cmds.Commando" title="trigger.cmds.Commando"><tt class="xref py py-obj docutils literal"><span class="pre">Commando</span></tt></a> parent class,
as well as this one extra:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>skip_disabled</strong> &#8211; Whether to include interface names without any information. (Default:
<tt class="docutils literal"><span class="pre">True</span></tt>)</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="trigger.cmds.NetACLInfo.IPhost">
<tt class="descname">IPhost</tt><big>(</big><em>addr</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.IPhost" title="Permalink to this definition">¶</a></dt>
<dd><p>Given &#8216;172.20.1.4/24&#8217;, return IP(&#8216;172.20.1.4/32&#8217;).</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.IPsubnet">
<tt class="descname">IPsubnet</tt><big>(</big><em>addr</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.IPsubnet" title="Permalink to this definition">¶</a></dt>
<dd><p>Given &#8216;172.20.1.4/24&#8217;, return IP(&#8216;172.20.1.0/24&#8217;).</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.from_arista">
<tt class="descname">from_arista</tt><big>(</big><em>data</em>, <em>device</em>, <em>commands=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.from_arista" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse IOS config based on EBNF grammar</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.from_brocade">
<tt class="descname">from_brocade</tt><big>(</big><em>data</em>, <em>device</em>, <em>commands=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.from_brocade" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse IOS config based on EBNF grammar</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.from_cisco">
<tt class="descname">from_cisco</tt><big>(</big><em>data</em>, <em>device</em>, <em>commands=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.from_cisco" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse IOS config based on EBNF grammar</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.from_force10">
<tt class="descname">from_force10</tt><big>(</big><em>data</em>, <em>device</em>, <em>commands=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.from_force10" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse IOS config based on EBNF grammar</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.from_foundry">
<tt class="descname">from_foundry</tt><big>(</big><em>data</em>, <em>device</em>, <em>commands=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.from_foundry" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse IOS config based on EBNF grammar</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.from_juniper">
<tt class="descname">from_juniper</tt><big>(</big><em>data</em>, <em>device</em>, <em>commands=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.from_juniper" title="Permalink to this definition">¶</a></dt>
<dd><p>Do all the magic to parse Junos interfaces</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.to_arista">
<tt class="descname">to_arista</tt><big>(</big><em>dev</em>, <em>commands=None</em>, <em>extra=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.to_arista" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to IOS, but:</p>
<blockquote>
<div><ul class="simple">
<li>Arista has no &#8220;show conf&#8221; so we have to do &#8220;show run&#8221;</li>
<li>The regex used in the CLI for Arista is more &#8220;precise&#8221; so we have
to change the pattern a little bit compared to the on in
generate_ios_cmd</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.to_brocade">
<tt class="descname">to_brocade</tt><big>(</big><em>dev</em>, <em>commands=None</em>, <em>extra=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.to_brocade" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the &#8220;show me all interface information&#8221; command we pass to
IOS devices</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.to_cisco">
<tt class="descname">to_cisco</tt><big>(</big><em>dev</em>, <em>commands=None</em>, <em>extra=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.to_cisco" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the &#8220;show me all interface information&#8221; command we pass to
IOS devices</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.to_force10">
<tt class="descname">to_force10</tt><big>(</big><em>dev</em>, <em>commands=None</em>, <em>extra=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.to_force10" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Similar to IOS, but:</dt>
<dd><ul class="first last simple">
<li>You only get the &#8220;grep&#8221; (&#8220;include&#8221; equivalent) when using &#8220;show
run&#8221;.</li>
<li>The regex must be quoted.</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.to_foundry">
<tt class="descname">to_foundry</tt><big>(</big><em>dev</em>, <em>commands=None</em>, <em>extra=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.to_foundry" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the &#8220;show me all interface information&#8221; command we pass to
IOS devices</p>
</dd></dl>

<dl class="method">
<dt id="trigger.cmds.NetACLInfo.to_juniper">
<tt class="descname">to_juniper</tt><big>(</big><em>dev</em>, <em>commands=None</em>, <em>extra=None</em><big>)</big><a class="headerlink" href="#trigger.cmds.NetACLInfo.to_juniper" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates an etree.Element object suitable for use with
JunoScript</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="changemgmt.html"
                        title="previous chapter"><tt class="docutils literal"><span class="pre">trigger.changemgmt</span></tt> &#8212; Change management library</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="conf.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">trigger.conf</span></tt> &#8212; Configuration &amp; Settings module</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/api/cmds.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="conf.html" title="trigger.conf — Configuration &amp; Settings module"
             >next</a> |</li>
        <li class="right" >
          <a href="changemgmt.html" title="trigger.changemgmt — Change management library"
             >previous</a> |</li>
        <li><a href="../index.html">Trigger 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2015, AOL Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>