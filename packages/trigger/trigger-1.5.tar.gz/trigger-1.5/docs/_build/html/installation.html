<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; Trigger 1.5 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Trigger 1.5 documentation" href="index.html" />
    <link rel="next" title="Command-line Tools" href="usage/cli.html" />
    <link rel="prev" title="Simple Examples" href="examples.html" />
 
<style type="text/css">
    span.changelog-support {color: #4070A0;}
    span.changelog-bug {color: #A04040;}
    span.changelog-feature {color: #40A056;}
    a.changelog-release {font-weight: bold;}
</style>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="usage/cli.html" title="Command-line Tools"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Simple Examples"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Trigger 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>This is a work in progress. Please bear with us as we expand and improve this
documentation. If you have any feedback, please don&#8217;t hesitate to <a class="reference external" href="http://trigger.readthedocs.org/en/latest/index.html#getting-help">contact us</a>!!</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#dependencies" id="id13">Dependencies</a><ul>
<li><a class="reference internal" href="#python" id="id14">Python</a></li>
<li><a class="reference internal" href="#setuptools" id="id15">setuptools</a></li>
<li><a class="reference internal" href="#pyasn1" id="id16">PyASN1</a></li>
<li><a class="reference internal" href="#pycrypto" id="id17">PyCrypto</a></li>
<li><a class="reference internal" href="#twisted" id="id18">Twisted</a></li>
<li><a class="reference internal" href="#redis" id="id19">Redis</a></li>
<li><a class="reference internal" href="#ipy" id="id20">IPy</a></li>
<li><a class="reference internal" href="#pytz" id="id21">pytz</a></li>
<li><a class="reference internal" href="#simpleparse" id="id22">SimpleParse</a></li>
<li><a class="reference internal" href="#other-dependencies" id="id23">Other Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-trigger" id="id24">Installing Trigger</a><ul>
<li><a class="reference internal" href="#install-trigger-package" id="id25">Install Trigger package</a></li>
<li><a class="reference internal" href="#create-configuration-directory" id="id26">Create configuration directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-configuration" id="id27">Basic Configuration</a><ul>
<li><a class="reference internal" href="#copy-settings-py" id="id28">Copy settings.py</a></li>
<li><a class="reference internal" href="#copy-metadata-file" id="id29">Copy metadata file</a></li>
<li><a class="reference internal" href="#copy-shared-secret-file" id="id30">Copy shared secret file</a></li>
<li><a class="reference internal" href="#copy-autoacl-py" id="id31">Copy autoacl.py</a></li>
<li><a class="reference internal" href="#copy-bounce-py" id="id32">Copy bounce.py</a></li>
</ul>
</li>
<li><a class="reference internal" href="#verifying-functionality" id="id33">Verifying Functionality</a><ul>
<li><a class="reference internal" href="#netdevices" id="id34">NetDevices</a></li>
<li><a class="reference internal" href="#acl-parser" id="id35">ACL Parser</a></li>
<li><a class="reference internal" href="#acl-database" id="id36">ACL Database</a></li>
</ul>
</li>
<li><a class="reference internal" href="#integrated-load-queue" id="id37">Integrated Load Queue</a><ul>
<li><a class="reference internal" href="#database-drivers" id="id38">Database Drivers</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="dependencies">
<h2><a class="toc-backref" href="#id13">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>In order for Trigger&#8217;s core functionality to work, you will need the primary
pieces of software:</p>
<ul class="simple">
<li>the Python programming language (version 2.6 or higher);</li>
<li>the <tt class="docutils literal"><span class="pre">setuptools</span></tt> packaging/installation library;</li>
<li>the Redis key-value server (and companion Python interface);</li>
<li>the <tt class="docutils literal"><span class="pre">IPy</span></tt> IP address parsing library;</li>
<li>the PyASN1 library;</li>
<li>the PyCrypto cryptography library;</li>
<li>and the Twisted event-driven networking engine.</li>
</ul>
<p>Trigger has a tricky set of dependencies. If you want to take full advantage of
all of Trigger&#8217;s functionality, you&#8217;ll need them all. If you only want to use
certain parts, you might not need them all. Each dependency will list the
components that utilize it to help you make an informed decision.</p>
<p>Please read on for important details on each dependency &#8211; there are a few
gotchas.</p>
<div class="section" id="python">
<h3><a class="toc-backref" href="#id14">Python</a><a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h3>
<p>Obviously Trigger requires Python. Only version 2.6 is supported, but Python 2.7
should be just fine. There is currently no official support for Python 3.x. We
cannot yet say with confidence that we have worked out all of the legacy kinks
from when Trigger was first developed against Python 2.3.</p>
</div>
<div class="section" id="setuptools">
<h3><a class="toc-backref" href="#id15">setuptools</a><a class="headerlink" href="#setuptools" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/setuptools">Setuptools</a> comes with some Python installations by default; if yours doesn&#8217;t,
you&#8217;ll need to grab it. In such situations it&#8217;s typically packaged as
<tt class="docutils literal"><span class="pre">python-setuptools</span></tt>, <tt class="docutils literal"><span class="pre">py26-setuptools</span></tt> or similar. Trigger will likely drop its
setuptools dependency in the future, or include alternative support for the
<a class="reference external" href="http://pypi.python.org/pypi/distribute">Distribute</a> project, but for now setuptools is required for installation.</p>
</div>
<div class="section" id="pyasn1">
<h3><a class="toc-backref" href="#id16">PyASN1</a><a class="headerlink" href="#pyasn1" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pyasn1.sourceforge.net/">PyASN1</a> is a dependency of Twisted Conch
which implements Abstract Syntax Notation One (<a class="reference external" href="http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_1x">ASN.1</a>) and is used to
encode/decode public &amp; private OpenSSH keys.</p>
</div>
<div class="section" id="pycrypto">
<h3><a class="toc-backref" href="#id17">PyCrypto</a><a class="headerlink" href="#pycrypto" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://www.amk.ca/python/code/crypto.html">PyCrypto</a> is a dependency of
Twisted Conch which provides the low-level (C-based) encryption algorithms used to
run SSH. There are a couple gotchas associated with installing PyCrypto: its
compatibility with Python&#8217;s package tools, and the fact that it is a C-based
extension.</p>
</div>
<div class="section" id="twisted">
<h3><a class="toc-backref" href="#id18">Twisted</a><a class="headerlink" href="#twisted" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://twistedmatrix.com/">Twisted</a> is huge and has a few dependencies
of its. We told you this was tricky! To make things easier, please make sure you
install the full-blown Twisted source tarball. You especially need
<a class="reference external" href="http://twistedmatrix.com/trac/wiki/TwistedConch">Twisted Conch</a>, which is
used to run SSH.</p>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/cmds.html#module-trigger.cmds" title="trigger.cmds"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.cmds</span></tt></a></li>
<li><a class="reference internal" href="api/twister.html#module-trigger.twister" title="trigger.twister"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.twister</span></tt></a></li>
</ul>
</div>
<div class="section" id="redis">
<h3><a class="toc-backref" href="#id19">Redis</a><a class="headerlink" href="#redis" title="Permalink to this headline">¶</a></h3>
<p>Trigger uses <a class="reference external" href="http://redis.io/download">Redis</a> as a datastore for ACL information including device
associations and the integrated change queue. Please follow the instructions
on the Redis site to get Redis running.</p>
<p>If you&#8217;re using Ubuntu, it&#8217;s as simple as:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install redis-server
</pre></div>
</div>
<p>The <a class="reference external" href="http://pypi.python.org/pypi/redis">Python redis</a> client is required
to interact with Redis.</p>
<p>Trigger currently assumes that you&#8217;re running Redis on localhost and on the
default port (<tt class="docutils literal"><span class="pre">6379</span></tt>). If you would like to change this, update
<a class="reference internal" href="usage/configuration.html#std:setting-REDIS_HOST"><tt class="xref std std-setting docutils literal"><span class="pre">REDIS_HOST</span></tt></a> in <tt class="docutils literal"><span class="pre">settings.py</span></tt> to reflect the IP address or hostname
of your Redis instance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may globally disable the use of Redis for loading ACL associations by
setting <a class="reference internal" href="usage/configuration.html#std:setting-WITH_ACLS"><tt class="xref std std-setting docutils literal"><span class="pre">WITH_ACLS</span></tt></a> to <tt class="docutils literal"><span class="pre">False</span></tt>. Several libraries that interact
with devices also have a <tt class="docutils literal"><span class="pre">with_acls</span></tt> argument to toggle this at runtime.</p>
</div>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.autoacl" title="trigger.acl.autoacl"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.acl.autoacl</span></tt></a></li>
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.db" title="trigger.acl.db"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.acl.db</span></tt></a></li>
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.tools" title="trigger.acl.tools"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.acl.tools</span></tt></a></li>
<li><a class="reference internal" href="api/netdevices.html#module-trigger.netdevices" title="trigger.netdevices"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.netdevices</span></tt></a></li>
</ul>
</div>
<div class="section" id="ipy">
<h3><a class="toc-backref" href="#id20">IPy</a><a class="headerlink" href="#ipy" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/IPy">IPy</a> is a class and tools for handling
of IPv4 and IPv6 addresses and networks. It is used by Trigger for parsing and
handling IP addresses.</p>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.db" title="trigger.acl.db"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.acl.db</span></tt></a></li>
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.parser" title="trigger.acl.parser"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.acl.parser</span></tt></a></li>
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.tools" title="trigger.acl.tools"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.acl.tools</span></tt></a></li>
<li><a class="reference internal" href="api/cmds.html#module-trigger.cmds" title="trigger.cmds"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.cmds</span></tt></a></li>
<li><tt class="xref py py-mod docutils literal"><span class="pre">trigger.conf.settings</span></tt></li>
<li><a class="reference internal" href="api/netscreen.html#module-trigger.netscreen" title="trigger.netscreen"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.netscreen</span></tt></a></li>
</ul>
</div>
<div class="section" id="pytz">
<h3><a class="toc-backref" href="#id21">pytz</a><a class="headerlink" href="#pytz" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/pytz">pytz</a> is an immensely powerful time zone
library for Python that allows accurate and cross platform timezone calculations.
It is used by Trigger&#8217;s change management interface to allow for strict adherance
to scheduled maintenance events.</p>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.db" title="trigger.acl.db"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.acl.db</span></tt></a></li>
<li><a class="reference internal" href="api/changemgmt.html#module-trigger.changemgmt" title="trigger.changemgmt"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.changemgmt</span></tt></a></li>
<li><a class="reference internal" href="api/netdevices.html#module-trigger.netdevices" title="trigger.netdevices"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.netdevices</span></tt></a></li>
</ul>
</div>
<div class="section" id="simpleparse">
<h3><a class="toc-backref" href="#id22">SimpleParse</a><a class="headerlink" href="#simpleparse" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/SimpleParse">SimpleParse</a> is an extremely fast parser
generator for Python that converts EBNF grammars into parsers. It is used by Trigger&#8217;s
ACL parser to allow us to translate ACLs from flat files into vendor-agnostic objects.</p>
<p>Used by:</p>
<ul class="simple">
<li><a class="reference internal" href="api/acl.html#module-trigger.acl.parser" title="trigger.acl.parser"><tt class="xref py py-mod docutils literal"><span class="pre">trigger.acl.parser</span></tt></a></li>
</ul>
<div class="section" id="package-tools">
<h4>Package tools<a class="headerlink" href="#package-tools" title="Permalink to this headline">¶</a></h4>
<p>We strongly recommend using <a class="reference external" href="http://pypi.python.org/pypi/pip">pip</a> to install
Trigger as it is newer and generally better than <tt class="docutils literal"><span class="pre">easy_install</span></tt>. In either
case, these tools will automatically install of the dependencies for you
quickly and easily.</p>
</div>
</div>
<div class="section" id="other-dependencies">
<h3><a class="toc-backref" href="#id23">Other Dependencies</a><a class="headerlink" href="#other-dependencies" title="Permalink to this headline">¶</a></h3>
<p>Know for now that if you want to use the integrated load queue, you may
potentially require an additional database library.</p>
<p>See <a class="reference internal" href="#db-drivers"><em>Database Drivers</em></a> below for more information.</p>
</div>
</div>
<div class="section" id="installing-trigger">
<h2><a class="toc-backref" href="#id24">Installing Trigger</a><a class="headerlink" href="#installing-trigger" title="Permalink to this headline">¶</a></h2>
<p>The following steps will get you the very basic functionality and will be
improved over time. As mentioned at the top of this document, if you have any
feedback or questions, please get <a class="reference external" href="http://trigger.readthedocs.org/en/latest/index.html#getting-help">get in touch</a>!</p>
<div class="section" id="install-trigger-package">
<h3><a class="toc-backref" href="#id25">Install Trigger package</a><a class="headerlink" href="#install-trigger-package" title="Permalink to this headline">¶</a></h3>
<p>Using <a class="reference external" href="http://pypi.python.org/pypi/pip">pip</a>:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo pip install trigger
</pre></div>
</div>
<p>From source (which will use <tt class="docutils literal"><span class="pre">easy_install</span></tt>):</p>
<div class="highlight-python"><div class="highlight"><pre>sudo python setup.py install
</pre></div>
</div>
</div>
<div class="section" id="create-configuration-directory">
<h3><a class="toc-backref" href="#id26">Create configuration directory</a><a class="headerlink" href="#create-configuration-directory" title="Permalink to this headline">¶</a></h3>
<p>Trigger expects to find its configuration files to be in <tt class="docutils literal"><span class="pre">/etc/trigger</span></tt>. This
can be customized using the <a class="reference internal" href="usage/configuration.html#std:setting-PREFIX"><tt class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></tt></a> configuration variable within
<tt class="docutils literal"><span class="pre">settings.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo mkdir /etc/trigger
</pre></div>
</div>
<p>That&#8217;s it! Now you&#8217;re ready to configure Trigger.</p>
</div>
</div>
<div class="section" id="basic-configuration">
<h2><a class="toc-backref" href="#id27">Basic Configuration</a><a class="headerlink" href="#basic-configuration" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For these steps you&#8217;ll need to download the <a class="reference external" href="https://github.com/trigger/trigger/tarball/develop">Trigger tarball</a>, expand it, and then
navigate to the root directory (the same directory in which you&#8217;ll find
<tt class="docutils literal"><span class="pre">setup.py</span></tt>).</p>
</div>
<div class="section" id="copy-settings-py">
<h3><a class="toc-backref" href="#id28">Copy settings.py</a><a class="headerlink" href="#copy-settings-py" title="Permalink to this headline">¶</a></h3>
<p>Trigger expects <tt class="docutils literal"><span class="pre">settings.py</span></tt> to be in <tt class="docutils literal"><span class="pre">/etc/trigger</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo cp conf/trigger_settings.py /etc/trigger/settings.py
</pre></div>
</div>
<p>If you really don&#8217;t like this, you may override the default location by setting
the environment variable <tt class="docutils literal"><span class="pre">TRIGGER_SETTINGS</span></tt> to the desired location. If you
go this route, you must make sure all Trigger-based tools have this set prior
to any imports!</p>
</div>
<div class="section" id="copy-metadata-file">
<h3><a class="toc-backref" href="#id29">Copy metadata file</a><a class="headerlink" href="#copy-metadata-file" title="Permalink to this headline">¶</a></h3>
<p>Trigger&#8217;s <a class="reference internal" href="api/netdevices.html#module-trigger.netdevices" title="trigger.netdevices"><tt class="xref py py-obj docutils literal"><span class="pre">netdevices</span></tt></a> module expects to find the device metadata file
in <a class="reference internal" href="usage/configuration.html#std:setting-PREFIX"><tt class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></tt></a>. This file provides Trigger with information about your
devices and is at the core of Trigger’s device interaction. Anything that
communicates with devices relies on the metadata stored within this file.</p>
<p>For the purpose of basic config, we&#8217;ll just use the sample <tt class="docutils literal"><span class="pre">netdevices.json</span></tt> file:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo cp conf/netdevices.json /etc/trigger/netdevices.json
</pre></div>
</div>
<p>For more information on how Trigger uses the netdevices file please see
<a class="reference internal" href="usage/netdevices.html"><em>Working with NetDevices</em></a>.</p>
</div>
<div class="section" id="copy-shared-secret-file">
<h3><a class="toc-backref" href="#id30">Copy shared secret file</a><a class="headerlink" href="#copy-shared-secret-file" title="Permalink to this headline">¶</a></h3>
<p>By default, Trigger&#8217;s <a class="reference internal" href="api/tacacsrc.html#module-trigger.tacacsrc" title="trigger.tacacsrc"><tt class="xref py py-obj docutils literal"><span class="pre">tacacsrc</span></tt></a> module expects to find <tt class="docutils literal"><span class="pre">.tackf</span></tt> in
the <a class="reference internal" href="usage/configuration.html#std:setting-PREFIX"><tt class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></tt></a>. This is the location of the file that contains the
passphrase used for the symettric encryption of user credentials within the
<tt class="docutils literal"><span class="pre">.tacacsrc</span></tt> file. For starters, just use the sample file provided in the
Trigger distribution:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo cp tests/data/tackf /etc/trigger/.tackf
</pre></div>
</div>
<p>If you&#8217;re using a non-standard location, be sure to update the
<a class="reference internal" href="usage/configuration.html#std:setting-TACACSRC_KEYFILE"><tt class="xref std std-setting docutils literal"><span class="pre">TACACSRC_KEYFILE</span></tt></a> configuration variable within <tt class="docutils literal"><span class="pre">settings.py</span></tt> with the
location of <tt class="docutils literal"><span class="pre">.tackf</span></tt>!</p>
<p>For more information on how Trigger uses encryption to protect credentials
please see <a class="reference internal" href="usage/tacacsrc.html"><em>Managing Credentials with .tacacsrc</em></a>.</p>
</div>
<div class="section" id="copy-autoacl-py">
<h3><a class="toc-backref" href="#id31">Copy autoacl.py</a><a class="headerlink" href="#copy-autoacl-py" title="Permalink to this headline">¶</a></h3>
<p>Trigger&#8217;s <a class="reference internal" href="api/acl.html#module-trigger.acl.autoacl" title="trigger.acl.autoacl"><tt class="xref py py-obj docutils literal"><span class="pre">autoacl</span></tt></a> module expects to find <tt class="docutils literal"><span class="pre">autoacl.py</span></tt> in the
<a class="reference internal" href="usage/configuration.html#std:setting-PREFIX"><tt class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></tt></a>. This is used to customize the automatic ACL associations for
network devices.</p>
<div class="highlight-python"><div class="highlight"><pre>sudo cp conf/autoacl.py /etc/trigger/autoacl.py
</pre></div>
</div>
<p>If you&#8217;re using a non-standard location, be sure to update the
<a class="reference internal" href="usage/configuration.html#std:setting-AUTOACL_FILE"><tt class="xref std std-setting docutils literal"><span class="pre">AUTOACL_FILE</span></tt></a> configuration variable within <tt class="docutils literal"><span class="pre">settings.py</span></tt> with the
location of <tt class="docutils literal"><span class="pre">autoacl.py</span></tt>!</p>
</div>
<div class="section" id="copy-bounce-py">
<h3><a class="toc-backref" href="#id32">Copy bounce.py</a><a class="headerlink" href="#copy-bounce-py" title="Permalink to this headline">¶</a></h3>
<p>Trigger&#8217;s <a class="reference internal" href="api/changemgmt.html#trigger.changemgmt.bounce" title="trigger.changemgmt.bounce"><tt class="xref py py-obj docutils literal"><span class="pre">bounce</span></tt></a> module expects to find <tt class="docutils literal"><span class="pre">bounce.py</span></tt> in
the <a class="reference internal" href="usage/configuration.html#std:setting-PREFIX"><tt class="xref std std-setting docutils literal"><span class="pre">PREFIX</span></tt></a>. This module controls how change management (aka
maintenance or &#8220;bounce&#8221;) windows get auto-applied to network devices.</p>
<div class="highlight-python"><div class="highlight"><pre>sudo cp conf/bounce.py /etc/trigger/bounce.py
</pre></div>
</div>
<p>If you&#8217;re using a non-standard location, be sure to update the
<a class="reference internal" href="usage/configuration.html#std:setting-BOUNCE_FILE"><tt class="xref std std-setting docutils literal"><span class="pre">BOUNCE_FILE</span></tt></a> configuration variable within <tt class="docutils literal"><span class="pre">settings.py</span></tt> with the
location of <tt class="docutils literal"><span class="pre">bounce.py</span></tt>!</p>
</div>
</div>
<div class="section" id="verifying-functionality">
<h2><a class="toc-backref" href="#id33">Verifying Functionality</a><a class="headerlink" href="#verifying-functionality" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For these steps you&#8217;ll still need to be at the root directory of the
<a class="reference external" href="https://github.com/trigger/trigger/tarball/develop">Trigger tarball</a>. If
you haven&#8217;t already, download it,  expand it, and then navigate to the root
directory (the same directory in which you&#8217;ll find <tt class="docutils literal"><span class="pre">setup.py</span></tt>).</p>
</div>
<p>Once the dependencies are installed, fire up your trusty Python interpreter in
interactive mode and try doing stuff.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>Throughout this documentation you will see commands or code preceded by
a triple greater-than prompt (<tt class="docutils literal"><span class="pre">&gt;&gt;&gt;</span></tt>). This indicates that they are being
entered into a Python interpreter in <em>interactive mode</em>.</p>
<p>To start Python in <em>interactive mode</em>, it&#8217;s as simple as executing
<tt class="docutils literal"><span class="pre">python</span></tt> from a command prompt:</p>
<div class="highlight-python"><div class="highlight"><pre>% python
Python 2.7.2 (default, Jun 20 2012, 16:23:33)
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;
</pre></div>
</div>
<p class="last">For more information, please see the <a class="reference external" href="http://docs.python.org/tutorial/interpreter.html#interactive-mode">official Python documentation on
interactive mode</a>.</p>
</div>
<div class="section" id="netdevices">
<h3><a class="toc-backref" href="#id34">NetDevices</a><a class="headerlink" href="#netdevices" title="Permalink to this headline">¶</a></h3>
<p>Try instantiating NetDevices, which holds your device metadata:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.netdevices</span> <span class="kn">import</span> <span class="n">NetDevices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nd</span> <span class="o">=</span> <span class="n">NetDevices</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span> <span class="o">=</span> <span class="n">nd</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;test1-abc.net.aol.com&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="acl-parser">
<h3><a class="toc-backref" href="#id35">ACL Parser</a><a class="headerlink" href="#acl-parser" title="Permalink to this headline">¶</a></h3>
<p>Try parsing an ACL using the ACL parser (the <tt class="xref py py-obj docutils literal"><span class="pre">tests</span></tt> directory can be found
within the Trigger distribution):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.acl</span> <span class="kn">import</span> <span class="n">parse</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">acl</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&quot;tests/data/acl.test&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">acl</span><span class="o">.</span><span class="n">terms</span><span class="p">)</span>
<span class="go">103</span>
</pre></div>
</div>
</div>
<div class="section" id="acl-database">
<h3><a class="toc-backref" href="#id36">ACL Database</a><a class="headerlink" href="#acl-database" title="Permalink to this headline">¶</a></h3>
<p>Try loading the AclsDB to inspect automatic associations. First directly from autoacl:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.acl.autoacl</span> <span class="kn">import</span> <span class="n">autoacl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">autoacl</span><span class="p">(</span><span class="n">dev</span><span class="p">)</span>
<span class="go">set([&#39;juniper-router.policer&#39;, &#39;juniper-router-protect&#39;])</span>
</pre></div>
</div>
<p>And then inherited from autoacl by AclsDB:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">trigger.acl.db</span> <span class="kn">import</span> <span class="n">AclsDB</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">AclsDB</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">get_acl_set</span><span class="p">(</span><span class="n">dev</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dev</span><span class="o">.</span><span class="n">implicit_acls</span>
<span class="go">set([&#39;juniper-router.policer&#39;, &#39;juniper-router-protect&#39;])</span>
</pre></div>
</div>
<p>Now that you&#8217;ve properly installed Trigger, you might want to know how to use it.
Please have a look at the usage documentation!</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="usage/cli.html">Command-line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/configuration.html">Configuration and defaults</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/gorc.html">Determine commands to run upon login using <tt class="docutils literal"><span class="pre">.gorc</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/netdevices.html">Working with NetDevices</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/tacacsrc.html">Managing Credentials with .tacacsrc</a></li>
</ul>
</div>
</div>
</div>
<div class="section" id="integrated-load-queue">
<h2><a class="toc-backref" href="#id37">Integrated Load Queue</a><a class="headerlink" href="#integrated-load-queue" title="Permalink to this headline">¶</a></h2>
<p>Trigger currently uses a database for the automated ACL load queue used by the
<tt class="docutils literal"><span class="pre">load_acl</span></tt> and <tt class="docutils literal"><span class="pre">acl</span></tt> utilities.</p>
<p>The supported databases are <a class="reference external" href="http://www.mysql.com/">MySQL</a>, <a class="reference external" href="http://www.postgresql.org/">PostgreSQL</a>, and <a class="reference external" href="http://sqlite.org">SQLite</a>.</p>
<p>SQLite is the easiest to get running because generally this module is part of
the Python standard library, and the database can be a simple file on your
system.</p>
<p>It&#8217;s probably best to create a unique database and database user for this
purpose, but we&#8217;ll leave that up to you.</p>
<p>If you want to use this functionality, you will need to do the following:</p>
<ul class="simple">
<li>Choose your database solution</li>
<li>Create a database on it to be used by the load queue</li>
<li>If you&#8217;re not using SQLite, ensure you have the database driver installed</li>
<li>Specify your database settings in <tt class="docutils literal"><span class="pre">settings.py</span></tt></li>
<li>Run the <tt class="docutils literal"><span class="pre">init_task_db</span></tt> tool</li>
<li>Profit!</li>
</ul>
<div class="section" id="database-drivers">
<span id="db-drivers"></span><h3><a class="toc-backref" href="#id38">Database Drivers</a><a class="headerlink" href="#database-drivers" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you are using <tt class="docutils literal"><span class="pre">sqlite3</span></tt> you may ignore this section as the driver is
included in the Python standard library.</p>
</div>
<p>Some of the database libraries are Python C extensions and so will expect
<tt class="docutils literal"><span class="pre">gcc</span></tt> and a number of development libraries to be available on your system.</p>
<p>Generally you will need the development headers for Python and OpenSSL as well
as the development libraries for the database you&#8217;re using.</p>
<div class="section" id="id11">
<h4>PostgreSQL<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<p>Your only choice is <a class="reference external" href="https://pypi.python.org/pypi/psycopg2">psycopg2</a>. This is a
Python C extension which requires compilation.</p>
<p>Here are some tips to install the library dependencies:</p>
<dl class="docutils">
<dt>Ubuntu</dt>
<dd><tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">libpq-dev</span> <span class="pre">libssl-dev</span> <span class="pre">python-dev</span></tt></dd>
<dt>CentOS/RedHat</dt>
<dd><tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">postgresql-devel</span> <span class="pre">openssl-devel</span> <span class="pre">python-devel</span></tt></dd>
</dl>
</div>
<div class="section" id="id12">
<h4>MySQL<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>For MySQL you have two choices:</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://pypi.python.org/pypi/PyMySQL">PyMySQL</a>, a pure Python MySQL driver.</li>
<li><a class="reference external" href="https://pypi.python.org/pypi/MySQL-python">MySQL-python</a>. This is a
Python C extension which requires compilation.</li>
</ol>
<p>If you&#8217;re using MySQL-python, here are some tips to install the library
dependencies:</p>
<dl class="docutils">
<dt>Ubuntu</dt>
<dd><tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">libmysqlclient-dev</span> <span class="pre">libssl-dev</span> <span class="pre">python-dev</span></tt></dd>
<dt>CentOS/RedHat</dt>
<dd><tt class="docutils literal"><span class="pre">sudo</span> <span class="pre">yum</span> <span class="pre">install</span> <span class="pre">mysql-devel</span> <span class="pre">openssl-devel</span> <span class="pre">python-devel</span></tt></dd>
</dl>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a><ul>
<li><a class="reference internal" href="#python">Python</a></li>
<li><a class="reference internal" href="#setuptools">setuptools</a></li>
<li><a class="reference internal" href="#pyasn1">PyASN1</a></li>
<li><a class="reference internal" href="#pycrypto">PyCrypto</a></li>
<li><a class="reference internal" href="#twisted">Twisted</a></li>
<li><a class="reference internal" href="#redis">Redis</a></li>
<li><a class="reference internal" href="#ipy">IPy</a></li>
<li><a class="reference internal" href="#pytz">pytz</a></li>
<li><a class="reference internal" href="#simpleparse">SimpleParse</a><ul>
<li><a class="reference internal" href="#package-tools">Package tools</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-dependencies">Other Dependencies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installing-trigger">Installing Trigger</a><ul>
<li><a class="reference internal" href="#install-trigger-package">Install Trigger package</a></li>
<li><a class="reference internal" href="#create-configuration-directory">Create configuration directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-configuration">Basic Configuration</a><ul>
<li><a class="reference internal" href="#copy-settings-py">Copy settings.py</a></li>
<li><a class="reference internal" href="#copy-metadata-file">Copy metadata file</a></li>
<li><a class="reference internal" href="#copy-shared-secret-file">Copy shared secret file</a></li>
<li><a class="reference internal" href="#copy-autoacl-py">Copy autoacl.py</a></li>
<li><a class="reference internal" href="#copy-bounce-py">Copy bounce.py</a></li>
</ul>
</li>
<li><a class="reference internal" href="#verifying-functionality">Verifying Functionality</a><ul>
<li><a class="reference internal" href="#netdevices">NetDevices</a></li>
<li><a class="reference internal" href="#acl-parser">ACL Parser</a></li>
<li><a class="reference internal" href="#acl-database">ACL Database</a></li>
</ul>
</li>
<li><a class="reference internal" href="#integrated-load-queue">Integrated Load Queue</a><ul>
<li><a class="reference internal" href="#database-drivers">Database Drivers</a><ul>
<li><a class="reference internal" href="#id11">PostgreSQL</a></li>
<li><a class="reference internal" href="#id12">MySQL</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="examples.html"
                        title="previous chapter">Simple Examples</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="usage/cli.html"
                        title="next chapter">Command-line Tools</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/installation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="usage/cli.html" title="Command-line Tools"
             >next</a> |</li>
        <li class="right" >
          <a href="examples.html" title="Simple Examples"
             >previous</a> |</li>
        <li><a href="index.html">Trigger 1.5 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2015, AOL Inc.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>