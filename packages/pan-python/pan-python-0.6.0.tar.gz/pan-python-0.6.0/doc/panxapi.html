<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.8: http://docutils.sourceforge.net/" />
<title>panxapi.py</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7056 2011-06-17 10:50:48Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="panxapi-py">
<h1 class="title">panxapi.py</h1>
<h2 class="subtitle" id="command-line-program-for-accessing-the-pan-os-xml-api">command line program for accessing the PAN-OS XML API</h2>

<!-- NOTE: derived from documentation in PAN-perl

Copyright (c) 2011 Palo Alto Networks, Inc. <info@paloaltonetworks.com>
Copyright (c) 2013-2015 Kevin Steves <kevin.steves@pobox.com>

Permission to use, copy, modify, and distribute this software for any
purpose with or without fee is hereby granted, provided that the above
copyright notice and this permission notice appear in all copies.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE. -->
<div class="section" id="name">
<h1>NAME</h1>
<blockquote>
panxapi.py - command line program for accessing the PAN-OS XML API</blockquote>
</div>
<div class="section" id="synopsis">
<h1>SYNOPSIS</h1>
<pre class="literal-block">
panxapi.py [options] [xpath]
   -d                    delete object at xpath
   -e element            edit XML element at xpath
   -g                    get candidate config at xpath
   -k                    generate API key
   -s                    show active config at xpath
   -S element            set XML element at xpath
   -U cmd                execute dynamic update command
   -C cmd                commit candidate configuration
   --validate            validate candidate configuration
   --force               force commit when conflict
   --partial part        commit specified part
   --sync                synchronous commit
   -A cmd                commit-all (Panorama)
   --ad-hoc query        perform ad hoc request
   --modify              insert known fields in ad hoc query
   -o cmd                execute operational command
   --export category     export files
   --log log-type        retrieve log files
   --src src             clone source node xpath
                         export source file/path/directory
   --dst dst             move/clone destination node name
                         rename new name
                         export destination file/path/directory
   --move where          move after, before, bottom or top
   --rename              rename object at xpath to dst
   --clone               clone object at xpath, src xpath
   --override element    override template object at xpath
   --vsys vsys           VSYS for dynamic update/partial commit/
                         operational command
   -l api_username:api_password
   -h hostname
   -P port               URL port number
   --serial number       serial number for Panorama redirection/
                         commit-all/threat-pcap
   --group name          device group for commit-all
   --merge               merge with candidate for commit-all
   --nlogs num           retrieve num logs
   --skip num            skip num logs
   --filter filter       log selection filter
   --interval seconds    log/commit job query interval
   --timeout seconds     log/commit job query timeout
   --stime time          search time for threat-pcap
   --pcapid id           threat-pcap ID
   -K api_key
   -x                    print XML response to stdout
   -p                    print XML response in Python to stdout
   -j                    print XML response in JSON to stdout
   -r                    print result content when printing response
   --text                print text response to stdout
   -X                    convert text command to XML
   --ls                  print formatted PCAP listing to stdout
   --recursive           recursive export
   -H                    use http URL scheme (default https)
   -G                    use HTTP GET method (default POST)
   -D                    enable debug (multiple up to -DDD)
   -t tag                .panrc tagname
   -T seconds            urlopen() timeout
   --cafile path         file containing CA certificates
   --capath path         directory of hashed certificate files
   --version             display version
   --help                display usage
</pre>
</div>
<div class="section" id="description">
<h1>DESCRIPTION</h1>
<blockquote>
<p><strong>panxapi.py</strong> is used to perform XML API requests on a PAN-OS
firewall and Panorama.  It uses the PanXapi class from the
<strong>pan.xapi</strong> module to execute API requests.</p>
<p>The options are:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">-d</span></tt></dt>
<dd>Perform the <tt class="docutils literal">action=delete</tt> device configuration API request
with the <strong>xpath</strong> argument.  <tt class="docutils literal">delete</tt> is used to remove an existing
object at the node specified by <strong>xpath</strong>.</dd>
<dt><tt class="docutils literal"><span class="pre">-e</span></tt> <em>element</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal">action=edit</tt> device configuration API request with
the <strong>element</strong> and <strong>xpath</strong> arguments.  <tt class="docutils literal">edit</tt> is used to replace
an existing object at the node specified by <strong>xpath</strong>.</p>
<p class="last"><strong>element</strong> can be an XML string, a path to a file containing XML,
or the value <strong>-</strong> to specify the XML is on <em>stdin</em>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-g</span></tt></dt>
<dd>Perform the <tt class="docutils literal">action=get</tt> device configuration API request with the
optional <strong>xpath</strong> argument.  <tt class="docutils literal">get</tt> is used to retrieve the
<em>candidate</em> configuration on the firewall.</dd>
<dt><tt class="docutils literal"><span class="pre">-k</span></tt></dt>
<dd>Perform the <tt class="docutils literal">type=keygen</tt> key generation API request with the
<strong>api_username</strong> and <strong>api_password</strong> arguments.  This is
used to generate an API key for the <strong>-K</strong> argument or a
.panrc file.</dd>
<dt><tt class="docutils literal"><span class="pre">-s</span></tt></dt>
<dd>Perform the <tt class="docutils literal">action=show</tt> device configuration API request with
the optional <strong>xpath</strong> argument.  <tt class="docutils literal">show</tt> is used to retrieve the
<em>active</em> configuration on the firewall.</dd>
<dt><tt class="docutils literal"><span class="pre">-S</span></tt> <em>element</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal">action=set</tt> device configuration API request with the
<strong>element</strong> and <strong>xpath</strong> arguments.  <tt class="docutils literal">set</tt> is used to create a new
object at the node specified by <strong>xpath</strong>.</p>
<p class="last"><strong>element</strong> can be an XML string, a path to a file containing XML,
or the value <strong>-</strong> to specify the XML is on <em>stdin</em>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-U</span></tt> <em>cmd</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal"><span class="pre">type=user-id</span></tt> dynamic object update API request with the
<strong>cmd</strong> argument and optional <strong>--vsys</strong> argument.  This is used to
update dynamic objects including ip-user mappings and address objects.</p>
<p class="last"><strong>cmd</strong> can be an XML string, a path to a file containing XML,
or the value <strong>-</strong> to specify the XML is on <em>stdin</em>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-C</span></tt> <em>cmd</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal">type=commit</tt> commit configuration API request with
the <strong>cmd</strong> argument.  This schedules a job to execute a
configuration mode <strong>commit</strong> command to commit the candidate
configuration.</p>
<p><strong>cmd</strong> can be an XML string, a path to a file containing XML,
or the value <strong>-</strong> to specify the XML is on <em>stdin</em>.</p>
<p class="last">When <em>cmd</em> is the empty string the XML string will be created
according to the <strong>--validate</strong>, <strong>--force</strong>, <strong>--partial</strong> and
<strong>--vsys</strong> options specified.  If no commit options are specified it
defaults to '&lt;commit&gt;&lt;/commit&gt;'.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--validate</span></tt></dt>
<dd>Validate the candidate configuration.  Configuration validation
is performed in a job; to see the validation result you can
specify <strong>--sync</strong>.</dd>
<dt><tt class="docutils literal"><span class="pre">--force</span></tt></dt>
<dd>Force the commit command in the event of conflict.</dd>
<dt><tt class="docutils literal"><span class="pre">--partial</span></tt> <em>part</em></dt>
<dd><p class="first">Commit or exclude the specified <em>part</em> of the configuration.</p>
<p><em>part</em> can be:</p>
<ul class="simple">
<li>device-and-network-excluded</li>
<li>policy-and-objects-excluded</li>
<li>shared-object-excluded</li>
<li>no-vsys</li>
<li>vsys</li>
</ul>
<p><strong>device-and-network-excluded</strong> applies when the device is in
single-vsys mode and <strong>shared-object-excluded</strong> applies when the device
is in multi-vsys mode.</p>
<p class="last">Multiple parts can be specified by using multiple <strong>--partial</strong>
options or separating each part with comma (,).  Virtual systems for
the <strong>vsys</strong> part can be specified with <strong>--vsys</strong>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sync</span></tt></dt>
<dd>Perform a synchronous commit.</dd>
<dt><tt class="docutils literal"><span class="pre">-A</span></tt> <em>cmd</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal">type=commit</tt> commit configuration API request with
the <strong>cmd</strong> argument and specify <tt class="docutils literal">action=all</tt>.  This
is used to push shared policy from Panorama to managed firewalls.</p>
<p><strong>cmd</strong> can be an XML string, a path to a file containing XML,
or the value <strong>-</strong> to specify the XML is on <em>stdin</em>.</p>
<p class="last">When <em>cmd</em> is the empty string the XML string will be created
according to the <strong>--serial</strong>, <strong>--group</strong>, <strong>--merge</strong> and
<strong>--vsys</strong> options specified.</p>
</dd>
</dl>
<p><tt class="docutils literal"><span class="pre">--ad-hoc</span></tt> <em>query</em></p>
<blockquote>
<p>When no other API request is specified, this performs an ad hoc
(custom) API request using the <strong>query</strong> string specified.  When
other API requests are specified, this is used to modify (replace)
and augment (add to) the standard parameters in the request.</p>
<p>Query string must be field=value pairs separated by ampersand (<strong>&amp;</strong>).
The string will be URL-encoded before performing the API request.</p>
<p><strong>--ad-hoc</strong> can be used to construct API requests that are not
directly supported by <strong>pan.xapi</strong> or <strong>panxapi.py</strong>.</p>
</blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--modify</span></tt></dt>
<dd><p class="first">Modify an ad hoc query by inserting known fields.  By default
the query is not modified.</p>
<p>The known fields that can be inserted are:</p>
<ul class="last simple">
<li>xpath</li>
<li>key (api_key)</li>
<li>user (api_username)</li>
<li>password (api_password)</li>
<li>target (--serial)</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">-o</span></tt> <em>cmd</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal">type=op</tt> operational command API request with the
<strong>cmd</strong> argument.</p>
<p class="last"><strong>cmd</strong> can be a text string (see <strong>-X</strong>), an XML string, a path to
a file containing XML, or the value <strong>-</strong> to specify the XML is on
<em>stdin</em>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--export</span></tt> <em>category</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal">type=export</tt> export file API request.</p>
<p><em>category</em> specifies the type of file to export or list:</p>
<ul class="last simple">
<li>application-pcap</li>
<li>threat-pcap</li>
<li>filter-pcap</li>
<li>dlp-pcap</li>
<li>configuration</li>
<li>certificate</li>
<li><em>others</em> (see XML API Reference)</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">--log</span></tt> <em>log-type</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal">type=log</tt> retrieve log API request with the <strong>log-type</strong>
argument.</p>
<p><em>log-type</em> specifies the type of log to retrieve and can be:</p>
<ul class="simple">
<li>config</li>
<li>hipmatch</li>
<li>system</li>
<li>threat</li>
<li>traffic</li>
<li>url</li>
<li>wildfire</li>
</ul>
<p class="last">Also see the <strong>--nlogs</strong>, <strong>--skip</strong> and <strong>--filter</strong> options.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--src</span></tt> <em>src</em></dt>
<dd><p class="first">Specify the source file, path or directory for <strong>--export</strong> and
the source XPath for <strong>--clone</strong>.</p>
<p>The <strong>src</strong> argument is used to specify:</p>
<ul class="last simple">
<li>date directory for application-pcap and threat-pcap PCAP file listing</li>
<li>PCAP file path for exporting application-pcap, threat-pcap and dlp-pcap</li>
<li>file name for exporting filter-pcap</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">--dst</span></tt> <em>dst</em></dt>
<dd><p class="first">The <strong>--dst</strong> argument is used with <strong>--export</strong> to specify:</p>
<ul class="simple">
<li>a destination directory for exported file (retains original file name)</li>
<li>a file or path for exported file (file saved with new file name)</li>
</ul>
<p class="last">The <strong>--dst</strong> argument is used with <strong>--move</strong>, <strong>--rename</strong> and
<strong>--clone</strong> to specify destination node name (e.g., rule10).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--move</span></tt> <em>where</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal">action=move</tt> device configuration API request with the
<strong>xpath</strong>, <strong>where</strong> and <strong>dst</strong> arguments.</p>
<p>This moves the location of an existing node in the configuration
specified by <strong>xpath</strong>.  <em>where</em> is used to specify the location of
the node and can be <em>after</em>, <em>before</em>, <em>bottom</em> or <em>top</em>.
<strong>--dst</strong> is used to specify the relative destination node name when
<em>where</em> is <em>after</em> or <em>before</em>.</p>
<p class="last"><strong>--move</strong> is most frequently used to reorder rules (security,
nat, qos, etc.) within the rulebase, however can be used to
move other nodes in the configuration.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--rename</span></tt></dt>
<dd><p class="first">Perform the <tt class="docutils literal">action=rename</tt> device configuration API request with the
<strong>xpath</strong> and <strong>newname</strong> arguments.</p>
<p class="last">This renames an existing node in the configuration specified by
<strong>xpath</strong>.  <strong>--dst</strong> is used to specify the new name for the node.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--clone</span></tt></dt>
<dd><p class="first">Perform the <tt class="docutils literal">action=clone</tt> device configuration API request with the
<strong>xpath</strong>, <strong>from</strong> and <strong>newname</strong> arguments.</p>
<p class="last">This clones (copies) an existing node in the configuration specified by
<strong>xpath</strong>.  <strong>--src</strong> is used to specify the source XPath and <strong>--dst</strong>
is used to specify the new name for the cloned node.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--override</span></tt> <em>element</em></dt>
<dd><p class="first">Perform the <tt class="docutils literal">action=override</tt> device configuration API request with the
<strong>element</strong> and <strong>xpath</strong> arguments.  <tt class="docutils literal">override</tt> is used to create a new
object at the node specified by <strong>xpath</strong> when the xpath is part of a
template applied by Panorama.  Only specific nodes in the Device and
Network categories can be overridden.</p>
<p class="last"><strong>element</strong> can be an XML string, a path to a file containing XML,
or the value <strong>-</strong> to specify the XML is on <em>stdin</em>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vsys</span></tt> <em>vsys</em></dt>
<dd><p class="first">Specify optional <strong>vsys</strong> for dynamic update (<strong>-U</strong>), partial vsys
commit (<strong>--partial</strong> vsys), commit-all (<strong>-A</strong>) and operational
commands (<strong>-o</strong>).</p>
<p><em>vsys</em> can be specified using name (<strong>vsys2</strong>) or number (<strong>2</strong>).</p>
<p class="last">Multiple virtual systems can be specified by using multiple
<strong>--vsys</strong> options or separating each <em>vsys</em> with comma (,).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-l</span></tt> <em>api_username:api_password</em></dt>
<dd>Specify the <strong>api_username</strong> and <strong>api_password</strong> which are used
to generate the <strong>api_key</strong> used in API requests.</dd>
<dt><tt class="docutils literal"><span class="pre">-h</span></tt> <em>hostname</em></dt>
<dd>Specify the <strong>hostname</strong> which is used to generate the URI
for API requests.</dd>
<dt><tt class="docutils literal"><span class="pre">-P</span></tt> <em>port</em></dt>
<dd>Specify the <strong>port</strong> number used in the URL.  This can be used to
perform port forwarding using for example ssh(1).</dd>
<dt><tt class="docutils literal"><span class="pre">--serial</span></tt> <em>number</em></dt>
<dd><p class="first">Specify the serial number used for Panorama to device redirection.
This sets the <strong>target</strong> argument to the serial number specified in
device configuration, commit configuration, key generation, dynamic
object update and operational command API requests.</p>
<p class="last">When an API request is made on Panorama and the serial number is
specified, Panorama will redirect the request to the managed device
with the serial number.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--group</span></tt> <em>name</em></dt>
<dd>Specify the device group name used for Panorama commit-all (<strong>-A</strong>).</dd>
<dt><tt class="docutils literal"><span class="pre">--merge</span></tt></dt>
<dd>Specify the <strong>merge-with-candidate-cfg</strong> option for Panorama commit-all
(<strong>-A</strong>).</dd>
<dt><tt class="docutils literal"><span class="pre">--nlogs</span></tt> <em>num</em></dt>
<dd><p class="first">Specify the number of logs to retrieve for the <strong>--log</strong> option.</p>
<p>The default is 20 and the maximum is 5000.</p>
<p class="last"><strong>pan.xapi</strong> currently loads the entire XML document into memory
using the <strong>ElementTree</strong> module.  A large number of log entries can
cause a memory exception which may not be possible to catch.  If you
see exceptions when using a large <strong>--nlog</strong> value try reducing it.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--skip</span></tt> <em>num</em></dt>
<dd><p class="first">Specify the number of logs to skip for the <strong>--log</strong> option.  This
can be used to retieve log entries in batches by skipping previously
retrieved logs.</p>
<p class="last">The default is 0.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--filter</span></tt> <em>filter</em></dt>
<dd>Specify the log query selection filter for the <strong>--log</strong> option.
This is a set of log filter expressions as can be specified in the
Monitor tab in the Web UI.</dd>
<dt><tt class="docutils literal"><span class="pre">--interval</span></tt> <em>seconds</em></dt>
<dd><p class="first">A floating point number specifying the query interval in seconds
between each non-finished job status response.</p>
<p class="last">The default is 0.5 seconds.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--timeout</span></tt> <em>seconds</em></dt>
<dd><p class="first">The maximum number of seconds to wait for the job to finish.</p>
<p class="last">The default is to try forever.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--stime</span></tt> <em>time</em></dt>
<dd>Specify the search time for threat-pcap export.</dd>
<dt><tt class="docutils literal"><span class="pre">--pcapid</span></tt> <em>id</em></dt>
<dd>Specify the PCAP ID for threat-pcap export.</dd>
<dt><tt class="docutils literal"><span class="pre">-K</span></tt> <em>api_key</em></dt>
<dd>Specify the <strong>api_key</strong> used in API requests.  This is not required to
perform API requests if the <strong>api_username</strong> and <strong>api_password</strong> are
provided using the <strong>-l</strong> argument or a .panrc file.</dd>
<dt><tt class="docutils literal"><span class="pre">-x</span></tt></dt>
<dd>Print XML response to <em>stdout</em>.</dd>
<dt><tt class="docutils literal"><span class="pre">-p</span></tt></dt>
<dd>Print XML response in Python to <em>stdout</em>.</dd>
<dt><tt class="docutils literal"><span class="pre">-j</span></tt></dt>
<dd>Print XML response in JSON to <em>stdout</em>.</dd>
<dt><tt class="docutils literal"><span class="pre">-r</span></tt></dt>
<dd>Print result content when printing the response (removes outer
&lt;response&gt;&lt;result&gt; elements).  If a &lt;result&gt; element is not present
this prints the entire response.  This option applies to <strong>-x</strong>,
<strong>-p</strong> and <strong>-j</strong> response output; if none of these options are
specified <strong>-x</strong> is implied.</dd>
<dt><tt class="docutils literal"><span class="pre">--text</span></tt></dt>
<dd><p class="first">Print text (response content-type is text/plain) to <em>stdout</em>.</p>
<p class="last">This is used for retrieving exported response pages.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-X</span></tt></dt>
<dd><p class="first">Convert a CLI-style <em>cmd</em> argument to XML.  This works by converting all
unquoted arguments in <em>cmd</em> to start and end elements and treating
double quoted arguments as text after removing the quotes.  For
example:</p>
<ul class="last simple">
<li>show system info<ul>
<li>&lt;show&gt;&lt;system&gt;&lt;info&gt;&lt;/info&gt;&lt;/system&gt;&lt;/show&gt;</li>
</ul>
</li>
<li>show interface &quot;ethernet1/1&quot;<ul>
<li>&lt;show&gt;&lt;interface&gt;ethernet1/1&lt;/interface&gt;&lt;/show&gt;</li>
</ul>
</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ls</span></tt></dt>
<dd>Print formatted PCAP listing to <em>stdout</em>.  For use with <strong>--export</strong>.</dd>
<dt><tt class="docutils literal"><span class="pre">--recursive</span></tt></dt>
<dd>Export recursively.  This copies the PCAP files to the YYYYMMDD
directory in their path, and creates the directory if needed.</dd>
<dt><tt class="docutils literal"><span class="pre">-H</span></tt></dt>
<dd>Use the <em>http</em> URL scheme for API requests.  The default is to use
the <em>https</em> URL scheme.</dd>
<dt><tt class="docutils literal"><span class="pre">-G</span></tt></dt>
<dd>Use the HTTP <em>GET</em> method for API requests.  The default is to use
the HTTP <em>POST</em> method with Content-Type
application/x-www-form-urlencoded.</dd>
<dt><tt class="docutils literal"><span class="pre">-D</span></tt></dt>
<dd>Enable debugging.  May be specified multiple times up to 3
to increase debugging output.</dd>
<dt><tt class="docutils literal"><span class="pre">-t</span></tt> <em>tag</em></dt>
<dd>Specify tagname for .panrc.</dd>
<dt><tt class="docutils literal"><span class="pre">-T</span></tt> <em>seconds</em></dt>
<dd>Specify the <tt class="docutils literal">timeout</tt> value for urlopen().</dd>
<dt><tt class="docutils literal"><span class="pre">--cafile</span></tt> <em>path</em></dt>
<dd>Specify the <tt class="docutils literal">cafile</tt> value for HTTPS requests.  <tt class="docutils literal">cafile</tt> is a
file containing CA certificates to be used for SSL server
certificate verification. By default the SSL server certificate is
not verified.  <tt class="docutils literal"><span class="pre">--cafile</span></tt> is supported starting in Python versions
2.7.9 and 3.2.</dd>
<dt><tt class="docutils literal"><span class="pre">--capath</span></tt> <em>path</em></dt>
<dd>Specify the <tt class="docutils literal">capath</tt> value for HTTPS requests.  <tt class="docutils literal">capath</tt> is a
directory of hashed certificate files to be used for SSL server
certificate verification. By default the SSL server certificate is
not verified.  <tt class="docutils literal"><span class="pre">--cafile</span></tt> is supported starting in Python versions
2.7.9 and 3.2.</dd>
<dt><tt class="docutils literal"><span class="pre">--version</span></tt></dt>
<dd>Display version.</dd>
<dt><tt class="docutils literal"><span class="pre">--help</span></tt></dt>
<dd>Display command options.</dd>
<dt><tt class="docutils literal">xpath</tt></dt>
<dd>XPath for request.  <strong>xpath</strong> can be a string, a path to a file
containing the XPath, or the value <strong>-</strong> to specify the XPath
is on <em>stdin</em>.</dd>
</dl>
</blockquote>
</div>
<div class="section" id="files">
<h1>FILES</h1>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">.panrc</tt></dt>
<dd>.panrc file.  See PanXapi documentation for .panrc format.</dd>
</dl>
</blockquote>
</div>
<div class="section" id="exit-status">
<h1>EXIT STATUS</h1>
<blockquote>
<strong>panxapi.py</strong> exits with 0 on success and 1 if an error occurs.</blockquote>
</div>
<div class="section" id="examples">
<h1>EXAMPLES</h1>
<blockquote>
<p>Generate an API key.</p>
<pre class="literal-block">
$ panxapi.py -l admin:admin -h 172.29.9.253 -k
keygen: success
API key:  &quot;C2M1P2h1tDEz8zF3SwhF2dWC1gzzhnE1qU39EmHtGZM=&quot;
</pre>
<p>Create a .panrc file with the API key.</p>
<pre class="literal-block">
$ echo 'hostname=172.29.9.253' &gt;.panrc
$ echo 'api_key=C2M1P2h1tDEz8zF3SwhF2dWC1gzzhnE1qU39EmHtGZM=' &gt;&gt;.panrc
</pre>
<p>Retrieve the <em>active</em> configuration and write it to a file.</p>
<pre class="literal-block">
$ panxapi.py -sxr &gt;active.xml
show: success
</pre>
<p>Retrieve and display a security rule from the <em>active</em> configuration.</p>
<pre class="literal-block">
$ xpath=&quot;/config/devices/entry/vsys/entry/rulebase/security/rules/entry[&#64;name='rule7']&quot;
$ panxapi.py -sxr $xpath | head
show: success
&lt;entry name=&quot;rule7&quot;&gt;
  &lt;option&gt;
    &lt;disable-server-response-inspection&gt;no&lt;/disable-server-response-inspection&gt;
  &lt;/option&gt;
  &lt;from&gt;
    &lt;member&gt;trust&lt;/member&gt;
  &lt;/from&gt;
  &lt;to&gt;
    &lt;member&gt;dmz&lt;/member&gt;
  &lt;/to&gt;
</pre>
<p>Edit the <em>application</em> of a security rule.</p>
<pre class="literal-block">
$ echo '&lt;application&gt;&lt;member&gt;rsync&lt;/member&gt;&lt;/application&gt;' &gt;app.xml
$ panxapi.py -e app.xml $xpath/application
edit: success [code=&quot;20&quot;]: command succeeded
</pre>
<p>Retrieve and display modified <em>application</em> from the <em>candidate</em> configuration.</p>
<pre class="literal-block">
$ panxapi.py -gxr $xpath/application
get: success [code=&quot;19&quot;]
&lt;application admin=&quot;admin&quot; time=&quot;2013/03/02 15:17:31&quot;&gt;&lt;member admin=&quot;admin&quot; time=&quot;2013/03/02 15:17:31&quot;&gt;rsync&lt;/member&gt;&lt;/application&gt;
</pre>
<p>Commit candidate configuration.</p>
<pre class="literal-block">
$ panxapi.py -C ''
commit: success [code=&quot;19&quot;]: Commit job enqueued with jobid 912
</pre>
<p>Show job id.</p>
<pre class="literal-block">
$ panxapi.py -Xjro 'show jobs id &quot;912&quot;'
op: success
{
  &quot;job&quot;: {
    &quot;details&quot;: null,
    &quot;id&quot;: &quot;912&quot;,
    &quot;progress&quot;: &quot;99&quot;,
    &quot;result&quot;: &quot;PEND&quot;,
    &quot;status&quot;: &quot;ACT&quot;,
    &quot;stoppable&quot;: &quot;yes&quot;,
    &quot;tenq&quot;: &quot;2013/03/02 15:21:26&quot;,
    &quot;tfin&quot;: &quot;Still Active&quot;,
    &quot;type&quot;: &quot;Commit&quot;,
    &quot;warnings&quot;: null
  }
}
</pre>
<p>Save security rule.</p>
<pre class="literal-block">
$ panxapi.py -sxr $xpath &gt;rule.xml
show: success
</pre>
<p>Delete security rule.</p>
<pre class="literal-block">
$ panxapi.py -d $xpath
delete: success [code=&quot;20&quot;]: command succeeded
</pre>
<p>Commit Policy and Object configuration.</p>
<pre class="literal-block">
$ panxapi.py --partial device-and-network-excluded
commit: success [code=&quot;19&quot;]: Commit job enqueued with jobid 914
</pre>
<p>Add security rule.</p>
<pre class="literal-block">
$ xpath2=&quot;/config/devices/entry/vsys/entry/rulebase/security/rules&quot;
$ panxapi.py -S rule.xml $xpath2
set: success [code=&quot;20&quot;]: command succeeded
</pre>
<p>Move security rule.</p>
<pre class="literal-block">
$ panxapi.py --move top $xpath
move: success [code=&quot;20&quot;]: command succeeded
</pre>
<p>Rename security rule.</p>
<pre class="literal-block">
$ panxapi.py --rename --dst rule7-b $xpath
rename: success [code=&quot;20&quot;]: command succeeded
</pre>
<p>Retrieve WildFire logs matching filter.</p>
<pre class="literal-block">
$ panxapi.py --log wildfire -xr --filter '(misc eq wajam_install.exe)'
log: success [code=&quot;19&quot;]
&lt;job&gt;
    &lt;tenq&gt;11:29:24&lt;/tenq&gt;
    &lt;tdeq&gt;11:29:25&lt;/tdeq&gt;
    &lt;tlast&gt;11:29:26&lt;/tlast&gt;
    &lt;status&gt;FIN&lt;/status&gt;
    &lt;id&gt;89&lt;/id&gt;
  &lt;/job&gt;
  &lt;log&gt;
    &lt;logs count=&quot;1&quot; progress=&quot;100&quot;&gt;
      &lt;entry logid=&quot;5910273572261068816&quot;&gt;
[...]
</pre>
<p>Retrieve report using the <strong>--ad-hoc</strong> option.</p>
<pre class="literal-block">
$ panxapi.py -x --modify --ad-hoc 'type=report&amp;reporttype=dynamic&amp;reportname=acc-summary'
ad_hoc: success
&lt;response status=&quot;success&quot;&gt;&lt;report logtype=&quot;appstat&quot; reportname=&quot;acc-summary&quot;&gt;
    &lt;result end=&quot;2013/09/13 23:59:59&quot; end-epoch=&quot;1379141999&quot; generated-at=&quot;2013/09/14 10:34:31&quot; generated-at-epoch=&quot;1379180071&quot; logtype=&quot;appstat&quot; name=&quot;acc summary&quot; range=&quot;Friday, September 13, 2013&quot; start=&quot;2013/09/13 00:00:00&quot; start-epoch=&quot;1379055600&quot;&gt;
      &lt;entry&gt;
        &lt;name&gt;paloalto-wildfire-cloud&lt;/name&gt;
        &lt;risk-of-name&gt;1&lt;/risk-of-name&gt;
        &lt;nbytes&gt;9005951&lt;/nbytes&gt;
        &lt;nthreats&gt;0&lt;/nthreats&gt;
        &lt;nsess&gt;723&lt;/nsess&gt;
        &lt;npkts&gt;20924&lt;/npkts&gt;
      &lt;/entry&gt;
[...]
</pre>
<p>Validate candidate configuration.</p>
<pre class="literal-block">
$ panxapi.py -C '' --validate --sync
commit: success: &quot;Configuration is valid&quot;
</pre>
<p>Export threat-pcap file on PAN-OS 6.0.</p>
<pre class="literal-block">
$ panxapi.py --export threat-pcap --pcapid 1200628399744221211 \
&gt; --serial 001609032345
export: success
exported threat-pcap: 1200628399744221211.pcap
</pre>
<p>Export certificate with additional parameters:</p>
<pre class="literal-block">
$ panxapi.py --export certificate \
&gt; --ad-hoc 'certificate-name=GlobalProtectCA&amp;format=pem&amp;include-key=yes&amp;passphrase=paloalto'
export: success
exported certificate: globalprotectca.pem
</pre>
<p>Print operational command variable using shell pipeline.</p>
<pre class="literal-block">
$ (panxapi.py --Xpro 'show system info'; \
&gt; echo &quot;print(var1['system']['serial'])&quot;) | python
op: success
001606022345
</pre>
</blockquote>
</div>
<div class="section" id="see-also">
<h1>SEE ALSO</h1>
<blockquote>
<p>pan.xapi, panconf.py</p>
<dl class="docutils">
<dt>PAN-OS 6.1 XML API Reference</dt>
<dd><a class="reference external" href="https://www.paloaltonetworks.com/documentation/61/pan-os.html">https://www.paloaltonetworks.com/documentation/61/pan-os.html</a></dd>
</dl>
</blockquote>
</div>
<div class="section" id="authors">
<h1>AUTHORS</h1>
<blockquote>
Kevin Steves &lt;<a class="reference external" href="mailto:kevin.steves&#64;pobox.com">kevin.steves&#64;pobox.com</a>&gt;</blockquote>
</div>
</div>
</body>
</html>
