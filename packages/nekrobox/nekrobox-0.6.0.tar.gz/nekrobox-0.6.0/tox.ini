[flake8]
exclude=tests,.git,__pycache__,docs,build,dist
doctests=true
ignore=E221,F401
max-complexity=10

[testenv]
deps=
  -r{toxinidir}/requirements.txt
  pytest
  pytest_cov
  pytest_xdist
commands=py.test \
        --basetemp={envtmpdir}
        tests

[testenv:style]
deps=
  -r{toxinidir}/requirements.txt
  flake8
commands=flake8 --config={toxinidir}/tox.ini .

[testenv:docs]
basepython=python3
changedir=docs
deps=
  -r{toxinidir}/requirements.txt
  sphinx
  releases
commands=
    sphinx-build -b linkcheck . {envtmpdir}/_build
    sphinx-build -W -b html -d {envtmpdir}/doctrees . {envtmpdir}/html
