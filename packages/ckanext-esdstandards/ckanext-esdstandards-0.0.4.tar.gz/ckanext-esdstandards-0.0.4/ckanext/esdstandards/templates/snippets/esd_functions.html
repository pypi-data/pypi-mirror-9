{% import 'macros/form.html' as form %}

{% set esd_function_titles = h.get_esd_function_titles(data.get('la_function')) %}
{% set attrs = {'data-module': 'esd-autocomplete',
                    'data-module-tags': '',
                    'data-module-source': '/api/action/esd_function_autocomplete?q=?',
                    'data-module-key': 'uri',
                    'data-module-label': 'title',} %}
{{ form.input('la_function',
              id='field-la_function',
              label=_('ESD Functions'),
              placeholder=_('Start typing...'),
              value=esd_function_titles,
              error=errors.la_function,
              classes=['control-full'],
              attrs=attrs) }}

{% resource 'esd/esd_autocomplete' %}
