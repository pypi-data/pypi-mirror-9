<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      tal:omit-tag=""
      >

<metal:video define-macro="video">
  <div class="panel-body"
       tal:define="mp4 mp4|nothing;
                   hls hls|nothing;
                   thumb thumb|nothing;
                   id id|string:video_1;
                   width width|string:640;
                   height height|string:360;
          ">
    <video id="video_1" class="video-js vjs-default-skin"
      controls preload="auto" width="640" height="360"
      poster="http://xxxx.cloudfront.net/HLS00001.png"
      data-setup='{}'
            tal:attributes="poster thumb;
                            id id;
                            width width;
                            height height;">
     <source tal:condition="hls"
             tal:attributes="src string:${context/absolute_url}/@@m3u8"
             src="http://xxxx.cloudfront.net/video.m3u8"
          type="application/x-mpegURL" />
     <source tal:condition="mp4"
             tal:attributes="src mp4"
             src="rtmp://xxxx.cloudfront.net/cfx/st/&mp4:video.mp4"
             type='rtmp/mp4' />
     <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
    </video>
  </div>
</metal:video>
</html>