<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Selector classes &mdash; Scrapple  documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Scrapple  documentation" href="../index.html" />
    <link rel="next" title="Utility functions" href="utils.html" />
    <link rel="prev" title="Command classes" href="commands.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="utils.html" title="Utility functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="commands.html" title="Command classes"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Scrapple  documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="selector-classes">
<span id="implementation-selectors"></span><h1>Selector classes<a class="headerlink" href="#selector-classes" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../concepts/selectors.html#concepts-selectors"><em>Selectors</em></a> are used to specifically point to certain tags on a web page, from which content has to be extracted. In Scrapple, selectors are implemented through selector classes, which define methods to extract necessary content through specified selector expressions and to extract links from anchor tags to be crawled through.</p>
<p>There are two selector types that are supported in Scrapple :</p>
<ul class="simple">
<li>XPath expressions</li>
<li>CSS selector expressions</li>
</ul>
<p>These selector types are implemented through the <tt class="docutils literal"><span class="pre">XpathSelector</span></tt> and <tt class="docutils literal"><span class="pre">CssSelector</span></tt> classes, respectively. These two classes use the <tt class="docutils literal"><span class="pre">Selector</span></tt> class as their super class.</p>
<p>In the super class, the URL of the web page to be loaded is validated - ensuring the schema has been specified, and that the URL is valid. A HTTP GET request is made to load the web page, and the HTML content of this fetched web page is used to generate the <a class="reference internal" href="../concepts/structure.html#concepts-structure"><em>element tree</em></a>. This is the element tree that will be parsed to extract the necessary content.</p>
<span class="target" id="module-scrapple.selectors.xpath"></span><div class="section" id="scrapple-selectors-xpath">
<h2>scrapple.selectors.xpath<a class="headerlink" href="#scrapple-selectors-xpath" title="Permalink to this headline">¶</a></h2>
</div>
<dl class="class">
<dt id="scrapple.selectors.xpath.XpathSelector">
<em class="property">class </em><tt class="descclassname">scrapple.selectors.xpath.</tt><tt class="descname">XpathSelector</tt><big>(</big><em>url</em><big>)</big><a class="reference internal" href="../_modules/scrapple/selectors/xpath.html#XpathSelector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapple.selectors.xpath.XpathSelector" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="docutils literal"><span class="pre">XpathSelector</span></tt> object defines XPath expressions.</p>
<dl class="method">
<dt id="scrapple.selectors.xpath.XpathSelector.extract_content">
<tt class="descname">extract_content</tt><big>(</big><em>selector</em>, <em>attr</em>, <em>default</em><big>)</big><a class="reference internal" href="../_modules/scrapple/selectors/xpath.html#XpathSelector.extract_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapple.selectors.xpath.XpathSelector.extract_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for performing the content extraction for the given XPath expression.</p>
<p>The XPath selector expression can be used to extract content            from the element tree corresponding to the fetched web page.</p>
<p>If the selector is &#8220;url&#8221;, the URL of the current web page is returned.
Otherwise, the selector expression is used to extract content. The particular           attribute to be extracted (&#8220;text&#8221;, &#8220;href&#8221;, etc.) is specified in the method             arguments, and this is used to extract the required content. If the content             extracted is a link (from an attr value of &#8220;href&#8221; or &#8220;src&#8221;), the URL is parsed          to convert the relative path into an absolute path.</p>
<p>If the selector does not fetch any content, the default value is returned.              If no default value is specified, an exception is raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>selector</strong> &#8211; The XPath expression</li>
<li><strong>attr</strong> &#8211; The attribute to be extracted from the selected tag</li>
<li><strong>default</strong> &#8211; The default value to be used if the selector does not return any data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The extracted content</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scrapple.selectors.xpath.XpathSelector.extract_links">
<tt class="descname">extract_links</tt><big>(</big><em>selector</em><big>)</big><a class="reference internal" href="../_modules/scrapple/selectors/xpath.html#XpathSelector.extract_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapple.selectors.xpath.XpathSelector.extract_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for performing the link extraction for the crawler.</p>
<p>The selector passed as the argument is a selector to point to the anchor tags           that the crawler should pass through. A list of links is obtained, and the links                are iterated through. The relative paths are converted into absolute paths and          a <tt class="docutils literal"><span class="pre">CssSelector</span></tt> object is created with the URL of the next page as the argument               and this created object is yielded.</p>
<p>The extract_links method basically generates <tt class="docutils literal"><span class="pre">CssSelector</span></tt> objects for all of                 the links to be crawled through.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>selector</strong> &#8211; The selector for the anchor tags to be crawled through</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A <tt class="docutils literal"><span class="pre">CssSelector</span></tt> object for every page to be crawled through</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="module-scrapple.selectors.css"></span><div class="section" id="scrapple-selectors-css">
<h2>scrapple.selectors.css<a class="headerlink" href="#scrapple-selectors-css" title="Permalink to this headline">¶</a></h2>
</div>
<dl class="class">
<dt id="scrapple.selectors.css.CssSelector">
<em class="property">class </em><tt class="descclassname">scrapple.selectors.css.</tt><tt class="descname">CssSelector</tt><big>(</big><em>url</em><big>)</big><a class="reference internal" href="../_modules/scrapple/selectors/css.html#CssSelector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapple.selectors.css.CssSelector" title="Permalink to this definition">¶</a></dt>
<dd><p>The <tt class="docutils literal"><span class="pre">CssSelector</span></tt> object defines CSS selector expressions.</p>
<dl class="method">
<dt id="scrapple.selectors.css.CssSelector.extract_content">
<tt class="descname">extract_content</tt><big>(</big><em>selector</em>, <em>attr</em>, <em>default</em><big>)</big><a class="reference internal" href="../_modules/scrapple/selectors/css.html#CssSelector.extract_content"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapple.selectors.css.CssSelector.extract_content" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for performing the content extraction for the given CSS selector.</p>
<p>The cssselect library is used to handle CSS selector expressions.               XPath expressions have a higher speed of execution, so the given CSS selector           expression is translated into the corresponding XPath expression, by the                <tt class="docutils literal"><span class="pre">cssselect.CSSSelector</span></tt> class. This selector can be used to extract content           from the element tree corresponding to the fetched web page.</p>
<p>If the selector is &#8220;url&#8221;, the URL of the current web page is returned.
Otherwise, the selector expression is used to extract content. The particular           attribute to be extracted (&#8220;text&#8221;, &#8220;href&#8221;, etc.) is specified in the method             arguments, and this is used to extract the required content. If the content             extracted is a link (from an attr value of &#8220;href&#8221; or &#8220;src&#8221;), the URL is parsed          to convert the relative path into an absolute path.</p>
<p>If the selector does not fetch any content, the default value is returned.              If no default value is specified, an exception is raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>selector</strong> &#8211; The CSS selector expression</li>
<li><strong>attr</strong> &#8211; The attribute to be extracted from the selected tag</li>
<li><strong>default</strong> &#8211; The default value to be used if the selector does not return any data</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The extracted content</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="scrapple.selectors.css.CssSelector.extract_links">
<tt class="descname">extract_links</tt><big>(</big><em>selector</em><big>)</big><a class="reference internal" href="../_modules/scrapple/selectors/css.html#CssSelector.extract_links"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#scrapple.selectors.css.CssSelector.extract_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for performing the link extraction for the crawler implementation.</p>
<p>As in the extract_content method, the cssselect library is used to translate            the CSS selector expression into an XPath expression.</p>
<p>The selector passed as the argument is a selector to point to the anchor tags           that the crawler should pass through. A list of links is obtained, and the links                are iterated through. The relative paths are converted into absolute paths and          a <tt class="docutils literal"><span class="pre">CssSelector</span></tt> object is created with the URL of the next page as the argument               and this created object is yielded.</p>
<p>The extract_links method basically generates <tt class="docutils literal"><span class="pre">CssSelector</span></tt> objects for all of                 the links to be crawled through.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>selector</strong> &#8211; The selector for the anchor tags to be crawled through</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A <tt class="docutils literal"><span class="pre">CssSelector</span></tt> object for every page to be crawled through</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Selector classes</a><ul>
<li><a class="reference internal" href="#scrapple-selectors-xpath">scrapple.selectors.xpath</a></li>
<li><a class="reference internal" href="#scrapple-selectors-css">scrapple.selectors.css</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="commands.html"
                        title="previous chapter">Command classes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="utils.html"
                        title="next chapter">Utility functions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/implementation/selectors.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="utils.html" title="Utility functions"
             >next</a> |</li>
        <li class="right" >
          <a href="commands.html" title="Command classes"
             >previous</a> |</li>
        <li><a href="../index.html">Scrapple  documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Alex Mathew, Harish Balakrishnan.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>