{% load i18n l10n reportapi_base cache %}{% load url from future %}<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE|default:"ru" }}" {% if LANGUAGE_BIDI %}dir="rtl"{% endif %}>
<head>
    <title>{% block title %}{% trans 'Reporting' %}{% endblock %}</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Grigoriy Kramarenko">

{% block shortcut_icons %}
    <link rel="icon" href="{{ STATIC_URL }}img/reportapi/logo.svg" type="image/svg">
    <link rel="icon" href="{{ STATIC_URL }}img/reportapi/logo.png" type="image/png">
{% endblock %}

    <!-- START: block style -->
    {% block style %}
    <link rel="stylesheet" href="{{ STATIC_URL }}css/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap/3.3.1/bootstrap.min.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap/3.3.1/bootstrap-theme.min.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/jquery/datetimepicker/2.4.1/jquery.datetimepicker.min.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/selectize/0.8.5/selectize.bootstrap3.css">
    <link rel="stylesheet" href="{{ STATIC_URL }}css/reportapi/{% SETTINGS 'REPORTAPI_VERSION' %}/reportapi{% mini_library %}.css">

    <style type="text/css">
        #container {
            margin-top: 20px;
        }
        code {
            display: block;
            white-space: pre-wrap;
        }
        .navbar-brand > img {
            display: inline;
        }
        .footer {
            bottom: 0;
            width: 100%;
            background-color: #f5f5f5;
        }
        .footer-content {
            padding-top: 20px;
            padding-bottom: 20px;
            padding-right: 40px;
            padding-left: 40px;
        }

    </style>
    {% endblock %}
    <!-- END: block style -->

    <!-- START: block extrastyle -->
    {% block extrastyle %}{% endblock %}
    <!-- END: block extrastyle -->
</head>


<body>
    <!-- START: block navbar -->
    {% block navbar %}
    <div class="navbar navbar-default navbar-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">{% trans 'Toggle navigation' %}</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="{% url 'reportapi:index' %}" title="Django ReportAPI">
                <img width="25" height="24" src="{{ STATIC_URL }}img/reportapi/logo.png"/>
                {% block navbar_brand %}{% trans 'Reporting' %}{% endblock %}
            </a>
        </div>
        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
        {% cache 500 navbarsections request.user.id LANGUAGE_CODE %}
            {% for sect, reports in sections %}
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        {{ sect.label|title  }} <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="{% url 'reportapi:report_list' sect.name %}">{% trans 'List reports' %}</a></li>
                        <li class="divider"></li>
                    {% for rep in reports %}
                        <li><a href="{% url 'reportapi:documents_section_name' rep.section rep.name %}">{{ rep.label }}</a></li>
                    {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        {% endcache %}
            </ul>
            {% block navbar_project %}
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="navbar-brand" href="{% block navbar_project_url %}/{% endblock %}">
                        {% block navbar_project_label %}
                        <i class="fa fa-home"></i> {% PROJECT_NAME %}
                        {% endblock %}
                    </a>
                </li>
            </ul>
            {% endblock %}
        </div><!--/.nav-collapse -->
      </div>
    </div>
    {% endblock %}
    <!-- END: block navbar -->

    <!-- START: block container -->
    {% block container %}
    <div id="container" class="container">
        <!-- START: block alert_place -->
        {% block alert_place %}
        <div class="row"><div id="alert-place" class="container"></div></div>
        {% endblock %}
        <!-- END: block alert_place -->

        <!-- START: block content -->
        {% block content %}{% endblock %}
        <!-- END: block content -->
    </div><!-- /.container -->
    {% endblock %}
    <!-- END: block container -->

    <!-- START: block footer -->
    {% block footer %}
    <!-- .footer -->
    <div class="footer">
        <div class="footer-content text-right">
            <span class="text-muted">
                ReportAPI Â© {% trans 'Grigoriy Kramarenko' %}, 2014
            </span>
        </div>
    </div>
    <!-- /.footer -->
    {% endblock %}
    <!-- END: block footer -->

<!-- START: block jstemplates -->
    {% block jstemplates %}
    {% cache 600 jstemplates LANGUAGE_CODE %}
    <!-- underscore -->
    <script type="text/x-underscore" id="underscore-alert">
        {% include "reportapi/underscore_alert.html" %}
    </script>
    <script type="text/x-underscore" id="underscore-filter">
        {% include "reportapi/underscore_filter.html" %}
    </script>
    {% endcache %}
    {% endblock %}
<!-- END: block jstemplates -->

    <!-- START: block jsglobalvars -->
    {% block jsglobalvars %}
        <script type="text/javascript">
            /* GLOBAL VARS */
            window.AJAX_TIMEOUT = 3000;
            window.TIMEOUT_PROGRESS = 1000;
            window.REPORTAPI_API_URL = "{% filter escapejs %}{% url "reportapi:api" %}{% endfilter %}";
            window.USER_ID = "{{ user.id|default:0 }}";
            window.USER_NAME = "{{ user.username }}";
            window.USER_LAST_NAME = "{{ user.last_name }}";
            window.USER_FIRST_NAME = "{{ user.first_name }}";
            window.USER = "{{ user }}";
            window.DEBUG = {% filter lower %}{% SETTINGS 'DEBUG' %}{% endfilter %};
            window.LANGUAGE_CODE = "{{ LANGUAGE_CODE }}" || undefined;
            window.SERVER_TZ_OFFSET = {% SETTINGS 'SERVER_TZ_OFFSET' %};
        </script>
    {% endblock %}
    <!-- END: block jsglobalvars -->

    <!-- START: block js -->
    {% block js %}
    <!-- Bootstrap -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="{{ STATIC_URL }}js/jquery/2.1.1/jquery.min.js"></script>
    <script src="{{ STATIC_URL }}js/jquery/django/1.4/django-ajax-csrf.min.js"></script>
    <script src="{{ STATIC_URL }}js/jquery/json/2.4/jquery.json.min.js"></script>
    <script src="{{ STATIC_URL }}js/jquery/datetimepicker/2.4.1/jquery.datetimepicker.min.js"></script>
    <script src="{{ STATIC_URL }}js/moment/2.8.4/moment-with-locales.min.js"></script>
    <script src="{{ STATIC_URL }}js/underscore/1.4.4/underscore.min.js"></script>
    <script src="{{ STATIC_URL }}js/underscore/string/2.3.0/underscore.string.min.js"></script>
    <script src="{{ STATIC_URL }}js/bootstrap/3.3.1/bootstrap.min.js"></script>
    <script src="{{ STATIC_URL }}js/selectize/0.8.5/standalone/selectize.min.js"></script>
    <script src="{{ STATIC_URL }}js/reportapi/{% SETTINGS 'REPORTAPI_VERSION' %}/reportapi{% mini_library %}.js"></script>
    {% endblock %}

    <!-- START: block extrajs -->
    {% block extrajs %}{% endblock %}
    <!-- END: block extrajs -->

</body>
</html>
