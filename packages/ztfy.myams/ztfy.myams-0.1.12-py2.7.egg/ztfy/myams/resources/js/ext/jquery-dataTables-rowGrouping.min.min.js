(function(b){b.fn.rowGrouping=function(j){function a(){}function l(c,e,d){}function k(c,e,d){}function h(c){var d=["January","February","March","April","May","June","July","August","September","October","November","December"];return d[c-1]}var i={iGroupingColumnIndex:0,sGroupingColumnSortDirection:"",iGroupingOrderByColumnIndex:-1,sGroupingClass:"group",sGroupItemClass:"group-item",bHideGroupingColumn:true,bHideGroupingOrderByColumn:true,sGroupBy:"name",sGroupLabelPrefix:"",fnGroupLabelFormat:function(c){return c},bExpandableGrouping:false,bExpandSingleGroup:false,iExpandGroupOffset:100,asExpandedGroups:null,sDateFormat:"dd/MM/yyyy",sEmptyGroupLabel:"-",bSetGroupingClassOnTR:false,iGroupingColumnIndex2:-1,sGroupingColumnSortDirection2:"",iGroupingOrderByColumnIndex2:-1,sGroupingClass2:"subgroup",sGroupItemClass2:"subgroup-item",bHideGroupingColumn2:true,bHideGroupingOrderByColumn2:true,sGroupBy2:"name",sGroupLabelPrefix2:"",fnGroupLabelFormat2:function(c){return c},bExpandableGrouping2:false,fnOnGrouped:a,fnOnGroupCreated:l,fnOnGroupCompleted:k,oHideEffect:null,oShowEffect:null,bUseFilteringForGrouping:false};return this.each(function(ac,Q){var ab=b(Q).dataTable();var ag=new Array();b(this).dataTableExt.aoGroups=ag;function ah(m,o,r){var p=document.createElement("tr");var n=document.createElement("td");p.id="group-id-"+ab.attr("id")+"_"+m;var q={id:p.id,key:m,text:o,level:0,groupItemClass:".group-item-"+m,dataGroup:m,aoSubgroups:new Array()};if(aa.bSetGroupingClassOnTR){p.className=aa.sGroupingClass+" "+m}else{n.className=aa.sGroupingClass+" "+m}n.colSpan=r;n.innerHTML=aa.sGroupLabelPrefix+aa.fnGroupLabelFormat(o==""?aa.sEmptyGroupLabel:o,q);if(aa.bExpandableGrouping){if(!T(m)){n.className+=" expanded-group";q.state="expanded"}else{n.className+=" collapsed-group";q.state="collapsed"}n.className+=" group-item-expander";b(n).attr("data-group",q.dataGroup);b(n).attr("data-group-level",q.level);b(n).click(aq)}p.appendChild(n);ag[m]=q;q.nGroup=p;aa.fnOnGroupCreated(q,m,1);return q}function V(r,s,t,o){var q=document.createElement("tr");q.id=o.id+"_"+r;var m=document.createElement("td");var n=o.dataGroup+"_"+r;var p={id:q.id,key:r,text:s,level:o.level+1,groupItemClass:".group-item-"+n,dataGroup:n,aoSubgroups:new Array()};if(aa.bSetGroupingClassOnTR){q.className=aa.sGroupingClass2+" "+r}else{m.className=aa.sGroupingClass2+" "+r}m.colSpan=t;m.innerHTML=aa.sGroupLabelPrefix2+aa.fnGroupLabelFormat2(s==""?aa.sEmptyGroupLabel:s,p);if(aa.bExpandableGrouping){q.className+=" group-item-"+o.dataGroup}if(aa.bExpandableGrouping&&aa.bExpandableGrouping2){if(!T(p.dataGroup)){m.className+=" expanded-group";p.state="expanded"}else{m.className+=" collapsed-group";p.state="collapsed"}m.className+=" group-item-expander";b(m).attr("data-group",p.dataGroup);b(m).attr("data-group-level",p.level);b(m).click(aq)}q.appendChild(m);o.aoSubgroups[p.dataGroup]=p;ag[p.dataGroup]=p;p.nGroup=q;aa.fnOnGroupCreated(p,r,2);return p}function T(m){if(ag[m]!=null){return(ag[m].state=="collapsed")}else{if(m.indexOf("_")>-1){true}else{if(an&&(ap==null||ap.length==0)){return false}else{return(b.inArray(m,ap)==-1)}}}}function f(m){if(m.length<(S+P)){return m}else{return m.substr(S,P)}}function R(m){return m}function e(m){return m.substr(0,1)}function c(m){return f(m)}function af(m){return m.substr(S,P)+" "+h(m.substr(ae,U))}function Z(m){if(m===""){return"-"}return m.toLowerCase().replace(/[^a-zA-Z0-9\u0080-\uFFFF]+/g,"-")}function ad(n,p,m){if(n.nTable.id!==ab[0].id){return true}var o=p[aa.iGroupingColumnIndex];if(typeof o==="undefined"){o=p[n.aoColumns[aa.iGroupingColumnIndex].mDataProp]}if(T(Z(o))){if(ab.fnIsOpen(ab.fnGetNodes(m))){if(aa.fnOnRowClosed!=null){aa.fnOnRowClosed(this)}ab.fnClose(ab.fnGetNodes(m))}return false}return true}function aj(m){ag[m].state="expanded";b("td[data-group^='"+m+"']").removeClass("collapsed-group");b("td[data-group^='"+m+"']").addClass("expanded-group");if(aa.bUseFilteringForGrouping){ab.fnDraw();return}if(jQuery.inArray(m,ap)==-1){ap.push(m)}if(aa.oHideEffect!=null){b(".group-item-"+m,ab)[aa.oShowEffect.method](aa.oShowEffect.duration,aa.oShowEffect.easing,function(){})}else{b(".group-item-"+m,ab).show()}}function am(m){ag[m].state="collapsed";b("td[data-group^='"+m+"']").removeClass("expanded-group");b("td[data-group^='"+m+"']").addClass("collapsed-group");if(aa.bUseFilteringForGrouping){ab.fnDraw();return}b(".group-item-"+m).each(function(){if(ab.fnIsOpen(this)){if(aa.fnOnRowClosed!=null){aa.fnOnRowClosed(this)}ab.fnClose(this)}});if(aa.oHideEffect!=null){b(".group-item-"+m,ab)[aa.oHideEffect.method](aa.oHideEffect.duration,aa.oHideEffect.easing,function(){})}else{b(".group-item-"+m,ab).hide()}}function aq(m){var q=b(this).attr("data-group");var o=b(this).attr("data-group-level");var p=!T(q);if(aa.bExpandSingleGroup){if(!p){var r=b("td.expanded-group").attr("data-group");am(r);aj(q);if(aa.iExpandGroupOffset!=-1){var n=b("#group-id-"+ab.attr("id")+"_"+q).offset().top-aa.iExpandGroupOffset;window.scroll(0,n)}else{var n=ab.offset().top;window.scroll(0,n)}}}else{if(p){am(q)}else{aj(q)}}m.preventDefault()}function ai(q){if(ab.fnSettings().oFeatures.bServerSide){an=true}var m=false;if(aa.iGroupingColumnIndex2!=-1){m=true}if(q.aiDisplayMaster.length==0){return}var s=b("tbody tr",ab);var v=0;for(var A=0;A<q.aoColumns.length;A++){if(q.aoColumns[A].bVisible){v+=1}}var x=null;var E=null;if(q.aiDisplay.length>0){for(var y=0;y<s.length;y++){var r=q._iDisplayStart+y;if(ab.fnSettings().oFeatures.bServerSide){r=y}var t="";var z=null;var w="";var n=null;t=this.fnGetData(s[y],aa.iGroupingColumnIndex);var z=t;if(aa.sGroupBy!="year"){z=d(t)}if(m){w=q.aoData[q.aiDisplay[r]]._aData[aa.iGroupingColumnIndex2];if(w==undefined){w=q.aoData[q.aiDisplay[r]]._aData[q.aoColumns[aa.iGroupingColumnIndex2].mDataProp]}if(aa.sGroupBy2!="year"){n=d(w)}}if(x==null||Z(z)!=Z(x)){var D=Z(z);if(x!=null){aa.fnOnGroupCompleted(ag[Z(x)])}if(aa.bAddAllGroupsAsExpanded&&jQuery.inArray(D,ap)==-1){ap.push(D)}var p=ah(D,z,v);var u=p.nGroup;if(s[y].parentNode!=null){s[y].parentNode.insertBefore(u,s[y])}else{b(s[y]).before(u)}x=z;E=null}b(s[y]).attr("data-group",ag[D].dataGroup);b(s[y]).addClass(aa.sGroupItemClass);b(s[y]).addClass("group-item-"+D);if(aa.bExpandableGrouping){if(T(D)&&!aa.bUseFilteringForGrouping){b(s[y]).hide()}}if(m){if(E==null||Z(n)!=Z(E)){var o=Z(z)+"-"+Z(n);var C=V(o,n,v,ag[D]);var B=C.nGroup;s[y].parentNode.insertBefore(B,s[y]);E=n}b(s[y]).attr("data-group",C.dataGroup).addClass(aa.sGroupItemClass2).addClass("group-item-"+C.dataGroup)}}}if(x!=null){aa.fnOnGroupCompleted(ag[Z(x)])}aa.fnOnGrouped(ag);an=false}var S=6;var P=4;var ap=new Array();var an=true;var aa=b.extend(i,j);if(aa.iGroupingOrderByColumnIndex==-1){aa.bCustomColumnOrdering=false;aa.iGroupingOrderByColumnIndex=aa.iGroupingColumnIndex}else{aa.bCustomColumnOrdering=true}if(aa.sGroupingColumnSortDirection==""){if(aa.sGroupBy=="year"){aa.sGroupingColumnSortDirection="desc"}else{aa.sGroupingColumnSortDirection="asc"}}if(aa.iGroupingOrderByColumnIndex2==-1){aa.bCustomColumnOrdering2=false;aa.iGroupingOrderByColumnIndex2=aa.iGroupingColumnIndex2}else{aa.bCustomColumnOrdering2=true}if(aa.sGroupingColumnSortDirection2==""){if(aa.sGroupBy2=="year"){aa.sGroupingColumnSortDirection2="desc"}else{aa.sGroupingColumnSortDirection2="asc"}}S=aa.sDateFormat.toLowerCase().indexOf("yy");P=aa.sDateFormat.toLowerCase().lastIndexOf("y")-aa.sDateFormat.toLowerCase().indexOf("y")+1;var ae=aa.sDateFormat.toLowerCase().indexOf("mm");var U=aa.sDateFormat.toLowerCase().lastIndexOf("m")-aa.sDateFormat.toLowerCase().indexOf("m")+1;var d=R;switch(aa.sGroupBy){case"letter":d=e;break;case"year":d=c;break;case"month":d=af;break;default:d=R;break}if(aa.asExpandedGroups!=null){if(aa.asExpandedGroups=="NONE"){aa.asExpandedGroups=[];ap=aa.asExpandedGroups;an=false}else{if(aa.asExpandedGroups=="ALL"){aa.bAddAllGroupsAsExpanded=true}else{if(aa.asExpandedGroups.constructor==String){var ao=aa.asExpandedGroups;aa.asExpandedGroups=new Array();aa.asExpandedGroups.push(Z(ao));ap=aa.asExpandedGroups;an=false}else{if(aa.asExpandedGroups.constructor==Array){for(var X=0;X<aa.asExpandedGroups.length;X++){ap.push(Z(aa.asExpandedGroups[X]));if(aa.bExpandSingleGroup){break}}an=false}}}}}else{aa.asExpandedGroups=new Array();aa.bAddAllGroupsAsExpanded=true}if(aa.bExpandSingleGroup){var ak=b("tbody tr",ab);var al=ab.fnGetData(ak[0],aa.iGroupingColumnIndex);var Y=al;if(aa.sGroupBy!="year"){Y=d(al)}var g=Z(Y);aa.asExpandedGroups=new Array();aa.asExpandedGroups.push(g)}ab.fnSetColumnVis(aa.iGroupingColumnIndex,!aa.bHideGroupingColumn);if(aa.bCustomColumnOrdering){ab.fnSetColumnVis(aa.iGroupingOrderByColumnIndex,!aa.bHideGroupingOrderByColumn)}if(aa.iGroupingColumnIndex2!=-1){ab.fnSetColumnVis(aa.iGroupingColumnIndex2,!aa.bHideGroupingColumn2)}if(aa.bCustomColumnOrdering2){ab.fnSetColumnVis(aa.iGroupingOrderByColumnIndex2,!aa.bHideGroupingOrderByColumn2)}ab.fnSettings().aoDrawCallback.push({fn:ai,sName:"fnRowGrouping"});var W=new Array();W.push([aa.iGroupingOrderByColumnIndex,aa.sGroupingColumnSortDirection]);if(aa.iGroupingColumnIndex2!=-1){W.push([aa.iGroupingOrderByColumnIndex2,aa.sGroupingColumnSortDirection2])}ab.fnSettings().aaSortingFixed=W;switch(aa.sGroupBy){case"name":break;case"letter":ab.fnSettings().aoColumns[aa.iGroupingOrderByColumnIndex].sSortDataType="rg-letter";b.fn.dataTableExt.afnSortData["rg-letter"]=function(n,o){var m=[];b("td:eq("+o+")",n.oApi._fnGetTrNodes(n)).each(function(){m.push(e(this.innerHTML))});return m};break;case"year":ab.fnSettings().aoColumns[aa.iGroupingOrderByColumnIndex].sSortDataType="rg-date";b.fn.dataTableExt.afnSortData["rg-date"]=function(n,p){var m=[];var o=n.oApi._fnGetTrNodes(n);for(X=0;X<o.length;X++){m.push(f(ab.fnGetData(o[X],p)))}return m};break;default:break}if(aa.bUseFilteringForGrouping){b.fn.dataTableExt.afnFiltering.push(ad)}ab.fnDraw()})}})(jQuery);