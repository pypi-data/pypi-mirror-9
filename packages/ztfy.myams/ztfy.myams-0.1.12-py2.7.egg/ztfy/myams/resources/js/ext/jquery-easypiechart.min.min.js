(function(b){b.easyPieChart=function(t,a){var r,q,o,n,u,m,s,v,p=this;this.el=t;this.$el=b(t);this.$el.data("easyPieChart",this);this.init=function(){var d,c;p.options=b.extend({},b.easyPieChart.defaultOptions,a);d=parseInt(p.$el.data("percent"),10);p.percentage=0;p.canvas=b("<canvas width='"+p.options.size+"' height='"+p.options.size+"'></canvas>").get(0);p.$el.append(p.canvas);if(typeof G_vmlCanvasManager!=="undefined"&&G_vmlCanvasManager!==null){G_vmlCanvasManager.initElement(p.canvas)}p.ctx=p.canvas.getContext("2d");if(window.devicePixelRatio>1){c=window.devicePixelRatio;b(p.canvas).css({width:p.options.size,height:p.options.size});p.canvas.width*=c;p.canvas.height*=c;p.ctx.scale(c,c)}p.ctx.translate(p.options.size/2,p.options.size/2);p.ctx.rotate(p.options.rotate*Math.PI/180);p.$el.addClass("easyPieChart");p.$el.css({width:p.options.size,height:p.options.size,lineHeight:""+p.options.size+"px"});p.update(d);return p};this.update=function(c){c=parseFloat(c)||0;if(p.options.animate===false){o(c)}else{q(p.percentage,c)}return p};s=function(){var e,d,c;p.ctx.fillStyle=p.options.scaleColor;p.ctx.lineWidth=1;c=[];for(e=d=0;d<=24;e=++d){c.push(r(e))}return c};r=function(c){var d;d=c%6===0?0:p.options.size*0.017;p.ctx.save();p.ctx.rotate(c*Math.PI/12);p.ctx.fillRect(p.options.size/2-d,0,-p.options.size*0.05+d,1);p.ctx.restore()};v=function(){var c;c=p.options.size/2-p.options.lineWidth/2;if(p.options.scaleColor!==false){c-=p.options.size*0.08}p.ctx.beginPath();p.ctx.arc(0,0,c,0,Math.PI*2,true);p.ctx.closePath();p.ctx.strokeStyle=p.options.trackColor;p.ctx.lineWidth=p.options.lineWidth;p.ctx.stroke()};m=function(){if(p.options.scaleColor!==false){s()}if(p.options.trackColor!==false){v()}};o=function(c){var d;m();p.ctx.strokeStyle=b.isFunction(p.options.barColor)?p.options.barColor(c):p.options.barColor;p.ctx.lineCap=p.options.lineCap;p.ctx.lineWidth=p.options.lineWidth;d=p.options.size/2-p.options.lineWidth/2;if(p.options.scaleColor!==false){d-=p.options.size*0.08}p.ctx.save();p.ctx.rotate(-Math.PI/2);p.ctx.beginPath();p.ctx.arc(0,0,d,0,Math.PI*2*c/100,false);p.ctx.stroke();p.ctx.restore()};u=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(c){return window.setTimeout(c,1000/60)}})();q=function(d,e){var f,c;p.options.onStart.call(p);p.percentage=e;c=Date.now();f=function(){var h,g;g=Date.now()-c;if(g<p.options.animate){u(f)}p.ctx.clearRect(-p.options.size/2,-p.options.size/2,p.options.size,p.options.size);m.call(p);h=[n(g,d,e-d,p.options.animate)];p.options.onStep.call(p,h);o.call(p,h);if(g>=p.options.animate){return p.options.onStop.call(p)}};u(f)};n=function(g,h,d,f){var c,e;c=function(i){return Math.pow(i,2)};e=function(i){if(i<1){return c(i)}else{return 2-c((i/2)*-2+2)}};g/=f/2;return d/2*e(g)+h};return this.init()};b.easyPieChart.defaultOptions={barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",rotate:0,size:110,lineWidth:3,animate:false,onStart:b.noop,onStop:b.noop,onStep:b.noop};b.fn.easyPieChart=function(a){return b.each(this,function(i,h){var j,g;j=b(h);if(!j.data("easyPieChart")){g=b.extend({},a,j.data());return j.data("easyPieChart",new b.easyPieChart(h,g))}})};return void 0})(jQuery);