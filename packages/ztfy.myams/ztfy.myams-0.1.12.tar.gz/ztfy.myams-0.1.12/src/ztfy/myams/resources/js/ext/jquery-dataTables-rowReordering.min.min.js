(function(b){b.fn.rowReordering=function(a){function y(c){if(c.fnSettings().oFeatures.bProcessing){b(".dataTables_processing").css("visibility","visible")}}function w(c){if(c.fnSettings().oFeatures.bProcessing){b(".dataTables_processing").css("visibility","hidden")}}function r(d,c){var e=1000000;b(c,d).each(function(){var f=parseInt(d.fnGetData(this,q.iIndexColumn));if(f<e){e=f}});return e}function t(g,f,d,c,e){f.sortable("cancel");if(c<=d.iLogLevel){if(e!=undefined){d.fnAlert(e,"")}else{d.fnAlert("Row cannot be moved","")}}d.fnEndProcessingMode(g)}function x(i,j,e){var k=b("#"+e,i);var g=i.fnGetData(k[0],q.iIndexColumn);var h=-1;var f;var d=k.prev(j);if(d.length>0){h=parseInt(i.fnGetData(d[0],q.iIndexColumn));if(h<g){h=h+1}}else{var c=k.next(j);if(c.length>0){h=parseInt(i.fnGetData(c[0],q.iIndexColumn));if(h>g){h=h-1}}}if(h<g){f="back"}else{f="forward"}return{sDirection:f,iCurrentPosition:g,iNewPosition:h}}function o(k,m,i,j,f,e,h){var d=i;var g=j;if(f=="back"){d=j;g=i}b(k.fnGetNodes()).each(function(){if(h!=""&&b(this).attr("data-group")!=h){return}var n=this;var B=parseInt(k.fnGetData(n,q.iIndexColumn));if(d<=B&&B<=g){if(n.id==e){k.fnUpdate(j,k.fnGetPosition(n),q.iIndexColumn,false)}else{if(f=="back"){k.fnUpdate(B+1,k.fnGetPosition(n),q.iIndexColumn,false)}else{k.fnUpdate(B-1,k.fnGetPosition(n),q.iIndexColumn,false)}}}});var c=k.fnSettings();if(c.oFeatures.bServerSide===false){var l=c._iDisplayStart;c.oApi._fnReDraw(c);c._iDisplayStart=l;c.oApi._fnCalculateEnd(c)}c.oApi._fnDraw(c)}function u(c,d){alert(c)}var v={iIndexColumn:0,iStartPosition:1,sURL:null,sRequestType:"POST",iGroupingLevel:0,fnAlert:u,fnSuccess:jQuery.noop,iLogLevel:1,sDataGroupAttribute:"data-group",fnStartProcessingMode:y,fnEndProcessingMode:w,fnUpdateAjaxRequest:jQuery.noop};var q=b.extend(v,a);var z,p;var s=function(d,f){var e=f.children();var c=f.clone();c.children().each(function(g){b(this).width(e.eq(g).width())});return c};return this.each(function(){var e=b(this).dataTable();var c=(e.fnSettings().aaSortingFixed==null?new Array():e.fnSettings().aaSortingFixed);c.push([q.iIndexColumn,"asc"]);e.fnSettings().aaSortingFixed=c;for(var d=0;d<e.fnSettings().aoColumns.length;d++){e.fnSettings().aoColumns[d].bSortable=false}e.fnDraw();b("tbody",e).disableSelection().sortable({cursor:"move",helper:s,update:function(g,f){var h=e;var i=b(this);var m="tbody tr";var l="";if(q.bGroupingUsed){l=b(f.item).attr(q.sDataGroupAttribute);if(l==null||l==undefined){t(h,i,q,3,"Grouping row cannot be moved");return}m="tbody tr["+q.sDataGroupAttribute+" ='"+l+"']"}var j=x(h,m,f.item.context.id);if(j.iNewPosition==-1){t(h,i,q,2);return}if(q.sURL!=null){q.fnStartProcessingMode(h);var k={url:q.sURL,type:q.sRequestType,data:{id:f.item.context.id,fromPosition:j.iCurrentPosition,toPosition:j.iNewPosition,direction:j.sDirection,group:l},success:function(n){q.fnSuccess(n);o(h,m,j.iCurrentPosition,j.iNewPosition,j.sDirection,f.item.context.id,l);q.fnEndProcessingMode(h)},error:function(n){t(h,i,q,1,n.statusText)}};q.fnUpdateAjaxRequest(k,q,h);b.ajax(k)}else{o(h,m,j.iCurrentPosition,j.iNewPosition,j.sDirection,f.item.context.id,l)}}})})}})(jQuery);