(function(a){a.fn.columnFilter=function(d){var b,w,m,h;var z="From {from} to {to}";var c=new Array();var g=new Array();var x=null;var v=function(){};function A(B,E,H,K,I){if(typeof E=="undefined"){return new Array()}if(typeof H=="undefined"){H=true}if(typeof K=="undefined"){K=true}if(typeof I=="undefined"){I=true}var M;if(K==true){M=B.aiDisplay}else{M=B.aiDisplayMaster}var L=new Array();for(var D=0,G=M.length;D<G;D++){var F=M[D];var C=t.fnGetData(F);var J=C[E];if(I==true&&J.length==0){continue}else{if(H==true&&jQuery.inArray(J,L)>-1){continue}else{L.push(J)}}}return L.sort()}function u(i){if(l.bUseColVis){return i}else{return t.fnSettings().oApi._fnVisibleToColumnIndex(t.fnSettings(),i)}}function o(J,I,K,B,F,L){var C="text_filter";if(B){C="number_filter"}m=m.replace(/(^\s*)|(\s*$)/g,"");var D=J.fnSettings().aoPreSearchCols[w].sSearch;var i="search_init ";var E=m;if(D!=""&&D!="^"){if(B&&D.charAt(0)=="^"){E=D.substr(1)}else{E=D}i=""}var H=a('<input type="text" class="'+i+C+'" value="'+E+'" rel="'+w+'"/>');if(L!=undefined&&L!=-1){H.attr("maxlength",L)}h.html(H);if(B){h.wrapInner('<span class="filter_column filter_number" />')}else{h.wrapInner('<span class="filter_column filter_text" />')}b[w]=m;var G=w;if(B&&!J.fnSettings().oFeatures.bServerSide){H.keyup(function(){J.fnFilter("^"+this.value,u(G),true,false);v()})}else{H.keyup(function(){if(J.fnSettings().oFeatures.bServerSide&&F!=0){var M=J.fnSettings().aoPreSearchCols[G].sSearch;var N=a(this).data("dt-iLastFilterLength");if(typeof N=="undefined"){N=0}var O=this.value.length;if(Math.abs(O-N)<F){return}else{a(this).data("dt-iLastFilterLength",O)}}J.fnFilter(this.value,u(G),I,K);v()})}H.focus(function(){if(a(this).hasClass("search_init")){a(this).removeClass("search_init");this.value=""}});H.blur(function(){if(this.value==""){a(this).addClass("search_init");this.value=b[G]}})}function f(i){h.html(p(0));var D=i.attr("id")+"_range_from_"+w;var F=a('<input type="text" class="number_range_filter" id="'+D+'" rel="'+w+'"/>');h.append(F);h.append(p(1));var C=i.attr("id")+"_range_to_"+w;var E=a('<input type="text" class="number_range_filter" id="'+C+'" rel="'+w+'"/>');h.append(E);h.append(p(2));h.wrapInner('<span class="filter_column filter_number_range" />');var B=w;g.push(w);i.dataTableExt.afnFiltering.push(function(K,I,H){if(i.attr("id")!=K.sTableId){return true}if(document.getElementById(D)==null){return true}var J=document.getElementById(D).value*1;var G=document.getElementById(C).value*1;var L=I[u(B)]=="-"?0:I[u(B)]*1;if(J==""&&G==""){return true}else{if(J==""&&L<=G){return true}else{if(J<=L&&""==G){return true}else{if(J<=L&&L<=G){return true}}}}return false});a("#"+D+",#"+C,h).keyup(function(){var H=document.getElementById(D).value*1;var G=document.getElementById(C).value*1;if(H!=0&&G!=0&&H>G){return}i.fnDraw();v()})}function q(i){var C=z.split(/[}{]/);h.html("");var E=i.attr("id")+"_range_from_"+w;var G=a('<input type="text" class="date_range_filter" id="'+E+'" rel="'+w+'"/>');G.datepicker();var D=i.attr("id")+"_range_to_"+w;var F=a('<input type="text" class="date_range_filter" id="'+D+'" rel="'+w+'"/>');for(ti=0;ti<C.length;ti++){if(C[ti]==l.sDateFromToken){h.append(G)}else{if(C[ti]==l.sDateToToken){h.append(F)}else{h.append(C[ti])}}}h.wrapInner('<span class="filter_column filter_date_range" />');F.datepicker();var B=w;g.push(w);i.dataTableExt.afnFiltering.push(function(N,K,J){if(i.attr("id")!=N.sTableId){return true}var I=G.datepicker("getDate");var H=F.datepicker("getDate");if(I==null&&H==null){return true}var M=null;try{if(K[u(B)]==null||K[u(B)]==""){return false}M=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,K[u(B)])}catch(L){return false}if(M==null){return false}if(I==null&&M<=H){return true}else{if(I<=M&&H==null){return true}else{if(I<=M&&M<=H){return true}}}return false});a("#"+E+",#"+D,h).change(function(){i.fnDraw();v()})}function r(M,E,I,B,N,K,D){if(E==null){E=A(M.fnSettings(),I,true,false,true)}var J=I;var H=M.fnSettings().aoPreSearchCols[w].sSearch;if(H==null||H==""){H=D}var i='<select class="search_init select_filter" rel="'+w+'"><option value="" class="search_init">'+N+"</option>";var G=0;var C=E.length;for(G=0;G<C;G++){if(typeof(E[G])!="object"){var F="";if(escape(E[G])==H||escape(E[G])==escape(H)){F="selected "}i+="<option "+F+' value="'+escape(E[G])+'">'+E[G]+"</option>"}else{var F="";if(K){if(E[G].value==H){F="selected "}i+="<option "+F+'value="'+E[G].value+'">'+E[G].label+"</option>"}else{if(escape(E[G].value)==H){F="selected "}i+="<option "+F+'value="'+escape(E[G].value)+'">'+E[G].label+"</option>"}}}var L=a(i+"</select>");B.html(L);B.wrapInner('<span class="filter_column filter_select" />');L.change(function(){if(a(this).val()!=""){a(this).removeClass("search_init")}else{a(this).addClass("search_init")}if(K){M.fnFilter(a(this).val(),I,K)}else{M.fnFilter(unescape(a(this).val()),I)}v()});if(H!=null&&H!=""){M.fnFilter(unescape(H),I)}}function e(i,B,C,E){var D=i.fnSettings();if(B==null&&D.sAjaxSource!=""&&!D.oFeatures.bServerSide){D.aoDrawCallback.push({fn:(function(F,H,G){return function(){if(D.iDraw==2&&D.sAjaxSource!=null&&D.sAjaxSource!=""&&!D.oFeatures.bServerSide){return r(i,null,u(F),H,G,C,E)}}})(w,h,m),sName:"column_filter_"+w})}r(i,B,u(w),h,m,C,E)}function y(E){var D=w;var F='<div class="dropdown select_filter"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+m+'<b class="caret"></b></a><ul class="dropdown-menu" role="menu"><li data-value=""><a>Show All</a></li>',C,B=E.length;for(C=0;C<B;C++){F+='<li data-value="'+E[C]+'"><a>'+E[C]+"</a></li>"}var i=a(F+"</ul></div>");h.html(i);h.wrapInner('<span class="filterColumn filter_select" />');i.find("li").click(function(){t.fnFilter(a(this).data("value"),D)})}function s(P,B){if(B==null){B=A(P.fnSettings(),w,true,true,true)}var G=w;var M="",R,Q=B.length;var D=m.replace("%","Perc").replace("&","AND").replace("$","DOL").replace("Â£","STERL").replace("@","AT").replace(/\s/g,"_");D=D.replace(/[^a-zA-Z 0-9]+/g,"");var N=m;if(l.sFilterButtonText!=null||l.sFilterButtonText!=undefined){N=l.sFilterButtonText}var T=10;var K=12;var J=Math.floor(Q/K);if(Q%K>0){J=J+1}var C=100/J-2;var H=T*J;if(J==1){C=20}var U='<div style="float:left; min-width: '+C+'%; " >';var V="</div>";var I=P.attr("id")+D;var F="chkBtnOpen"+I;var E=I+"-flt-toggle";M+='<button id="'+F+'" class="checkbox_filter" > '+N+"</button>";M+='<div id="'+E+'" title="'+m+'" rel="'+w+'" class="toggle-check ui-widget-content ui-corner-all"  style="width: '+(H)+'%; " >';M+=U;for(R=0;R<Q;R++){if(R%K==0&&R!=0){M+=V+U}var S=B[R];var i=B[R];if(typeof(B[R])=="object"){S=B[R].label;i=B[R].value}M+='<input class="search_init checkbox_filter" type="checkbox" id= "'+I+"_cb_"+i+'" name= "'+D+'" value="'+i+'" >'+S+"<br/>";var L=a(M);h.html(L);h.wrapInner('<span class="filter_column filter_checkbox" />');L.change(function(){var X="";var Y="|";var W=a('input:checkbox[name="'+D+'"]:checked').size();a('input:checkbox[name="'+D+'"]:checked').each(function(Z){if((Z==0&&W==1)||(Z!=0&&Z==W-1)){Y=""}X=X.replace(/^\s+|\s+$/g,"");X=X+a(this).val()+Y;Y="|"});if(X!=""){a('input:checkbox[name="'+D+'"]').removeClass("search_init")}else{a('input:checkbox[name="'+D+'"]').addClass("search_init")}P.fnFilter(X,G,true,false);v()})}a("#"+F).button();a("#"+E).dialog({autoOpen:false,hide:"blind",buttons:[{text:"Reset",click:function(){a('input:checkbox[name="'+D+'"]:checked').each(function(W){a(this).attr("checked",false);a(this).addClass("search_init")});P.fnFilter("",G,true,false);v();return false}},{text:"Close",click:function(){a(this).dialog("close")}}]});a("#"+F).click(function(){a("#"+E).dialog("open");var W=a(this);a("#"+E).dialog("widget").position({my:"top",at:"bottom",of:W});return false});var O=v;v=function(){var W=a("#"+F);a("#"+E).dialog("widget").position({my:"top",at:"bottom",of:W});O()}}function p(i){switch(i){case 0:return z.substring(0,z.indexOf("{from}"));case 1:return z.substring(z.indexOf("{from}")+6,z.indexOf("{to}"));default:return z.substring(z.indexOf("{to}")+4)}}var t=this;var n={sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}",sDateFromToken:"from",sDateToToken:"to"};var l=a.extend(n,d);return this.each(function(){if(!t.fnSettings().oFeatures.bFilter){return}b=new Array();var E=t.fnSettings().aoFooter[0];var F=t.fnSettings().nTFoot;var C="tr";if(l.sPlaceHolder=="head:after"){var D=a("tr:first",t.fnSettings().nTHead).detach();if(t.fnSettings().bSortCellsTop){D.prependTo(a(t.fnSettings().nTHead));E=t.fnSettings().aoHeader[1]}else{D.appendTo(a(t.fnSettings().nTHead));E=t.fnSettings().aoHeader[0]}C="tr:last";F=t.fnSettings().nTHead}else{if(l.sPlaceHolder=="head:before"){if(t.fnSettings().bSortCellsTop){var D=a("tr:first",t.fnSettings().nTHead).detach();D.appendTo(a(t.fnSettings().nTHead));E=t.fnSettings().aoHeader[1]}else{E=t.fnSettings().aoHeader[0]}C="tr:first";F=t.fnSettings().nTHead}}a(E).each(function(G){w=G;var H={type:"text",bRegex:false,bSmart:true,iMaxLenght:-1,iFilterLength:0};if(l.aoColumns!=null){if(l.aoColumns.length<w||l.aoColumns[w]==null){return}H=l.aoColumns[w]}m=a(a(this)[0].cell).text();if(H.sSelector==null){h=a(a(this)[0].cell)}else{h=a(H.sSelector);if(h.length==0){h=a(a(this)[0].cell)}}if(H!=null){if(H.sRangeFormat!=null){z=H.sRangeFormat}else{z=l.sRangeFormat}switch(H.type){case"null":break;case"number":o(t,true,false,true,H.iFilterLength,H.iMaxLenght);break;case"select":if(H.bRegex!=true){H.bRegex=false}e(t,H.values,H.bRegex,H.selected);break;case"number-range":f(t);break;case"date-range":q(t);break;case"checkbox":s(t,H.values);break;case"twitter-dropdown":case"dropdown":y(H.values);break;case"text":default:bRegex=(H.bRegex==null?false:H.bRegex);bSmart=(H.bSmart==null?false:H.bSmart);o(t,bRegex,bSmart,false,H.iFilterLength,H.iMaxLenght);break}}});for(j=0;j<g.length;j++){var B=function(){var G=t.attr("id");return a("#"+G+"_range_from_"+g[j]).val()+l.sRangeSeparator+a("#"+G+"_range_to_"+g[j]).val()};c.push(B)}if(t.fnSettings().oFeatures.bServerSide){var i=t.fnSettings().fnServerData;t.fnSettings().fnServerData=function(G,I,K){for(j=0;j<g.length;j++){var H=g[j];for(k=0;k<I.length;k++){if(I[k].name=="sSearch_"+H){I[k].value=c[j]()}}}I.push({name:"sRangeSeparator",value:l.sRangeSeparator});if(i!=null){try{i(G,I,K,t.fnSettings())}catch(J){i(G,I,K)}}else{a.getJSON(G,I,function(L){K(L)})}}}})}})(jQuery);