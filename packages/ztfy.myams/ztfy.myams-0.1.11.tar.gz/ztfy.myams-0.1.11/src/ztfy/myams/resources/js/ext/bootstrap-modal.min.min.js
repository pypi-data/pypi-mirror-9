!function(c){var d=function(a,b){this.init(a,b)};d.prototype={constructor:d,init:function(b,h){var a=this;this.options=h;this.$element=c(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",c.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote,function(){var e=c.Event("loaded");a.$element.trigger(e)});var g=typeof this.options.manager==="function"?this.options.manager.call(this):this.options.manager;g=g.appendModal?g:c(g).modalmanager().data("modalmanager");g.appendModal(this)},toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var a=c.Event("show");if(this.isShown){return}this.$element.trigger(a);if(a.isDefaultPrevented()){return}this.escape();this.tab();this.options.loading&&this.loading()},hide:function(a){a&&a.preventDefault();a=c.Event("hide");this.$element.trigger(a);if(!this.isShown||a.isDefaultPrevented()){return(this.isShown=false)}this.isShown=false;this.escape();this.tab();this.isLoading&&this.loading();c(document).off("focusin.modal");this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",true);c.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},layout:function(){var a=this.options.height?"height":"max-height",h=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var i=this;this.$element.css("margin-left",function(){if(/%/ig.test(i.options.width)){return -(parseInt(i.options.width)/2)+"%"}else{return -(c(this).width()/2)+"px"}})}else{this.$element.css("width","");this.$element.css("margin-left","")}this.$element.find(this.options.overflow).css("overflow","").css(a,"");if(h){var j=this.$element.find(this.options.overflow);j.style("overflow","auto","important").style(a,(typeof(h)=="function"?h():h)+"px","important")}var b=c(window).height()-10<this.$element.height();if(b||this.options.modalOverflow){this.$element.css("margin-top",0).addClass("modal-overflow")}else{this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")}},tab:function(){var a=this;if(this.isShown&&this.options.consumeTab){this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(b){if(b.keyCode&&b.keyCode==9){var h=c(this),e=c(this);a.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(f){if(!f.shiftKey){h=h.data("tabindex")<c(this).data("tabindex")?h=c(this):e=c(this)}else{h=h.data("tabindex")>c(this).data("tabindex")?h=c(this):e=c(this)}});h[0]!==c(this)[0]?h.focus():e.focus();b.preventDefault()}})}else{if(!this.isShown){this.$element.off("keydown.tabindex.modal")}}},escape:function(){var a=this;if(this.isShown&&this.options.keyboard){if(!this.$element.attr("tabindex")){this.$element.attr("tabindex",-1)}this.$element.on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var b=this,a=setTimeout(function(){b.$element.off(c.support.transition.end);b.hideModal()},500);this.$element.one(c.support.transition.end,function(){clearTimeout(a);b.hideModal()})},hideModal:function(){var a=this.options.height?"height":"max-height";var b=this.options.height||this.options.maxHeight;if(b){this.$element.find(this.options.overflow).css("overflow","").css(a,"")}this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove();this.$loading=null;this.isLoading=false},loading:function(a){a=a||function(){};var g=this.$element.hasClass("fade")?"fade":"";if(!this.isLoading){var h=c.support.transition&&g;this.$loading=c('<div class="loading-mask '+g+'">').append(this.options.spinner).appendTo(this.$element);if(h){this.$loading[0].offsetWidth}this.$loading.addClass("in");this.isLoading=true;h?this.$loading.one(c.support.transition.end,a):a()}else{if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var b=this;c.support.transition&&this.$element.hasClass("fade")?this.$loading.one(c.support.transition.end,function(){b.removeLoading()}):b.removeLoading()}else{if(a){a(this.isLoading)}}}},focus:function(){var a=this.$element.find(this.options.focusOn);a=a.length?a:this.$element;a.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var a=this;setTimeout(function(){a.$element.addClass("animated").addClass(a.options.attentionAnimation)},0)}this.focus()},destroy:function(){var a=c.Event("destroy");this.$element.trigger(a);if(a.isDefaultPrevented()){return}this.teardown()},teardown:function(){if(!this.$parent.length){this.$element.remove();this.$element=null;return}if(this.$parent!==this.$element.parent()){this.$element.appendTo(this.$parent)}this.$element.off(".modal");this.$element.removeData("modal");this.$element.removeClass("in").attr("aria-hidden",true).trigger("destroyed")}};c.fn.modal=function(a,b){return this.each(function(){var h=c(this),i=h.data("modal"),j=c.extend({},c.fn.modal.defaults,h.data(),typeof a=="object"&&a);if(!i){h.data("modal",(i=new d(this,j)))}if(typeof a=="string"){i[a].apply(i,[].concat(b))}else{if(j.show){i.show()}}})};c.fn.modal.defaults={keyboard:true,backdrop:true,loading:false,show:true,width:null,height:null,maxHeight:null,modalOverflow:false,consumeTab:true,focusOn:null,replace:false,resize:false,overflow:".modal-body",attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'};c.fn.modal.Constructor=d;c(function(){c(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(a){var b=c(this),i=b.attr("href"),j=c(b.attr("data-target")||(i&&i.replace(/.*(?=#[^\s]+$)/,""))),e=j.data("modal")?"toggle":c.extend({remote:!/#/.test(i)&&i},j.data(),b.data());a.preventDefault();j.modal(e).one("hide",function(){b.focus()})})})}(window.jQuery);