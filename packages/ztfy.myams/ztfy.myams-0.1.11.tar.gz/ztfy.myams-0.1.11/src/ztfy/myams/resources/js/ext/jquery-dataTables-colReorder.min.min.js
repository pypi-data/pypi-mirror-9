(function(l,i,j){function k(a){var b=[];for(var c=0,d=a.length;c<d;c++){b[a[c]]=c}return b}function m(c,a,b){var d=c.splice(a,1)[0];c.splice(b,0,d)}function h(b,f,g){var c=[];for(var d=0,e=b.childNodes.length;d<e;d++){if(b.childNodes[d].nodeType==1){c.push(b.childNodes[d])}}var a=c[f];if(g!==null){b.insertBefore(a,c[g])}else{b.appendChild(a)}}$.fn.dataTableExt.oApi.fnColReorder=function(g,A,F){var G=$.fn.dataTable.Api?true:false;var c,f,d,B,C=g.aoColumns.length,D,e;if(A==F){return}if(A<0||A>=C){this.oApi._fnLog(g,1,"ColReorder 'from' index is out of bounds: "+A);return}if(F<0||F>=C){this.oApi._fnLog(g,1,"ColReorder 'to' index is out of bounds: "+F);return}var H=[];for(c=0,f=C;c<f;c++){H[c]=c}m(H,A,F);var E=k(H);for(c=0,f=g.aaSorting.length;c<f;c++){g.aaSorting[c][0]=E[g.aaSorting[c][0]]}if(g.aaSortingFixed!==null){for(c=0,f=g.aaSortingFixed.length;c<f;c++){g.aaSortingFixed[c][0]=E[g.aaSortingFixed[c][0]]}}for(c=0,f=C;c<f;c++){e=g.aoColumns[c];for(d=0,B=e.aDataSort.length;d<B;d++){e.aDataSort[d]=E[e.aDataSort[d]]}if(G){e.idx=E[e.idx]}}if(G){$.each(g.aLastSort,function(o,p){g.aLastSort[o].src=E[p.src]})}for(c=0,f=C;c<f;c++){e=g.aoColumns[c];if(typeof e.mData=="number"){e.mData=E[e.mData];g.oApi._fnColumnOptions(g,c,{})}}if(g.aoColumns[A].bVisible){var z=this.oApi._fnColumnIndexToVisible(g,A);var b=null;c=F<A?F:F+1;while(b===null&&c<C){b=this.oApi._fnColumnIndexToVisible(g,c);c++}D=g.nTHead.getElementsByTagName("tr");for(c=0,f=D.length;c<f;c++){h(D[c],z,b)}if(g.nTFoot!==null){D=g.nTFoot.getElementsByTagName("tr");for(c=0,f=D.length;c<f;c++){h(D[c],z,b)}}for(c=0,f=g.aoData.length;c<f;c++){if(g.aoData[c].nTr!==null){h(g.aoData[c].nTr,z,b)}}}m(g.aoColumns,A,F);m(g.aoPreSearchCols,A,F);for(c=0,f=g.aoData.length;c<f;c++){if(G){m(g.aoData[c].anCells,A,F)}else{if($.isArray(g.aoData[c]._aData)){m(g.aoData[c]._aData,A,F)}m(g.aoData[c]._anHidden,A,F)}}for(c=0,f=g.aoHeader.length;c<f;c++){m(g.aoHeader[c],A,F)}if(g.aoFooter!==null){for(c=0,f=g.aoFooter.length;c<f;c++){m(g.aoFooter[c],A,F)}}if(G){var a=new $.fn.dataTable.Api(g);a.rows().invalidate()}for(c=0,f=C;c<f;c++){$(g.aoColumns[c].nTh).off("click.DT");this.oApi._fnSortAttachListener(g,g.aoColumns[c].nTh,c)}$(g.oInstance).trigger("column-reorder",[g,{iFrom:A,iTo:F,aiInvertMapping:E}])};var n=function(a,b){var c=function(e,f){var d;if(a.fn.dataTable.Api){d=new a.fn.dataTable.Api(e).settings()[0]}else{if(e.fnSettings){d=e.fnSettings()}else{if(typeof e==="string"){if(a.fn.dataTable.fnIsDataTable(a(e)[0])){d=a(e).eq(0).dataTable().fnSettings()}}else{if(e.nodeName&&e.nodeName.toLowerCase()==="table"){if(a.fn.dataTable.fnIsDataTable(e.nodeName)){d=a(e.nodeName).dataTable().fnSettings()}}else{if(e instanceof jQuery){if(a.fn.dataTable.fnIsDataTable(e[0])){d=e.eq(0).dataTable().fnSettings()}}else{d=e}}}}}if(a.fn.dataTable.camelToHungarian){a.fn.dataTable.camelToHungarian(c.defaults,f||{})}this.s={dt:null,init:a.extend(true,{},c.defaults,f),fixed:0,fixedRight:0,dropCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]};this.dom={drag:null,pointer:null};this.s.dt=d.oInstance.fnSettings();this.s.dt._colReorder=this;this._fnConstruct();d.oApi._fnCallbackReg(d,"aoDestroyCallback",a.proxy(this._fnDestroy,this),"ColReorder");return this};c.prototype={fnReset:function(){var e=[];for(var d=0,f=this.s.dt.aoColumns.length;d<f;d++){e.push(this.s.dt.aoColumns[d]._ColReorder_iOrigCol)}this._fnOrderColumns(e);return this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(g){if(g===j){var e=[];for(var d=0,f=this.s.dt.aoColumns.length;d<f;d++){e.push(this.s.dt.aoColumns[d]._ColReorder_iOrigCol)}return e}this._fnOrderColumns(k(g));return this},_fnConstruct:function(){var g=this;var f=this.s.dt.aoColumns.length;var q;if(this.s.init.iFixedColumns){this.s.fixed=this.s.init.iFixedColumns}this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0;if(this.s.init.fnReorderCallback){this.s.dropCallback=this.s.init.fnReorderCallback}for(q=0;q<f;q++){if(q>this.s.fixed-1&&q<f-this.s.fixedRight){this._fnMouseListener(q,this.s.dt.aoColumns[q].nTh)}this.s.dt.aoColumns[q]._ColReorder_iOrigCol=q}this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(p,o){g._fnStateSave.call(g,o)},"ColReorder_State");var e=null;if(this.s.init.aiOrder){e=this.s.init.aiOrder.slice()}if(this.s.dt.oLoadedState&&typeof this.s.dt.oLoadedState.ColReorder!="undefined"&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length){e=this.s.dt.oLoadedState.ColReorder}if(e){if(!g.s.dt._bInitComplete){var r=false;this.s.dt.aoDrawCallback.push({fn:function(){if(!g.s.dt._bInitComplete&&!r){r=true;var o=k(e);g._fnOrderColumns.call(g,o)}},sName:"ColReorder_Pre"})}else{var d=k(e);g._fnOrderColumns.call(g,d)}}else{this._fnSetColumnIndexes()}},_fnOrderColumns:function(e){if(e.length!=this.s.dt.aoColumns.length){this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");return}for(var d=0,f=e.length;d<f;d++){var g=a.inArray(d,e);if(d!=g){m(e,g,d);this.s.dt.oInstance.fnColReorder(g,d)}}if(this.s.dt.oScroll.sX!==""||this.s.dt.oScroll.sY!==""){this.s.dt.oInstance.fnAdjustColumnSizing()}this.s.dt.oInstance.oApi._fnSaveState(this.s.dt);this._fnSetColumnIndexes()},_fnStateSave:function(e){var d,f,t,s;var g=this.s.dt;for(d=0;d<e.aaSorting.length;d++){e.aaSorting[d][0]=g.aoColumns[e.aaSorting[d][0]]._ColReorder_iOrigCol}var r=a.extend(true,[],e.aoSearchCols);e.ColReorder=[];for(d=0,f=g.aoColumns.length;d<f;d++){s=g.aoColumns[d]._ColReorder_iOrigCol;e.aoSearchCols[s]=r[d];e.abVisCols[s]=g.aoColumns[d].bVisible;e.ColReorder.push(s)}},_fnMouseListener:function(f,d){var e=this;a(d).on("mousedown.ColReorder",function(g){g.preventDefault();e._fnMouseDown.call(e,g,d)})},_fnMouseDown:function(q,r){var e=this;var d=a(q.target).closest("th, td");var g=d.offset();var f=parseInt(a(r).attr("data-column-index"),10);if(f===j){return}this.s.mouse.startX=q.pageX;this.s.mouse.startY=q.pageY;this.s.mouse.offsetX=q.pageX-g.left;this.s.mouse.offsetY=q.pageY-g.top;this.s.mouse.target=this.s.dt.aoColumns[f].nTh;this.s.mouse.targetIndex=f;this.s.mouse.fromIndex=f;this._fnRegions();a(i).on("mousemove.ColReorder",function(o){e._fnMouseMove.call(e,o)}).on("mouseup.ColReorder",function(o){e._fnMouseUp.call(e,o)})},_fnMouseMove:function(q){var r=this;if(this.dom.drag===null){if(Math.pow(Math.pow(q.pageX-this.s.mouse.startX,2)+Math.pow(q.pageY-this.s.mouse.startY,2),0.5)<5){return}this._fnCreateDragNode()}this.dom.drag.css({left:q.pageX-this.s.mouse.offsetX,top:q.pageY-this.s.mouse.offsetY});var g=false;var e=this.s.mouse.toIndex;for(var d=1,f=this.s.aoTargets.length;d<f;d++){if(q.pageX<this.s.aoTargets[d-1].x+((this.s.aoTargets[d].x-this.s.aoTargets[d-1].x)/2)){this.dom.pointer.css("left",this.s.aoTargets[d-1].x);this.s.mouse.toIndex=this.s.aoTargets[d-1].to;g=true;break}}if(!g){this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x);this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to}if(this.s.init.bRealtime&&e!==this.s.mouse.toIndex){this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex);this.s.mouse.fromIndex=this.s.mouse.toIndex;this._fnRegions()}},_fnMouseUp:function(d){var e=this;a(i).off("mousemove.ColReorder mouseup.ColReorder");if(this.dom.drag!==null){this.dom.drag.remove();this.dom.pointer.remove();this.dom.drag=null;this.dom.pointer=null;this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex);this._fnSetColumnIndexes();if(this.s.dt.oScroll.sX!==""||this.s.dt.oScroll.sY!==""){this.s.dt.oInstance.fnAdjustColumnSizing()}if(this.s.dropCallback!==null){this.s.dropCallback.call(this)}this.s.dt.oInstance.oApi._fnSaveState(this.s.dt)}},_fnRegions:function(){var e=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length);this.s.aoTargets.push({x:a(this.s.dt.nTable).offset().left,to:0});var g=0;for(var d=0,f=e.length;d<f;d++){if(d!=this.s.mouse.fromIndex){g++}if(e[d].bVisible){this.s.aoTargets.push({x:a(e[d].nTh).offset().left+a(e[d].nTh).outerWidth(),to:g})}}if(this.s.fixedRight!==0){this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight)}if(this.s.fixed!==0){this.s.aoTargets.splice(0,this.s.fixed)}},_fnCreateDragNode:function(){var g=this.s.dt.oScroll.sX!==""||this.s.dt.oScroll.sY!=="";var d=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh;var e=d.parentNode;var r=e.parentNode;var f=r.parentNode;var q=a(d).clone();this.dom.drag=a(f.cloneNode(false)).addClass("DTCR_clonedTable").append(r.cloneNode(false).appendChild(e.cloneNode(false).appendChild(q[0]))).css({position:"absolute",top:0,left:0,width:a(d).outerWidth(),height:a(d).outerHeight()}).appendTo("body");this.dom.pointer=a("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:g?a("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:a(this.s.dt.nTable).offset().top,height:g?a("div.dataTables_scroll",this.s.dt.nTableWrapper).height():a(this.s.dt.nTable).height()}).appendTo("body")},_fnDestroy:function(){var d,e;for(d=0,e=this.s.dt.aoDrawCallback.length;d<e;d++){if(this.s.dt.aoDrawCallback[d].sName==="ColReorder_Pre"){this.s.dt.aoDrawCallback.splice(d,1);break}}a(this.s.dt.nTHead).find("*").off(".ColReorder");a.each(this.s.dt.aoColumns,function(f,g){a(g.nTh).removeAttr("data-column-index")});this.s.dt._colReorder=null;this.s=null},_fnSetColumnIndexes:function(){a.each(this.s.dt.aoColumns,function(e,d){a(d.nTh).attr("data-column-index",e)})}};c.defaults={aiOrder:null,bRealtime:false,iFixedColumns:0,iFixedColumnsRight:0,fnReorderCallback:null};c.version="1.1.0";a.fn.dataTable.ColReorder=c;a.fn.DataTable.ColReorder=c;if(typeof a.fn.dataTable=="function"&&typeof a.fn.dataTableExt.fnVersionCheck=="function"&&a.fn.dataTableExt.fnVersionCheck("1.9.3")){a.fn.dataTableExt.aoFeatures.push({fnInit:function(f){var d=f.oInstance;if(!f._colReorder){var g=f.oInit;var e=g.colReorder||g.oColReorder||{};new c(f,e)}else{d.oApi._fnLog(f,1,"ColReorder attempted to initialise twice. Ignoring second")}return null},cFeature:"R",sFeature:"ColReorder"})}else{alert("Warning: ColReorder requires DataTables 1.9.3 or greater - www.datatables.net/download")}if(a.fn.dataTable.Api){a.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(d){d._colReorder.fnReset()})});a.fn.dataTable.Api.register("colReorder.order()",function(d){if(d){return this.iterator("table",function(e){e._colReorder.fnOrder(d)})}return this.context.length?this.context[0]._colReorder.fnOrder():null})}return c};n(jQuery,jQuery.fn.dataTable)})(window,document);