/* TableTools 2.2.0
 * 2009-2014 SpryMedia Ltd - datatables.net/license
 *
 * ZeroClipboard 1.0.4
 * Author: Joseph Huckaby - MIT licensed
 */
var TableTools;(function(c,a,d){var b=function(g,f){var e={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(i){if(typeof(i)=="string"){i=a.getElementById(i)}if(!i.addClass){i.hide=function(){this.style.display="none"};i.show=function(){this.style.display=""};i.addClass=function(j){this.removeClass(j);this.className+=" "+j};i.removeClass=function(j){this.className=this.className.replace(new RegExp("\\s*"+j+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")};i.hasClass=function(j){return !!this.className.match(new RegExp("\\s*"+j+"\\s*"))}}return i},setMoviePath:function(i){this.moviePath=i},dispatch:function(l,j,k){var i=this.clients[l];if(i){i.receiveEvent(j,k)}},register:function(j,i){this.clients[j]=i},getDOMObjectPosition:function(j){var i={left:0,top:0,width:j.width?j.width:j.offsetWidth,height:j.height?j.height:j.offsetHeight};if(j.style.width!==""){i.width=j.style.width.replace("px","")}if(j.style.height!==""){i.height=j.style.height.replace("px","")}while(j){i.left+=j.offsetLeft;i.top+=j.offsetTop;j=j.offsetParent}return i},Client:function(i){this.handlers={};this.id=e.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;e.register(this.id,this);if(i){this.glue(i)}}};e.Client.prototype={id:0,ready:false,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:true,cssEffects:true,handlers:null,sized:false,glue:function(k,l){this.domElement=e.$(k);var m=99;if(this.domElement.style.zIndex){m=parseInt(this.domElement.style.zIndex,10)+1}var j=e.getDOMObjectPosition(this.domElement);this.div=a.createElement("div");var i=this.div.style;i.position="absolute";i.left="0px";i.top="0px";i.width=(j.width)+"px";i.height=j.height+"px";i.zIndex=m;if(typeof l!="undefined"&&l!==""){this.div.title=l}if(j.width!==0&&j.height!==0){this.sized=true}if(this.domElement){this.domElement.appendChild(this.div);this.div.innerHTML=this.getHTML(j.width,j.height).replace(/&/g,"&amp;")}},positionElement:function(){var k=e.getDOMObjectPosition(this.domElement);var j=this.div.style;j.position="absolute";j.width=k.width+"px";j.height=k.height+"px";if(k.width!==0&&k.height!==0){this.sized=true}else{return}var i=this.div.childNodes[0];i.width=k.width;i.height=k.height},getHTML:function(l,i){var k="";var j="id="+this.id+"&width="+l+"&height="+i;if(navigator.userAgent.match(/MSIE/)){var m=location.href.match(/^https/i)?"https://":"http://";k+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+m+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+l+'" height="'+i+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+e.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+j+'"/><param name="wmode" value="transparent"/></object>'}else{k+='<embed id="'+this.movieId+'" src="'+e.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+l+'" height="'+i+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+j+'" wmode="transparent" />'}return k},hide:function(){if(this.div){this.div.style.left="-2000px"}},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var i=a.getElementsByTagName("body")[0];try{i.removeChild(this.div)}catch(j){}this.domElement=null;this.div=null}},reposition:function(k){if(k){this.domElement=e.$(k);if(!this.domElement){this.hide()}}if(this.domElement&&this.div){var j=e.getDOMObjectPosition(this.domElement);var i=this.div.style;i.left=""+j.left+"px";i.top=""+j.top+"px"}},clearText:function(){this.clipText="";if(this.ready){this.movie.clearText()}},appendText:function(i){this.clipText+=i;if(this.ready){this.movie.appendText(i)}},setText:function(i){this.clipText=i;if(this.ready){this.movie.setText(i)}},setCharSet:function(i){this.charSet=i;if(this.ready){this.movie.setCharSet(i)}},setBomInc:function(i){this.incBom=i;if(this.ready){this.movie.setBomInc(i)}},setFileName:function(i){this.fileName=i;if(this.ready){this.movie.setFileName(i)}},setAction:function(i){this.action=i;if(this.ready){this.movie.setAction(i)}},addEventListener:function(i,j){i=i.toString().toLowerCase().replace(/^on/,"");if(!this.handlers[i]){this.handlers[i]=[]}this.handlers[i].push(j)},setHandCursor:function(i){this.handCursorEnabled=i;if(this.ready){this.movie.setHandCursor(i)}},setCSSEffects:function(i){this.cssEffects=!!i},receiveEvent:function(l,m){var k;l=l.toString().toLowerCase().replace(/^on/,"");switch(l){case"load":this.movie=a.getElementById(this.movieId);if(!this.movie){k=this;setTimeout(function(){k.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){k=this;setTimeout(function(){k.receiveEvent("load",null)},100);this.ready=true;return}this.ready=true;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":if(this.domElement&&this.cssEffects){if(this.recoverActive){this.domElement.addClass("active")}}break;case"mouseout":if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass("active")){this.domElement.removeClass("active");this.recoverActive=true}}break;case"mousedown":if(this.domElement&&this.cssEffects){this.domElement.addClass("active")}break;case"mouseup":if(this.domElement&&this.cssEffects){this.domElement.removeClass("active");this.recoverActive=false}break}if(this.handlers[l]){for(var j=0,i=this.handlers[l].length;j<i;j++){var n=this.handlers[l][j];if(typeof(n)=="function"){n(this,m)}else{if((typeof(n)=="object")&&(n.length==2)){n[0][n[1]](this,m)}else{if(typeof(n)=="string"){c[n](this,m)}}}}}}};c.ZeroClipboard_TableTools=e;var h;(function(k,j,i){h=function(l,n){if(!this instanceof h){alert("Warning: TableTools must be initialised with the keyword 'new'")}var m=k.fn.dataTable.Api?new k.fn.dataTable.Api(l).settings()[0]:l.fnSettings();this.s={that:this,dt:m,print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:false,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:false,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,background:null}};this.classes=k.extend(true,{},h.classes);if(this.s.dt.bJUI){k.extend(true,this.classes,h.classes_themeroller)}this.fnSettings=function(){return this.s};if(typeof n=="undefined"){n={}}this._fnConstruct(n);return this};h.prototype={fnGetSelected:function(n){var m=[],q=this.s.dt.aoData,p=this.s.dt.aiDisplay,o,l;if(n){for(o=0,l=p.length;o<l;o++){if(q[p[o]]._DTTT_selected){m.push(q[p[o]].nTr)}}}else{for(o=0,l=q.length;o<l;o++){if(q[o]._DTTT_selected){m.push(q[o].nTr)}}}return m},fnGetSelectedData:function(){var m=[];var o=this.s.dt.aoData;var n,l;for(n=0,l=o.length;n<l;n++){if(o[n]._DTTT_selected){m.push(this.s.dt.oInstance.fnGetData(n))}}return m},fnIsSelected:function(m){var l=this.s.dt.oInstance.fnGetPosition(m);return(this.s.dt.aoData[l]._DTTT_selected===true)?true:false},fnSelectAll:function(l){var m=this._fnGetMasterSettings();this._fnRowSelect((l===true)?m.dt.aiDisplay:m.dt.aoData)},fnSelectNone:function(l){var m=this._fnGetMasterSettings();this._fnRowDeselect(this.fnGetSelected(l))},fnSelect:function(l){if(this.s.select.type=="single"){this.fnSelectNone();this._fnRowSelect(l)}else{if(this.s.select.type=="multi"){this._fnRowSelect(l)}}},fnDeselect:function(l){this._fnRowDeselect(l)},fnGetTitle:function(n){var l="";if(typeof n.sTitle!="undefined"&&n.sTitle!==""){l=n.sTitle}else{var m=i.getElementsByTagName("title");if(m.length>0){l=m[0].innerHTML}}if("\u00A1".toString().length<4){return l.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,"")}else{return l.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")}},fnCalcColRatios:function(q){var p=this.s.dt.aoColumns,m=this._fnColumnTargets(q.mColumns),o=[],r=0,s=0,n,l;for(n=0,l=m.length;n<l;n++){if(m[n]){r=p[n].nTh.offsetWidth;s+=r;o.push(r)}}for(n=0,l=o.length;n<l;n++){o[n]=o[n]/s}return o.join("\t")},fnGetTableData:function(l){if(this.s.dt){return this._fnGetDataTablesData(l)}},fnSetText:function(l,m){this._fnFlashSetText(l,m)},fnResizeButtons:function(){for(var l in e.clients){if(l){var m=e.clients[l];if(typeof m.domElement!="undefined"&&m.domElement.parentNode){m.positionElement()}}}},fnResizeRequired:function(){for(var l in e.clients){if(l){var m=e.clients[l];if(typeof m.domElement!="undefined"&&m.domElement.parentNode==this.dom.container&&m.sized===false){return true}}}return false},fnPrint:function(l,m){if(m===d){m={}}if(l===d||l){this._fnPrintStart(m)}else{this._fnPrintEnd()}},fnInfo:function(l,n){var m=k("<div/>").addClass(this.classes.print.info).html(l).appendTo("body");setTimeout(function(){m.fadeOut("normal",function(){m.remove()})},n)},fnContainer:function(){return this.dom.container},_fnConstruct:function(m){var l=this;this._fnCustomiseSettings(m);this.dom.container=i.createElement(this.s.tags.container);this.dom.container.className=this.classes.container;if(this.s.select.type!="none"){this._fnRowSelectConfig()}this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){k(l.s.dt.nTBody).off("click.DTTT_Select","tr");k(l.dom.container).empty()}})},_fnCustomiseSettings:function(l){if(typeof this.s.dt._TableToolsInit=="undefined"){this.s.master=true;this.s.dt._TableToolsInit=true}this.dom.table=this.s.dt.nTable;this.s.custom=k.extend({},h.DEFAULTS,l);this.s.swfPath=this.s.custom.sSwfPath;if(typeof e!="undefined"){e.moviePath=this.s.swfPath}this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;if(this.s.custom.sSelectedClass){this.classes.select.row=this.s.custom.sSelectedClass}this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(p,r){var m;for(var n=0,l=p.length;n<l;n++){if(typeof p[n]=="string"){if(typeof h.BUTTONS[p[n]]=="undefined"){alert("TableTools: Warning - unknown button type: "+p[n]);continue}m=k.extend({},h.BUTTONS[p[n]],true)}else{if(typeof h.BUTTONS[p[n].sExtends]=="undefined"){alert("TableTools: Warning - unknown button type: "+p[n].sExtends);continue}var q=k.extend({},h.BUTTONS[p[n].sExtends],true);m=k.extend(q,p[n],true)}r.appendChild(this._fnCreateButton(m,k(r).hasClass(this.classes.collection.container)))}},_fnCreateButton:function(n,l){var m=this._fnButtonBase(n,l);if(n.sAction.match(/flash/)){this._fnFlashConfig(m,n)}else{if(n.sAction=="text"){this._fnTextConfig(m,n)}else{if(n.sAction=="div"){this._fnTextConfig(m,n)}else{if(n.sAction=="collection"){this._fnTextConfig(m,n);this._fnCollectionConfig(m,n)}}}}return m},_fnButtonBase:function(s,m){var n,q,t;if(m){n=s.sTag&&s.sTag!=="default"?s.sTag:this.s.tags.collection.button;q=s.sLinerTag&&s.sLinerTag!=="default"?s.sLiner:this.s.tags.collection.liner;t=this.classes.collection.buttons.normal}else{n=s.sTag&&s.sTag!=="default"?s.sTag:this.s.tags.button;q=s.sLinerTag&&s.sLinerTag!=="default"?s.sLiner:this.s.tags.liner;t=this.classes.buttons.normal}var p=i.createElement(n),l=i.createElement(q),r=this._fnGetMasterSettings();p.className=t+" "+s.sButtonClass;p.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+r.buttonCounter);p.appendChild(l);l.innerHTML=s.sButtonText;r.buttonCounter++;return p},_fnGetMasterSettings:function(){if(this.s.master){return this.s}else{var n=h._aInstances;for(var m=0,l=n.length;m<l;m++){if(this.dom.table==n[m].s.dt.nTable){return n[m].s}}}},_fnCollectionConfig:function(l,m){var n=i.createElement(this.s.tags.collection.container);n.style.display="none";n.className=this.classes.collection.container;m._collection=n;i.body.appendChild(n);this._fnButtonDefinations(m.aButtons,n)},_fnCollectionShow:function(p,s){var v=this,x=k(p).offset(),q=s._collection,m=x.left,l=x.top+k(p).outerHeight(),u=k(j).height(),r=k(i).height(),t=k(j).width(),w=k(i).width();q.style.position="absolute";q.style.left=m+"px";q.style.top=l+"px";q.style.display="block";k(q).css("opacity",0);var n=i.createElement("div");n.style.position="absolute";n.style.left="0px";n.style.top="0px";n.style.height=((u>r)?u:r)+"px";n.style.width=((t>w)?t:w)+"px";n.className=this.classes.collection.background;k(n).css("opacity",0);i.body.appendChild(n);i.body.appendChild(q);var o=k(q).outerWidth();var y=k(q).outerHeight();if(m+o>w){q.style.left=(w-o)+"px"}if(l+y>r){q.style.top=(l-y-k(p).outerHeight())+"px"}this.dom.collection.collection=q;this.dom.collection.background=n;setTimeout(function(){k(q).animate({opacity:1},500);k(n).animate({opacity:0.25},500)},10);this.fnResizeButtons();k(n).click(function(){v._fnCollectionHide.call(v,null,null)})},_fnCollectionHide:function(l,m){if(m!==null&&m.sExtends=="collection"){return}if(this.dom.collection.collection!==null){k(this.dom.collection.collection).animate({opacity:0},500,function(n){this.style.display="none"});k(this.dom.collection.background).animate({opacity:0},500,function(n){this.parentNode.removeChild(this)});this.dom.collection.collection=null;this.dom.collection.background=null}},_fnRowSelectConfig:function(){if(this.s.master){var o=this,m,l,n=this.s.dt,p=this.s.dt.aoOpenRows;k(n.nTable).addClass(this.classes.select.table);if(this.s.select.type==="os"){k(n.nTBody).on("mousedown.DTTT_Select","tr",function(q){if(q.shiftKey){k(n.nTBody).css("-moz-user-select","none").one("selectstart.DTTT_Select","tr",function(){return false})}});k(n.nTBody).on("mouseup.DTTT_Select","tr",function(q){k(n.nTBody).css("-moz-user-select","")})}k(n.nTBody).on("click.DTTT_Select","tr",function(v){var q=o.s.select;var w=o.s.dt.oInstance.fnGetPosition(this);if(this.parentNode!=n.nTBody){return}if(n.oInstance.fnGetData(this)===null){return}if(q.type=="os"){if(v.ctrlKey||v.metaKey){if(o.fnIsSelected(this)){o._fnRowDeselect(this,v)}else{o._fnRowSelect(this,v)}}else{if(v.shiftKey){var t=o.s.dt.aiDisplay.slice();var s=k.inArray(q.lastRow,t);var r=k.inArray(w,t);if(o.fnGetSelected().length===0||s===-1){t.splice(k.inArray(w,t)+1,t.length)}else{if(s>r){var u=r;r=s;s=u}t.splice(r+1,t.length);t.splice(0,s)}if(!o.fnIsSelected(this)){o._fnRowSelect(t,v)}else{t.splice(k.inArray(w,t),1);o._fnRowDeselect(t,v)}}else{if(o.fnIsSelected(this)&&o.fnGetSelected().length===1){o._fnRowDeselect(this,v)}else{o.fnSelectNone();o._fnRowSelect(this,v)}}}}else{if(o.fnIsSelected(this)){o._fnRowDeselect(this,v)}else{if(q.type=="single"){o.fnSelectNone();o._fnRowSelect(this,v)}else{if(q.type=="multi"){o._fnRowSelect(this,v)}}}}q.lastRow=w});n.oApi._fnCallbackReg(n,"aoRowCreatedCallback",function(s,r,q){if(n.aoData[q]._DTTT_selected){k(s).addClass(o.classes.select.row)}},"TableTools-SelectAll")}},_fnRowSelect:function(s,r){var p=this,q=this._fnSelectData(s),n=q.length===0?null:q[0].nTr,m=[],o,l;for(o=0,l=q.length;o<l;o++){if(q[o].nTr){m.push(q[o].nTr)}}if(this.s.select.preRowSelect!==null&&!this.s.select.preRowSelect.call(this,r,m,true)){return}for(o=0,l=q.length;o<l;o++){q[o]._DTTT_selected=true;if(q[o].nTr){k(q[o].nTr).addClass(p.classes.select.row)}}if(this.s.select.postSelected!==null){this.s.select.postSelected.call(this,m)}h._fnEventDispatch(this,"select",m,true)},_fnRowDeselect:function(s,r){var o=this,p=this._fnSelectData(s),m=p.length===0?null:p[0].nTr,q=[],n,l;for(n=0,l=p.length;n<l;n++){if(p[n].nTr){q.push(p[n].nTr)}}if(this.s.select.preRowSelect!==null&&!this.s.select.preRowSelect.call(this,r,q,false)){return}for(n=0,l=p.length;n<l;n++){p[n]._DTTT_selected=false;if(p[n].nTr){k(p[n].nTr).removeClass(o.classes.select.row)}}if(this.s.select.postDeselected!==null){this.s.select.postDeselected.call(this,q)}h._fnEventDispatch(this,"select",q,false)},_fnSelectData:function(o){var m=[],p,n,l;if(o.nodeName){p=this.s.dt.oInstance.fnGetPosition(o);m.push(this.s.dt.aoData[p])}else{if(typeof o.length!=="undefined"){for(n=0,l=o.length;n<l;n++){if(o[n].nodeName){p=this.s.dt.oInstance.fnGetPosition(o[n]);m.push(this.s.dt.aoData[p])}else{if(typeof o[n]==="number"){m.push(this.s.dt.aoData[o[n]])}else{m.push(o[n])}}}return m}else{m.push(o)}}return m},_fnTextConfig:function(l,n){var m=this;if(n.fnInit!==null){n.fnInit.call(this,l,n)}if(n.sToolTip!==""){l.title=n.sToolTip}k(l).hover(function(){if(n.fnMouseover!==null){n.fnMouseover.call(this,l,n,null)}},function(){if(n.fnMouseout!==null){n.fnMouseout.call(this,l,n,null)}});if(n.fnSelect!==null){h._fnEventListen(this,"select",function(o){n.fnSelect.call(m,l,n,o)})}k(l).click(function(o){if(n.fnClick!==null){n.fnClick.call(m,l,n,null,o)}if(n.fnComplete!==null){n.fnComplete.call(m,l,n,null,null)}m._fnCollectionHide(l,n)})},_fnFlashConfig:function(m,o){var n=this;var l=new e.Client();if(o.fnInit!==null){o.fnInit.call(this,m,o)}l.setHandCursor(true);if(o.sAction=="flash_save"){l.setAction("save");l.setCharSet((o.sCharSet=="utf16le")?"UTF16LE":"UTF8");l.setBomInc(o.bBomInc);l.setFileName(o.sFileName.replace("*",this.fnGetTitle(o)))}else{if(o.sAction=="flash_pdf"){l.setAction("pdf");l.setFileName(o.sFileName.replace("*",this.fnGetTitle(o)))}else{l.setAction("copy")}}l.addEventListener("mouseOver",function(p){if(o.fnMouseover!==null){o.fnMouseover.call(n,m,o,l)}});l.addEventListener("mouseOut",function(p){if(o.fnMouseout!==null){o.fnMouseout.call(n,m,o,l)}});l.addEventListener("mouseDown",function(p){if(o.fnClick!==null){o.fnClick.call(n,m,o,l)}});l.addEventListener("complete",function(p,q){if(o.fnComplete!==null){o.fnComplete.call(n,m,o,l,q)}n._fnCollectionHide(m,o)});this._fnFlashGlue(l,m,o.sToolTip)},_fnFlashGlue:function(l,n,o){var m=this;var p=n.getAttribute("id");if(i.getElementById(p)){l.glue(n,o)}else{setTimeout(function(){m._fnFlashGlue(l,n,o)},100)}},_fnFlashSetText:function(p,m){var o=this._fnChunkData(m,8192);p.clearText();for(var n=0,l=o.length;n<l;n++){p.appendText(o[n])}},_fnColumnTargets:function(n){var p=[];var o=this.s.dt;var m,l;if(typeof n=="object"){for(m=0,l=o.aoColumns.length;m<l;m++){p.push(false)}for(m=0,l=n.length;m<l;m++){p[n[m]]=true}}else{if(n=="visible"){for(m=0,l=o.aoColumns.length;m<l;m++){p.push(o.aoColumns[m].bVisible?true:false)}}else{if(n=="hidden"){for(m=0,l=o.aoColumns.length;m<l;m++){p.push(o.aoColumns[m].bVisible?false:true)}}else{if(n=="sortable"){for(m=0,l=o.aoColumns.length;m<l;m++){p.push(o.aoColumns[m].bSortable?true:false)}}else{for(m=0,l=o.aoColumns.length;m<l;m++){p.push(true)}}}}}return p},_fnNewline:function(l){if(l.sNewLine=="auto"){return navigator.userAgent.match(/Windows/)?"\r\n":"\n"}else{return l.sNewLine}},_fnGetDataTablesData:function(r){var A,y,z,D;var n,p=[],l="",m;var x=this.s.dt,o,u;var q=new RegExp(r.sFieldBoundary,"g");var w=this._fnColumnTargets(r.mColumns);var B=(typeof r.bSelectedOnly!="undefined")?r.bSelectedOnly:false;if(r.bHeader){n=[];for(A=0,y=x.aoColumns.length;A<y;A++){if(w[A]){l=x.aoColumns[A].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");l=this._fnHtmlDecode(l);n.push(this._fnBoundData(l,r.sFieldBoundary,q))}}p.push(n.join(r.sFieldSeperator))}var C=this.fnGetSelected();B=this.s.select.type!=="none"&&B&&C.length!==0;var s=x.oInstance.$("tr",r.oSelectorOpts).map(function(F,E){return B&&k.inArray(E,C)===-1?null:x.oInstance.fnGetPosition(E)}).get();for(z=0,D=s.length;z<D;z++){o=x.aoData[s[z]].nTr;n=[];for(A=0,y=x.aoColumns.length;A<y;A++){if(w[A]){var v=x.oApi._fnGetCellData(x,s[z],A,"display");if(r.fnCellRender){l=r.fnCellRender(v,A,o,s[z])+""}else{if(typeof v=="string"){l=v.replace(/\n/g," ");l=l.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3");l=l.replace(/<.*?>/g,"")}else{l=v+""}}l=l.replace(/^\s+/,"").replace(/\s+$/,"");l=this._fnHtmlDecode(l);n.push(this._fnBoundData(l,r.sFieldBoundary,q))}}p.push(n.join(r.sFieldSeperator));if(r.bOpenRows){m=k.grep(x.aoOpenRows,function(E){return E.nParent===o});if(m.length===1){l=this._fnBoundData(k("td",m[0].nTr).html(),r.sFieldBoundary,q);p.push(l)}}}if(r.bFooter&&x.nTFoot!==null){n=[];for(A=0,y=x.aoColumns.length;A<y;A++){if(w[A]&&x.aoColumns[A].nTf!==null){l=x.aoColumns[A].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,"");l=this._fnHtmlDecode(l);n.push(this._fnBoundData(l,r.sFieldBoundary,q))}}p.push(n.join(r.sFieldSeperator))}var t=p.join(this._fnNewline(r));return t},_fnBoundData:function(l,n,m){if(n===""){return l}else{return n+l.replace(m,n+n)+n}},_fnChunkData:function(l,n){var o=[];var p=l.length;for(var m=0;m<p;m+=n){if(m+n<p){o.push(l.substring(m,m+n))}else{o.push(l.substring(m,p))}}return o},_fnHtmlDecode:function(l){if(l.indexOf("&")===-1){return l}var m=i.createElement("div");return l.replace(/&([^\s]*);/g,function(n,o){if(n.substr(1,1)==="#"){return String.fromCharCode(Number(o.substr(1)))}else{m.innerHTML=n;return m.childNodes[0].nodeValue}})},_fnPrintStart:function(q){var p=this;var n=this.s.dt;this._fnPrintHideNodes(n.nTable);this.s.print.saveStart=n._iDisplayStart;this.s.print.saveLength=n._iDisplayLength;if(q.bShowAll){n._iDisplayStart=0;n._iDisplayLength=-1;if(n.oApi._fnCalculateEnd){n.oApi._fnCalculateEnd(n)}n.oApi._fnDraw(n)}if(n.oScroll.sX!==""||n.oScroll.sY!==""){this._fnPrintScrollStart(n);k(this.s.dt.nTable).bind("draw.DTTT_Print",function(){p._fnPrintScrollStart(n)})}var m=n.aanFeatures;for(var r in m){if(r!="i"&&r!="t"&&r.length==1){for(var o=0,l=m[r].length;o<l;o++){this.dom.print.hidden.push({node:m[r][o],display:"block"});m[r][o].style.display="none"}}}k(i.body).addClass(this.classes.print.body);if(q.sInfo!==""){this.fnInfo(q.sInfo,3000)}if(q.sMessage){k("<div/>").addClass(this.classes.print.message).html(q.sMessage).prepend("body")}this.s.print.saveScroll=k(j).scrollTop();j.scrollTo(0,0);k(i).bind("keydown.DTTT",function(s){if(s.keyCode==27){s.preventDefault();p._fnPrintEnd.call(p,s)}})},_fnPrintEnd:function(p){var n=this;var l=this.s.dt;var o=this.s.print;var m=this.dom.print;this._fnPrintShowNodes();if(l.oScroll.sX!==""||l.oScroll.sY!==""){k(this.s.dt.nTable).unbind("draw.DTTT_Print");this._fnPrintScrollEnd()}j.scrollTo(0,o.saveScroll);if(m.message!==null){i.body.removeChild(m.message);m.message=null}k(i.body).removeClass("DTTT_Print");l._iDisplayStart=o.saveStart;l._iDisplayLength=o.saveLength;if(l.oApi._fnCalculateEnd){l.oApi._fnCalculateEnd(l)}l.oApi._fnDraw(l);k(i).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var n=this.s.dt,p=n.nScrollHead.getElementsByTagName("div")[0],l=p.getElementsByTagName("table")[0],q=n.nTable.parentNode,m,o;m=n.nTable.getElementsByTagName("thead");if(m.length>0){n.nTable.removeChild(m[0])}if(n.nTFoot!==null){o=n.nTable.getElementsByTagName("tfoot");if(o.length>0){n.nTable.removeChild(o[0])}}m=n.nTHead.cloneNode(true);n.nTable.insertBefore(m,n.nTable.childNodes[0]);if(n.nTFoot!==null){o=n.nTFoot.cloneNode(true);n.nTable.insertBefore(o,n.nTable.childNodes[1])}if(n.oScroll.sX!==""){n.nTable.style.width=k(n.nTable).outerWidth()+"px";q.style.width=k(n.nTable).outerWidth()+"px";q.style.overflow="visible"}if(n.oScroll.sY!==""){q.style.height=k(n.nTable).outerHeight()+"px";q.style.overflow="visible"}},_fnPrintScrollEnd:function(){var l=this.s.dt,m=l.nTable.parentNode;if(l.oScroll.sX!==""){m.style.width=l.oApi._fnStringToCss(l.oScroll.sX);m.style.overflow="auto"}if(l.oScroll.sY!==""){m.style.height=l.oApi._fnStringToCss(l.oScroll.sY);m.style.overflow="auto"}},_fnPrintShowNodes:function(){var n=this.dom.print.hidden;for(var m=0,l=n.length;m<l;m++){n[m].node.style.display=n[m].display}n.splice(0,n.length)},_fnPrintHideNodes:function(m){var o=this.dom.print.hidden;var q=m.parentNode;var r=q.childNodes;for(var n=0,l=r.length;n<l;n++){if(r[n]!=m&&r[n].nodeType==1){var p=k(r[n]).css("display");if(p!="none"){o.push({node:r[n],display:p});r[n].style.display="none"}}}if(q.nodeName.toUpperCase()!="BODY"){this._fnPrintHideNodes(q)}}};h._aInstances=[];h._aListeners=[];h.fnGetMasters=function(){var m=[];for(var n=0,l=h._aInstances.length;n<l;n++){if(h._aInstances[n].s.master){m.push(h._aInstances[n])}}return m};h.fnGetInstance=function(n){if(typeof n!="object"){n=i.getElementById(n)}for(var m=0,l=h._aInstances.length;m<l;m++){if(h._aInstances[m].s.master&&h._aInstances[m].dom.table==n){return h._aInstances[m]}}return null};h._fnEventListen=function(n,m,l){h._aListeners.push({that:n,type:m,fn:l})};h._fnEventDispatch=function(r,p,q,o){var n=h._aListeners;for(var m=0,l=n.length;m<l;m++){if(r.dom.table==n[m].that.dom.table&&n[m].type==p){n[m].fn(q,o)}}};h.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:false,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:true,bFooter:true,bOpenRows:false,bSelectedOnly:false,oSelectorOpts:d,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};h.BUTTONS={csv:k.extend({},h.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(m,n,l){this.fnSetText(l,this.fnGetTableData(n))}}),xls:k.extend({},h.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:true,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(m,n,l){this.fnSetText(l,this.fnGetTableData(n))}}),copy:k.extend({},h.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(m,n,l){this.fnSetText(l,this.fnGetTableData(n))},fnComplete:function(p,q,o,r){var m=r.split("\n").length,l=this.s.dt.nTFoot===null?m-1:m-2,n=(l==1)?"":"s";this.fnInfo("<h6>Table copied</h6><p>Copied "+l+" row"+n+" to the clipboard.</p>",1500)}}),pdf:k.extend({},h.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(m,n,l){this.fnSetText(l,"title:"+this.fnGetTitle(n)+"\nmessage:"+n.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(n)+"\norientation:"+n.sPdfOrientation+"\nsize:"+n.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(n))}}),print:k.extend({},h.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.</p>",sMessage:null,bShowAll:true,sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(l,m){this.fnPrint(true,m)}}),text:k.extend({},h.buttonBase),select:k.extend({},h.buttonBase,{sButtonText:"Select button",fnSelect:function(l,m){if(this.fnGetSelected().length!==0){k(l).removeClass(this.classes.buttons.disabled)}else{k(l).addClass(this.classes.buttons.disabled)}},fnInit:function(l,m){k(l).addClass(this.classes.buttons.disabled)}}),select_single:k.extend({},h.buttonBase,{sButtonText:"Select button",fnSelect:function(m,n){var l=this.fnGetSelected().length;if(l==1){k(m).removeClass(this.classes.buttons.disabled)}else{k(m).addClass(this.classes.buttons.disabled)}},fnInit:function(l,m){k(l).addClass(this.classes.buttons.disabled)}}),select_all:k.extend({},h.buttonBase,{sButtonText:"Select all",fnClick:function(l,m){this.fnSelectAll()},fnSelect:function(l,m){if(this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()){k(l).addClass(this.classes.buttons.disabled)}else{k(l).removeClass(this.classes.buttons.disabled)}}}),select_none:k.extend({},h.buttonBase,{sButtonText:"Deselect all",fnClick:function(l,m){this.fnSelectNone()},fnSelect:function(l,m){if(this.fnGetSelected().length!==0){k(l).removeClass(this.classes.buttons.disabled)}else{k(l).addClass(this.classes.buttons.disabled)}},fnInit:function(l,m){k(l).addClass(this.classes.buttons.disabled)}}),ajax:k.extend({},h.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(m,n){var l=this.fnGetTableData(n);k.ajax({url:n.sAjaxUrl,data:[{name:"tableData",value:l}],success:n.fnAjaxComplete,dataType:"json",type:"POST",cache:false,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(l){alert("Ajax complete")}}),div:k.extend({},h.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:k.extend({},h.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(l,m){this._fnCollectionShow(l,m)}})};h.buttons=h.BUTTONS;h.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};h.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};h.DEFAULTS={sSwfPath:"../swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};h.defaults=h.DEFAULTS;h.prototype.CLASS="TableTools";h.version="2.2.0-dev";if(k.fn.dataTable.Api){k.fn.dataTable.Api.register("tabletools()",function(){var l=null;if(this.context.length>0){l=h.fnGetInstance(this.context[0].nTable)}return l})}if(typeof k.fn.dataTable=="function"&&typeof k.fn.dataTableExt.fnVersionCheck=="function"&&k.fn.dataTableExt.fnVersionCheck("1.9.0")){k.fn.dataTableExt.aoFeatures.push({fnInit:function(o){var n=o.oInit;var m=n.tableTools||n.oTableTools||{};var l=new h(o.oInstance,m);h._aInstances.push(l);return l.dom.container},cFeature:"T",sFeature:"TableTools"})}else{alert("Warning: TableTools requires DataTables 1.9.0 or newer - www.datatables.net/download")}k.fn.DataTable.TableTools=h})(jQuery,c,a);if(typeof g.fn.dataTable=="function"&&typeof g.fn.dataTableExt.fnVersionCheck=="function"&&g.fn.dataTableExt.fnVersionCheck("1.9.0")){g.fn.dataTableExt.aoFeatures.push({fnInit:function(k){var j=typeof k.oInit.oTableTools!="undefined"?k.oInit.oTableTools:{};var i=new h(k.oInstance,j);h._aInstances.push(i);return i.dom.container},cFeature:"T",sFeature:"TableTools"})}else{alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download")}g.fn.dataTable.TableTools=h;g.fn.DataTable.TableTools=h;return h};b(jQuery,jQuery.fn.dataTable)})(window,document);