{% load i18n humanize djinn_contenttypes auth_tags %}


<li class="event editable">
  <a data-target="#MyModal"
     href="{% url 'djinn_events_view_event' object.id object.slug %}?modal=1"
     data-toggle="modal">{{ object.title|abbreviate:50 }}</a>
      
  <time>
    {% if object.start_time %}{{ object.start|date:"DATETIME_FORMAT" }}
    {% else %}{{ object.start|date:"DATE_FORMAT" }}{% endif %}{% if object.has_end %}
    -
    {% if object.start_date != object.end_date %}
    {% if object.end_time %}{{ object.end|date:"DATETIME_FORMAT" }}{% else %}{{ object.end|date:"DATE_FORMAT" }}{% endif %}{% elif object.end_time %}{{ object.end|date:"TIME_FORMAT" }}{% endif %}{% endif %}</time>
      
  {% if object.location %}
  <div class="location">{{ object.location }}</div>
  {% endif %}

  <p>{{ object.text|safe|abbreviate:100 }}</p>
  
  <span class="controls">

    {% with perm=object|edit_permission_id %}
    {% ifpermission object request.user perm %}
    <a data-toggle="tooltip"
       title="{% trans 'Edit event' %}"
       href="{% url 'djinn_events_edit_event' object.id %}">
      <i class="icon-pencil"></i>
    </a>
    {% endifpermission %}
    {% endwith %}

    {% with perm=object|delete_permission_id %}
    {% ifpermission object request.user perm %}
    <a data-toggle="tooltip"
       class="rm-inline"
       title="{% trans 'Delete event' %}"
       href="{% url 'djinn_events_delete_event' object.id %}">
      <i class="icon-remove"></i>
    </a>
    {% endifpermission %}
    {% endwith %}

  </span>

</li>
