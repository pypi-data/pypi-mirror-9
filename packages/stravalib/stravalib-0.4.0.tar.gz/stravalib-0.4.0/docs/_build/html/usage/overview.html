<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Usage Overview &mdash; stravalib 0.2.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="stravalib 0.2.0 documentation" href="../index.html" />
    <link rel="next" title="Athletes" href="athletes.html" />
    <link rel="prev" title="Authentication and Authorization" href="auth.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="athletes.html" title="Athletes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="auth.html" title="Authentication and Authorization"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">stravalib 0.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="usage-overview">
<span id="overview"></span><h1>Usage Overview<a class="headerlink" href="#usage-overview" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../api.html#stravalib.client.Client" title="stravalib.client.Client"><tt class="xref py py-class docutils literal"><span class="pre">stravalib.client.Client</span></tt></a> class exposes methods that loosely correspond
with the REST methods exposed by the Strava API.</p>
<div class="section" id="retrieving-single-entities">
<h2>Retrieving Single Entities<a class="headerlink" href="#retrieving-single-entities" title="Permalink to this headline">¶</a></h2>
<p>The simplest case are the client methods that return single entities. The entity object
types are instances of <a class="reference internal" href="../api.html#module-stravalib.model" title="stravalib.model: The entity objects that are instantiated from the API."><tt class="xref py py-mod docutils literal"><span class="pre">stravalib.model</span></tt></a> classes. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">access_token</span><span class="o">=</span><span class="n">JOHNS_ACCESS_TOKEN</span><span class="p">)</span>
<span class="n">athlete</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span> <span class="c"># Get John&#39;s full athlete record</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Hello, {}. I know your email is {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">athlete</span><span class="o">.</span><span class="n">firstname</span><span class="p">,</span> <span class="n">athlete</span><span class="o">.</span><span class="n">email</span><span class="p">))</span>
<span class="c"># &quot;Hello, John.  I know your email is john@example.com&quot;</span>
</pre></div>
</div>
<div class="section" id="entity-resource-states">
<h3>Entity Resource States<a class="headerlink" href="#entity-resource-states" title="Permalink to this headline">¶</a></h3>
<p>Entities in Strava&#8217;s API exist at different detail levels, denoted by the numeric
<cite>resource_state</cite> attribute (1=metadata, 2=summary, 3=detailed).  In general, detail level
3 (&#8220;detailed&#8221;) is only available to the user that is authenticated.  Detail level 2 (&#8220;summary&#8221;)
information is available to others.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">other_athlete</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span> <span class="c"># Some other Athlete ID</span>
<span class="n">other_athlete</span><span class="o">.</span><span class="n">firstname</span>  <span class="c"># This is accessible</span>
<span class="c"># But this is not:</span>
<span class="c"># other_athlete.email</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="retrieving-entity-result-sets">
<h2>Retrieving Entity Result Sets<a class="headerlink" href="#retrieving-entity-result-sets" title="Permalink to this headline">¶</a></h2>
<p>A number of Strava API endpoints return paged results.  The stravalib library abstracts over
the paging to provide an iterator that will iterate over the entire resultset, fetching 200-page
result sets under the hood.</p>
<p>This capability is provided by the <a class="reference internal" href="../api.html#stravalib.client.BatchedResultsIterator" title="stravalib.client.BatchedResultsIterator"><tt class="xref py py-class docutils literal"><span class="pre">stravalib.client.BatchedResultsIterator</span></tt></a> class.  If
you only wish to fetch a few objects, you can specify a limit in the method call or set the limit
on the resulting iterator.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">activities</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activities</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">activities</span><span class="p">))</span> <span class="o">==</span> <span class="mi">10</span>

<span class="c"># or:</span>
<span class="n">activities</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activities</span><span class="p">()</span>
<span class="n">activities</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">activities</span><span class="p">))</span> <span class="o">==</span> <span class="mi">10</span>
</pre></div>
</div>
<p>Note that setting the limit on the iterator is the only option when you are using the collection
attributes on entities.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">activity</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="n">activity_id</span><span class="p">)</span>
<span class="n">comments</span> <span class="o">=</span> <span class="n">activity</span><span class="o">.</span><span class="n">comments</span>
<span class="n">comments</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">comments</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
<div class="section" id="attribute-types-and-units">
<h2>Attribute Types and Units<a class="headerlink" href="#attribute-types-and-units" title="Permalink to this headline">¶</a></h2>
<p>Many of the attributes in the Strava API are either temporal (or interval) types or quantities
that have implicit units associated with them.  In both cases these are represented using
richer python types than the simple string or numeric values that Strava REST API returns.</p>
<div class="section" id="date-time-types">
<h3>Date/Time Types<a class="headerlink" href="#date-time-types" title="Permalink to this headline">¶</a></h3>
<p>The date+time responses are encoded as python native <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.datetime" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.datetime</span></tt></a> objects.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">a</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">start_date</span><span class="p">)</span>
<span class="c"># 2013-11-17 16:00:00+00:00</span>
</pre></div>
</div>
<p>Date values which have no time component are encoded as python native <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.date" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.date</span></tt></a> objects.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">me</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_athlete</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">me</span><span class="o">.</span><span class="n">dateofbirth</span><span class="p">)</span>
<span class="c"># 2010-12-26</span>
</pre></div>
</div>
<p>Interval/duration values are represented using <a class="reference external" href="http://docs.python.org/library/datetime.html#datetime.timedelta" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">datetime.timedelta</span></tt></a> objects, which allows
them to be added to datetime objects, etc.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">a</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">elapsed_time</span><span class="p">)</span>
<span class="c"># 10:45:00</span>
<span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">elapsed_time</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span>
<span class="c"># 38700</span>
</pre></div>
</div>
</div>
<div class="section" id="quantities-and-units">
<h3>Quantities and Units<a class="headerlink" href="#quantities-and-units" title="Permalink to this headline">¶</a></h3>
<p>Typically the units for quantity attributes returned by the Strava REST API are not
what people would actually want to see (e.g. meters-per-second instead of
kilometers-per-hour or miles-per-hour).</p>
<p>To facilitate working with these quantities, stravalib makes use of the
<a class="reference external" href="https://pypi.python.org/pypi/units/">units library</a>.  You can simply cast the values string
to see a representation that includes the units:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">activity</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">distance</span><span class="p">)</span>
<span class="c"># 22530.80 m</span>
</pre></div>
</div>
<p>Hmmm, meters.  Well, here in the US we like to see miles.  While you can certainly do this using the units
library directly, stravalib provides a preconfigured set of common units to simplify matters.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">stravalib</span> <span class="kn">import</span> <span class="n">unithelper</span>

<span class="n">activity</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">unithelper</span><span class="o">.</span><span class="n">miles</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
<span class="c"># 14.00 mi</span>
</pre></div>
</div>
<p>Of course, if you want to do something besides display those values, you&#8217;ll likely
want a number.  You can directly access the &#8216;num&#8217; attribute of the <tt class="xref py py-class docutils literal"><span class="pre">units.quantity.Quantity</span></tt> instance,
or just cast to a numeric type (e.g. float).:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">activity</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_activity</span><span class="p">(</span><span class="mi">96089609</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
<span class="c"># 22530.8</span>
<span class="k">print</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">unithelper</span><span class="o">.</span><span class="n">miles</span><span class="p">(</span><span class="n">activity</span><span class="o">.</span><span class="n">distance</span><span class="p">)))</span>
<span class="c"># 13.9999900581</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Usage Overview</a><ul>
<li><a class="reference internal" href="#retrieving-single-entities">Retrieving Single Entities</a><ul>
<li><a class="reference internal" href="#entity-resource-states">Entity Resource States</a></li>
</ul>
</li>
<li><a class="reference internal" href="#retrieving-entity-result-sets">Retrieving Entity Result Sets</a></li>
<li><a class="reference internal" href="#attribute-types-and-units">Attribute Types and Units</a><ul>
<li><a class="reference internal" href="#date-time-types">Date/Time Types</a></li>
<li><a class="reference internal" href="#quantities-and-units">Quantities and Units</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="auth.html"
                        title="previous chapter">Authentication and Authorization</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="athletes.html"
                        title="next chapter">Athletes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/usage/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="athletes.html" title="Athletes"
             >next</a> |</li>
        <li class="right" >
          <a href="auth.html" title="Authentication and Authorization"
             >previous</a> |</li>
        <li><a href="../index.html">stravalib 0.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Hans Lellelid.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>