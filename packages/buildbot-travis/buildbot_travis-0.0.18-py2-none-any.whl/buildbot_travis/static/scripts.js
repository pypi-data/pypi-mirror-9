(function(){var e;e=angular.module("ui.bootstrap.showErrors",[]),e.directive("showErrors",["$timeout","showErrorsConfig","$interpolate",function(e,t,o){var i,r,s;return r=function(e){var o;return o=t.trigger,e&&null!=e.trigger&&(o=e.trigger),o},i=function(e){var o;return o=t.showSuccess,e&&null!=e.showSuccess&&(o=e.showSuccess),o},s=function(t,s,n,l){var c,a,d,v,p,u,f,g;if(c=!1,p=t.$eval(n.showErrors),u=i(p),g=r(p),a=s[0].querySelector("input[name]"),v=angular.element(a),d=o(v.attr("name")||"")(t),!d)throw"show-errors element has no child input element with a 'name' attribute";return v.bind(g,function(){return c=!0,f(l[d].$invalid)}),t.$watch(function(){return l[d]&&l[d].$invalid},function(e){return c?f(e):void 0}),t.$on("show-errors-check-validity",function(){return f(l[d].$invalid)}),t.$on("show-errors-reset",function(){return e(function(){return s.removeClass("has-error"),s.removeClass("has-success"),c=!1},0,!1)}),f=function(e){return s.toggleClass("has-error",e),u?s.toggleClass("has-success",!e):void 0}},{restrict:"A",require:"^form",compile:function(e,t){if(-1===t.showErrors.indexOf("skipFormGroupCheck")&&!e.hasClass("form-group")&&!e.hasClass("input-group"))throw"show-errors element does not have the 'form-group' or 'input-group' class";return s}}}]),e.provider("showErrorsConfig",function(){var e,t;e=!1,t="blur",this.showSuccess=function(t){return e=t},this.trigger=function(e){return t=e},this.$get=function(){return{showSuccess:e,trigger:t}}})}).call(this),function(){var e;e=function(){function e(){return["common","ui.bootstrap.showErrors"]}return e}(),angular.module("buildbot_travis",new e)}.call(this),function(){var e,t,o;o=function(){function e(e,o){this.$scope=e,t=this,this.$scope.title="Watched Projects",this.$scope.project_remove=function(e){return _.remove(t.$scope.cfg.projects,function(t){return t===e})},this.$scope.new_project=function(){return e.cfg.projects.push({vcs_type:_.keys(o.plugins.buildbot_travis.supported_vcs)[0]})}}var t;return t=null,e}(),e=function(){function e(e){this.$scope=e,t=this,this.$scope.title="Default Environment Variables",e.new_env={},this.$scope.env_remove=function(t){return delete e.cfg.env[t]},this.$scope.env_add=function(){return t.$scope.cfg.env[t.$scope.new_env.key]=t.$scope.new_env.value,e.new_env={}}}var t;return t=null,e}(),t=function(){function e(e){this.$scope=e,t=this,this.$scope.title="Not Important Files",this.$scope.important_file_remove=function(e){return _.remove(t.$scope.cfg.not_important_files,function(t){return t===e})},this.$scope.important_file_add=function(){return t.$scope.new_file?(t.$scope.cfg.not_important_files.push(t.$scope.new_file),t.$scope.new_file=""):void 0}}var t;return t=null,e}(),angular.module("buildbot_travis").controller("projectsConfigController",["$scope","config","$state",o]).controller("envConfigController",["$scope","config","$state",e]).controller("notImportantFilesConfigController",["$scope","config","$state",t])}.call(this),function(){var e;e=function(){function e(e,t){var o;o="settings",t.addGroup({name:o,caption:"Settings",icon:"wrench",order:150}),e.state({controller:"projectsConfigController",templateUrl:"buildbot_travis/views/projects.html",name:"travis_config_projects",url:"/bbtravis/config/projects",data:{group:o,caption:"Projects"}}),e.state({controller:"envConfigController",templateUrl:"buildbot_travis/views/env.html",name:"travis_config_env",url:"/bbtravis/config/env",data:{group:o,caption:"Environment variables"}}),e.state({controller:"notImportantFilesConfigController",templateUrl:"buildbot_travis/views/not_important_files.html",name:"not_important_files",url:"/bbtravis/config/not_important_files",data:{group:o,caption:"Not Important Files"}})}return e}(),angular.module("buildbot_travis").config(["$stateProvider","glMenuServiceProvider",e])}.call(this),function(){var e,t;e=function(){function e(){return{replace:!0,transclude:!0,restrict:"E",templateUrl:"buildbot_travis/views/config_page.html",controller:"_ConfigPageController"}}return e}(),t=function(){function e(e,o,i,r){this.$scope=e,t=this,this.$scope.cfg=angular.copy(o.plugins.buildbot_travis.cfg),this.$scope.buildbot_travis=o.plugins.buildbot_travis,this.$scope.save=function(){return t.$scope.$broadcast("show-errors-check-validity"),t.$scope.hasInvalids()?void 0:(o.plugins.buildbot_travis.cfg=angular.copy(t.$scope.cfg),r.put("buildbot_travis/api/config",o.plugins.buildbot_travis.cfg))},this.$scope.cancel=function(){return this.$scope.cfg=angular.copy(o.plugins.buildbot_travis.cfg)},this.$scope.hasInvalids=function(){var e,o;return e=function(t){var o,i;if(null!=(i=t.form)?i.$invalid:void 0)return!0;for(o=t.$$childHead;o;){if(e(o))return!0;o=o.$$nextSibling}return!1},o=e(t.$scope)}}var t;return t=null,e}(),angular.module("buildbot_travis").directive("configPage",[e]).controller("_ConfigPageController",["$scope","config","$state","$http",t])}.call(this),angular.module("buildbot_travis").run(["$templateCache",function(e){e.put("buildbot_travis/views/config_page.html",'<div class="container"><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">{{ title }}</h3></div><div class="panel-body"><ng-transclude></ng-transclude></div><div class="panel-footer"><div ng-click="cancel()" class="btn btn-default">Dismiss changes</div><div ng-class="{disabled: hasInvalids()}" ng-click="save()" class="btn btn-default pull-right">Save</div></div></div></div></div></div>'),e.put("buildbot_travis/views/env.html",'<config-page><div ng-repeat="(key, value) in cfg.env" class="form-group"><ng-form name="form"><div class="form-group col-sm-6"><input type="text" ng-model="key" ng-disabled="true" class="form-control"/></div><div show-errors="show-errors" class="input-group col-sm-6"><input name="value" type="text" ng-model="value" required="required" class="form-control"/><div class="input-group-btn"><div ng-click="env_remove(key)" class="btn btn-danger"><i class="fa fa-times"></i></div></div></div></ng-form></div><div class="form-group"><ng-form name="form2"><div show-errors="show-errors" class="col-sm-6 form-group"><input name="name" type="text" ng-model="new_env.key" placeholder="variable name" required="required" class="form-control"/></div><div show-errors="show-errors" class="col-sm-6 input-group"><input name="value" type="text" ng-model="new_env.value" placeholder="variable value" required="required" class="form-control"/><div class="input-group-btn"><div ng-disabled="form2.$invalid" ng-click="env_add(key)" class="btn btn-default"><i class="fa fa-plus"></i></div></div></div></ng-form></div></config-page>'),e.put("buildbot_travis/views/not_important_files.html",'<config-page><div class="form-group"><div ng-repeat="file in cfg.not_important_files" class="row"><div class="col-sm-12"><div class="input-group"><input type="text" ng-model="file" class="form-control"/><div class="input-group-btn"><div ng-click="important_file_remove(file)" class="btn btn-danger">x</div></div></div></div></div><div class="row"><div class="col-sm-12"><div class="input-group filelist"><input type="text" ng-model="new_file" placeholder="file whose change dont generate a build" class="form-control"/><div class="input-group-btn"><div ng-click="important_file_add()" class="btn btn-default">+</div></div></div></div></div></div></config-page>'),e.put("buildbot_travis/views/projects.html",'<config-page><div ng-repeat="project in cfg.projects" class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">{{ project.name }}<div ng-click="project_remove(project)" class="btn btn-xs btn-danger pull-right"><i class="fa fa-times"></i></div></h3><div class="clearfix"></div></div><div class="panel-body"><ng-form name="form" class="form-horizontal"><div show-errors="show-errors" class="form-group"><label class="col-sm-2 control-label">Project name:</label><div class="col-sm-10"><input type="text" ng-model="project.name" name="name" placeholder="Project Name" required="required" class="form-control"/><p ng-if="form.name.$error.required" class="help-block">The projects\'s name is required</p></div></div><div class="form-group"><label class="col-sm-2 control-label">VCS type:</label><div class="col-sm-2"><select ng-model="project.vcs_type" ng-options="key as key for (key, value) in buildbot_travis.supported_vcs" class="form-control"></select></div><span class="col-sm-8 control-label">{{buildbot_travis.supported_vcs[project.vcs_type]}} </span></div><div class="form-group"><label class="col-sm-2 control-label">branch:</label><div class="col-sm-10"><input type="text" ng-model="project.branch" placeholder="Branches to watch (empty means all branches, several branches can be specified, separated by spaces)" class="form-control"/></div></div><div show-errors="show-errors" class="form-group"><label class="col-sm-2 control-label">repository:</label><div class="col-sm-10"><input name="repository" type="text" ng-model="project.repository" placeholder="git://url/to/repo.git" required="required" class="form-control"/><p ng-if="form.repository.$error.required" class="help-block">The projects\'s name is required</p></div></div></ng-form></div></div><div ng-click="new_project()" class="btn btn-default pull-right">New Project</div></config-page>'),e.put("buildbot_travis/views/travis_config.html",'<div class="container"><div class="row"><div class="col-sm-12"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">Buildbot Travis configuration editor</h3></div><div class="panel-body"><form><div class="form-group"><label>Projects repositories</label><div ng-repeat="project in cfg.projects" class="row"><div class="col-sm-2"><input type="text" ng-model="project.name" class="form-control"/></div><div class="col-sm-2"><input type="text" ng-model="project.vcs_type" class="form-control"/></div><div class="col-sm-4"><input type="text" ng-model="project.branch" class="form-control"/></div><div class="col-sm-12"><div class="input-group"><input type="text" ng-model="project.repository" class="form-control"/><div class="input-group-btn"><div ng-click="project_remove(project)" class="btn btn-danger">x</div></div></div></div></div><div class="row"><div class="col-sm-2"><input type="text" ng-model="new_project.name" placeholder="project name" class="form-control"/></div><div class="col-sm-2"><input type="text" ng-model="new_project.vcs_type" placeholder="project type" class="form-control"/></div><div class="col-sm-4"><input type="text" ng-model="new_project.branch" placeholder="project branch" class="form-control"/></div><div class="col-sm-12"><div class="input-group"><input type="url" ng-model="new_project.repository" placeholder="repository url" class="form-control"/><div class="input-group-btn"><div ng-click="project_add()" class="btn btn-default">+</div></div></div></div></div></div><div class="form-group"><label>Default Environment Variables</label><div ng-repeat="(key, value) in cfg.env" class="row"><div class="col-sm-6"><input type="text" ng-model="key" class="form-control"/></div><div class="col-sm-6"><div class="input-group"><input type="text" ng-model="value" class="form-control"/><div class="input-group-btn"><div ng-click="env_remove(key)" class="btn btn-danger">x</div></div></div></div></div><div class="row"><div class="col-sm-6"><input type="text" ng-model="new_env_key" placeholder="variable name" class="form-control"/></div><div class="col-sm-6"><div class="input-group"><input type="text" ng-model="new_env_value" placeholder="variable value" class="form-control"/><div class="input-group-btn"><div ng-click="env_add(key)" class="btn btn-default">+</div></div></div></div></div></div><div class="form-group"><label>Not Important Files</label><div ng-repeat="file in cfg.not_important_files" class="row"><div class="col-sm-12"><div class="input-group"><input type="text" ng-model="file" class="form-control"/><div class="input-group-btn"><div ng-click="important_file_remove(file)" class="btn btn-danger">x</div></div></div></div></div><div class="row"><div class="col-sm-12"><div class="input-group filelist"><input type="text" ng-model="new_file" placeholder="file whose change dont generate a build" class="form-control"/><div class="input-group-btn"><div ng-click="important_file_add()" class="btn btn-default">+</div></div></div></div></div></div></form></div><div class="panel-footer"><div ng-click="cancel()" class="btn btn-default">Dismiss changes</div><div ng-click="save()" class="btn btn-default pull-right">Save</div></div></div></div></div></div>')}]);