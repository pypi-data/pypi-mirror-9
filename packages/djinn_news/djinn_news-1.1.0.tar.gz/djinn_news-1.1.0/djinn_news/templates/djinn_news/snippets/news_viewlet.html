{% load i18n humanize auth_tags djinn_contenttypes %}

<article id="news" class="editable">
  
  <header>
    <h2>{% trans "News" %}

      {% ifpermission "" request.user 'djinn_news.add_news' %}
      <span class="controls">
        <a href="{% url 'djinn_news_add_news' %}"
           data-toggle="tooltip"
           title="{% trans 'Add news' %}"
           >
          <i class="icon-plus"></i>
        </a>
      </span>
      {% endifpermission %}
    </h2>
  </header>

  {% if view.news|length > 0 %}

  <ul id="newslist">
    {% for highlight in view.news %}
    <li class="news">
      <a href="{% url 'djinn_news_view_news' highlight.content_object.id highlight.content_object.slug %}">
        {{ highlight.content_object.title|abbreviate:50 }}
      </a>
      
      <p>{{ highlight.content_object.text|safe|abbreviate:100 }}</p>
    </li>
    {% endfor %}
  </ul>

  {% if view.show_more %}
  <a href="{% url 'haystack_search' %}?meta_type=news">
    {% trans "All news" %}
  </a>
  {% endif %}

  {% else %}
  
  <div class="alert alert-info" id="news-alert">
    {% trans "No news" %}
  </div>
  
  {% endif %}
  
</article>
