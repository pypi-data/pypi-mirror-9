{% extends "djmicrosip_puntos\base.html" %}
{% block title %}Generar lote de tarjetas{% endblock %}

<!-- CSS Code -->
{% block style_css %}{% endblock %}

<!-- JavaScript Code -->
{% block js_code %}
  <script>
    $(function() {
      if ($('#id_tipo_tarjeta').val()=='P'){
        $('#div_valor_puntos, #div_puntos_extra').show();
        $('#div_dinero_extra').hide();
      }
      else if  ($('#id_tipo_tarjeta').val()=='D'){
        $('#div_valor_puntos, #div_puntos_extra').hide();
        $('#div_dinero_extra').show();
      }
      else
        $('#div_valor_puntos').hide();
  
      $('#id_tipo_tarjeta').change(function(event){
        if ($('#id_tipo_tarjeta').val()=='P'){
          $('#div_valor_puntos, #div_puntos_extra').show();
          $('#div_dinero_extra').hide();
        }
        else if  ($('#id_tipo_tarjeta').val()=='D'){
          $('#div_valor_puntos, #div_puntos_extra').hide();
          $('#div_dinero_extra').show();
        }
        else
          $('#div_valor_puntos').hide();
      });
  
    });
  </script>
{% endblock %}

{% block breadcrumb %}
  {{ block.super }} 
  <li> Herramientas </li> 
  <li class='active'> Generar tarjetas </li> 
{% endblock %}

{% block content %}
{% if msg %}
<div class="alert alert-success fade in">
    <button type="button" class="close" data-dismiss="alert">×</button>
    <strong>Bien hecho!!</strong> {{ msg }}
</div>
{% endif %}
{%if errors %}
<div class="alert alert-warning fade in">
<button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
<strong>:/ Configuracion de aplicacion invalida</strong>

{% for error in errors %}
  <br>
  {{ error }}
{% endfor %}
</div>
{% endif %}

<form method="post" id='formulario'class="form-inline" action="" enctype='multipart/form-data'>{% csrf_token %}
  <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Cerrar</span></button>
            <h4 class="modal-title" id="mySmallModalLabel">Seguro que desea generar las tarjetas?</h4>

          </div>
          <div class="modal-body">
            <div class="alert alert-danger fade in">
              <strong>Al realizar las tarjetas</strong>
              se creara un cliente y una venta por cada tarjeta generada
            </div>
            <div class="row">
              {{ form.sysdba_password }} 
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
            <input type="submit" class="btn btn-default" onclick="this.disabled=true,this.form.submit(), this.value='Generando tarjetas...';" value="Si, Estoy seguro" />
          </div>
      </div>
    </div>
  </div>
  
{{ form.errors }}
<div class="page-header">
  <h1>Generador de tarjetas <small></small> 
    <a href="#" class="btn btn-default" data-toggle="modal" data-target=".bs-example-modal-sm" >Generar Tarjetas</a>  
      </h1>
</div>
<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane active" id="home" style="padding-bottom: 0;">
    <div>
      <div class="col-md-2 col-xs-2 col-sm-4" >
        <label>Tipo de tarjetas</label>
        <div class="input-prepend input-append">
          {{ form.tipo_tarjeta}}
        </div>
      </div>
      <div class="col-md-2 col-xs-2 col-sm-4" id='div_puntos_extra'>
        <label>Puntos</label>
        <div class="input-prepend input-append">
          {{ form.puntos }}
        </div>
      </div>
      <div class="col-md-2 col-xs-2 col-sm-4" id='div_valor_puntos'>
        <label>Valor de cada punto ($)</label>
        <div>
          {{ form.valor_puntos }}
        </div>
      </div>
      <div class="col-md-2 col-xs-2 col-sm-4" id='div_dinero_extra'>
        <label>Dinero Electronico ($)</label>
        <div class="input-prepend input-append">
          {{ form.dinero_electronico }}
        </div>
      </div>
    </div>
    <br>
    <br>
    <hr>

    <div >
      <div class="col-md-2 col-xs-2 col-sm-4" >
        <label>Prefijo</label>
        <div class="input-prepend input-append">
          {{ form.prefijo }}
        </div>
      </div>
      <div class="col-md-2 col-xs-2 col-sm-4" >
        <label>Iniciar en</label>
        <div class="input-prepend input-append">
          {{ form.iniciar_en }}
        </div>
      </div>
      <div class="col-md-2 col-xs-2 col-sm-4" >
        <label>Cantidad a generar</label>
        <div class="input-prepend input-append">
          {{ form.cantidad }}
        </div>
      </div>
      <div class="col-md-2 col-xs-2 col-sm-4" >
        <label>.</label>
        <div class="input-prepend input-append">
          
        </div>
      </div>
    </div>   
     <br>
    <br>
     <br>
    <br> 
  </div>
</div>
</form>



{% endblock %}