<form action="." tal:attributes="action request/URL" method="POST"
  i18n:domain="waeup.kofa" enctype="multipart/form-data">

 <ul class="tabs nav nav-tabs" data-tabs="tabs">
    <li class="active">
    <a href="#tab1" data-toggle="tab">
      <span i18n:translate="">Settings
      </span></a>
    </li>
    <li>
    <a href="#tab2" data-toggle="tab">
      <span i18n:translate="">Applicants
      </span></a>
    </li>
    <li>
    <a href="#tab3" data-toggle="tab">
      <span i18n:translate="">Local Roles
      </span></a>
    </li>
  </ul>
  <div class="tab-content">
    <div id="tab1" class="active tab-pane">
      <br />
      <table class="form-table">
        <tbody>
          <tal:widgets content="structure provider:widgets" />
        </tbody>
      </table>
      <div  tal:condition="view/availableActions">
        <span tal:repeat="action view/actions" tal:omit-tag="">
          <input tal:condition="python:action.label in view.taboneactions"
                 tal:replace="structure action/render"/>
        </span>
      </div>
    </div>
    <div id="tab2" class="tab-pane">
    <tal:showApplicants  condition="view/showApplicants">
      <br />
      <table class="kofa-data-table dataTableManage">
        <thead>
          <tr>
            <th>&nbsp;
            </th>
            <th i18n:translate="">Application Number
            </th>
            <th i18n:translate="">Full Name
            </th>
            <th i18n:translate="">First Choice
            </th>
            <th i18n:translate="">Application State
            </th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="appl context/values">
            <td>
              <input type="checkbox" name="val_id" tal:attributes="value appl/__name__" />
            </td>
            <td>
              <a tal:attributes="href python: view.url(appl)"
                 tal:content="appl/__name__">NUMBER</a>
            </td>
            <td>
              <span tal:replace="appl/display_fullname">FULLNAME
              </span>
            </td>
            <td>
              <span tal:replace="appl/course1/code|nothing">FIRSTCHOICE
              </span>
            </td>
            <td>
              <span tal:replace="appl/translated_state">STATE
              </span>
            </td>
          </tr>
        </tbody>
      </table>
      <input type="checkbox" onClick="toggle(this, 'val_id')" />
      <span  i18n:translate="">Select all</span>
      <br /><br />
      <div tal:condition="view/availableActions">
        <span tal:repeat="action view/actions" tal:omit-tag="">
          <input tal:condition="python:action.label in view.tabtwoactions"
                 tal:replace="structure action/render"/>
        </span>
      </div>
    </tal:showApplicants>
    <tal:showNoApplicants condition="not: view/showApplicants">
      <p i18n:translate="note_acmp">
          There are more than 5000 application records in this container.
          In order to prevent from downloading big amounts of data, the
          Applicants tab has been disabled. Please use the
          <span i18n:name="search_link">
            <a tal:attributes="href python: view.url(layout.site, 'applicants/search')"
               i18n:translate="">
                search form
            </a>
          </span>
          for accessing application records.
      </p>
    </tal:showNoApplicants>
    </div>
    <div id="tab3" class="tab-pane"> <br />
      <table class="kofa-data-table dataTableManage">
        <thead>
          <tr>
            <th>&nbsp;
            </th>
            <th i18n:translate="">User Id
            </th>
            <th i18n:translate="">Name
            </th>
            <th i18n:translate="">Local Role
            </th>
          </tr>
        </thead>
        <tbody>
          <tr tal:repeat="entry view/getUsersWithLocalRoles"> <td>
              <input type="checkbox" name="role_id"
                tal:attributes="value python: entry['user_name']+'|'+entry['local_role']" /> </td>
            <td tal:content="entry/user_name"> USERNAME  </td>
            <td tal:content="entry/user_title"> USERTITLE  </td>
            <td tal:content="entry/local_role_title"> LOCAL ROLE  </td>
          </tr>
        </tbody>
      </table>
      <div tal:condition="view/availableActions">
        <span tal:repeat="action view/actions" tal:omit-tag="">
          <input tal:condition="python:action.label in view.tabthreeactions1"
                  tal:replace="structure action/render"/>
        </span>
      </div> <br /><br />
      <table class="form-table">
        <tr> <td>
            <select id="user" name="user" class="form-control">
              <option tal:repeat="user view/getUsers"
                      tal:attributes="value user/name">
              <span tal:replace="user/val/title">USERTITLE
              </span>
              </option>
            </select> </td> <td>
            <select id="local_role" name="local_role" class="form-control">
              <option tal:repeat="localrole view/getLocalRoles"
                      tal:attributes="value localrole/name">
              <span tal:replace="localrole/title">LOCALROLETITLE
              </span>
              </option>
            </select> </td> <td>
            <div tal:condition="view/availableActions">
              <span tal:repeat="action view/actions" tal:omit-tag="">
                <input tal:condition="python:action.label in view.tabthreeactions2"
                       tal:replace="structure action/render"/>
              </span>
            </div> </td>
        </tr>
      </table>
    </div>
  </div>
</form>
