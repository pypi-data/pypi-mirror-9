<div i18n:domain="waeup.kofa" i18n:translate=""
  class="alert alert-success" tal:condition="not: view/getWarnings">
  Header fields OK
</div>

<h3 i18n:domain="waeup.kofa" i18n:translate="">Step 3</h3>
<form i18n:domain="waeup.kofa">
  <p i18n:translate="">
    Eventually modify headerfields of import file below.
  </p>
  <p>
    <b i18n:translate="">File:</b>
    <span tal:content="view/filename">Filename.csv</span>
    <input type="hidden" name="filename"
     tal:attributes="value view/filename" />
  </p>
  <p>
    <b i18n:translate="">Processor:</b>
    <span tal:content="view/importer/name">Importer Name</span>
    <input type="hidden" name="importer"
     tal:attributes="value view/importer/util_name" />
  </p>
  <p>
    <b i18n:translate="">Processing mode: </b>
    <span tal:content="view/mode">mode</span>
    <input type="hidden" name="mode"
     tal:attributes="value view/mode" />
  </p>

  <div>
    <table tal:define="prev_table view/getPreviewTable;
                       headers view/headerfields;"
            class="table">
      <thead>
        <tr>
          <th i18n:translate="">Header</th>
          <th i18n:translate="">change to</th>
          <th i18n:translate="">Sample Record</th>
        </tr>
      </thead>
      <tbody>
        <tr tal:repeat="row prev_table">
          <td tal:content="python:headers[row[0]]"> value
          </td>
          <td>
            <select name="headerfield" class="form-control">
              <option tal:repeat="opt view/getPossibleHeaders"
                tal:attributes="value opt/value;
                  selected python: opt['value']==headers[row[0]] and 'selected' or '';"
                tal:content="opt/title">
                new_header_name
              </option>
            </select>
          </td>
          <td tal:repeat="value python:row[1:]"
              tal:content="value"> value
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <input class="btn btn-default" type="submit" name="cancel"
    tal:attributes="value view/cancel_button" />
  <input class="btn btn-default" type="reset" name="reset"
    tal:attributes="value view/reset_button" />
  <input class="btn btn-default" type="submit" name="update"
    tal:attributes="value view/update_button" />
  <br /><br />
  <input class="btn btn-danger" type="submit" name="back2"
    tal:attributes="value view/back_button" />
  <input class="btn btn-primary"
    tal:attributes="disabled python: view.getWarnings() and 'disabled' or ''; value view/proceed_button"
    type="submit" name="proceed"/>
</form>
