<p i18n:translate="">
    Before uploading a file check that your file header corresponds
    with header format of the selected processor. All available headers
    are listed below.
    After file upload click the 'Process data' button and proceed up to
    import step 3. Verify that the data format
    meets all the import criteria and requirements of the processor.
</p>

<form method="post" enctype="multipart/form-data">
<br />
  <table class="form-table">
    <tr>
      <td i18n:translate="">
        File:
      </td>
      <td>
    		<div class="input-group half">
    			<div class="input-group-btn">
    				<div class="btn btn-default btn-file">
              Select&hellip;
              <input type="file" name="uploadfile:file" />
            </div>
    			</div>
    			<input type="text" class="form-control" readonly>
        </div>
      </td>
    </tr>
    <tr>
      <td i18n:translate="">
        Processor:
      </td>
      <td>
        <select name="importer" class="form-control half">
          <option tal:repeat="importer view/getImporters"
              tal:attributes="value importer/title"
              tal:content="importer/title"> Some Importer
          </option>
        </select>
      </td>
    </tr>
    <tr>
      <td i18n:translate="">
        Import Mode:
      </td>
      <td>
        <select name="import_mode" class="form-control half">
          <option value='Create'>Create</option>
          <option value='Update'>Update</option>
          <option value='Remove'>Remove</option>
        </select>
      </td>
    </tr>
  </table>
  <br />
  <input class="btn btn-primary" type="submit" name="SUBMIT"
      tal:attributes="value view/upload_button" />
  <input class="btn btn-default" type="submit" name="CANCEL"
      tal:attributes="value view/cancel_button"/>
</form>
<br />
<p i18n:translate="">
    Import managers will be automatically informed by email after file upload.
    There is no need for assigning tickets or sending emails anymore.
    The data will be imported according to the information given.
</p>

<br /><br />

<h2 i18n:translate="">Available Processors (Importers)</h2>

<table i18n:domain="waeup.kofa" class="table table-condensed">
  <thead>
    <tr>
      <th i18n:translate="">Processor</th>
      <th i18n:translate="">Required Schema Fields</th>
      <th i18n:translate="">Optional Schema Fields</th>
      <th i18n:translate="">Non-Schema Fields</th>
    </tr>
  </thead>
  <tr tal:repeat="importer view/getImporters">
    <td>
      <span tal:content="importer/title">TITLE</span><br /><br />
      <a i18n:translate="" class="btn btn-primary btn-xs"
         tal:attributes="href python: 'skeleton?name=' + importer['name']">
         Download CSV Skeleton File
      </a>
    </td>
    <td nowrap>
      <span tal:repeat="field importer/fields">
          <tal:schemafield condition="field/f_type">
            <tal:required condition="field/f_required">
              <span tal:replace="field/f_name"></span>
              (<span tal:replace="field/f_type"></span>)
              <br />
            </tal:required>
          </tal:schemafield>
      </span>
    </td>
    <td nowrap>
      <span tal:repeat="field importer/fields">
          <tal:schemafield condition="field/f_type">
            <tal:notrequired condition="not:field/f_required">
              <span tal:replace="field/f_name"></span>
              (<span tal:replace="field/f_type"></span>)
              <br />
            </tal:notrequired>
          </tal:schemafield>
      </span>
    </td>
    <td>
      <span tal:repeat="field importer/fields">
          <tal:extrafield condition="not:field/f_type">
            <span tal:replace="field/f_name"></span>
            <br />
          </tal:extrafield>
      </span>
    </td>

  </tr>
</table>
