<configure xmlns="http://namespaces.zope.org/zope"
           xmlns:kofa="http://namespaces.waeup.org/kofa"
           i18n_domain="${kofa_params:devel_pkg}">

  <include package="${kofa_params:devel_pkg}" />
  <include package="${kofa_params:devel_pkg}" file="mail.zcml" />
  <!-- install job container

       install a job container for asynchronous jobs. Pick one of the
       two possibilites: 'single' for installation in the one big ZODB
       or 'multidb' for setup with a dedicated ZODB for job handling.
  -->
  <!-- include package="waeup.kofa" file="async_single.zcml" / -->
  <include package="waeup.kofa" file="async_multidb.zcml" />

  <!-- install dispatcher and other needed async components

       install other needed components for asynchronous jobs. Pick one
       of the two possibilities: 'basic_dispatcher' for single ZODB
       setup, 'multidb_dispatcher' for setup with a dedicated ZODB for
       job handling. Make sure the setting matches the setting picked
       above. -->
  <!-- include package="zc.async" file="basic_dispatcher_policy.zcml" / -->
  <include package="zc.async" file="multidb_dispatcher_policy.zcml" />

  <!-- Where should the datacenter reside by default? -->
  <kofa:datacenter
      path="${buildout:directory}/var/datacenter" />

    <configure i18n_domain="${kofa_params:devel_pkg}">


      <unauthenticatedPrincipal id="zope.anybody"
                                title="Unauthenticated User" />
      <unauthenticatedGroup id="zope.Anybody"
                            title="Unauthenticated Users" />
      <authenticatedGroup id="zope.Authenticated"
                        title="Authenticated Users" />
      <everybodyGroup id="zope.Everybody"
                      title="All Users" />
      <principal id="zope.manager"
                 title="Manager"
                 login="grok"
                 password_manager="SHA1"
                 password="321b9cd3739bd029629243732eb682db005a7541f7509622"
                 />

      <!-- XMLRPC user for demo and testing
           Plaintext password is xmlrpcuser1
           Don't use it in real deployment -->
      <principal id="zope.xmlrpcuser1"
                 title="XMLRPC User 1"
                 login="xmlrpcuser1"
                 password="{SSHA}ZaL4-UiwmSu6AbLYY-yCS_8vtKpH5Hc6"
                 password_manager="SSHA"
                 />

      <grant role="waeup.xmlrpcusers1"
             principal="zope.xmlrpcuser1" />


      <!-- Replace the following directive if you do not want
           public access -->
      <grant permission="zope.app.dublincore.view"
             principal="zope.Anybody" />
      <grant permission="zope.View"
             principal="zope.Authenticated" />
      <grant permission="zope.app.dublincore.view"
             principal="zope.Authenticated" />
      <grant permission="waeup.Public"
             principal="zope.Everybody" />
      <grant permission="waeup.Anonymous"
             principal="zope.Anybody" />
      <grant permission="waeup.Authenticated"
             principal="zope.Authenticated" />

      <role id="zope.Manager" title="Site Manager" />
      <grantAll role="zope.Manager" />
      <grant role="zope.Manager"
             principal="zope.manager" />
   </configure>
</configure>
