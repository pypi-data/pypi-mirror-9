<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Communications &mdash; GNS3 1.3.dev1 documentation</title>
    
    <link rel="stylesheet" href="_static//default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.3.dev1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="GNS3 1.3.dev1 documentation" href="index.html" />
    <link rel="next" title="Glossary" href="glossary.html" />
    <link rel="prev" title="Welcome to API documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to API documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">GNS3 1.3.dev1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="communications">
<h1>Communications<a class="headerlink" href="#communications" title="Permalink to this headline">¶</a></h1>
<p>All the communication are done over HTTP using JSON.</p>
</div>
<div class="section" id="errors">
<h1>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h1>
<p>In case of error a standard HTTP error is raise and you got a
JSON like that</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="mi">409</span><span class="p">,</span>
    <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Conflict&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-session-using-curl">
<h1>Sample session using curl<a class="headerlink" href="#sample-session-using-curl" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Beware the output of this sample is truncated in order
to simplify the understanding. Please read the
documentation for the exact output.</p>
</div>
<p>You can check the server version with a simple curl command:</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span class="go"># curl &quot;http://localhost:8000/v1/version&quot;</span>
<span class="go">{</span>
<span class="go">    &quot;version&quot;: &quot;1.3.dev1&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>The next step is to create a project.</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span class="go"># curl -X POST &quot;http://localhost:8000/v1/projects&quot; -d &quot;{}&quot;</span>
<span class="go">{</span>
<span class="go">    &quot;project_id&quot;: &quot;42f9feee-3217-4104-981e-85d5f0a806ec&quot;,</span>
<span class="go">    &quot;temporary&quot;: false</span>
<span class="go">}</span>
</pre></div>
</div>
<p>With this project id we can now create two VPCS VM.</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span class="go"># curl -X POST &quot;http://localhost:8000/v1/projects/42f9feee-3217-4104-981e-85d5f0a806ec/vpcs/vms&quot; -d &#39;{&quot;name&quot;: &quot;VPCS 1&quot;}&#39;</span>
<span class="go">{</span>
<span class="go">    &quot;console&quot;: 2000,</span>
<span class="go">    &quot;name&quot;: &quot;VPCS 1&quot;,</span>
<span class="go">    &quot;project_id&quot;: &quot;42f9feee-3217-4104-981e-85d5f0a806ec&quot;,</span>
<span class="go">    &quot;vm_id&quot;: &quot;24d2e16b-fbef-4259-ae34-7bc21a41ee28&quot;</span>
<span class="go">}%</span>

<span class="go"># curl -X POST &quot;http://localhost:8000/v1/projects/42f9feee-3217-4104-981e-85d5f0a806ec/vpcs/vms&quot; -d &#39;{&quot;name&quot;: &quot;VPCS 2&quot;}&#39;</span>
<span class="go">{</span>
<span class="go">    &quot;console&quot;: 2001,</span>
<span class="go">    &quot;name&quot;: &quot;VPCS 2&quot;,</span>
<span class="go">    &quot;vm_id&quot;: &quot;daefc24a-103c-4717-8e01-6517d931c1ae&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>Now we need to link the two VPCS. The first step is to allocate on the remote servers
two UDP ports.</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span class="go"># curl -X POST &quot;http://localhost:8000/v1/ports/udp&quot; -d &#39;{}&#39;</span>
<span class="go">{</span>
<span class="go">    &quot;udp_port&quot;: 10000</span>
<span class="go">}</span>

<span class="go"># curl -X POST &quot;http://localhost:8000/v1/ports/udp&quot; -d &#39;{}&#39;</span>
<span class="go">{</span>
<span class="go">    &quot;udp_port&quot;: 10001</span>
<span class="go">}</span>
</pre></div>
</div>
<p>We can create the bidirectionnal communication between the two VPCS. The
communication is made by creating two UDP tunnels.</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span class="go"># curl -X POST &quot;http://localhost:8000/v1/projects/42f9feee-3217-4104-981e-85d5f0a806ec/vpcs/vms/24d2e16b-fbef-4259-ae34-7bc21a41ee28/adapters/0/ports/0/nio&quot; -d &#39;{&quot;lport&quot;: 10000, &quot;rhost&quot;: &quot;127.0.0.1&quot;, &quot;rport&quot;: 10001, &quot;type&quot;: &quot;nio_udp&quot;}&#39;</span>
<span class="go">{</span>
<span class="go">    &quot;lport&quot;: 10000,</span>
<span class="go">    &quot;rhost&quot;: &quot;127.0.0.1&quot;,</span>
<span class="go">    &quot;rport&quot;: 10001,</span>
<span class="go">    &quot;type&quot;: &quot;nio_udp&quot;</span>
<span class="go">}</span>

<span class="go"># curl -X POST &quot;http://localhost:8000/v1/projects/42f9feee-3217-4104-981e-85d5f0a806ec/vpcs/vms/daefc24a-103c-4717-8e01-6517d931c1ae/adapters/0/ports/0/nio&quot; -d &#39;{&quot;lport&quot;: 10001, &quot;rhost&quot;: &quot;127.0.0.1&quot;, &quot;rport&quot;: 10000, &quot;type&quot;: &quot;nio_udp&quot;}&#39;</span>
<span class="go">{</span>
<span class="go">    &quot;lport&quot;: 10001,</span>
<span class="go">    &quot;rhost&quot;: &quot;127.0.0.1&quot;,</span>
<span class="go">    &quot;rport&quot;: 10000,</span>
<span class="go">    &quot;type&quot;: &quot;nio_udp&quot;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>Now we can start the two VM</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span class="go"># curl -X POST &quot;http://localhost:8000/v1/projects/42f9feee-3217-4104-981e-85d5f0a806ec/vpcs/vms/24d2e16b-fbef-4259-ae34-7bc21a41ee28/start&quot; -d &quot;{}&quot;</span>
<span class="go"># curl -X POST &quot;http://localhost:8000/v1/projects/42f9feee-3217-4104-981e-85d5f0a806ec/vpcs/vms/daefc24a-103c-4717-8e01-6517d931c1ae/start&quot; -d &#39;{}&#39;</span>
</pre></div>
</div>
<p>Everything should be started now. You can connect via telnet to the different VM.
The port is the field console in the create VM request.</p>
<div class="highlight-shell-session"><div class="highlight"><pre><span class="go"># telnet 127.0.0.1 2000</span>
<span class="go">Trying 127.0.0.1...</span>
<span class="go">Connected to localhost.</span>
<span class="go">Escape character is &#39;^]&#39;.</span>

<span class="go">Welcome to Virtual PC Simulator, version 0.6</span>
<span class="go">Dedicated to Daling.</span>
<span class="go">Build time: Dec 29 2014 12:51:46</span>
<span class="go">Copyright (c) 2007-2014, Paul Meng (mirnshi@gmail.com)</span>
<span class="go">All rights reserved.</span>

<span class="go">VPCS is free software, distributed under the terms of the &quot;BSD&quot; licence.</span>
<span class="go">Source code and license can be found at vpcs.sf.net.</span>
<span class="go">For more information, please visit wiki.freecode.com.cn.</span>

<span class="go">Press &#39;?&#39; to get help.</span>

<span class="go">VPCS&gt; ip 192.168.1.1</span>
<span class="go">Checking for duplicate address...</span>
<span class="go">PC1 : 192.168.1.1 255.255.255.0</span>

<span class="go">VPCS&gt; disconnect</span>

<span class="go">Good-bye</span>
<span class="go">Connection closed by foreign host.</span>

<span class="go"># telnet 127.0.0.1 2001</span>
<span class="go">telnet 127.0.0.1 2001</span>
<span class="go">Trying 127.0.0.1...</span>
<span class="go">Connected to localhost.</span>
<span class="go">Escape character is &#39;^]&#39;.</span>

<span class="go">Welcome to Virtual PC Simulator, version 0.6</span>
<span class="go">Dedicated to Daling.</span>
<span class="go">Build time: Dec 29 2014 12:51:46</span>
<span class="go">Copyright (c) 2007-2014, Paul Meng (mirnshi@gmail.com)</span>
<span class="go">All rights reserved.</span>

<span class="go">VPCS is free software, distributed under the terms of the &quot;BSD&quot; licence.</span>
<span class="go">Source code and license can be found at vpcs.sf.net.</span>
<span class="go">For more information, please visit wiki.freecode.com.cn.</span>

<span class="go">Press &#39;?&#39; to get help.</span>

<span class="go">VPCS&gt; ip 192.168.1.2</span>
<span class="go">Checking for duplicate address...</span>
<span class="go">PC1 : 192.168.1.2 255.255.255.0</span>

<span class="go">VPCS&gt; ping 192.168.1.1</span>
<span class="go">84 bytes from 192.168.1.1 icmp_seq=1 ttl=64 time=0.179 ms</span>
<span class="go">84 bytes from 192.168.1.1 icmp_seq=2 ttl=64 time=0.218 ms</span>
<span class="go">84 bytes from 192.168.1.1 icmp_seq=3 ttl=64 time=0.190 ms</span>
<span class="go">84 bytes from 192.168.1.1 icmp_seq=4 ttl=64 time=0.198 ms</span>
<span class="go">84 bytes from 192.168.1.1 icmp_seq=5 ttl=64 time=0.185 ms</span>

<span class="go">VPCS&gt; disconnect</span>
<span class="go">Good-bye</span>
<span class="go">Connection closed by foreign host.</span>
</pre></div>
</div>
</div>
<div class="section" id="limitations">
<h1>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h1>
<div class="section" id="concurrency">
<h2>Concurrency<a class="headerlink" href="#concurrency" title="Permalink to this headline">¶</a></h2>
<p>A VM can&#8217;t process multiple request in the same time. But you can make
multiple request on multiple VM. It&#8217;s transparent for the client
when the first request on a VM start a lock is acquire for this VM id
and released for the next request at the end. You can safely send all
the requests in the same time and let the server manage an efficent concurrency.</p>
<p>We think it can be a little slower for some operations, but it&#8217;s remove a big
complexity for the client due to the fact only some command on some VM can be
concurrent.</p>
</div>
<div class="section" id="authentification">
<h2>Authentification<a class="headerlink" href="#authentification" title="Permalink to this headline">¶</a></h2>
<p>In this version of the API you have no authentification system. If you
listen on your network interface instead of localhost be carefull. Due
to the nature of the multiple supported VM it&#8217;s easy for an user to
upload and run code on your machine.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="glossary.html" title="Glossary"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to API documentation!"
             >previous</a> |</li>
        <li><a href="index.html">GNS3 1.3.dev1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, GNS3 GNS3 Technologies Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>