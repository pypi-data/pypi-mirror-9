

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiomas.util &mdash; aiomas 0.2.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="aiomas 0.2.0 documentation" href="../index.html"/>
        <link rel="up" title="API reference" href="index.html"/>
        <link rel="prev" title="aiomas.rpc" href="aiomas.rpc.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> aiomas</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agent.html">The agent layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc.html">The RPC layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../channel.html">The channel layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../codecs.html">Codecs for message serialization</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="aiomas.html"><code class="docutils literal"><span class="pre">aiomas</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="aiomas.agent.html"><code class="docutils literal"><span class="pre">aiomas.agent</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="aiomas.channel.html"><code class="docutils literal"><span class="pre">aiomas.channel</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="aiomas.clocks.html"><code class="docutils literal"><span class="pre">aiomas.clocks</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="aiomas.codecs.html"><code class="docutils literal"><span class="pre">aiomas.codecs</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="aiomas.exceptions.html"><code class="docutils literal"><span class="pre">aiomas.exceptions</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="aiomas.rpc.html"><code class="docutils literal"><span class="pre">aiomas.rpc</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href=""><code class="docutils literal"><span class="pre">aiomas.util</span></code></a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">aiomas</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">API reference</a> &raquo;</li>
      
    <li><code class="docutils literal"><span class="pre">aiomas.util</span></code></li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/api_reference/aiomas.util.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="module-aiomas.util">
<span id="aiomas-util"></span><h1><code class="docutils literal"><span class="pre">aiomas.util</span></code><a class="headerlink" href="#module-aiomas.util" title="Permalink to this headline">¶</a></h1>
<p>This module contains some utility functions.</p>
<dl class="function">
<dt id="aiomas.util.async">
<code class="descclassname">aiomas.util.</code><code class="descname">async</code><span class="sig-paren">(</span><em>coro_or_future</em>, <em>ignore_cancel=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiomas/util.html#async"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiomas.util.async" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#asyncio.async" title="(in Python v3.4)"><code class="xref py py-func docutils literal"><span class="pre">asyncio.async()</span></code></a> with <em>coro_or_future</em> and set a callback
that instantly raises all exceptions.</p>
<p>If <em>ignore_cancel</em> is left <code class="docutils literal"><span class="pre">True</span></code>, no exception is raised if the task was
canceled.  If you also want to raise the <code class="docutils literal"><span class="pre">CancelledError</span></code>, set the flag
to <code class="docutils literal"><span class="pre">False.</span></code>.</p>
<p>Return an <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#asyncio.Task" title="(in Python v3.4)"><code class="xref py py-class docutils literal"><span class="pre">asyncio.Task</span></code></a> object.</p>
<p>The difference between this function and <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#asyncio.async" title="(in Python v3.4)"><code class="xref py py-func docutils literal"><span class="pre">asyncio.async()</span></code></a> subtle,
but important if an error is raised by the task:</p>
<p><a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#asyncio.async" title="(in Python v3.4)"><code class="xref py py-func docutils literal"><span class="pre">asyncio.async()</span></code></a> returns a future (<a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#asyncio.Task" title="(in Python v3.4)"><code class="xref py py-class docutils literal"><span class="pre">asyncio.Task</span></code></a> is
a subclass of <a class="reference external" href="http://docs.python.org/3/library/asyncio-task.html#asyncio.Future" title="(in Python v3.4)"><code class="xref py py-class docutils literal"><span class="pre">asyncio.Future</span></code></a>) for the task that you created.  By
the time that future goes out of scope, asyncio checks if someone was
interested in its result or not.  If the result was never retrieved, the
exception is printed to <em>stderr</em>.</p>
<p>If you call it like <code class="docutils literal"><span class="pre">asyncio.async(mytask())</span></code> (note that we don&#8217;t keep
a reference to the future here), an exception in <em>mytask</em> will pre printed
immediately when the task is done.  If, however, we store a reference to
the future (<code class="docutils literal"><span class="pre">fut</span> <span class="pre">=</span> <span class="pre">asyncio.async(mytask())</span></code>), the exception only gets
printed when <code class="docutils literal"><span class="pre">fut</span></code> goes out of scope.  That means if, for example, an
<a class="reference internal" href="aiomas.agent.html#aiomas.agent.Agent" title="aiomas.agent.Agent"><code class="xref py py-class docutils literal"><span class="pre">Agent</span></code></a> creates a task and stores it as an instance
attribute, our system may keep running for a long time after the exception
has occured (or even block forever) and we won&#8217;t see any stacktrace.  This
is because the reference to the task is still there and we could, in
theory, still retrieve the exception from there.</p>
<p>Since this can make debugging very hard, this method simply registers a
callback to the future.  The callback will try to get the result from the
future when it is done and will thus print any exceptions immediately.</p>
</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="aiomas.rpc.html" class="btn btn-neutral" title="aiomas.rpc"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2015, Stefan Scherfke.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>