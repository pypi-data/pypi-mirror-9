<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
    <title>Test coverage report: payslip.models</title>
    <style type="text/css" media="screen">
      a
      {
        color: #3d707a;
      }
      
      a:hover, a:active
      {
        color: #bf7d18;
      }
    
      body 
      {
        font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
        font-size: 13px;
      }
      
      .nav 
      {
        font-size: 12px;
        margin-left: 50px;
      }

      .ignored
      {
        color: #707070;
      }

      .executed 
      {
        color: #3d9900;
      }

      .missed 
      {
        color: red;
        font-weight: bold;
      }

      .excluded 
      {
        color: #6090f0;
        font-weight: lighter;
      }
    
      #content-header 
      {
        font-size: 12px;
        padding: 18px 0 18px 50px;
      }

      #content-header h1 
      {
        font-size: 16px;
        margin: 10px 0 0 0;
        color: #909090;
      }
      
      #module-name
      {
        color: #583707;
      }
    
      #content-header p
      {
        font-size: 13px;
        margin: 0;
        color: #909090;
      }

      #content-header .normal 
      {
        color: #609030;
      }

      #content-header .warning 
      {
        color: #d0a000;
      }

      #content-header .critical 
      {
        color: red;
      }
      
      #source-listing 
      {
        margin-bottom: 24px;
      }

      #source-listing ol 
      {
        padding: 0 0 0 50px;
        width: 90%;
        font-family: monospace;
        list-style-position: outside;
      }

      #source-listing ol li 
      {
        line-height: 18px;
        font-size: small;
      }
        
      #source-listing ol code 
      {
        padding:  0 .001em 0 0; /* Firefox doesn't render empty li's properly */
        font-size: medium;
        white-space: pre;
      }
   </style>
  </head>

  <body>

<div class="nav">
  <a href="payslip.forms.html">payslip.forms</a> &lt;&lt;
  <a href="../index.html">index</a>
  &gt;&gt; <a href="payslip.templatetags.payslip_tags.html">payslip.templatetags.payslip_tags</a>
</div>

<div id="content-header">
  <h1>
    <span id="module-name">payslip.models</span>:
    67 total statements,
    <span class="normal">100.0% covered</span>
  </h1>
  <p>Generated: Sat 2015-02-07 20:31 CET</p>
  <p>Source file: /home/tobi/Projects/django-payslip/src/payslip/models.py</p>
  <p>
    Stats:
    <span class="executed">50 executed</span>,
    <span class="missed">0 missed</span>,
    <span class="excluded">17 excluded</span>,
    <span class="ignored">218 ignored</span> 
  </p> 
</div>

<div id="source-listing">
  <ol>
    <li class="ignored"><code>"""Models for the ``payslip`` application."""</code></li>
<li class="excluded"><code>from django.db import models</code></li>
<li class="excluded"><code>from django.utils.timezone import localtime, now</code></li>
<li class="excluded"><code>from django.utils.translation import ugettext_lazy as _</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>class Company(models.Model):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Model, which holds general information of a company.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    :name: Name of the company.</code></li>
<li class="ignored"><code>    :address: Full address model fields.</code></li>
<li class="ignored"><code>    :extra_fields: Custom fields to hold more information.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    """</code></li>
<li class="executed"><code>    name = models.CharField(</code></li>
<li class="ignored"><code>        max_length=100,</code></li>
<li class="ignored"><code>        verbose_name=_('Name'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    address = models.TextField(</code></li>
<li class="ignored"><code>        verbose_name=_('Address'),</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    extra_fields = models.ManyToManyField(</code></li>
<li class="ignored"><code>        'payslip.ExtraField',</code></li>
<li class="ignored"><code>        verbose_name=_('Extra fields'),</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    class Meta:</code></li>
<li class="executed"><code>        ordering = ['name', ]</code></li>
<li class="ignored"><code></code></li>
<li class="excluded"><code>    def __unicode__(self):</code></li>
<li class="excluded"><code>        return '{0}'.format(self.name)</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>class Employee(models.Model):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Model, which holds personal information of employee.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    :user: Connection to the django user model, to allow a login.</code></li>
<li class="ignored"><code>    :company: Connection to the employee's company.</code></li>
<li class="ignored"><code>    :hr_number: ID to connect some non-digital documents or to use as a</code></li>
<li class="ignored"><code>                reference.</code></li>
<li class="ignored"><code>    :address: Full address model fields.</code></li>
<li class="ignored"><code>    :title: Title of the employee.</code></li>
<li class="ignored"><code>    :extra_fields: Custom fields like e.g. confession, tax class.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    """</code></li>
<li class="executed"><code>    user = models.ForeignKey(</code></li>
<li class="ignored"><code>        'auth.User',</code></li>
<li class="ignored"><code>        verbose_name=_('User'),</code></li>
<li class="ignored"><code>        related_name='employees',</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    company = models.ForeignKey(</code></li>
<li class="ignored"><code>        'payslip.Company',</code></li>
<li class="ignored"><code>        verbose_name=_('Company'),</code></li>
<li class="ignored"><code>        related_name='employees',</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    hr_number = models.PositiveIntegerField(</code></li>
<li class="ignored"><code>        verbose_name=_('HR number'),</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    address = models.TextField(</code></li>
<li class="ignored"><code>        verbose_name=_('Address'),</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    title = models.CharField(</code></li>
<li class="ignored"><code>        max_length=1,</code></li>
<li class="ignored"><code>        verbose_name=_('Title'),</code></li>
<li class="ignored"><code>        choices=(</code></li>
<li class="ignored"><code>            ('1', 'Ms.'),</code></li>
<li class="ignored"><code>            ('2', 'Mrs.'),</code></li>
<li class="ignored"><code>            ('3', 'Mr.'),</code></li>
<li class="ignored"><code>            ('4', 'Dr.'),</code></li>
<li class="ignored"><code>        )</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    extra_fields = models.ManyToManyField(</code></li>
<li class="ignored"><code>        'payslip.ExtraField',</code></li>
<li class="ignored"><code>        verbose_name=_('Extra fields'),</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    is_manager = models.BooleanField(</code></li>
<li class="ignored"><code>        default=False,</code></li>
<li class="ignored"><code>        verbose_name=_('is Manager'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    class Meta:</code></li>
<li class="executed"><code>        ordering = ['company__name', 'user__first_name', ]</code></li>
<li class="ignored"><code></code></li>
<li class="excluded"><code>    def __unicode__(self):</code></li>
<li class="excluded"><code>        return '{0} {1}'.format(self.user.first_name, self.user.last_name)</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>class ExtraFieldType(models.Model):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Model to create custom information holders.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    :name: Name of the attribute.</code></li>
<li class="ignored"><code>    :description: Description of the attribute.</code></li>
<li class="ignored"><code>    :model: Can be set in order to allow the use of only one model.</code></li>
<li class="ignored"><code>    :fixed_values: Can transform related exta fields into choices.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    """</code></li>
<li class="executed"><code>    name = models.CharField(</code></li>
<li class="ignored"><code>        max_length=100,</code></li>
<li class="ignored"><code>        verbose_name=_('Name'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    description = models.CharField(</code></li>
<li class="ignored"><code>        max_length=100,</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>        verbose_name=_('Description'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    model = models.CharField(</code></li>
<li class="ignored"><code>        max_length=10,</code></li>
<li class="ignored"><code>        choices=(</code></li>
<li class="ignored"><code>            ('Employee', 'Employee'),</code></li>
<li class="ignored"><code>            ('Payment', 'Payment'),</code></li>
<li class="ignored"><code>            ('Company', 'Company'),</code></li>
<li class="ignored"><code>        ),</code></li>
<li class="ignored"><code>        verbose_name=_('Model'),</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    fixed_values = models.BooleanField(</code></li>
<li class="ignored"><code>        default=False,</code></li>
<li class="ignored"><code>        verbose_name=_('Fixed values'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    class Meta:</code></li>
<li class="executed"><code>        ordering = ['name', ]</code></li>
<li class="ignored"><code></code></li>
<li class="excluded"><code>    def __unicode__(self):</code></li>
<li class="excluded"><code>        return '{0}'.format(self.name)</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>class ExtraField(models.Model):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Model to create custom fields.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    :field_type: Connection to the field type.</code></li>
<li class="ignored"><code>    :value: Current value of this extra field.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    """</code></li>
<li class="executed"><code>    field_type = models.ForeignKey(</code></li>
<li class="ignored"><code>        'payslip.ExtraFieldType',</code></li>
<li class="ignored"><code>        verbose_name=_('Field type'),</code></li>
<li class="ignored"><code>        related_name='extra_fields',</code></li>
<li class="ignored"><code>        help_text=_('Only field types with fixed values can be chosen to add'</code></li>
<li class="ignored"><code>                    ' global values.'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    value = models.CharField(</code></li>
<li class="ignored"><code>        max_length=200,</code></li>
<li class="ignored"><code>        verbose_name=_('Value'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    class Meta:</code></li>
<li class="executed"><code>        ordering = ['field_type__name', ]</code></li>
<li class="ignored"><code></code></li>
<li class="excluded"><code>    def __unicode__(self):</code></li>
<li class="excluded"><code>        return '{0} ({1}) - {2}'.format(</code></li>
<li class="ignored"><code>            self.field_type, self.field_type.get_model_display() or 'general',</code></li>
<li class="ignored"><code>            self.value)</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>class PaymentType(models.Model):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Model to create payment types.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    :name: Name of the type.</code></li>
<li class="ignored"><code>    :rrule: Recurring rule setting.</code></li>
<li class="ignored"><code>    :description: Description of the type.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    """</code></li>
<li class="executed"><code>    name = models.CharField(</code></li>
<li class="ignored"><code>        max_length=100,</code></li>
<li class="ignored"><code>        verbose_name=_('Name'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    rrule = models.CharField(</code></li>
<li class="ignored"><code>        max_length=10,</code></li>
<li class="ignored"><code>        verbose_name=_('Recurring rule'),</code></li>
<li class="ignored"><code>        blank=True,</code></li>
<li class="ignored"><code>        choices=(</code></li>
<li class="ignored"><code>            ('MONTHLY', _('Monthly')),</code></li>
<li class="ignored"><code>            ('YEARLY', _('Yearly')),</code></li>
<li class="ignored"><code>        )</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    description = models.CharField(</code></li>
<li class="ignored"><code>        max_length=100,</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>        verbose_name=_('Description'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    class Meta:</code></li>
<li class="executed"><code>        ordering = ['name', ]</code></li>
<li class="ignored"><code></code></li>
<li class="excluded"><code>    def __unicode__(self):</code></li>
<li class="excluded"><code>        if self.rrule:</code></li>
<li class="excluded"><code>            return '{0} ({1})'.format(self.name, self.get_rrule_display())</code></li>
<li class="excluded"><code>        return '{0}'.format(self.name)</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>class Payment(models.Model):</code></li>
<li class="ignored"><code>    """</code></li>
<li class="ignored"><code>    Model, which represents one single payment.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    :payment_type: Type of the payment.</code></li>
<li class="ignored"><code>    :employee: Connection to the payment receiver.</code></li>
<li class="ignored"><code>    :amount: Current amount of the payment.</code></li>
<li class="ignored"><code>    :date: Date the payment should accrue.</code></li>
<li class="ignored"><code>    :end_date: Optional end date, if payment type has a rrule.</code></li>
<li class="ignored"><code>    :extra_fields: Custom fields like e.g. quantity, bonus.</code></li>
<li class="ignored"><code></code></li>
<li class="ignored"><code>    """</code></li>
<li class="executed"><code>    payment_type = models.ForeignKey(</code></li>
<li class="ignored"><code>        'payslip.PaymentType',</code></li>
<li class="ignored"><code>        verbose_name=_('Payment type'),</code></li>
<li class="ignored"><code>        related_name='payments',</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    employee = models.ForeignKey(</code></li>
<li class="ignored"><code>        'payslip.Employee',</code></li>
<li class="ignored"><code>        verbose_name=_('Employee'),</code></li>
<li class="ignored"><code>        related_name='payments',</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    amount = models.DecimalField(</code></li>
<li class="ignored"><code>        decimal_places=2,</code></li>
<li class="ignored"><code>        max_digits=10,</code></li>
<li class="ignored"><code>        verbose_name=_('Amount'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    date = models.DateTimeField(</code></li>
<li class="ignored"><code>        verbose_name=_('Date'),</code></li>
<li class="ignored"><code>        default=now().today(),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    end_date = models.DateTimeField(</code></li>
<li class="ignored"><code>        verbose_name=_('End of recurring period'),</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>        help_text=_('This field is only considered, if the payment type has a'</code></li>
<li class="ignored"><code>                    ' recurring rule.'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    extra_fields = models.ManyToManyField(</code></li>
<li class="ignored"><code>        'payslip.ExtraField',</code></li>
<li class="ignored"><code>        verbose_name=_('Extra fields'),</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    description = models.CharField(</code></li>
<li class="ignored"><code>        max_length=100,</code></li>
<li class="ignored"><code>        blank=True, null=True,</code></li>
<li class="ignored"><code>        verbose_name=_('Description'),</code></li>
<li class="ignored"><code>    )</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    class Meta:</code></li>
<li class="executed"><code>        ordering = ['employee__user__first_name', '-date', ]</code></li>
<li class="ignored"><code></code></li>
<li class="excluded"><code>    def __unicode__(self):</code></li>
<li class="excluded"><code>        return '{0} - {1} ({2})'.format(self.payment_type, self.amount,</code></li>
<li class="ignored"><code>                                        self.employee)</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    def get_date_without_tz(self):</code></li>
<li class="executed"><code>        return localtime(self.date).replace(tzinfo=None)</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    def get_end_date_without_tz(self):</code></li>
<li class="executed"><code>        return localtime(self.end_date).replace(tzinfo=None)</code></li>
<li class="ignored"><code></code></li>
<li class="executed"><code>    @property</code></li>
<li class="ignored"><code>    def is_recurring(self):</code></li>
<li class="executed"><code>        return self.payment_type.rrule</code></li>
  </ol>
</div>

<div class="nav">
  <a href="payslip.forms.html">payslip.forms</a> &lt;&lt;
  <a href="../index.html">index</a>
  &gt;&gt; <a href="payslip.templatetags.payslip_tags.html">payslip.templatetags.payslip_tags</a>
</div>

  </body>
</html>

