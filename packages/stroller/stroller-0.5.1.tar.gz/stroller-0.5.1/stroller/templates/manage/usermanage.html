<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
  <title>Manage Users</title>
  <style>
    #stroller_usermanage .even, #stroller_usermanage .odd {
        background-color: transparent !important;
    }

    #stroller_usermanage h2 {
        margin-bottom: 0;
    }

    #stroller_newuser {
        border: 1px solid #CCCCCC;
        padding: 5px;
        margin-bottom: 10px;
    }

    #stroller_managevisibility {
        border: 1px solid #CCCCCC;
        padding: 5px;
    }

    #stroller_managevisibility table {
        margin-top: 5px;
        width: 100%;
        text-align: center;
    }

    #stroller_managevisibility .multipleselectfield {
        min-width: 200px;
        height: 60px;
    }

    #stroller_managevisibility table tr {
        vertical-align: middle;
    }
  </style>
</head>

<body>
    <div id="stroller_usermanage">
        <h1>User Manage</h1>
        <div id="stroller_newuser">
            <h2>Create New eCommerce User</h2>
            ${createform(action = h.stroller_url('/manage/createuser'))}
        </div>

        <div id="stroller_managevisibility">
            <h2>Manage Private Categories</h2>
            <table id="User-list">
                <tr>
                    <th>Username</th>
                    <th>Accessible Categories</th>
                </tr>
                <tr py:for="user, form_child_args, values in users"
                    py:if="'stroller_user' in [g.group_name for g in user.groups]">
                    <td>
                        <em>${user.user_name}</em><br/>
                        <a href="${h.stroller_url('/recap', force_user=user.user_id)}">view orders</a>
                    </td>
                    <td>
                        <div>
                            ${addform(action=h.stroller_url('/manage/addusertogroup'),
                                        value=values, child_args=form_child_args)}
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>
