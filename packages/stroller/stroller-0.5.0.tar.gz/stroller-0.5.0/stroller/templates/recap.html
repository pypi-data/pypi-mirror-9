<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

<xi:include href="master.html" />

<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
    <title>Orders Recap</title>
    <style>
        .stroller_order_recap_more {
            display: none;
        }
    </style>
</head>

<body>
<div id="stroller">
    <h1 id="stroller_order_recap_title">Your past orders</h1>
    <div id="stroller_order_recap_help">
        Click on an order to expand it.
    </div>

    <div py:for="order in orders" id="order_${order.uid}" class="stroller_order_recap">
        <h2>Order ${order.uid}, ${order.time.strftime('%Y-%m-%d %H:%M')}, ${order.total_price} ${tg.config.get('currency', 'EUR')}</h2>
        <div class="stroller_order_recap_more">
            <div><strong>Payment Status:</strong> ${order.payed and 'payed' or 'pending payment'}</div>
            <div><strong>Dispatch:</strong> ${order.dispatched and 'dispatched' or 'pending dispatch'}</div>
            <div><strong>Products:</strong></div>
            <table>
                <tr py:for="entry in order.items">
                    <td>${entry.quantity}</td>
                    <td>${entry.product.name}</td>
                    <td>${entry.total} ${tg.config.get('currency', 'EUR')}</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<script>
    jQuery('.stroller_order_recap').click(function() {
        jQuery(this).find('.stroller_order_recap_more').slideToggle();
    });
</script>
<script>
    jQuery('#order_${selected_order}').find('.stroller_order_recap_more').show();
</script>
</body>
</html>
