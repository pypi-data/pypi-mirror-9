<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">
    
<py:def function="breadcrumbs(entity)">
    <div id="breadcrumbs">
		<ul>
			<li py:for="ancestor in list(entity.ancestors)[::-1]">
				>
				<a href="${h.stroller_url('/category/%s' % ancestor.uid)}"
						py:content="ancestor.name"></a>
			</li>
			<li id="active">
				> <span py:replace="entity.name" />
			</li>
		</ul>
	</div>
</py:def>

<py:def function="render_cart()">
    <div id="shopping-cart" py:if="defined('cart')">
        <span id="cart-box">
            <a id="cart-edit" href="${h.stroller_url('/cart')}">${Markup(h.icons['edit'])}</a>
            <span id="cart-title">Cart:</span>
            <span id="cart-qty" py:content="cart.total_quantity" /> items,
            <span id="cart-amt" py:content="'%.2f' % cart.total_price" />
            ${tg.config.get('currency', 'EUR')}
        </span>
        <span id="checkout-box">
		    <a id="checkout-icon" href="${h.stroller_url('/payment')}">${Markup(h.icons['checkout'])}</a>
            <a id="checkout-link" href="${h.stroller_url('/payment')}">Checkout</a>
        </span>
    </div>
</py:def>
      
<py:def function="stroller_search()">
    <div id="stroller-search">
        <form method="post" action="${h.stroller_url('/search')}">
            <input type="text" name="what"/>
            <input type="submit" value="Search" class="submitbutton"/>
        </form>
    </div>
</py:def>


<py:def function="product_preview(product)">
    <div py:if="request.identity and 'stroller' in request.identity['groups']"
         class="stroller_product_commands">
        <a href="${h.stroller_url('/manage/del_product', p=product.uid)}">
            ${Markup(h.icons['delete'])}
        </a>
        <a href="${h.stroller_url('/manage/edit_product', p=product.uid)}">
            ${Markup(h.icons['edit'])}
        </a>
        <a href="${h.stroller_url('/manage/clone_product', op=product.uid)}">
            ${Markup(h.icons['clone'])}
        </a>
        <a href="${h.stroller_url('/manage/featured_add', p=product.uid)}"
           py:if="not product.featured">
            ${Markup(h.icons['featured_add'])}
        </a>
        <a href="${h.stroller_url('/manage/featured_del', p=product.uid)}"
           py:if="product.featured">
            ${Markup(h.icons['featured_del'])}
        </a>
        <a href="${h.stroller_url('/manage/ordered_products', p=product.uid)}">
            ${Markup(h.icons['list'])}
        </a>
        <span class="stroller_product_count">
            ${product.bought}
        </span>
    </div>
    <a href="${h.stroller_url('/product/%s' % product.uid)}">
        <div class="stroller_product_image_box">
            <img src="${h.stroller_url('/product_thumb/%s' % product.uid)}"/>
        </div>
        ${product.name}
    </a>
    <div class="price">
        ${'%.2f' % product.price} ${tg.config.get('currency', 'EUR')}
    </div>
    <div class="stock" py:if="product.stock != None">
        ${product.stock} available
    </div>
    <div class="shiptime" py:if="product.shiptime">
        ${product.shiptime} days shipping
    </div>
</py:def>
</html>

