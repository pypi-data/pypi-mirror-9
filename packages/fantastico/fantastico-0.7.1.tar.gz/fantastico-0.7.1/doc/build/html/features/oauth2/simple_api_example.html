<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Example (Simple Menu API) &mdash; fantastico 0.7.0-b141 documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootswatch-3.0.0/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.7.0-b141',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="fantastico 0.7.0-b141 documentation" href="../../index.html" />
    <link rel="up" title="OAUTH2" href="../oauth2.html" />
    <link rel="next" title="OAUTH2 Fantastico Tokens" href="tokens_format.html" />
    <link rel="prev" title="OAUTH2" href="../oauth2.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          Fantastico framework</a>
        <span class="navbar-text navbar-version pull-left"><b>0.7.0-b141</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a href="../../index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Fantastico <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#why-another-python-framework">Why another python framework?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../intro.html#fantastico-s-initial-ideas">Fantastico&#8217;s initial ideas</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/getting_started.html">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../get_started/installation.html">Installation manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get_started/settings.html">Fantastico settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get_started/contribute.html">Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get_started/dev_mode.html">Development mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/how_to.html">How to articles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/new_project_how_to.html">Creating a new project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/todo/index.html">Creating a simple TODO application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/mvc_how_to.html">MVC How to</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/deployment_how_to.html">Deployment how to</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/static_assets.html">Static assets</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../features.html">Fantastico features</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../exceptions.html">Exceptions hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../request_response.html">Request lifecycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routing_engine.html">Routing engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mvc.html">Model View Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cors.html">CORS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../roa.html">ROA (Resource Oriented Architecture)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../oauth2.html">OAUTH2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sdk.html">SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../component_model.html">Component model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../component_reusage.html">Component reusage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../components_builtin.html">Built in components</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../changes.html#feedback">Feedback</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changes.html#versions">Versions</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">Example (Simple Menu API)</a><ul>
<li><a class="reference internal" href="#terminology">Terminology</a></li>
<li><a class="reference internal" href="#display-all-menus">Display all menus</a></li>
<li><a class="reference internal" href="#managing-menus">Managing menus.</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../oauth2.html" title="Previous Chapter: OAUTH2"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; OAUTH2</span>
    </a>
  </li>
  <li>
    <a href="tokens_format.html" title="Next Chapter: OAUTH2 Fantastico Tokens"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">OAUTH2 Fantastic... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../_sources/features/oauth2/simple_api_example.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="example-simple-menu-api">
<h1>Example (Simple Menu API)<a class="headerlink" href="#example-simple-menu-api" title="Permalink to this headline">¶</a></h1>
<p>Lets consider a virtual resource called SimpleMenu which has the following API:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="28%" />
<col width="28%" />
<col width="27%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>HTTP Verb</strong></td>
<td><strong>URL</strong></td>
<td><strong>Description</strong></td>
<td><strong>Required permissions</strong></td>
</tr>
<tr class="row-even"><td>GET</td>
<td>/api/1.0/simple-menus</td>
<td>Retrieve all menus.</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>POST</td>
<td>/api/1.0/simple-menus</td>
<td>Create a new system menu.</td>
<td>simple_menus.create</td>
</tr>
<tr class="row-even"><td>PUT</td>
<td>/api/1.0/simple-menus/:id</td>
<td>Update an existing menu.</td>
<td>simple_menus.update</td>
</tr>
<tr class="row-odd"><td>DELETE</td>
<td>/api/1.0/simple-menus/:id</td>
<td>Delete an existing menu.</td>
<td>simple_menus.delete</td>
</tr>
</tbody>
</table>
<div class="section" id="terminology">
<h2>Terminology<a class="headerlink" href="#terminology" title="Permalink to this headline">¶</a></h2>
<p>In OAUTH, we always talk about three concepts:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Resource (Image, Melody, Menu).</li>
<li>Resource Owner (an Identity Provider which can authenticatate the entities owning resources).</li>
<li>Client (an application which wants access to resources owned by Resources owner in order to provide useful features).</li>
</ol>
</div></blockquote>
<p>In the above example, Simple Menu is a resource owned by a system (global resource). Resource owners are all persons who
are granted at least one scope required by the resource:</p>
<blockquote>
<div><ul class="simple">
<li>Everyone has anonymous (read) access to the menus.</li>
<li>Everyone granted <strong>simple_menus.create</strong>,**simple_menus.update** or <strong>simple_menus.delete</strong> can manage (CRUD) existing menus.</li>
</ul>
</div></blockquote>
<p>It is important to understand that permissions are called <strong>scopes</strong> in OAUTH2 specification.</p>
</div>
<div class="section" id="display-all-menus">
<h2>Display all menus<a class="headerlink" href="#display-all-menus" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/simple_menu_read.png" src="../../_images/simple_menu_read.png" />
<p>As you can see in the above example read access is pretty straightforward because the read endpoint (route) does not require
authorization (specific scopes).</p>
</div>
<div class="section" id="managing-menus">
<span id="oauth-create-new-menu"></span><h2>Managing menus.<a class="headerlink" href="#managing-menus" title="Permalink to this headline">¶</a></h2>
<img alt="../../_images/simple_menu_create.png" src="../../_images/simple_menu_create.png" />
<p>The above diagram assumes an application exists for managing <strong>menus</strong>. This application (extension) consist of a set of frontend
controllers which renders only markup and a set of <strong>REST APIs</strong> described above. The above diagram assumes <strong>End user</strong> uses an
user agent capable of supporting HTTP protocol. Below you can find the http calls made:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Unauthenticated user requests:</p>
<div class="highlight-html"><pre>GET - /authorize?response_type=token&amp;client_id=sample-menus&amp;state=xyz&amp;error_format=hash&amp;redirect_uri=/simple-menus/ui/index&amp;scopes=simple_menus.create%20simple_menus.update%20simple_menus.delete</pre>
</div>
</li>
<li><p class="first">Fantastico /authorize endpoint detects that user is not authenticated and redirects the user agent to login screen.</p>
</li>
<li><p class="first">If authentication is successful user agent is redirected back to /authorize.</p>
</li>
<li><p class="first">At this point an access token is generated and user agent is redirected back to simple menus ui index page with an access token in hash.</p>
</li>
<li><p class="first">Menus management application start page stores the access token into the application space (session storage might be used for this).
It is recommended to validate received state in order to ensure it corresponds to the initial request state. Application must decide
how to generate state and keep it consistent before request and response.</p>
</li>
</ol>
</div></blockquote>
<p>This is it. Using the access token, end user can easily access desired functionality. Moreover, using the access token,
menus management application can easily invoke apis.</p>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Radu Viorel Cosnita.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b1.<br/>
    </p>
  </div>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42788125-1', 'rcosnita.github.io');
  ga('send', 'pageview');
</script>

  </body>
</html>