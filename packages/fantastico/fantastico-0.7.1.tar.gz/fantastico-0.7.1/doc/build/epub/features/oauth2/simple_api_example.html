<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Example (Simple Menu API)</title>
    
    <link rel="stylesheet" href="../../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" /> 
  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tokens_format.html" title="OAUTH2 Fantastico Tokens"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../oauth2.html" title="OAUTH2"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">fantastico 0.7.0-b141 documentation</a> &raquo;</li>
          <li><a href="../features.html" >Fantastico features</a> &raquo;</li>
          <li><a href="../oauth2.html" accesskey="U">OAUTH2</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="example-simple-menu-api">
<h1>Example (Simple Menu API)</h1>
<p>Lets consider a virtual resource called SimpleMenu which has the following API:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="28%" />
<col width="28%" />
<col width="27%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>HTTP Verb</strong></td>
<td><strong>URL</strong></td>
<td><strong>Description</strong></td>
<td><strong>Required permissions</strong></td>
</tr>
<tr class="row-even"><td>GET</td>
<td>/api/1.0/simple-menus</td>
<td>Retrieve all menus.</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>POST</td>
<td>/api/1.0/simple-menus</td>
<td>Create a new system menu.</td>
<td>simple_menus.create</td>
</tr>
<tr class="row-even"><td>PUT</td>
<td>/api/1.0/simple-menus/:id</td>
<td>Update an existing menu.</td>
<td>simple_menus.update</td>
</tr>
<tr class="row-odd"><td>DELETE</td>
<td>/api/1.0/simple-menus/:id</td>
<td>Delete an existing menu.</td>
<td>simple_menus.delete</td>
</tr>
</tbody>
</table>
<div class="section" id="terminology">
<h2>Terminology</h2>
<p>In OAUTH, we always talk about three concepts:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Resource (Image, Melody, Menu).</li>
<li>Resource Owner (an Identity Provider which can authenticatate the entities owning resources).</li>
<li>Client (an application which wants access to resources owned by Resources owner in order to provide useful features).</li>
</ol>
</div></blockquote>
<p>In the above example, Simple Menu is a resource owned by a system (global resource). Resource owners are all persons who
are granted at least one scope required by the resource:</p>
<blockquote>
<div><ul class="simple">
<li>Everyone has anonymous (read) access to the menus.</li>
<li>Everyone granted <strong>simple_menus.create</strong>,**simple_menus.update** or <strong>simple_menus.delete</strong> can manage (CRUD) existing menus.</li>
</ul>
</div></blockquote>
<p>It is important to understand that permissions are called <strong>scopes</strong> in OAUTH2 specification.</p>
</div>
<div class="section" id="display-all-menus">
<h2>Display all menus</h2>
<img alt="../../_images/simple_menu_read.png" src="../../_images/simple_menu_read.png" />
<p>As you can see in the above example read access is pretty straightforward because the read endpoint (route) does not require
authorization (specific scopes).</p>
</div>
<div class="section" id="managing-menus">
<span id="oauth-create-new-menu"></span><h2>Managing menus.</h2>
<img alt="../../_images/simple_menu_create.png" src="../../_images/simple_menu_create.png" />
<p>The above diagram assumes an application exists for managing <strong>menus</strong>. This application (extension) consist of a set of frontend
controllers which renders only markup and a set of <strong>REST APIs</strong> described above. The above diagram assumes <strong>End user</strong> uses an
user agent capable of supporting HTTP protocol. Below you can find the http calls made:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Unauthenticated user requests:</p>
<div class="highlight-html"><pre>GET - /authorize?response_type=token&amp;client_id=sample-menus&amp;state=xyz&amp;error_format=hash&amp;redirect_uri=/simple-menus/ui/index&amp;scopes=simple_menus.create%20simple_menus.update%20simple_menus.delete</pre>
</div>
</li>
<li><p class="first">Fantastico /authorize endpoint detects that user is not authenticated and redirects the user agent to login screen.</p>
</li>
<li><p class="first">If authentication is successful user agent is redirected back to /authorize.</p>
</li>
<li><p class="first">At this point an access token is generated and user agent is redirected back to simple menus ui index page with an access token in hash.</p>
</li>
<li><p class="first">Menus management application start page stores the access token into the application space (session storage might be used for this).
It is recommended to validate received state in order to ensure it corresponds to the initial request state. Application must decide
how to generate state and keep it consistent before request and response.</p>
</li>
</ol>
</div></blockquote>
<p>This is it. Using the access token, end user can easily access desired functionality. Moreover, using the access token,
menus management application can easily invoke apis.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>


    <div class="footer">
        &copy; Copyright 2013, Radu Viorel Cosnita.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-42788125-1', 'rcosnita.github.io');
  ga('send', 'pageview');
</script>

  </body>
</html>