<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to Ladon’s documentation! &mdash; Ladon 0.9.10 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9.10',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Ladon 0.9.10 documentation" href="#" />
    <link rel="next" title="Ladonize" href="ladonize.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#"><img src="_static/Ladon_24.jpg">
          Ladon</a>
        <span class="navbar-text navbar-version pull-left"><b>0.9</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="ladonize.html">Ladonize</a></li>
<li class="toctree-l1"><a class="reference internal" href="ladontype.html">LadonType for complex service types</a></li>
<li class="toctree-l1"><a class="reference internal" href="tasks.html">Ladon Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending.html">Extending Ladon with new interface protocols</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Welcome to Ladon&#8217;s documentation!</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#example-1">Example 1</a></li>
<li><a class="reference internal" href="#example-2">Example 2</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="ladonize.html" title="Next Chapter: Ladonize"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Ladonize &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/index.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="welcome-to-ladon-s-documentation">
<h1>Welcome to Ladon&#8217;s documentation!<a class="headerlink" href="#welcome-to-ladon-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Ladon is a multi-protocol web service framework. Take your user functionality
and wrap it into a plain python class which we call a Ladon service class.</p>
<p>You control which methods to expose by applying a certain decorator called ladonize.
When a method is ladonized you define the parameter types for the method. This way
it&#8217;s possible to for the Ladon framework to generate description files for different
web service protocols (ie. WSDL for SOAP or jsonwsp/description for JSON-WSP)</p>
<p>When your service class is in place, serve it up using Ladons build-in server or
using the WSGI Wrapper application for real webservers.</p>
<a class="reference internal image-reference" href="_images/ladon_flow.png"><img alt="_images/ladon_flow.png" src="_images/ladon_flow.png" style="width: 50em;" /></a>
<dl class="docutils">
<dt>A basic ladon service consists at least of two modules:</dt>
<dd><ol class="first last arabic simple">
<li>The service itself</li>
<li>A WSGI application handler</li>
</ol>
</dd>
</dl>
<p>Take a look at <a class="reference internal" href="#ex-1"><em>Example 1</em></a> and <a class="reference internal" href="#ex-2"><em>Example 2</em></a> below to get an idea of how it works.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ladonize.html">Ladonize</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ladonize.html#access-wsgi-environ-from-service-methods">Access WSGI environ from service methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="ladonize.html#writing-python-2-3-compatible-services">Writing Python 2/3 compatible services</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ladontype.html">LadonType for complex service types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ladontype.html#direct-type-assignment-old-style">Direct Type Assignment (old-style)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ladontype.html#portable-types">Portable types</a></li>
<li class="toctree-l2"><a class="reference internal" href="ladontype.html#dictionary-type-definition">Dictionary Type-Definition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ladontype.html#null-and-default-values">Null and default values</a></li>
<li class="toctree-l3"><a class="reference internal" href="ladontype.html#reuse-code-for-dictionary-type-definition">Reuse code for dictionary type-definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="ladontype.html#attribute-filter-functions">Attribute filter functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tasks.html">Ladon Tasks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tasks.html#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html#what-is-the-effect-for-the-end-user">What is the effect for the end-user</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html#updating-a-task-s-progress">Updating a task&#8217;s progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html#cave-eats-version-0-9-8">Cave-eats (version 0.9.8)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tasks.html#solution-version-1-0-0">Solution (version 1.0.0)</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extending.html">Extending Ladon with new interface protocols</a><ul>
<li class="toctree-l2"><a class="reference internal" href="extending.html#adding-the-interface">Adding the interface</a><ul class="simple">
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="example-1">
<span id="ex-1"></span><h2>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h2>
<p>The first example is the simplest service I could imagine, taking to integers as argument and adding them together
to return the addition as the method result.</p>
<p>Notice the ladonize decorator that defines the parameter types and the return type.
This is really all you need to do to expose your method.</p>
<p>calculator.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">ladon.ladonizer</span> <span class="kn">import</span> <span class="n">ladonize</span>

<span class="k">class</span> <span class="nc">Calculator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

        <span class="nd">@ladonize</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">,</span><span class="n">rtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
</pre></div>
</div>
<p>now test the service by using the ladonX.Yctl script that is installed with the Ladon package, where X.Y
should be replaced with the major/minor version of the Python version you are running. For instanse if you
have installed Ladon for Python 2.7, you should run the following command to test your service:</p>
<div class="highlight-python"><div class="highlight"><pre>ladon2.7ctl testserve calculator.py -p 8080
</pre></div>
</div>
<p>To test that your service is running properly try putting the following into the address line of a browser,</p>
<ol class="arabic simple">
<li><a class="reference external" href="http://localhost:8080/Calculator/soap/description">http://localhost:8080/Calculator/soap/description</a></li>
<li><a class="reference external" href="http://localhost:8080/Calculator/jsonwsp/description">http://localhost:8080/Calculator/jsonwsp/description</a></li>
</ol>
<p>or use curl:</p>
<div class="highlight-python"><div class="highlight"><pre>curl http://localhost:8080/Calculator/soap/description
curl http://localhost:8080/Calculator/jsonwsp/description
</pre></div>
</div>
<p>The simplest way to try and call a method is to use curl again or any other tool that can post a request to your service.
choose your favourite interface and create the post data. Let&#8217;s try with Ladon&#8217;s jsonwsp:</p>
<p>add-jsonwsp.req:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&quot;methodname&quot;</span><span class="p">:</span> <span class="s">&quot;add&quot;</span><span class="p">,</span> <span class="s">&quot;args&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s">&quot;a&quot;</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">:</span><span class="mi">34</span><span class="p">}}</span>
</pre></div>
</div>
<p>send the request to the Calculator service:</p>
<div class="highlight-python"><div class="highlight"><pre>curl --data &quot;@add-jsonwsp.req&quot; http://localhost:8080/Calculator/jsonwsp --header &quot;Content-Type: text/javascript; charset=utf-8&quot;
</pre></div>
</div>
<p>The service should return the result as JSON:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">&quot;servicename&quot;</span><span class="p">:</span> <span class="s">&quot;Calculator&quot;</span><span class="p">,</span> <span class="s">&quot;servicenumber&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;method&quot;</span><span class="p">:</span> <span class="s">&quot;add&quot;</span><span class="p">,</span> <span class="s">&quot;result&quot;</span><span class="p">:</span> <span class="mi">53</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-2">
<span id="ex-2"></span><h2>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h2>
<p>The second example is a bit more elaborate and shows how you can implement a web service with lists and nested types.</p>
<p>userservice.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">ladon.ladonizer</span> <span class="kn">import</span> <span class="n">ladonize</span>
<span class="kn">from</span> <span class="nn">ladon.types.ladontype</span> <span class="kn">import</span> <span class="n">LadonType</span>

<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">LadonType</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">unicode</span>
        <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">unicode</span> <span class="p">]</span>

<span class="k">class</span> <span class="nc">ListUsersResponse</span><span class="p">(</span><span class="n">LadonType</span><span class="p">):</span>
        <span class="n">success</span> <span class="o">=</span> <span class="nb">bool</span>
        <span class="n">users</span> <span class="o">=</span> <span class="p">[</span> <span class="n">User</span> <span class="p">]</span>

<span class="k">class</span> <span class="nc">UserService</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

        <span class="nd">@ladonize</span><span class="p">(</span><span class="nb">unicode</span><span class="p">,</span><span class="n">rtype</span><span class="o">=</span><span class="n">ListUsersResponse</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">listUsers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">uid</span><span class="p">):</span>

                <span class="n">user1</span> <span class="o">=</span> <span class="n">User</span><span class="p">()</span>
                <span class="n">user1</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">u&quot;John Doe&quot;</span>
                <span class="n">user1</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">30</span>
                <span class="n">user1</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">[</span> <span class="s">u&#39;admin&#39;</span><span class="p">,</span> <span class="s">u&#39;www-data&#39;</span> <span class="p">]</span>

                <span class="n">user2</span> <span class="o">=</span> <span class="n">User</span><span class="p">()</span>
                <span class="n">user2</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">u&quot;John Deer&quot;</span>
                <span class="n">user2</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="mi">60</span>
                <span class="n">user2</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">[</span> <span class="s">u&#39;farming&#39;</span><span class="p">,</span> <span class="s">u&#39;tractor&#39;</span> <span class="p">]</span>

                <span class="n">result</span> <span class="o">=</span> <span class="n">ListUsersResponse</span><span class="p">()</span>
                <span class="n">result</span><span class="o">.</span><span class="n">success</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">result</span><span class="o">.</span><span class="n">users</span> <span class="o">=</span> <span class="p">[</span> <span class="n">user1</span><span class="p">,</span> <span class="n">user2</span> <span class="p">]</span>

                <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
<p>Creating a handler for Apache2/mod_wsgi is actually simpler that writing the standalone version. Setup your Apache site
which could maybe contain the following directive:</p>
<div class="highlight-python"><div class="highlight"><pre>WSGIScriptAlias / /srv/www/userservice/handler.py
</pre></div>
</div>
<p>Now create your handler:</p>
<p>handler.py:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">ladon.server.wsgi</span> <span class="kn">import</span> <span class="n">LadonWSGIApplication</span>
<span class="n">application</span> <span class="o">=</span> <span class="n">LadonWSGIApplication</span><span class="p">([</span><span class="s">&#39;userservice&#39;</span><span class="p">],[</span><span class="s">&#39;/path/to/userservice&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright Jakob Simon-Gaarde.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>