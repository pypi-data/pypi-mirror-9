<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>9. Usare diversi moduli</title>
<META NAME="description" CONTENT="9. Usare diversi moduli">
<META NAME="keywords" CONTENT="tut">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="STYLESHEET" href="tut.css" type='text/css'>
<link rel="first" href="tut.html">
<link rel="contents" href="contents.html" title="Contents">

<LINK REL="next" HREF="node12.html">
<LINK REL="previous" HREF="node10.html">
<LINK REL="up" HREF="tut.html">
<LINK REL="next" HREF="node12.html">
<meta name='aesop' content='information'>
</head>
<body>
<DIV CLASS="navigation">
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td><A HREF="node10.html"><img src="../icons/previous.gif"
  border="0" height="32"
  alt="Previous Page" width="32"></A></td>
<td><A HREF="tut.html"><img src="../icons/up.gif"
  border="0" height="32"
  alt="Up One Level" width="32"></A></td>
<td><A HREF="node12.html"><img src="../icons/next.gif"
  border="0" height="32"
  alt="Next Page" width="32"></A></td>
<td align="center" width="100%">CherryPy Tutorial</td>
<td><A HREF="node2.html"><img src="../icons/contents.gif"
  border="0" height="32"
  alt="Contents" width="32"></A></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
</tr></table>
<b class="navlabel">Previous:</b> <a class="sectref" HREF="node10.html">8. Usare la programmazione</A>
<b class="navlabel">Up:</b> <a class="sectref" HREF="tut.html">CherryPy Tutorial</A>
<b class="navlabel">Next:</b> <a class="sectref" HREF="node12.html">10. HTTP e autenticazione</A>
<br><hr>
</DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION0011000000000000000000">
9. Usare diversi moduli</A>
</H1>
Se avete in programma lo sviluppo di un grosso sito, comprenderete la necessit&#224; di suddividere il codice
in diversi moduli.
Ci sono due modi per farlo:

<UL>
<LI>Nel primo i moduli sono completamente indipendenti. In questo caso dovrete solo creare i vostri file 
(per esempio: <span class="file">Hello1.cpy</span>, <span class="file">Hello2.cpy</span> and <span class="file">Hello3.cpy</span>) e compilarli insieme usando:
<div class="verbatim"><pre>
python ../cherrypy.py Hello1.cpy Hello2.cpy Hello3.cpy
</pre></div>
Notate che l'eseguibile generato da CherryPy sar&#224; chiamato <span class="file">Hello1Server.py</span>
</LI>
<LI>Nell'altro caso un modulo &#232; necessario agli altri (per esempio uno &#232; una libreria usata dagli altri).
In questo caso tutto ci&#242; di cui avrete bisogno &#232; la parola chiave <var>use module</var> 
sulla prima riga del file, che &#232; l'equivalente di una dichiarazione  <var>import</var> in Python.
Per esempio:
<div class="verbatim"><pre>
***** File BoldTime.cpy: *****
import time

CherryClass BoldTime:
view:
    def getBoldTime(self):
        # Display the time in bold
        return "&lt;b&gt;%s&lt;/b&gt;"%time.time()

***** File Hello.cpy: *****
use BoldTime

CherryClass Root:
view:
    def index(self):
        return "&lt;html&gt;&lt;body&gt;Hello, time is %s&lt;/body&gt;&lt;/hello&gt;"%boldTime.getBoldTime()
</pre></div>
Per compilare uqesto esempio basta:
<div class="verbatim"><pre>
python ../cherrypy.py Hello.cpy
</pre></div>

<P>
Cinque cose da notare:

<UL>
<LI>La dichiarazione <var>use</var> DEVE essere la prima riga del file (non mettete alcun commento prima).
</LI>
<LI>CherryPy creer&#224; automaticamente una lista di dipendenze e legger&#224; i file i ordine generando l'eseguibile
di conseguenza. Se create un ciclo di dipendenze, CherryPy andr&#224; in errore.
</LI>
<LI>Il nome di una CherryClass &#232; <var>BoldTime</var> (con il carattere B in lettere maiuscole).
Cos&#236; deve essere il nome del file e il nome da usare nella dichiarazione <var>use</var>.
Ma quando chiamate <var>boldTime.getBoldTime</var>, deve essere usata la b minuscola,
altrimenti si riferisce all'istanza della classe che &#232; stata automaticamente creata.
</LI>
<LI>Potete anche usare la dichiarazione Python <var>import</var>. (Sia <code>import ...</code> che <code>from ... import ...</code>)
</LI>
<LI>Se avete un certo numero di moduli da includere in <var>use</var>, potete dividere la dichiarazione "use"
su diverse righe (ma devono sempre essere nelle prime righe del file).
Per esempio, possiamo usare:
<div class="verbatim"><pre>
****** File Root.cpy: *****
use HttpAuthenticate, CookieAuthenticate
use Mail, MaskTools

CherryClass Root:
mask:
	def index(self):
		OK
</pre></div>
</LI>
</UL>
</LI>
</UL>

<P>
E se i moduli non sono nella stessa directory?

<P>
Allora dobbiamo usare l'opzione <var>-I</var> per compilare i file. Questo vi permette di specificare
le directory dove CherryPy deve ricercare i file di input. Per esempio se abbiamo i seguenti file:

<P>
<div class="verbatim"><pre>
/dir1/Module1.cpy
/dir2/Module2.cpy
Hello.cpy (uses Module1 and Module2)
</pre></div>
Dovremo compilare <span class="file">Hello.cpy</span> usando:
<div class="verbatim"><pre>
python ../cherrypy.py -I /dir1 -I /dir2 Hello.cpy
</pre></div>
Di default, CherryPy cercher&#224; in <span class="file">.</span>, <span class="file">../lib</span> e <span class="file">../src</span>

<P>
E' possibile anche settare una variabile ambiente chiamata <var>CHERRYPY_HOME</var> che contiene i nomi
delle directory dove CherryPy &#232; installato.
In questo caso, CherryPy cercher&#224; i moduli in <span class="file">CHERRYPY_HOME/lib</span> e  <span class="file">CHERRYPY_HOME/src</span>.

<P>
Nei prossimi capitoli, impareremo come usare alcuni dei moduli delle librerie standard di CherryPy.

<P>

<DIV CLASS="navigation">
<p><hr>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td><A HREF="node10.html"><img src="../icons/previous.gif"
  border="0" height="32"
  alt="Previous Page" width="32"></A></td>
<td><A HREF="tut.html"><img src="../icons/up.gif"
  border="0" height="32"
  alt="Up One Level" width="32"></A></td>
<td><A HREF="node12.html"><img src="../icons/next.gif"
  border="0" height="32"
  alt="Next Page" width="32"></A></td>
<td align="center" width="100%">CherryPy Tutorial</td>
<td><A HREF="node2.html"><img src="../icons/contents.gif"
  border="0" height="32"
  alt="Contents" width="32"></A></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
</tr></table>
<b class="navlabel">Previous:</b> <a class="sectref" HREF="node10.html">8. Usare la programmazione</A>
<b class="navlabel">Up:</b> <a class="sectref" HREF="tut.html">CherryPy Tutorial</A>
<b class="navlabel">Next:</b> <a class="sectref" HREF="node12.html">10. HTTP e autenticazione</A>
<hr>
<span class="release-info">Release 0.10-beta, documentation updated on 14. gennaio 2004.</span>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
See <i><a href="about.html">About this document...</a></i> for information on suggesting changes.
</ADDRESS>
</BODY>
</HTML>
