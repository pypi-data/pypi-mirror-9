{% extends "djmicrosip_cotizadormovil\base.html" %}
{% block title %}Cotizacion{% endblock %}

<!-- CSS Code -->
{% block style_css %}{% endblock %}

<!-- JavaScript Code -->
{% block js_code %}
{% include 'autocomplete_light/static.html' %}
<script src='{{STATIC_URL}}js/jquery.formset.js'></script>
<script>
$(function() {
  $('#id_detalles_data tbody tr').formset({
    prefix: '{{ formset.prefix }}',
    addCssClass:'btn btn-success',
    addText:'Nuevo detalle',
    deleteText:"",
    added: foco_detalle,
    removed: get_total,
  });
});
</script>
<!-- <script src="{{STATIC_URL}}js/djmicrosip_cotizadormovil/cotizador.js"></script> -->
<script src="{{STATIC_URL}}djmicrosip_cotizadormovil/js/cotizador.js"></script>
{% endblock %}

{% block breadcrumb %}{{ block.super }} {% endblock %}
{% block content %}


<form  name="formulario" method="post" class="form-horizontal" action="" width="300px"  enctype='multipart/form-data'>{% csrf_token %}
  {{ form.errors }}

  
  <div class="page-header row">
    <div class="row">
      <div class="col-lg-1 col-md-1 col-sm-1"></div>
      <div class="col-lg-6 col-md-6 col-sm-6"><h1>Cotizacion </h1></div>
      <div class="col-lg-5 col-md-5 col-sm-5">
        <div class="row">
          <div class="col-lg-4 col-md-4 col-sm-4">
            <strong>Tipo de Cambio:</strong><br>
            <input type="text" id="id_tipo_cambio_d" value="{{tipo_cambio_dls}}" size="10">
          </div>
          <div class="col-lg-4 col-md-4 col-sm-4">
            <strong>Moneda:</strong> <br>
            <select id="select_monedas">
              <option value="-">-----</option>
              {% for moneda in monedas %}
              <option value="{{moneda.id}}">{{moneda.nombre}}</option>
              {% endfor %}
            </select>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-4">
            <strong>Lista de Precio:</strong> <br>
            <select id="select_lista_precios">
              <option value="-">-----</option>
              {% for lista_precio in listas_precios %}
              <option value="{{lista_precio.id}}">{{lista_precio.nombre}}</option>
              {% endfor %}
            </select>
          </div>
        </div>
        
      </div>
    </div>
  </div>

  <div id="cotiza" style="display:none">
    <table class="table tableCell table-hover" id="id_detalles_data">
      <thead>
        <tr>
          <th>Cantidad</th>
          <th>Clave</th>
          <th>Articulo</th>
          <th>Precio</th>
          <th>Descuento (%)</th>
          <th>Importe</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for form in formset.forms%}
        <tr id="{{ form.prefix }}-row" class="form-container">
          <td class="col-xs-1">{{form.unidades}}</td>
          <td class="col-xs-2"><input type="text" name="{{ form.prefix }}-clave" class="form-control"></td>
          <td class="col-xs-5">{{form.articulo}}</td>
          <td class="col-xs-1">{{form.precio_unitario}}</td>
          <td class="col-xs-1">{{form.descuento_porcentaje}}</td>
          <td class="col-xs-1">{{form.precio_total_neto}}{% for fld in form.hidden_fields %}{{ fld }}{% endfor %}</td>
          <td class="col-xs-1">{% if form.instance.pk %}{{ form.DELETE }}{% endif %}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {{ formset.management_form }}    

    <div class="row">
      <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8"></div>
      <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
        <div class="row">
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <strong> <div class="sub">Subtotal: $</div> </strong> <br>
            <strong> <div class="des">Descuento: -$</div> </strong> <br>
            <strong> <div class="desp">Descuento (%): $</div> </strong> <br>
            <strong> <div class="tot">Total: $</div> </strong>
          </div>
          
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 text-right">
            <strong><div class="sub" id="subtotal"></div></strong> <br>
            <strong><div class="des" id="descuento"></div></strong> <br>
            <strong><div class="desp" > <input type="text" id="descuentop" class="text-right" size="5"></div></strong> <br>
            <strong><div class="tot" id="total"></div></strong>
          </div>
        </div>        
        
      </div>
    </div>
  </div>
</form>
<br style="clear:both">
  
{% endblock %}