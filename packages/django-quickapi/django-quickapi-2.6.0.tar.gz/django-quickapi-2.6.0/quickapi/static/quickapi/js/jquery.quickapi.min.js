(function(a){a.quickAPI=function(b){var b=b||new Object();b.args=b.args||{method:"quickapi.test"};var c={type:b.type||"POST",async:b.sync===true?false:b.async===false?false:true,timeout:b.timeout||window.AJAX_TIMEOUT||3000,url:b.url||window.QUICKAPI_URL||"/api/",data:{jsonData:a.toJSON(b.args),language:b.language||window.LANGUAGE_CODE,},dataType:"json",},f=b.callback||function(h,g,i){},d=b.handlerShowAlert||window.handlerShowAlert||function(i,j,h,g){if(a.type(j)=="object"){j=a.toJSON(j).replace(/\,\"/g,', "').replace(/\"\:/g,'": ')}alert(i+"\n"+j);if(g){return g()}return null},e=a.ajax(c).fail(function(k,h,i){if(k.getResponseHeader("Location")){var g=k.getResponseHeader("Location").replace(/\/[\#\-\w]*$/,"/?").replace(/\?.*$/,"?next="+window.location.pathname);window.location.replace(g);console.info("REDIRECT:"+k.getResponseHeader("Location"))}else{if(k.responseText){console.error("ERROR:"+k.responseText);var j=(k.responseText.length<=255)?k.responseText:k.responseText.substring(0,255)+"...";d("ERROR:",j,"alert-danger")}}}).done(function(i,h,j){if(b.log&&window.DEBUG){console.debug(b.log)}if((i.status>=300)&&(i.status<400)&&(i.data.Location!=undefined)){var g=i.data.Location.replace(/\/[\#\-\w]*$/,"/?").replace(/\?.*$/,"?next="+window.location.pathname),k=function(){window.location.replace(g)};console.info("REDIRECT:"+g);if(i.message){d("REDIRECT:",i.message,"alert-danger",k)}else{k()}}else{if(i.status>=400){d("ERROR:",i.message,"alert-danger")}else{if(window.DEBUG){console.debug(a.toJSON(i.message));if(b.args.method=="quickapi.test"){o=new Object;a.extend(true,o,i.data);console.debug(o);d("",o,"alert-success")}}return f(i,h,j)}}});return e}}(jQuery));