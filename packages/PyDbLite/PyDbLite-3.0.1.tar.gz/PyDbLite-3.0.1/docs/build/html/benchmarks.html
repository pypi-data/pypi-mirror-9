

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Benchmarks &mdash; PyDbLite 3.0 documentation</title>
    
    <link rel="stylesheet" href="_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="_static/cloud.js"></script>
    <link rel="top" title="PyDbLite 3.0 documentation" href="index.html" />
    <link rel="next" title="Changelog" href="changelog.html" />
    <link rel="prev" title="Unit tests" href="unittests.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div class="relbar-top">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="contents.html" title="Table Of Contents"
             accesskey="C">toc</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="unittests.html" title="Unit tests"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">PyDbLite 3.0 documentation</a> &raquo;</li>
 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="benchmarks">
<h1>Benchmarks<a class="headerlink" href="#benchmarks" title="Permalink to this headline">¶</a></h1>
<p>PyDbLite has been measured by the time taken by various operations for 3 pure-Python database modules (PyDbLite, buzhug and Gadfly) and compared them with SQLite.</p>
<p>The tests are those described on the SQLite comparisons pages, which compares performance of SQLite to that of MySQL and PostGreSQL</p>
<div class="section" id="insert">
<h2>insert<a class="headerlink" href="#insert" title="Permalink to this headline">¶</a></h2>
<p>create the base and insert n elements (n= 1000, 25,000 or 100,000) in it</p>
<p>The database has 3 fields:</p>
<ul class="simple">
<li>a (integer, from 1 to n)</li>
<li>b (random integer between 1 and 100000)</li>
<li>c (a string, value = &#8216;fifty nine&#8217; if b=59)</li>
</ul>
<p>For PyDbLite, gadfly and SQLite two options are possible : with an index on field a, or without index</p>
<p>The values of a, b, c are stored in a list recs</p>
<div class="section" id="sql-statements">
<h3>SQL statements<a class="headerlink" href="#sql-statements" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;CREATE TABLE t1(a INTEGER, b INTEGER, c VARCHAR(100))&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">make_index</span><span class="p">:</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;CREATE INDEX i3 ON t1(a)&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">:</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;INSERT INTO t1 VALUES(</span><span class="si">%s</span><span class="s">,</span><span class="si">%s</span><span class="s">,&#39;</span><span class="si">%s</span><span class="s">&#39;)&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="pydblite-code">
<h3>PyDbLite code<a class="headerlink" href="#pydblite-code" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">db</span> <span class="o">=</span> <span class="n">PyDbLite</span><span class="o">.</span><span class="n">Base</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">index</span><span class="p">:</span>
    <span class="n">db</span><span class="o">.</span><span class="n">create_index</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">:</span>
   <span class="n">db</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">c</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="buzhug-code">
<h3>buzhug code<a class="headerlink" href="#buzhug-code" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">db</span><span class="o">=</span><span class="n">Base</span><span class="p">(</span><span class="s">&#39;t1&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">create</span><span class="p">((</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="nb">str</span><span class="p">))</span>
<span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">:</span>
    <span class="n">db</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">*</span><span class="n">rec</span><span class="p">)</span>
<span class="n">db</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="gadfly-code">
<h3>gadfly code<a class="headerlink" href="#gadfly-code" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">conn</span> <span class="o">=</span> <span class="n">gadfly</span><span class="o">.</span><span class="n">gadfly</span><span class="p">()</span>
<span class="n">conn</span><span class="o">.</span><span class="n">startup</span><span class="p">(</span><span class="n">folder_name</span><span class="p">,</span><span class="n">folder_name</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;CREATE TABLE t1(a INTEGER, b INTEGER, c VARCHAR(100))&quot;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">make_index</span><span class="p">:</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&quot;CREATE INDEX i3 ON t1(a)&quot;</span><span class="p">)</span>
<span class="n">insertstat</span> <span class="o">=</span> <span class="s">&quot;INSERT INTO t1 VALUES(?,?,?)&quot;</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">:</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">insertstat</span><span class="p">,(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="select1">
<h2>select1<a class="headerlink" href="#select1" title="Permalink to this headline">¶</a></h2>
<p>100 selections to count the number of records and the average of field b for values of b between 10*n and 10*n + 1000 for n = 1 to 100</p>
<div class="section" id="id1">
<h3>SQL statements<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">sql</span> <span class="o">=</span> <span class="s">&#39;SELECT count(*), avg(b) FROM t1 WHERE b&gt;=</span><span class="si">%s</span><span class="s"> AND b&lt;</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="mi">1000</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
    <span class="n">nb</span><span class="p">,</span><span class="n">avg</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>buzhug code<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">recs</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="mi">999</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">i</span><span class="p">])</span>
    <span class="n">nb</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">recs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">nb</span><span class="p">:</span>
        <span class="n">avg</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">b</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">])</span> <span class="o">/</span> <span class="n">nb</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="select2">
<h2>select2<a class="headerlink" href="#select2" title="Permalink to this headline">¶</a></h2>
<p>100 selections to count the number of records and the average of field b for values of c with the string &#8216;one&#8217;, &#8216;two&#8217;, ...,&#8217;ninety nine&#8217; inside. It uses the keyword LIKE for SQL database (I couldn&#8217;t do the test for Gadfly which doesn&#8217;t support LIKE) ; for buzhug I use regular expressions. The strings for each number between 0 and 99 are stored in the list num_strings</p>
<div class="section" id="id3">
<h3>SQL statements<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">num_string</span> <span class="ow">in</span> <span class="n">num_strings</span><span class="p">:</span>
    <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;SELECT count(*), avg(b) FROM t1 WHERE c LIKE &#39;</span><span class="si">%%%s%%</span><span class="s">&#39;&quot;</span> <span class="o">%</span><span class="n">num_string</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
    <span class="n">nb</span><span class="p">,</span><span class="n">avg</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3>buzhug code<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">num_string</span> <span class="ow">in</span> <span class="n">num_strings</span><span class="p">:</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&quot;.*&quot;</span><span class="o">+</span><span class="n">num_string</span><span class="o">+</span><span class="s">&quot;.*&quot;</span><span class="p">)</span>
    <span class="n">recs</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s">&#39;b&#39;</span><span class="p">],</span> <span class="s">&#39;p.match(c)&#39;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">pattern</span><span class="p">)</span>
    <span class="n">nb</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">recs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">nb</span><span class="p">:</span>
        <span class="n">avg</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">b</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">])</span> <span class="o">/</span> <span class="n">nb</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="delete1">
<h2>delete1<a class="headerlink" href="#delete1" title="Permalink to this headline">¶</a></h2>
<p>delete all the records where the field c contains the string &#8216;fifty&#8217;. There again I couldn&#8217;t do the test for gadfly</p>
<div class="section" id="id5">
<h3>SQL statements<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;DELETE FROM t1 WHERE c LIKE &#39;</span><span class="si">%f</span><span class="s">ifty%&#39;;&quot;</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h3>buzhug code<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">db</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s">&#39;__id__&#39;</span><span class="p">],</span> <span class="s">&#39;p.match(c)&#39;</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;.*fifty.*&#39;</span><span class="p">)))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="delete2">
<h2>delete2<a class="headerlink" href="#delete2" title="Permalink to this headline">¶</a></h2>
<p>delete all the records for which the field a is &gt; 10 and &lt; 20000</p>
<div class="section" id="id7">
<h3>SQL statements<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sql</span><span class="o">=</span><span class="s">&quot;DELETE FROM t1 WHERE a &gt; 10 AND a &lt; 20000;&quot;</span>
<span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3>buzhug code<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">db</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="s">&#39;__id__&#39;</span><span class="p">],</span> <span class="s">&#39;x &lt; a &lt; y&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">20000</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="update1">
<h2>update1<a class="headerlink" href="#update1" title="Permalink to this headline">¶</a></h2>
<p>1000 updates, multiply b by 2 for records where 10*n &lt;= a &lt; 10 * (n + 1) for n = 0 to 999</p>
<div class="section" id="id9">
<h3>SQL statements<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">sql</span><span class="o">=</span><span class="s">&quot;UPDATE t1 SET b = b * 2 WHERE a&gt;=</span><span class="si">%s</span><span class="s"> AND a&lt;</span><span class="si">%s</span><span class="s">;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h3>buzhug code<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">db</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">9</span><span class="p">]):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="update2">
<h2>update2<a class="headerlink" href="#update2" title="Permalink to this headline">¶</a></h2>
<p>1000 updates to set c to a random value where a = 1 to 1000 New values of field c are stored in a list new_c</p>
<div class="section" id="id11">
<h3>SQL statements<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">):</span>
    <span class="n">sql</span><span class="o">=</span><span class="s">&quot;UPDATE t1 SET c=&#39;</span><span class="si">%s</span><span class="s">&#39; WHERE a=</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">new_c</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">i</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
<span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id12">
<h3>buzhug code<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="n">recs</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">select_for_update</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">],</span> <span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">999</span><span class="p">])</span>
<span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">recs</span><span class="p">:</span>
    <span class="n">db</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">new_c</span><span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">a</span><span class="p">])</span>
</pre></div>
</div>
<p>The tests were made on a Windows XP machine, with Python 2.5 (except gadfly : using the compile kjbuckets.pyd requires Python 2.2)</p>
<p>Versions : PyDbLite 2.5, buzhug 1.6, gadfly 1.0.0, SQLite 3.0 embedded in Python 2.5
Results</p>
<p>Here are the results</p>
<div class="highlight-python"><div class="highlight"><pre>1000 records

                 PyDbLite              sqlite           gadfly         buzhug
           no index   index      no index   index   no index  index

size (kO)    79       91            57        69      60                154

create     0.04       0.03        1.02      0.77    0.71      2.15     0.29
select1    0.06       0.07        0.09      0.09    1.50      1.49     0.21
select2    0.04       0.04        0.16      0.16    -         -        0.51
delete1    0.01       0.02        0.49      0.50    -         -        0.04
delete2    0.08       0.01        0.56      0.26    0.04      0.05     0.17
update1    0.07       0.07        0.52      0.37    1.91      1.91     0.49
update2    0.20       0.03        0.99      0.45    7.72      0.54     0.72

25,000 records

                 PyDbLite              sqlite           gadfly         buzhug
           no index     index    no index   index   no index  index

size         2021       2339        1385    1668      2948             2272

create       0.73       1.28        2.25    2.20    117.04             7.04
select1      2.31       2.72        2.69    2.67    153.05             3.68
select2      1.79       1.71        4.53    4.48    -                 12.33
delete1      0.40       0.89        1.88    0.98    -          (1)     0.84
delete2      0.22       0.35        0.82    0.69      1.78             2.88
update1      2.85       3.55        2.65    0.45    183.06             1.23
update2     18.90       0.96       10.93    0.47    218.30             0.81

100,000 records

                 PyDbLite              sqlite       buzhug
           no index     index    no index   index

size       8290       9694        5656      6938     8881

create     4.07       7.94        5.54      7.06    28.23
select1    9.27      13.73        9.86      9.99    14.72
select2    7.49       8.00       16.86     16.64    51.46
delete1    2.97       4.10        2.58      3.58     3.48
delete2    3.00       4.23        0.98      1.41     3.31
update1   13.72      15.80        9.22      0.99     1.87
update2   24.83       5.95       69.61      1.21     0.93


(1) not tested with index, creation time is +INF
</pre></div>
</div>
<p>Conclusions
PyDblite is as fast, and even faster than SQLite for small databases. It is faster than gadfly in all cases. buzhug is faster on most operations when size grows</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="index.html" title="index">
          <img class="logo" src="_static/banniere.jpg" alt="Logo"/>
        </a></p>
<div class="sphinxglobaltoc">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pythonengine.html">Pure-Python engine</a></li>
<li class="toctree-l1"><a class="reference internal" href="sqliteengine.html">SQLite adapter</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example code</a></li>
</ul>
</div><h4>Code</h4>
<p class="topless">
  <ul class="this-page-menu">
	<li><a href="http://sourceforge.net/project/platformdownload.php?group_id=210258" title="Download">Download</a></li>
	<li><a href="https://github.com/PierreQuentel/PyDbLite" title="Browse source">Browse source on Github</a></li>
	<li><a href="changelog.html" title="Changelog">Changelog</a></li>
	<li><a href="license.html" title="License">License</a></li>
  </ul>
</p><h4>Tests and Documentation</h4>
<p class="topless">
  <ul class="this-page-menu">
	<li><a href="unittests.html" title="Unit tests">Unit tests</a></li>
	<li><a href="http://PierreQuentel.github.io/PyDbLite/" title="Unit tests coverage">Unit tests coverage</a></li>
	<li><a href="benchmarks.html" title="Benchmarks">Benchmarks</a></li>
	<li><a href="doccoverage.html" title="Documentation coverage">Documentation coverage</a></li>
	<li><a href="https://media.readthedocs.org/pdf/pydblite/latest/pydblite.pdf" title="Documention as PDF">Documention as PDF</a></li>
  </ul>
</p><h4>Contact</h4>
<p class="topless">
  <ul class="this-page-menu">
	<li><a href="http://groups.google.com/group/pydblite" title="Mailing list">Mailing list</a></li>
	<li><a href="contact.html" title="Authors">Authors</a></li>
  </ul>
</p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="contents.html" title="Table Of Contents"
             >toc</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="changelog.html" title="Changelog"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="unittests.html" title="Unit tests"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="index.html">PyDbLite 3.0 documentation</a> &raquo;</li>
 
      </ul>
    </div>
    </div>

    <div class="footer">
        &copy; Copyright 2014, Pierre Quentel, Bendik Rønning Opstad.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>