package smarkets.seto;

import "smarkets.streaming_api.eto.proto" ;

message event {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message market {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message contract {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message order {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message entity {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message Payload {
    required PayloadType type = 1;
    required .smarkets.eto.Payload eto_payload = 2;
    optional Login login = 3;
    optional OrderCreate order_create = 4;
    optional OrderRejected order_rejected = 5;
    optional OrderAccepted order_accepted = 6;
    optional OrderExecuted order_executed = 7;
    optional OrderCancel order_cancel = 8;
    optional OrderCancelled order_cancelled = 9;
    optional OrderInvalid order_invalid = 10;
    optional MarketSubscribe market_subscribe = 11;
    optional MarketUnsubscribe market_unsubscribe = 12;
    optional MarketQuotes market_quotes = 13;
    optional ContractQuotes contract_quotes = 14;
    optional OrderCancelRejected order_cancel_rejected = 15;
    optional OrderExecutedVoid order_execute_voided = 16;
    optional MarketState market_state = 17;
    optional EventSubscribe event_subscribe = 18;
    optional EventUnsubscribe event_unsubscribe = 19;
    optional RunningballNotification runningball_notification = 20;
    optional MarketManagedState market_managed_state = 21;
    optional OrderUpdate order_update = 22;
    optional OrderUpdated order_updated = 23;
    optional OrderUpdateRejected order_update_rejected = 24;
    optional PriceFeedSubscribe price_feed_subscribe = 25;
    optional PriceFeedUnsubscribe price_feed_unsubscribe = 26;
    optional OrderExecuteConfirmed order_execute_confirmed = 27;
    optional MarketFeedSubscribe market_feed_subscribe = 28;
    optional MarketFeedUnsubscribe market_feed_unsubscribe = 29;
}

enum PayloadType {
    PAYLOAD_ETO = 1;
    PAYLOAD_LOGIN = 2;
    PAYLOAD_ORDER_CREATE = 3;
    PAYLOAD_ORDER_REJECTED = 4;
    PAYLOAD_ORDER_ACCEPTED = 5;
    PAYLOAD_ORDER_EXECUTED = 6;
    PAYLOAD_ORDER_CANCEL = 7;
    PAYLOAD_ORDER_CANCELLED = 8;
    PAYLOAD_ORDER_INVALID = 9;
    PAYLOAD_MARKET_SUBSCRIBE = 10;
    PAYLOAD_MARKET_UNSUBSCRIBE = 11;
    PAYLOAD_MARKET_QUOTES = 12;
    PAYLOAD_CONTRACT_QUOTES = 13;
    PAYLOAD_ORDER_CANCEL_REJECTED = 14;
    PAYLOAD_ORDER_EXECUTE_VOIDED = 15;
    PAYLOAD_MARKET_STATE = 16;
    PAYLOAD_EVENT_SUBSCRIBE = 17;
    PAYLOAD_EVENT_UNSUBSCRIBE = 18;
    PAYLOAD_RUNNINGBALL_NOTIFICATION = 19;
    PAYLOAD_MARKET_MANAGED_STATE = 20;
    PAYLOAD_ORDER_UPDATE = 21;
    PAYLOAD_ORDER_UPDATED = 22;
    PAYLOAD_ORDER_UPDATE_REJECTED = 23;
    PAYLOAD_PRICE_FEED_SUBSCRIBE = 24;
    PAYLOAD_PRICE_FEED_UNSUBSCRIBE = 25;
    PAYLOAD_ORDER_EXECUTE_CONFIRMED = 26;
    PAYLOAD_MARKET_FEED_SUBSCRIBE = 27;
    PAYLOAD_MARKET_FEED_UNSUBSCRIBE = 28;
}

message Uuid128 {
    required uint64 low = 1;
    optional uint64 high = 2 [default = 0];
}

message Login {
    optional string username = 1;
    optional string password = 2;
    optional bytes cookie = 3;
    optional uint32 account_sequence = 4;
}

message OrderCreate {
    optional OrderCreateType type = 1 [default = ORDER_CREATE_LIMIT];
    optional Uuid128 market = 2;
    optional Uuid128 contract = 3;
    required Side side = 4;
    optional QuantityType quantity_type = 5 [default = QUANTITY_PAYOFF_CURRENCY];
    required uint64 quantity = 6;
    optional PriceType price_type = 7 [default = PRICE_PERCENT_ODDS];
    optional uint32 price = 8;
    optional uint32 maq = 9;
    optional TimeInForceType tif = 10 [default = GOOD_TIL_CANCELLED];
    optional uint64 reference = 11;
    optional uint32 market_id = 12;
    optional uint32 contract_id = 13;
}

enum OrderCreateType {
    ORDER_CREATE_LIMIT = 1;
}

enum TimeInForceType {
    GOOD_TIL_CANCELLED = 1;
    IMMEDIATE_OR_CANCEL = 2;
}

message OrderRejected {
    required uint64 seq = 1;
    required OrderRejectedReason reason = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
}

message OrderCancelRejected {
    optional Uuid128 order = 1;
    required OrderCancelRejectedReason reason = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
    optional uint64 order_id = 5;
}

message OrderUpdateRejected {
    optional Uuid128 order = 1;
    required OrderUpdateRejectedReason reason = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
    optional uint64 order_id = 5;
}

enum OrderRejectedReason {
    ORDER_REJECTED_INSUFFICIENT_FUNDS = 1;
    ORDER_REJECTED_LIMIT_EXCEEDED = 2;
    ORDER_REJECTED_MARKET_NOT_OPEN = 3;
    ORDER_REJECTED_MARKET_SETTLED = 4;
    ORDER_REJECTED_MARKET_HALTED = 5;
    ORDER_REJECTED_CROSSED_SELF = 6;
    ORDER_REJECTED_MARKET_NOT_FOUND = 7;
    ORDER_REJECTED_SERVICE_TEMPORARILY_UNAVAILABLE = 8;
    ORDER_REJECTED_CONTRACT_NOT_FOUND = 9;
    ORDER_REJECTED_ACCOUNT_SUSPENDED = 10;
    ORDER_REJECTED_CAPACITY_REACHED = 11;
    ORDER_REJECTED_CONTRACT_SETTLED = 12;
    ORDER_REJECTED_THROTTLE_EXCEEDED = 13;
}

enum OrderCancelRejectedReason {
    ORDER_CANCEL_REJECTED_NOT_FOUND = 1;
    ORDER_CANCEL_REJECTED_NOT_LIVE = 2;
    ORDER_CANCEL_REJECTED_CAPACITY_REACHED = 3;
    ORDER_CANCEL_REJECTED_THROTTLE_EXCEEDED = 4;
    ORDER_CANCEL_REJECTED_SERVICE_TEMPORARILY_UNAVAILABLE = 5;
}

enum OrderUpdateRejectedReason {
    ORDER_UPDATE_REJECTED_NOT_FOUND = 1;
    ORDER_UPDATE_REJECTED_NOT_LIVE = 2;
    ORDER_UPDATE_REJECTED_CAPACITY_REACHED = 3;
    ORDER_UPDATE_REJECTED_THROTTLE_EXCEEDED = 4;
    ORDER_UPDATE_REJECTED_INVALID_QUANTITY_CHANGE = 5;
}

message OrderAccepted {
    required uint64 seq = 1;
    optional Uuid128 order = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
    optional uint32 price = 5;
    optional uint64 quantity = 6;
    optional uint64 order_id = 7;
}

message OrderExecuted {
    optional Uuid128 order = 1;
    required uint32 price = 2;
    optional QuantityType quantity_type = 3 [default = QUANTITY_PAYOFF_CURRENCY];
    required uint64 quantity = 4;
    optional uint32 account_sequence = 5;
    optional uint32 pending_timeout = 6 [default = 0];
    optional uint64 order_id = 7;
    required Side side = 8;
    required uint32 market_id = 9;
    required uint32 contract_id = 10;
}

message OrderCancel {
    optional Uuid128 order = 1;
    optional uint64 reference = 2;
    optional uint64 order_id = 3;
}

message OrderCancelled {
    optional Uuid128 order = 1;
    required OrderCancelledReason reason = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
    optional uint64 order_id = 5;
}

enum OrderCancelledReason {
    ORDER_CANCELLED_MEMBER_REQUESTED = 1;
    ORDER_CANCELLED_MARKET_HALTED = 2;
    ORDER_CANCELLED_INSUFFICIENT_LIQUIDITY = 3;
}

message OrderUpdate {
    optional Uuid128 order = 1;
    optional Uuid128 market = 2;
    required sint64 quantity_change = 3;
    optional uint64 reference = 4;
    optional uint64 order_id = 5;
    optional uint32 market_id = 6;
}

message OrderUpdated {
    optional Uuid128 order = 1;
    required OrderUpdatedReason reason = 2;
    optional uint32 account_sequence = 3;
    optional uint64 reference = 4;
    optional uint64 order_id = 5;
}

enum OrderUpdatedReason {
    ORDER_UPDATED_MEMBER_REQUESTED = 1;
}

message OrderInvalid {
    required uint64 seq = 1;
    repeated OrderInvalidReason reasons = 2;
    optional uint64 reference = 3;
}

enum OrderInvalidReason {
    ORDER_INVALID_INVALID_PRICE = 1;
    ORDER_INVALID_INVALID_QUANTITY = 2;
}

message MarketSubscribe {
    optional Uuid128 market = 1;
    optional uint32 market_id = 2;
}

message MarketUnsubscribe {
    optional Uuid128 market = 1;
    optional uint32 market_id = 2;
}

message MarketQuotes {
    optional Uuid128 market = 1;
    repeated ContractQuotes contract_quotes = 2;
    optional PriceType price_type = 3 [default = PRICE_PERCENT_ODDS];
    optional QuantityType quantity_type = 4 [default = QUANTITY_PAYOFF_CURRENCY];
    optional uint64 executed_volume = 5;
    optional uint32 market_id = 6;
}

message ContractQuotes {
    optional Uuid128 market = 1;
    optional Uuid128 contract = 2;
    repeated Quote bids = 3;
    repeated Quote offers = 4;
    repeated Execution executions = 5;
    optional Execution last_execution = 6;
    optional uint32 high_price = 7;
    optional uint32 low_price = 8;
    optional uint32 market_id = 9;
    optional uint32 contract_id = 10;
}

message Quote {
    required uint32 price = 1;
    required uint64 quantity = 2;
}

enum QuantityType {
    QUANTITY_PAYOFF_CURRENCY = 1;
}

enum PriceType {
    PRICE_PERCENT_ODDS = 1;
}

enum Side {
    SIDE_BUY = 1;
    SIDE_SELL = 2;
}

message Execution {
    required uint32 price = 1;
    required uint64 quantity = 2;
    required Side liquidity = 3;
    required uint64 microseconds = 4;
}

enum Currency {
    CURRENCY_GBP = 1;
    CURRENCY_EUR = 2;
    CURRENCY_USD = 3;
}

message Decimal {
    required sint64 value = 1;
    optional uint32 exponent = 2 [default = 2];
}

message OrderExecutedVoid {
    optional Uuid128 order = 1;
    required uint32 price = 2;
    optional QuantityType quantity_type = 3 [default = QUANTITY_PAYOFF_CURRENCY];
    required uint64 quantity = 4;
    optional uint32 account_sequence = 5;
    optional uint64 order_id = 6;
}

enum MarketStateType {
    MARKET_STATE_NEW = 1;
    MARKET_STATE_OPEN = 2;
    MARKET_STATE_LIVE = 3;
    MARKET_STATE_HALTED = 4;
    MARKET_STATE_SETTLED = 5;
    MARKET_STATE_VOIDED = 6;
}

message MarketState {
    optional Uuid128 market = 1;
    required MarketStateType state = 2;
    optional uint32 market_id = 3;
}

enum RunningballState {
    RUNNINGBALL_STATE_SAFE = 1;
    RUNNINGBALL_STATE_DANGER = 2;
    RUNNINGBALL_STATE_ALERT = 3;
    RUNNINGBALL_STATE_FINISHED = 4;
}

enum RunningballPeriod {
    RUNNINGBALL_PERIOD_FIRSTHALF = 1;
    RUNNINGBALL_PERIOD_PAUSE = 2;
    RUNNINGBALL_PERIOD_SECONDHALF = 3;
    RUNNINGBALL_PERIOD_FINISHED = 4;
}

message EventSubscribe {
    optional Uuid128 event = 1;
    optional uint32 event_id = 2;
}

message EventUnsubscribe {
    optional Uuid128 event = 1;
    optional uint32 event_id = 2;
}

message RunningballNotification {
    optional Uuid128 event = 1;
    required RunningballState state = 2;
    required string details = 3;
    optional RunningballPeriod period = 4;
    optional uint32 playtime = 5;
    optional uint32 score_home = 6;
    optional uint32 score_away = 7;
    optional uint32 event_id = 8;
}

enum MarketManagementType {
    MARKET_UNMANAGED = 1;
    MARKET_MANAGED = 2;
}

message MarketManagedState {
    optional Uuid128 market = 1;
    required MarketManagementType managed_state = 2;
    optional uint32 market_id = 3;
}

message PriceFeedSubscribe {
    
}

message PriceFeedUnsubscribe {
    
}

message OrderExecuteConfirmed {
    optional Uuid128 order = 1;
    required uint32 price = 2;
    required uint64 quantity = 3;
    optional uint32 account_sequence = 4;
    optional uint64 order_id = 5;
}

message MarketFeedSubscribe {
    
}

message MarketFeedUnsubscribe {
    
}

