

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Reference &mdash; vaex  documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="vaex  documentation" href="index.html"/>
        <link rel="next" title="Tips and FAQ" href="tipsandfaq.html"/>
        <link rel="prev" title="Download and installing" href="installing.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> vaex</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installing.html">Download and installing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installing.html#download-the-binary">Download the binary</a></li>
<li class="toctree-l2"><a class="reference internal" href="installing.html#from-source">From source</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#command-line-options">Command line options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main-window">Main window</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotting">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-options">Other options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#column-expressions">Column expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grid-expressions">Grid expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#supported-filetypes">Supported filetypes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tipsandfaq.html">Tips and FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tipsandfaq.html#which-shortcut-keys-are-available">Which shortcut keys are available</a></li>
<li class="toctree-l2"><a class="reference internal" href="tipsandfaq.html#how-do-i-read-file-x-in-format-y">How do I read file X in format Y</a></li>
<li class="toctree-l2"><a class="reference internal" href="tipsandfaq.html#what-is-this-shuffling-about-when-exporting">What is this shuffling about when exporting?</a></li>
<li class="toctree-l2"><a class="reference internal" href="tipsandfaq.html#can-i-have-a-x-and-y-in-the-plot">Can I have a X and Y in the plot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples.html#python-example">Python example</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#idl-example">IDL example</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#c-example">C example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a><ul>
<li class="toctree-l2"><a class="reference internal" href="credits.html#icons">Icons</a></li>
<li class="toctree-l2"><a class="reference internal" href="credits.html#data-sets">Data sets</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">vaex</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Reference</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/reference.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="command-line-options">
<h2>Command line options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h2>
<p>Vaex can handle command line options to quickly open files and make plots, the syntax is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">vaex</span> <span class="o">&lt;</span><span class="n">filename</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expr1</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expr2</span><span class="o">&gt;</span> <span class="p">[</span><span class="n">name</span><span class="o">=</span><span class="n">value</span> <span class="o">...</span><span class="p">]</span> <span class="o">-</span> <span class="o">&lt;</span><span class="n">expr3</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expr4</span><span class="o">&gt;...</span>   <span class="o">--</span> <span class="o">&lt;</span><span class="n">filename2</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expr5</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">expr6</span><span class="o">&gt;...</span>
</pre></div>
</div>
<p>In short, start with a filename, then enter expressions (1 expression will open a histogram, 2 a density plot, 3 the volume rendering), optionally folowed by key value pairs to change the settings of the plot, plots are seperator by a minus sign &#8216;-&#8216;, datasets are seperated by two minus signs &#8216;&#8211;&#8217;. Examples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">vaex</span> <span class="n">mydataset</span><span class="o">.</span><span class="n">hdf5</span> <span class="n">x</span> <span class="n">y</span> <span class="c"># opens 1 plot</span>
<span class="n">vaex</span> <span class="n">mydataset</span><span class="o">.</span><span class="n">hdf5</span> <span class="n">x</span> <span class="n">y</span> <span class="n">amplitude</span><span class="o">=</span><span class="s">&quot;log(counts+1)&quot;</span> <span class="n">weight</span><span class="o">=</span><span class="n">temperature</span> <span class="c"># one plot with modified setting</span>
<span class="n">vaex</span> <span class="n">mydataset</span><span class="o">.</span><span class="n">hdf5</span> <span class="n">x</span> <span class="n">y</span> <span class="o">-</span> <span class="n">x</span> <span class="n">z</span> <span class="o">--</span> <span class="n">otherdataset</span><span class="o">.</span><span class="n">hdf5</span> <span class="n">teff</span> <span class="n">logg</span> <span class="o">-</span> <span class="n">J</span><span class="o">-</span><span class="n">K</span> <span class="n">M_J</span> <span class="c"># two plots for one dataset, and two for a different dataset</span>
</pre></div>
</div>
<p>Filename can be any of the supported <a class="reference internal" href="#supported-files"><em>filetypes</em></a>. The (column) <a class="reference internal" href="#column-expressions"><em>expression</em></a> are the same as in the graphical interface.</p>
<p>Key, value pairs correspond to the GUI. For example, plotting the log of the average temperature with a different colormap:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">vaex</span> <span class="n">mydataset</span><span class="o">.</span><span class="n">hdf5</span> <span class="n">x</span> <span class="n">y</span> <span class="n">amplitude</span><span class="o">=</span><span class="s">&quot;log(counts+1)&quot;</span> <span class="n">weight</span><span class="o">=</span><span class="n">temperature</span> <span class="n">colormap</span><span class="o">=</span><span class="n">afmhot</span>
</pre></div>
</div>
<p>Possible options are:</p>
<blockquote>
<div><ul class="simple">
<li>amplitude: <a class="reference internal" href="#grid-expressions"><em>grid expression</em></a>, examples: &#8220;log(counts+1)&#8221;, &#8220;sqrt(counts)&#8221;, average**2 (NOTE: expressions that include parenthesis are enclosed in quotes  to avoid the shell from interpreting them.</li>
<li>weight: column expression for the weighted grid, if this is specified, also average is available as a grid (see <a class="reference internal" href="#grid-expressions"><em>grid expression</em></a>). Examples are: weight=temperature, weight=vx**2</li>
<li>vx, vy, vz: <a class="reference internal" href="#column-expressions"><em>column expression</em></a> for the x, y and z component of the vector field. Example: vx=vx vy=vy vy=vz</li>
<li>colormap (or cmap, colourmap): name of the colormap, a list is visible in the GUI. Examples cmap=afmhot cmap=bwr, cmap=rainbow cmap=jet</li>
<li>vz_colormap (or vz_cmap, vz_colourmap): colormap for the arrows for the vector field in a 2d view.</li>
<li>xlim: limits for x axis. Example xlim=-10,10  xlim=40+5,50+5</li>
<li>ylim: limits for y axis</li>
<li>zlim: limits for z axis</li>
<li>lim: sets all limits to the same value. Example: lim=-10,10 will set the x, y and possible the z limits</li>
<li>aspect: sets the aspect of the plot, only aspect=1 is supported</li>
<li>compact: removes many parts of the GUI apart from the plot, options are &#8216;normal&#8217; and &#8216;ultra&#8217;. Examples: compact=normal compact=ultra</li>
<li>grid_size: sets the size of the grid, possible options are 32,64,128,256,512 and 1024. Example grid_size=128</li>
<li>grid_size_vector: similar but now for the vector field or othe overlays.</li>
<li>selection: filename of a saved numpy array containing a boolean mask with the selection, this can be saved from the GUI. Example: selection=mydataset-selection.npy</li>
<li>filename: filename for making a hardcopy of the plot directory, can also be done from the GUI.</li>
<li>vr_quality: quality for the volume rendering, options are 0,1,2, where 0 is worst quality and best performance and 2 is best quality,</li>
<li>page: Default tab page to open in the plot, options are &#8220;Main&#8221;, &#8220;Vector field&#8221;, &#8220;Transfer function&#8221;. Example: page=&#8221;Vector field&#8221;</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="main-window">
<h2>Main window<a class="headerlink" href="#main-window" title="Permalink to this headline">¶</a></h2>
<img alt="_images/main-overview.png" src="_images/main-overview.png" />
<div class="section" id="dataset-selector">
<h3>Dataset selector<a class="headerlink" href="#dataset-selector" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="dataset-panel">
<h3>Dataset panel<a class="headerlink" href="#dataset-panel" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="plotting">
<h2>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="x-y-density">
<h3>x/y density<a class="headerlink" href="#x-y-density" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="rank-subspaces">
<h3>rank subspaces<a class="headerlink" href="#rank-subspaces" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="other-options">
<h2>Other options<a class="headerlink" href="#other-options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="samp-support">
<h3>SAMP support<a class="headerlink" href="#samp-support" title="Permalink to this headline">¶</a></h3>
<p>Vaex supports <a class="reference external" href="http://www.ivoa.net/documents/SAMP/">SAMP</a> to communicate and interoperate with other applications. Since vaex focusses on large datasets, the method of transferring data using VOTables is not recommended (although supported, it can be quite slow). For this example we assume that you have a working version of <a class="reference external" href="http://www.star.bris.ac.uk/~mbt/topcat/">TOPCAT</a> (version 4.2 was used at the time of writing) and that you have your dataset in both fits format (or any other format TOPCAT can read), and a hdf5 file (say mydata.fits and mydata.hdf5). Start TOPCAT with the SAMP hub enabled (the default in version 4.2), and open the fits file. Start vaex and open the hdf5 file. When vaex is started, it tries to connect to the SAMP hub directly, which you can verify by checking if connect icon in the toolbar <img alt="icon_connect" src="_images/plug-connect.png" /> is selected, or the menu option &#8220;SAMP&#8221;-&gt;&#8221;Connect to SAMP hub&#8221; is checked. In case you started TOPCAT after you started vaex, you can connect to the SAMP hub using the connect icon
<img alt="icon_connect" src="_images/plug-connect.png" />, or from the menu &#8220;SAMP&#8221;-&gt;&#8221;Connect to SAMP hub&#8221;. Now both TOPCAT and vaex are connected to the SAMP hub (which is started by TOPCAT), and should be able to send eachother messages.</p>
<p>From SAMP, broadcast the table (mydata.fits) by clicking the broadcast icon <img alt="icon_topcat_broadcast" src="_images/topcat_broadcast.gif" /> or from the menu &#8220;Interop&#8221;-&gt;&#8221;Send table to&#8221;-&gt;&#8221;vaex&#8221;. A popup should appear in vaex asking what it should do. The first option is to read the fits file (although vaex supports fits files, we don&#8217;t recommend using them, see <cite>filetypes &lt;supported-files&gt;</cite>). Another options is to download is as a VOTable (only do this for small datasets, max 100 000 rows). There should also be an option to link it to an existing open dataset, choose that option</p>
<div class="figure align-center">
<img alt="_images/screenshot_samp_broadcast_option.png" src="_images/screenshot_samp_broadcast_option.png" />
<p class="caption">Options in vaex when a VOTable is broadcasted.</p>
</div>
<p>Now that TOPCAT and vaex are both connected to the SAMP hub and both datasets are &#8216;linked&#8217;, open the same or a simular plot in both topcat and vaex. Select the pick mode in vaex by clicking the pick icon in the toolbar <img alt="icon_pick" src="_images/cursor.png" />, or pressing &#8216;p&#8217;. Now pick an object/row, and it should be selected in both vaex and TOPCAT, as shown below.</p>
<div class="figure align-center">
<img alt="_images/screenshot_samp_pick.png" src="_images/screenshot_samp_pick.png" />
<p class="caption">Picking an object in vaex will also select it in TOPCAT.</p>
</div>
<p>To enable it visa versa, make sure that you select &#8220;Broadcast row&#8221; in TOPCAT&#8217;s main window.</p>
<p>Now do a lasso selection in vaex, and click the &#8216;icon_samp_send&#8217;</p>
<div class="figure align-center">
<img alt="_images/screenshot_samp_selection.png" src="_images/screenshot_samp_selection.png" />
<p class="caption">Selections can be send from vaex to TOPCAT and visa versa.</p>
</div>
<p>To send a selection from TOPCAT, click the lasso icon in the toolbar, draw the region, click the icon again and choose &#8220;Transmit Subset&#8221;</p>
</div>
</div>
<div class="section" id="column-expressions">
<span id="id1"></span><h2>Column expressions<a class="headerlink" href="#column-expressions" title="Permalink to this headline">¶</a></h2>
<p>The expressions for columns can are similar to mathematical expressions in most programming languages, examples are:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="p">)</span>
<span class="n">arctan2</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
<span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>A list of all mathematical functions can be found here: <a class="reference external" href="https://github.com/pydata/numexpr#supported-functions">https://github.com/pydata/numexpr#supported-functions</a>.</p>
</div>
<div class="section" id="grid-expressions">
<span id="id2"></span><h2>Grid expressions<a class="headerlink" href="#grid-expressions" title="Permalink to this headline">¶</a></h2>
<p>The expressions for grids are pure Python expressions. For the amplitude the following variables are available:</p>
<blockquote>
<div>-counts: grid which contains the histogram counts for the columns.
-weighed: sum of the quantity as given by the weight field.
-average: weighted/counts where counts is greater than zero. This evaluates to the average of the quantity as given in the weight field.
-peak_column: grid where column contains the peak value per column, giving by this grid sets the peak value of every column to 1, e.g: counts/peak_column, average/peak_column
-peak_rows: similar, but now per row.</div></blockquote>
<p>All functions in the numpy packages are available, where <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/routines.math.html">http://docs.scipy.org/doc/numpy/reference/routines.math.html</a> describes the most useful. In addition, these functions are avaliable:</p>
<blockquote>
<div><ul class="simple">
<li>gf: gaussian filter, example gf(log(counts+1),1.), alias to <a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.gaussian_filter.html">http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.filters.gaussian_filter.html</a>. Convolves the grid (first argument) with a multidimensional gaussian with a sigma given as second argument. Sigma is in pixel or voxel units, and if a number is given as argument it is taken for all the dimensions, gf(log(counts+1), [2.,1.]) will convolve with a gaussian which is wider in the vertical (y) direction.</li>
</ul>
</div></blockquote>
<p>Some examples are:</p>
<blockquote>
<div><ul class="simple">
<li>log(counts) if weighted is None else average (default): this evaluates of counts if the expression &#8216; weighted is None&#8217; is True, otherwise average. This will then show the average  when the weight field is filled in, otherwise log(counts)</li>
<li>counts/peak_column</li>
<li>clip(counts/counts/max(), 0, 1)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="supported-filetypes">
<span id="supported-files"></span><h2>Supported filetypes<a class="headerlink" href="#supported-filetypes" title="Permalink to this headline">¶</a></h2>
<p>Supported filetypes are:</p>
<blockquote>
<div><ul class="simple">
<li>hdf5: This fileformat is a hierarchical format, similar to html/xml, except that it can store data in native format. Since it is so flexible, there are no standard ways of how to store tabular data. We chose the following format:<ul>
<li>&#8216;/columns&#8217; Under this group, we store all the columns</li>
<li>example: &#8216;/columns/x&#8217; This would be where a hdf5-dataset would be store for the columnname &#8216;x&#8217;, supported types are floats and integers.</li>
</ul>
</li>
</ul>
<blockquote>
<div>The big advantage of using hdf5 is that the file can be memory mapped, meaning no copies of the data to main memory need to be made. This also makes it possible to use data that is larger than main memory.</div></blockquote>
<ul class="simple">
<li>fits: Using the binary table extension, a fits file can store binary data. Fits however stores the data in big endian format, x86 cpus (intel, amd) use low endian format, this causes a small overhead for conversion. Also, storage is usually row based, which can lead to overhead in reading. Using TOPCAT&#8217;s colfits will give better performance, since this is uses column based storage. We recommend exporting to hdf5 using our program for beter performance.</li>
<li>Gadget hdf5 file: File format of Gadget2, splitted files are not yet supported</li>
<li>VOTable: Although supported, all records are kept in memory and read performance is quite poor. Only use this for small datasets, and otherwise export to hdf5</li>
</ul>
</div></blockquote>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tipsandfaq.html" class="btn btn-neutral float-right" title="Tips and FAQ"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installing.html" class="btn btn-neutral" title="Download and installing"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Maarten A. Breddels.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>