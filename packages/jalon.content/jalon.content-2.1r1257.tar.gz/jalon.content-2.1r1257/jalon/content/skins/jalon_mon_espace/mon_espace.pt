<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="jalon.content">

<body>

<metal:content-core fill-slot="content-core">
<metal:macro define-macro="mon_espace">

    <tal:condition condition="not:python:user.has_role(['Personnel', 'Manager'])"
                   replace="python:context.rediriger_etudiant(user.getId())" />
    <tal:define define="activer infos_mon_espace/activer;
                        grid infos_mon_espace/grid">

       <metal:macro use-macro="context/macro_navigation/macros/fil_d_ariane"></metal:macro>

        <main id="mon_espace" role="main" class="row" aria-labelledby="page_title">
            <tal:comment replace="nothing">
                <!--div data-alert="data-alert" class="alert-box success radius" i18n:translate="">
                    <i class="fa fa-smile-o"></i>
                    <tal:block i18n:translate="">Bonjour</tal:block> <tal:block tal:content="infos_mon_espace/fullname"></tal:block> !
                    <a class="close"></a>
                </div-->
            </tal:comment>

            <div class="small-12 columns"
                 tal:condition="maintenance/annoncer_maintenance">
                <!-- Bloc annonce prévision maintenance -->
                <metal:macro use-macro="context/connexion/macros/annoncer-maintenance-jalon"></metal:macro>
            </div>

            <div class="small-12 columns"
                 tal:condition="infos_mon_espace/vidercache">
                <!-- Bloc vide cache -->
                <metal:macro use-macro="context/connexion/macros/vider-cache"></metal:macro>
            </div>

        <tal:condition condition="python: user.has_role(['Personnel', 'Manager'])">

            <metal:macro use-macro="here/macro_global_statusmessage/macros/portal_message">Message de session</metal:macro>

            <!-- Bloc feedback-->
            <div class="small-12 columns"
                 tal:condition="message"
                 tal:define="message request/message | nothing">
                 <metal:macro use-macro="context/macro_messages/macros/messages"></metal:macro>
            </div>

            <nav class="small-12 columns"
                 tal:define="global increment python:0">

            <tal:repeat repeat="block grid">
                <a tal:condition="block/activer"
                   tal:attributes="class string:button res-${block/espace};
                                   href string:${context/absolute_url}/Members/${user/getId}/${block/repertoire}"
                   tal:define="global increment python:increment + 1">
                    <i tal:attributes="class block/icone"></i><tal:replace replace="block/titre"/>
                </a>
            </tal:repeat>

                <div class="clearfix"
                     tal:condition="infos_mon_espace/isCreer">
                    <a class="button expand res-autre"
                       tal:attributes="href string:${context/absolute_url}/portal_jalon_bdd/@@jalon-bdd">
                        <i class="fa fa-database"></i><tal:block i18n:translate="">Gestion pédagogique</tal:block>
                    </a>
                    <a class="button expand res-autre"
                       tal:attributes="href string:${context/absolute_url}/portal_jalon_properties/@@jalon-configuration">
                        <i class="fa fa-cogs"></i><tal:block i18n:translate="">Configuration de Jalon</tal:block>
                    </a>
                    <a class="button expand res-autre"
                       tal:attributes="href string:${context/absolute_url}/plone_control_panel">
                        <i class="fa fa-cogs"></i><tal:block i18n:translate="">Configuration de Plone</tal:block>
                    </a>
                </div>

                <div class="clearfix">
                <tal:condition condition="activer/activer_lien_intracursus">
                    <a href="#" class="button expand res-autre show-for-medium-up"
                       data-reveal-id="intracursusModal">
                        <i class="fa fa-pencil-square-o"></i><tal:block i18n:translate="">Intracursus</tal:block>
                    </a>
                    <div class="reveal-modal" data-reveal
                         id="intracursusModal">
                        <h2>
                            <tal:block i18n:translate="">
                                Accéder à Intracursus
                            </tal:block>
                            <a class="close-reveal-modal"></a>
                        </h2>
                        <div class="row">
                            <div class="panel callout radius text-justify"
                                 i18n:translate="">
                                Intracursus est un site permettant de gérer les absences et les notes de vos étudiants à travers différentes séances (TD, TP, etc). Intracursus est une création de <strong>Yves Callejas</strong> installé et géré à la <strong>DSI de l'UNS</strong>.
                            </div>
                            <div class="panel warning radius text-justify"
                                 i18n:translate="">
                                <strong>Attention :</strong> Une fois connecté à Intracursus, si vous n'avez pas de formations associées, vous devez demander au responsable de votre formation de contacter <a href="mailto:yves.callejas@unice.fr">Yves Callejas</a> afin de configurer l'accès à votre formation par Intracursus.
                            </div>
                            <div class="text-center">
                                <a class="button small radius" target="_blank"
                                   tal:attributes="href activer/lien_intracursus">
                                    <i class="fa fa-pencil-square-o"></i>
                                    <tal:block i18n:translate="">Accéder à Intracursus</tal:block>
                                </a>
                            </div>
                        </div>
                    </div>
                </tal:condition>
                    <a class="button expand res-bug"
                       tal:attributes="href infos_mon_espace/lien_bug">
                        <i class="fa fa-bug"></i><tal:block i18n:translate="">Signaler un bug</tal:block>
                    </a>
                </div>

            </nav>

            <section class="small-12 columns"
                     tal:condition="messages/activer_message_general | messages/activer_message_enseignant | activer/maj">

                <div class="panel warning radius"
                     tal:condition="messages/activer_message_general">
                    <span tal:content="structure messages/message_general"/>
                </div>

                <div class="panel callout radius"
                     tal:condition="messages/activer_message_enseignant">
                    <span tal:content="structure messages/message_enseignant"/>
                </div>

            <tal:comments replace="nothing"><!--
                <a class="button small radius expand"
                   tal:condition="activer/maj | nothing"
                   tal:attributes="href string:${context/absolute_url}/Members/${user/getId}/jalon_news">
                    <i class="fa fa-dot-circle-o"></i><tal:block i18n:translate="">Consulter les dernières mises à jour</tal:block>
                </a>
            --></tal:comments>

            </section>

        </tal:condition>
        </main>

        <tal:block define="script string:alterAlertBox()">
            <tal:jsBuffer define="addJsContent python:jsBuffer.addJS(script)" />
        </tal:block>

    </tal:define>
</metal:macro>

</metal:content-core>

</body>

</html>