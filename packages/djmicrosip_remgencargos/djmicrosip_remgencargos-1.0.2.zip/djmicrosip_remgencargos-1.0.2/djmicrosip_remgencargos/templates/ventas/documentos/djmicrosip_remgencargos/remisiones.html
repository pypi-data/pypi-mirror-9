{% extends "djmicrosip_remgencargos\base.html" %}
{% block title %}remisiones{% endblock %}

<!-- CSS Code -->
{% block style_css %}{% endblock %}

<!-- JavaScript Code -->
{% block js_code %}
  {% include 'autocomplete_light/static.html' %}
  <script src="{{STATIC_URL}}js/ventas.documentos.remisiones_crear_cargos.js"></script>
{% endblock %}

{% block breadcrumb %}{{ block.super }} remisiones {% endblock %}
{% block content %}
<div class="row-fluid">
  {%if errors %}
  <div class="alert alert-warning fade in">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
    <strong>:/ es nesesario realizar una configuracion</strong>
    
    {% for error in errors %}
      <br>
      {{ error }}
    {% endfor %}
  </div>
  {% endif %}
{{ search_form.errors }}
</div>
<div class="row">
  <div class="col-sm-3 col-md-3"><h3 style="margin:0;"> Remisiones</h3>generar cargos </div>

  <form method="get" id="formulario" class="form-inline" action="" enctype="multipart/form-data" style="float: left;margin-right: .5em;">
    {% csrf_token %}
    <div class="form-group">
      <span style="float:left">
      {{  search_form.cliente }}
      {{  search_form.inicio }}
      {{  search_form.fin }}
      <input type="submit" class="btn btn-primary form-control" onclick="this.disabled=true,this.form.submit(), this.value='Buscando...';" value="Buscar">
      {% if not errors %}
      <button id="generar_cargos" class="btn btn-warning hidden">Generar cargos</button>
      {% endif %}
    </span>
  </div>
    
  </form>
</div>
<div class="row center">
  <ul class="pager">
    {% if page_obj.has_previous %}
    <li><a href="?page={{ page_obj.previous_page_number }}">«</a></li>
    {% else %}
    <li class="disabled"><a href="#">«</a></li>
    {% endif %}
    <li class="disabled">Pagina {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}.</li>
    {% if page_obj.has_next %}
    <li><a href="?page={{ page_obj.next_page_number }}">»</a></li>
    {% else %}
    <li class="disabled"><a href="#">»</a></li>
    {% endif %}
  </ul>
</div>
<table class="table tableCell table-hover">
    <tbody>
      <tr>
        <th><input type="checkbox" name="seleccion_all" value=""></th>
        <th>Folio</th>
        <th>Fecha</th>
        <th>Cliente</th>
        <th>Total</th>
      </tr>
      {% for documento in documentos %}
      <tr>
        <td>
          {% if documento.descripcion != 'cargo_generado' %}
          <input type="checkbox" name="seleccion" value="{{ documento.id }}"></td>
          {% endif %}
        <td>{{ documento.folio }}</td>
        <td>{{ documento.fecha|date:"M d, Y" }}</td>
        <td>{{ documento.cliente }}</td>
        <td>$ {{ documento.importe_total }}</td>
      </tr>
      {% endfor %}
  </tbody>
</table>

<br>
{% endblock %}