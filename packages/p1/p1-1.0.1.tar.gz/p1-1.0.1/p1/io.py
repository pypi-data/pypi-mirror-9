import smbus, os
import p1.loader

binary = [0x0,0xd8,0xb8,0x5,0x6f,0xbf,0x10,0x0,0x7c,0x2,0x90,0x3,0x1c,0x0,0x98,0x3,0x54,0x0,0x2,0x1,0xc,0x0,0x4,0x0,0x54,0x0,0x4,0x0,0x1,0x38,0x1a,0x38,0x1b,0x38,0x17,0x6,0x2,0x1,0x35,0x65,0x35,0x64,0x3d,0xb6,0x35,0x64,0x3d,0xb4,0x35,0x37,0x24,0x66,0x2,0x72,0x35,0x65,0x0,0x64,0x37,0x4,0xec,0x6,0x2,0x9,0x36,0xfc,0x64,0x3d,0xb6,0x0,0x64,0x6,0x2,0x9,0x36,0xfc,0x64,0x3d,0xb4,0x1,0x64,0x37,0x5,0xec,0x64,0x3d,0x92,0x6,0x2,0xa,0x35,0x38,0x1b,0x66,0x2,0x58,0x4,0x54,0x32,0x0,0x18,0x2,0xc,0x0,0xac,0x1,0x0,0x0,0xc5,0x1,0x0,0x0,0xd2,0x1,0x0,0x0,0xd6,0x1,0x0,0x0,0xe2,0x1,0x0,0x0,0xf5,0x1,0x0,0x0,0xf8,0x1,0x0,0x0,0xfe,0x1,0x0,0x0,0x5,0x2,0x0,0x0,0xa,0x2,0x0,0x0,0xf,0x2,0x4,0x0,0xf0,0xd1,0xbc,0xa0,0x68,0xca,0xbc,0xa0,0x4,0xd0,0xfc,0x80,0x68,0xc4,0xbc,0x0,0x1,0xc4,0xfc,0x2c,0x1,0xd0,0xfc,0x80,0x68,0xd2,0xbc,0x0,0x1,0xbe,0xfc,0xa0,0x69,0xbe,0xbc,0x2c,0x1,0xd0,0xfc,0x80,0x68,0xd2,0xbc,0x0,0x1,0xc0,0xfc,0xa0,0x69,0xc0,0xbc,0x2c,0x1,0xd0,0xfc,0x80,0x68,0xc6,0xbc,0xa0,0x5f,0xc2,0xbc,0xa0,0x60,0xc2,0xbc,0x68,0x61,0xc2,0x3c,0xf0,0x60,0xc0,0x3c,0xf4,0xf2,0xbf,0x3c,0x61,0x11,0x0,0x4c,0x5c,0x31,0x8e,0xfc,0x5c,0x66,0xd0,0xbc,0xa0,0xfe,0xd0,0xfc,0x60,0x62,0xd0,0x3c,0x86,0x11,0x0,0x54,0x5c,0x59,0xbc,0xfc,0x5c,0x1,0xcc,0x7c,0x61,0x21,0x0,0x4c,0x5c,0x4a,0xb0,0xfc,0x5c,0x1,0xc8,0xfc,0x80,0x1d,0x0,0x4c,0x5c,0x11,0x0,0x7c,0x5c,0x65,0xd0,0xbc,0x8,0x1,0xd2,0xfc,0xa0,0x63,0xc8,0xbc,0xa0,0x31,0x8e,0xfc,0x5c,0x66,0xc8,0xbc,0x80,0x66,0xd2,0xbc,0x2c,0x59,0xbc,0xfc,0x5c,0x69,0xd0,0xbc,0x68,0x31,0x8e,0xfc,0x5c,0x64,0xcc,0x3c,0x0,0x1,0xc8,0xfc,0x80,0x69,0xd0,0xbc,0x68,0x65,0xd0,0x3c,0x8,0x1,0xd2,0xfc,0x2c,0x59,0xbc,0xfc,0x5c,0x29,0x0,0x7c,0x5c,0x7,0xce,0xfc,0xa0,0x0,0xcc,0xfc,0xa0,0x5f,0xbe,0x3c,0xf4,0x5f,0xbe,0x3c,0xf0,0xf2,0xc1,0x3c,0x61,0x1,0xcc,0xfc,0x34,0x3d,0x0,0x70,0x5c,0xf2,0xbf,0x3c,0x62,0x42,0x0,0x68,0x5c,0xf2,0xc1,0x3c,0x62,0x48,0x0,0x54,0x5c,0x38,0x0,0x7c,0x5c,0xf2,0xbf,0x3c,0x62,0x42,0x0,0x68,0x5c,0xf2,0xc1,0x3c,0x62,0x15,0x0,0x68,0x5c,0x3d,0x0,0x7c,0x5c,0x5f,0xbe,0x3c,0xf4,0x5f,0xbe,0x3c,0xf0,0xf2,0xc1,0x3c,0x61,0x1,0xcc,0xfc,0x34,0x42,0xce,0xfc,0xe4,0x0,0x0,0x7c,0x5c,0x65,0xd0,0x3c,0x8,0x11,0x0,0x7c,0x5c,0x8,0xce,0xfc,0xa0,0x64,0xcc,0xbc,0x0,0x18,0xcc,0xfc,0x2c,0x5f,0xbe,0x3c,0xf4,0x1,0xcc,0xfc,0x2d,0x60,0xec,0xbf,0x74,0x5f,0xbe,0x3c,0xf0,0x5f,0xbe,0x3c,0xf4,0x4d,0xce,0xfc,0xe4,0x60,0xec,0xbf,0x64,0x5f,0xbe,0x3c,0xf4,0x5f,0xbe,0x3c,0xf0,0xf2,0xc1,0x3c,0x61,0x5f,0xbe,0x3c,0xf4,0x0,0x0,0x7c,0x5c,0x5f,0xbe,0x3c,0xf4,0x60,0xec,0xbf,0x68,0x5f,0xbe,0x3c,0xf0,0x5f,0xbe,0x3c,0xf4,0x60,0xec,0xbf,0x64,0x0,0x0,0x7c,0x5c,0x1,0x5,0x2,0x6c,0x89,0x4,0x64,0x89,0x5,0x68,0x89,0x6,0x34,0xc7,0x30,0x43,0x28,0x36,0xec,0x8a,0x81,0x7,0x80,0x61,0x32,0x88,0x81,0x7,0xa,0x7,0x8a,0x81,0x7,0x98,0x36,0xed,0x21,0x32,0x8b,0x7,0x33,0x32,0x40,0xf1,0x36,0xed,0x61,0x40,0x60,0xf3,0xe7,0xe8,0x41,0x32,0x64,0xf3,0x40,0xe8,0xa,0xa,0x40,0x64,0xf3,0xe7,0xe8,0x41,0x64,0x98,0x7,0x33,0x34,0x33,0x32,0x40,0x33,0x32,0x64,0xf3,0x40,0xe8,0x33,0x32,0x40,0x64,0xf3,0xe7,0xe8,0x41,0x32,0x64,0x98,0x7,0x33,0x32,0x68,0x64,0x99,0x7,0x32,0x42,0x18,0x8b,0x7,0x35,0x37,0x7,0x18,0x32]

print('Setting up Propeller HAT')
l = p1.loader.Loader('/dev/ttyAMA0',17)
l.upload(code=''.join(map(chr,binary)),progress=p1.loader.print_status)

i2c = smbus.SMBus(1)

addr   = 0x17

OUTPUT = 1
OUT    = 1
INPUT  = 0
IN     = 0
HIGH   = 1
LOW    = 0

def setup(address):
  global addr
  addr = address

def mode(pin,mode):
  i2c.write_byte_data(addr, pin+32, mode)

def write(pin,out):
  i2c.write_byte_data(addr, pin, out)

def read(pin):
  return i2c.read_byte_data(addr, pin+64)
