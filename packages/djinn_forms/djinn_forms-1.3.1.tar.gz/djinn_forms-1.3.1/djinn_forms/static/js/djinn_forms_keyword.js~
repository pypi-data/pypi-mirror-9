/**
 * Keyword widget JS
 */

if (djinn === undefined) {
    var djinn = {};
}


if (djinn.forms === undefined) {
  djinn.forms = {};
}


djinn.forms.keyword = {};


djinn.forms.keyword.appendKw = function(widget, val) {

  widget.find(".new_kw").before('<li>' + val + '<a class="delete">&times;</a></li>');
  
};


$(document).ready(function() {

  $(document).on("click", ".keyword ul", function(e) {

    $(e.currentTarget).find("input").focus();

  });

  $(document).on("keydown", ".new_kw", function(e) {

    var input = $(e.currentTarget);
    var widget = input.parents(".keyword");

    if (e.keyCode == 13) {
      e.preventDefault();
    }

    if (e.keyCode == 13 || e.keyCode == 32) {
      djinn.forms.keyword.appendKw(widget, $(e.currentTarget).val());

      input.val("");
    }
  });

  $(document).on("click", ".keyword .delete", function(e) {

    e.preventDefault();

    $(e.currentTarget).parents("li").remove();
  });
});
