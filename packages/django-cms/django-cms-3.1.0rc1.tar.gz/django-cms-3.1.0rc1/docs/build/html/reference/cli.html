<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Command Line Interface &mdash; django cms 3.1.0.b1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.0.b1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="django cms 3.1.0.b1 documentation" href="../index.html" />
    <link rel="up" title="Reference" href="index.html" />
    <link rel="next" title="Development &amp; community" href="../contributing/index.html" />
    <link rel="prev" title="Template Tags" href="templatetags.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../contributing/index.html" title="Development &amp; community"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="templatetags.html" title="Template Tags"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">django cms 3.1.0.b1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="command-line-interface">
<h1>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h1>
<p>You can invoke the django CMS command line interface using the <tt class="docutils literal"><span class="pre">cms</span></tt> Django
command:</p>
<div class="highlight-bash"><div class="highlight"><pre>python manage.py cms
</pre></div>
</div>
<div class="section" id="informational-commands">
<h2>Informational commands<a class="headerlink" href="#informational-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cms-list">
<span id="cms-list-command"></span><h3><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span></tt><a class="headerlink" href="#cms-list" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">list</span></tt> command is used to display information about your installation.</p>
<p>It has two subcommands:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">plugins</span></tt> lists all plugins that are used in your project.</li>
<li><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">apphooks</span></tt> lists all apphooks that are used in your project.</li>
</ul>
<p><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">plugins</span></tt> will issue warnings when it finds orphaned plugins (see
<tt class="docutils literal"><span class="pre">cms</span> <span class="pre">delete_orphaned_plugins</span></tt> below).</p>
</div>
<div class="section" id="cms-check">
<span id="cms-check-command"></span><h3><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">check</span></tt><a class="headerlink" href="#cms-check" title="Permalink to this headline">¶</a></h3>
<p>Checks your configuration and environment.</p>
</div>
</div>
<div class="section" id="plugin-and-apphook-management-commands">
<h2>Plugin and apphook management commands<a class="headerlink" href="#plugin-and-apphook-management-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cms-delete-orphaned-plugins">
<span id="cms-delete-orphaned-plugins-command"></span><h3><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">delete_orphaned_plugins</span></tt><a class="headerlink" href="#cms-delete-orphaned-plugins" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <tt class="docutils literal"><span class="pre">delete_orphaned_plugins</span></tt> command <strong>permanently deletes</strong> data from
your database. You should make a backup of your database before using it!</p>
</div>
<p>Identifies and deletes orphaned plugins.</p>
<p>Orphaned plugins are ones that exist in the CMSPlugins table, but:</p>
<ul class="simple">
<li>have a plugin_type that is no longer even installed</li>
<li>have no corresponding saved instance in that particular plugin type&#8217;s table</li>
</ul>
<p>Such plugins will cause problems when trying to use operations that need to copy
pages (and thefore plugins), which includes <tt class="docutils literal"><span class="pre">cms</span> <span class="pre">moderator</span> <span class="pre">on</span></tt> as well as page
copy operations in the admin.</p>
<p>It is advised to run <tt class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">plugins</span></tt> periodically, and <tt class="docutils literal"><span class="pre">cms</span>
<span class="pre">delete_orphaned_plugins</span></tt> when required.</p>
</div>
<div class="section" id="cms-uninstall">
<h3><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">uninstall</span></tt><a class="headerlink" href="#cms-uninstall" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">uninstall</span></tt> subcommand can be used to make uninstalling a CMS
Plugin or an apphook easier.</p>
<p>It has two subcommands:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">uninstall</span> <span class="pre">plugins</span> <span class="pre">&lt;plugin</span> <span class="pre">name&gt;</span> <span class="pre">[&lt;plugin</span> <span class="pre">name</span> <span class="pre">2&gt;</span> <span class="pre">[...]]</span></tt> uninstalls
one or several plugins by <strong>removing</strong> them from all pages where they are
used. Note that the plugin name should be the name of the class that is
registered in the django CMS. If you are unsure about the plugin name, use
the <a class="reference internal" href="#cms-list-command"><em>cms list</em></a> to see a list of installed plugins.</li>
<li><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">uninstall</span> <span class="pre">apphooks</span> <span class="pre">&lt;apphook</span> <span class="pre">name&gt;</span> <span class="pre">[&lt;apphook</span> <span class="pre">name</span> <span class="pre">2&gt;</span> <span class="pre">[...]]</span></tt> uninstalls
one or several apphooks by <strong>removing</strong> them from all pages where they are
used. Note that the apphook name should be the name of the class that is
registered in the django CMS. If you are unsure about the apphook name, use
the <a class="reference internal" href="#cms-list-command"><em>cms list</em></a> to see a list of installed apphooks.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The uninstall commands <strong>permanently delete</strong> data from your database.
You should make a backup of your database before using them!</p>
</div>
</div>
<div class="section" id="cms-copy-lang">
<span id="cms-copy-lang-command"></span><h3><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">copy-lang</span></tt><a class="headerlink" href="#cms-copy-lang" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">copy-lang</span></tt> subcommand can be used to copy content (titles and plugins)
from one language to another.
By default the subcommand copy content from the current site
(e.g. the value of <tt class="docutils literal"><span class="pre">SITE_ID</span></tt>) and only if the target
placeholder has no content for the specified language; using the defined
options you can change this.</p>
<p>You must provide two arguments:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">from_language</span></tt>: the language to copy the content from;</li>
<li><tt class="docutils literal"><span class="pre">to_language</span></tt>: the language to copy the content to.</li>
</ul>
<p>It accepts the following options</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">force-copy</span></tt>: set to copy content even if a placeholder already has content;
if set, copied content will be appended to the original one;</li>
<li><tt class="docutils literal"><span class="pre">site</span></tt>: specifiy a SITE_ID to operate on sites different from the current one;</li>
<li><tt class="docutils literal"><span class="pre">verbose</span></tt>: set for more verbose output.</li>
</ul>
<p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>cms copy-lang en de force-copy <span class="nv">site</span><span class="o">=</span><span class="m">2</span> verbose
</pre></div>
</div>
</div>
</div>
<div class="section" id="moderation-commands">
<h2>Moderation commands<a class="headerlink" href="#moderation-commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cms-moderator">
<h3><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">moderator</span></tt><a class="headerlink" href="#cms-moderator" title="Permalink to this headline">¶</a></h3>
<p>If you migrate from an earlier version, you should use the <tt class="docutils literal"><span class="pre">cms</span> <span class="pre">moderator</span> <span class="pre">on</span></tt>
command to ensure that your published pages are up to date, whether or not you
used moderation in the past.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command <strong>alters data</strong> in your database. You should make a backup of
your database before using it! <strong>Never</strong> run this command without first
checking for orphaned plugins, using the <tt class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span> <span class="pre">plugins</span></tt> command, and
if necessary <tt class="docutils literal"><span class="pre">delete_orphaned_plugins</span></tt>. Running  <tt class="docutils literal"><span class="pre">cms</span> <span class="pre">moderator</span></tt> with
orphaned plugins will fail and leave bad data in your database.</p>
</div>
</div>
<div class="section" id="cms-publisher-publish">
<h3><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">publisher_publish</span></tt><a class="headerlink" href="#cms-publisher-publish" title="Permalink to this headline">¶</a></h3>
<p>If you want to publish many pages at once, this command can help you. By default,
this command publishes drafts for all public pages.</p>
<p>It accepts the following options</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">unpublished</span></tt>: set to publish all drafts, including unpublished ones;
if not set, only already published pages will be republished.</li>
<li><tt class="docutils literal"><span class="pre">language</span></tt>: specify a language code to publish pages in only one language;
if not specified, this command publishes all page languages;</li>
<li><tt class="docutils literal"><span class="pre">site</span></tt>: specify a site id to publish pages for specified site only;
if not specified, this command publishes pages for all sites;</li>
</ul>
<p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c">#publish drafts for public pages in all languages</span>
publisher_publish

<span class="c">#publish all drafts in all pages</span>
cms publisher_publish --unpublished

<span class="c">#publish drafts for public pages in deutsch</span>
cms publisher_publish --language<span class="o">=</span>de

<span class="c">#publish all drafts in deutsch</span>
cms publisher_publish --unpublished --language<span class="o">=</span>de

<span class="c">#publish all drafts in deutsch, but only for site with id=2</span>
cms publisher_publish --unpublished --language<span class="o">=</span>de --site<span class="o">=</span>2
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command publishes drafts. You should review drafts before using this
command, because they will become public.</p>
</div>
</div>
</div>
<div class="section" id="maintenance-and-repair">
<h2>Maintenance and repair<a class="headerlink" href="#maintenance-and-repair" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fix-mptt">
<span id="id1"></span><h3><tt class="docutils literal"><span class="pre">fix-mptt</span></tt><a class="headerlink" href="#fix-mptt" title="Permalink to this headline">¶</a></h3>
<p>Occasionally, the MPTT tree can become corrupted (this is one of the reasons for <a class="reference internal" href="../upgrade/3.1.html"><em>our move
away from MPTT to MP in django CMS 3.1</em></a>). Typical symptoms include problems when
trying to copy or delete plugins or pages.</p>
<p>Once a database has been migrated from MPTT to MP, there is no use for this command.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Command Line Interface</a><ul>
<li><a class="reference internal" href="#informational-commands">Informational commands</a><ul>
<li><a class="reference internal" href="#cms-list"><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">list</span></tt></a></li>
<li><a class="reference internal" href="#cms-check"><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">check</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#plugin-and-apphook-management-commands">Plugin and apphook management commands</a><ul>
<li><a class="reference internal" href="#cms-delete-orphaned-plugins"><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">delete_orphaned_plugins</span></tt></a></li>
<li><a class="reference internal" href="#cms-uninstall"><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">uninstall</span></tt></a></li>
<li><a class="reference internal" href="#cms-copy-lang"><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">copy-lang</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#moderation-commands">Moderation commands</a><ul>
<li><a class="reference internal" href="#cms-moderator"><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">moderator</span></tt></a></li>
<li><a class="reference internal" href="#cms-publisher-publish"><tt class="docutils literal"><span class="pre">cms</span> <span class="pre">publisher_publish</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#maintenance-and-repair">Maintenance and repair</a><ul>
<li><a class="reference internal" href="#fix-mptt"><tt class="docutils literal"><span class="pre">fix-mptt</span></tt></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="templatetags.html"
                        title="previous chapter">Template Tags</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../contributing/index.html"
                        title="next chapter">Development &amp; community</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/reference/cli.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../contributing/index.html" title="Development &amp; community"
             >next</a> |</li>
        <li class="right" >
          <a href="templatetags.html" title="Template Tags"
             >previous</a> |</li>
        <li><a href="../index.html">django cms 3.1.0.b1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Patrick Lauber.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>