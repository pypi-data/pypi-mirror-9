<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3.0 release notes &mdash; django cms 3.1.0.b1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.0.b1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="django cms 3.1.0.b1 documentation" href="../index.html" />
    <link rel="up" title="Release notes &amp; upgrade information" href="index.html" />
    <link rel="next" title="2.4 release notes" href="2.4.html" />
    <link rel="prev" title="3.0.3 release notes" href="3.0.3.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="2.4.html" title="2.4 release notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="3.0.3.html" title="3.0.3 release notes"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">django cms 3.1.0.b1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Release notes &amp; upgrade information</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="release-notes">
<span id="upgrade-to-3-0"></span><h1>3.0 release notes<a class="headerlink" href="#release-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-s-new-in-3-0">
<h2>What&#8217;s new in 3.0<a class="headerlink" href="#what-s-new-in-3-0" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Upgrading from previous versions</p>
<p class="last">3.0 introduces some changes that <strong>require</strong> action if you are upgrading
from a previous version.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#upgrading-from-2-4"><em>Click here to see the quick upgrade guide</em></a></p>
</div>
<div class="section" id="new-frontend-editing">
<h3>New Frontend Editing<a class="headerlink" href="#new-frontend-editing" title="Permalink to this headline">¶</a></h3>
<p>django CMS 3.0 introduces a new frontend editing system as well as a
customizable Django admin skin (<a class="reference external" href="https://github.com/divio/djangocms-admin-style">djangocms_admin_style</a>).</p>
<p>In the new system, <tt class="docutils literal"><span class="pre">Placeholders</span></tt> and their plugins are no longer managed in
the admin site, but only from the frontend.</p>
<p>In addition, the system now offer two editing views:</p>
<ul class="simple">
<li><strong>content</strong> view, for editing the configuration and content of plugins.</li>
<li><strong>structure</strong> view, in which plugins can be added and rearranged.</li>
</ul>
<p>Page titles can also be modified directly from the frontend.</p>
</div>
<div class="section" id="new-toolbar">
<h3>New Toolbar<a class="headerlink" href="#new-toolbar" title="Permalink to this headline">¶</a></h3>
<p>The toolbar&#8217;s code has been simplified and its appearance refreshed. The
toolbar is now a more consistent management tool for adding and changing
objects. See <a class="reference internal" href="../how_to/toolbar.html"><em>Extending the Toolbar</em></a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Upgrading from previous versions</p>
<p class="last">3.0 now requires the <tt class="docutils literal"><span class="pre">django.contrib.messages</span></tt> application for the
toolbar to work. See <a class="reference internal" href="../how_to/integrate.html#enable-messages"><em>Enable messages</em></a> for how to
enable it.</p>
</div>
</div>
<div class="section" id="new-page-types">
<h3>New Page Types<a class="headerlink" href="#new-page-types" title="Permalink to this headline">¶</a></h3>
<p>You can now save pages as page types. If you then create a new page you may
select a page type and all plugins and contents will be pre-filled.</p>
</div>
<div class="section" id="experimental-python-3-3-support">
<h3>Experimental Python 3.3 support<a class="headerlink" href="#experimental-python-3-3-support" title="Permalink to this headline">¶</a></h3>
<p>We&#8217;ve added experimental support for Python 3.3. Support for Python 2.5 has
been dropped.</p>
</div>
<div class="section" id="better-multilingual-editing">
<h3>Better multilingual editing<a class="headerlink" href="#better-multilingual-editing" title="Permalink to this headline">¶</a></h3>
<p>Improvements in the django CMS environment for managing a multi-lingual site
include:</p>
<ul class="simple">
<li>a built-in language chooser for languages that are not yet public.</li>
<li>configurable behaviour of the admin site&#8217;s language when switching between
languages of edited content.</li>
</ul>
</div>
<div class="section" id="cms-seo-fields">
<h3>CMS_SEO_FIELDS<a class="headerlink" href="#cms-seo-fields" title="Permalink to this headline">¶</a></h3>
<p>The setting has been <strong>removed</strong>, along with the SEO fieldset in admin.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">meta_description</span></tt> field&#8217;s max_length is now 155 for optimal Google
integration.</li>
<li><tt class="docutils literal"><span class="pre">page_title</span></tt> is default on top.</li>
<li><tt class="docutils literal"><span class="pre">meta_keywords</span></tt> field has been removed, as it no longer serves any purpose.</li>
</ul>
</div>
<div class="section" id="cms-menu-title-overwrite">
<h3>CMS_MENU_TITLE_OVERWRITE<a class="headerlink" href="#cms-menu-title-overwrite" title="Permalink to this headline">¶</a></h3>
<p>New default for this setting is <tt class="docutils literal"><span class="pre">True</span></tt>.</p>
</div>
<div class="section" id="plugin-fallback-languages">
<h3>Plugin fallback languages<a class="headerlink" href="#plugin-fallback-languages" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s now possible to specify fallback languages for a placeholder if the placeholder
is empty for the current language. This must be activated in
<a class="reference internal" href="../reference/configuration.html#std:setting-CMS_PLACEHOLDER_CONF"><tt class="xref std std-setting docutils literal"><span class="pre">CMS_PLACEHOLDER_CONF</span></tt></a> per placeholder. It defaults to <tt class="docutils literal"><span class="pre">False</span></tt> to
maintain pre-3.0 behavior.</p>
</div>
<div class="section" id="language-chooser">
<h3>language_chooser<a class="headerlink" href="#language-chooser" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">language_chooser</span></tt> template tag now only displays languages that are
public. Use the toolbar language chooser to change the language to non-public
languages.</p>
</div>
<div class="section" id="undo-and-redo">
<h3>Undo and Redo<a class="headerlink" href="#undo-and-redo" title="Permalink to this headline">¶</a></h3>
<p>If you have <tt class="docutils literal"><span class="pre">django-reversion</span></tt> installed you now have <strong>undo</strong> and <strong>redo</strong>
options available directly in the toolbar. These can now revert <em>plugin</em>
content as well as <em>page</em> content.</p>
</div>
<div class="section" id="plugins-removed">
<span id="ex-core-plugins"></span><h3>Plugins removed<a class="headerlink" href="#plugins-removed" title="Permalink to this headline">¶</a></h3>
<p>We have removed plugins from the core. This is not because you are not
expected to use them, but because django CMS should not impose unnecessary
choices about what to install upon its adopters.</p>
<p>The most significant of these removals is <tt class="docutils literal"><span class="pre">cms.plugins.text</span></tt>.</p>
<p>We provide <tt class="docutils literal"><span class="pre">djangocms-text-ckeditor</span></tt>, a CKEditor-based Text Plugin. It&#8217;s
available from <a class="reference external" href="https://github.com/divio/djangocms-text-ckeditor">https://github.com/divio/djangocms-text-ckeditor</a>. You may of
course use your preferred editor; others are available.</p>
<p>Furthermore, we removed the following plugins from the core and moved them into
separate repositories.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to update from the old <tt class="docutils literal"><span class="pre">cms.plugins.X</span></tt> to the new
<tt class="docutils literal"><span class="pre">djangocms_X</span></tt> plugins, simply install the new plugin, remove the old
<tt class="docutils literal"><span class="pre">cms.plugins.X</span></tt> from <tt class="docutils literal"><span class="pre">settings.INSTALLED_APPS</span></tt> and add the new one
to it. Then run the migrations (<tt class="docutils literal"><span class="pre">python</span> <span class="pre">manage.py</span> <span class="pre">migrate</span> <span class="pre">djangocms_X</span></tt>).</p>
</div>
<div class="section" id="file-plugin">
<h4>File Plugin<a class="headerlink" href="#file-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the file plugin (<tt class="docutils literal"><span class="pre">cms.plugins.file</span></tt>). Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-file">https://github.com/divio/djangocms-file</a></li>
</ul>
<p>As an alternative, you could also use the following (yet you will not be able
to keep your existing files from the old <tt class="docutils literal"><span class="pre">cms.plugins.file</span></tt>!)</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/stefanfoulis/django-filer">https://github.com/stefanfoulis/django-filer</a></li>
</ul>
</div>
<div class="section" id="flash-plugin">
<h4>Flash Plugin<a class="headerlink" href="#flash-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the flash plugin (<tt class="docutils literal"><span class="pre">cms.plugins.flash</span></tt>). Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-flash">https://github.com/divio/djangocms-flash</a></li>
</ul>
</div>
<div class="section" id="googlemap-plugin">
<h4>Googlemap Plugin<a class="headerlink" href="#googlemap-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the googlemap plugin (<tt class="docutils literal"><span class="pre">cms.plugins.googlemap</span></tt>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-googlemap">https://github.com/divio/djangocms-googlemap</a></li>
</ul>
</div>
<div class="section" id="inherit-plugin">
<h4>Inherit Plugin<a class="headerlink" href="#inherit-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the inherit plugin (<tt class="docutils literal"><span class="pre">cms.plugins.inherit</span></tt>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-inherit">https://github.com/divio/djangocms-inherit</a></li>
</ul>
</div>
<div class="section" id="picture-plugin">
<h4>Picture Plugin<a class="headerlink" href="#picture-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the picture plugin (<tt class="docutils literal"><span class="pre">cms.plugins.picture</span></tt>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-picture">https://github.com/divio/djangocms-picture</a></li>
</ul>
</div>
<div class="section" id="teaser-plugin">
<h4>Teaser Plugin<a class="headerlink" href="#teaser-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the teaser plugin (<tt class="docutils literal"><span class="pre">cms.plugins.teaser</span></tt>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-teaser">https://github.com/divio/djangocms-teaser</a></li>
</ul>
</div>
<div class="section" id="video-plugin">
<h4>Video Plugin<a class="headerlink" href="#video-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the video plugin (<tt class="docutils literal"><span class="pre">cms.plugins.video</span></tt>). Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-video">https://github.com/divio/djangocms-video</a></li>
</ul>
</div>
<div class="section" id="link-plugin">
<h4>Link Plugin<a class="headerlink" href="#link-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the link plugin (<tt class="docutils literal"><span class="pre">cms.plugins.link</span></tt>). Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-link">https://github.com/divio/djangocms-link</a></li>
</ul>
</div>
<div class="section" id="snippet-plugin">
<h4>Snippet Plugin<a class="headerlink" href="#snippet-plugin" title="Permalink to this headline">¶</a></h4>
<p>We removed the snippet plugin (<tt class="docutils literal"><span class="pre">cms.plugins.snippet</span></tt>).
Its new location is at:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/divio/djangocms-snippet">https://github.com/divio/djangocms-snippet</a></li>
</ul>
<p>As an alternative, you could also use the following (yet you will not be able
to keep your existing files from the old <tt class="docutils literal"><span class="pre">cms.plugins.snippet</span></tt>!)</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/pbs/django-cms-smartsnippets">https://github.com/pbs/django-cms-smartsnippets</a></li>
</ul>
</div>
<div class="section" id="twitter-plugin">
<span id="cmsplugin-twitter-removed"></span><h4>Twitter Plugin<a class="headerlink" href="#twitter-plugin" title="Permalink to this headline">¶</a></h4>
<p>Twitter disabled V1 of their API, thus we&#8217;ve removed the twitter plugin
(<tt class="docutils literal"><span class="pre">cms.plugins.twitter</span></tt>) completely.</p>
<p>For alternatives have a look at these plugins:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/nephila/djangocms_twitter">https://github.com/nephila/djangocms_twitter</a></li>
<li><a class="reference external" href="https://github.com/changer/cmsplugin-twitter">https://github.com/changer/cmsplugin-twitter</a></li>
</ul>
</div>
</div>
<div class="section" id="plugin-context-processors-take-a-new-argument">
<h3>Plugin Context Processors take a new argument<a class="headerlink" href="#plugin-context-processors-take-a-new-argument" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../how_to/custom_plugins.html#plugin-context-processors"><em>Plugin Context</em></a> have had an argument added so that the rest
of the context is available to them. If you have existing plugin context
processors you will need to change their function signature to add the extra
argument.</p>
</div>
<div class="section" id="apphooks">
<h3>Apphooks<a class="headerlink" href="#apphooks" title="Permalink to this headline">¶</a></h3>
<p>Apphooks have moved from the title to the page model. This means you can no
longer have separate apphooks for each language. A new <tt class="docutils literal"><span class="pre">application</span> <span class="pre">instance</span> <span class="pre">name</span></tt>
field has been added.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The reverse id is not used for the namespace anymore. If you used
namespaced apphooks before, be sure to update your pages and fill out the
namespace fields.</p>
</div>
<p>If you use apphook apps with <tt class="docutils literal"><span class="pre">app_name</span></tt> for app namespaces, be sure to fill
out the instance namespace field <tt class="docutils literal"><span class="pre">application</span> <span class="pre">instance</span> <span class="pre">name</span></tt> as it&#8217;s now
required to have a namespace defined if you use app namespaces.</p>
<p>For further reading about application namespaces, please refer to the Django
documentation on the subject at <a class="reference external" href="https://docs.djangoproject.com/en/dev/topics/http/urls/#url-namespaces">https://docs.djangoproject.com/en/dev/topics/http/urls/#url-namespaces</a></p>
<p><tt class="docutils literal"><span class="pre">request.current_app</span></tt> has been removed. If you relied on this, use the
following code instead in your views:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
  <span class="n">current_app</span> <span class="o">=</span> <span class="n">resolve</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">path_info</span><span class="p">)</span><span class="o">.</span><span class="n">namespace</span>
  <span class="n">context</span> <span class="o">=</span> <span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">current_app</span><span class="o">=</span><span class="n">current_app</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&quot;my_templace.html&quot;</span><span class="p">,</span> <span class="n">context_instance</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
<p>Details can be found in <a class="reference internal" href="../how_to/apphooks.html#multi-apphook"><em>Attaching an application multiple times</em></a>.</p>
</div>
<div class="section" id="placeholderadmin">
<h3><tt class="docutils literal"><span class="pre">PlaceholderAdmin</span></tt><a class="headerlink" href="#placeholderadmin" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">PlaceholderAdmin</span></tt> now is deprecated. Instead of deriving from
<tt class="docutils literal"><span class="pre">admin.ModelAdmin</span></tt>, a new mixin class <tt class="docutils literal"><span class="pre">PlaceholderAdminMixin</span></tt> has been
introduced which shall be used together with <tt class="docutils literal"><span class="pre">admin.ModelAdmin</span></tt>. Therefore
when defining a model admin class containing a placeholder, now add
<tt class="docutils literal"><span class="pre">PlaceholderAdminMixin</span></tt> to the list of parent classes, together with
<tt class="docutils literal"><span class="pre">admin.ModelAdmin</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">PlaceholderAdmin</span></tt> doesn&#8217;t have language tabs anymore and the plugin editor
is gone. The plugin API has changed and is now more consistent. <tt class="docutils literal"><span class="pre">PageAdmin</span></tt>
uses the same API as <tt class="docutils literal"><span class="pre">PlaceholderAdminMixin</span></tt> now. If your app talked with
the Plugin API directly be sure to read the code and the changed parameters.
If you use <tt class="docutils literal"><span class="pre">PlaceholderFields</span></tt> you should add the mixin
<tt class="docutils literal"><span class="pre">PlaceholderAdminMixin</span></tt> as it delivers the API for editing the plugins and
the placeholders.</p>
<p>The workflow in the future should look like this:</p>
<ol class="arabic simple">
<li>Create new model instances via a toolbar entry or via the admin.</li>
<li>Go to the view that represents the model instance and add content via
frontend editing.</li>
</ol>
</div>
<div class="section" id="placeholder-object-permissions">
<h3>Placeholder object permissions<a class="headerlink" href="#placeholder-object-permissions" title="Permalink to this headline">¶</a></h3>
<p>In addition to model level permissions, <tt class="docutils literal"><span class="pre">Placeholder</span></tt> now checks if a user
has permissions on a specific object of that model. Details can be found here
in <a class="reference internal" href="../how_to/placeholders.html#placeholder-object-permissions"><em>Permissions</em></a>.</p>
</div>
<div class="section" id="placeholders-are-prefillable-with-default-plugins">
<h3>Placeholders are prefillable with default plugins<a class="headerlink" href="#placeholders-are-prefillable-with-default-plugins" title="Permalink to this headline">¶</a></h3>
<p>In CMS_PLACEHOLDER_CONF, for each placeholder configuration, you can specify
via &#8216;default_plugins&#8217; a list of plugins to automaticaly add to the
placeholder if empty. See <a class="reference internal" href="../reference/configuration.html#placeholder-default-plugins"><em>default_plugins in CMS_PLACEHOLDER_CONF</em></a>.</p>
</div>
<div class="section" id="custom-modules-and-plugin-labels-in-the-toolbar-ui">
<h3>Custom modules and plugin labels in the toolbar UI<a class="headerlink" href="#custom-modules-and-plugin-labels-in-the-toolbar-ui" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s now possible to configure module and plugins labels to show in the toolbar
UI. See <a class="reference internal" href="../reference/configuration.html#std:setting-CMS_PLACEHOLDER_CONF"><tt class="xref std std-setting docutils literal"><span class="pre">CMS_PLACEHOLDER_CONF</span></tt></a> for details.</p>
</div>
<div class="section" id="new-copy-lang-subcommand">
<h3>New <tt class="docutils literal"><span class="pre">copy-lang</span></tt> subcommand<a class="headerlink" href="#new-copy-lang-subcommand" title="Permalink to this headline">¶</a></h3>
<p>Added a management command to copy content (titles and plugins) from one
language to another.</p>
<p>The command can be run with:</p>
<div class="highlight-python"><div class="highlight"><pre>manage.py cms copy_lang from_lang to_lang
</pre></div>
</div>
<p>Please read <a class="reference internal" href="../reference/cli.html#cms-copy-lang-command"><em>cms copy-lang</em></a> before using.</p>
</div>
<div class="section" id="frontedit-editor-for-django-models">
<h3>Frontedit editor for Django models<a class="headerlink" href="#frontedit-editor-for-django-models" title="Permalink to this headline">¶</a></h3>
<p>Frontend editor is available for any Django model; see
<a class="reference internal" href="../how_to/frontend_models.html#frontend-editable-fields"><em>documentation</em></a> for details.</p>
</div>
<div class="section" id="new-page-related-name-to-site">
<h3>New <tt class="docutils literal"><span class="pre">Page</span> <span class="pre">related_name</span></tt> to <tt class="docutils literal"><span class="pre">Site</span></tt><a class="headerlink" href="#new-page-related-name-to-site" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">Page</span></tt> object used to have the default <tt class="docutils literal"><span class="pre">related_name</span></tt> (<tt class="docutils literal"><span class="pre">page</span></tt>) to the
<tt class="docutils literal"><span class="pre">Site</span></tt> model which may cause clashing with other Django apps; the
<tt class="docutils literal"><span class="pre">related_name</span></tt> is now <tt class="docutils literal"><span class="pre">djangocms_pages</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Potential backward incompatibility</p>
<p class="last">This change may cause you code to break, if you relied on <tt class="docutils literal"><span class="pre">Site.page_set</span></tt>
to access cms pages from a <tt class="docutils literal"><span class="pre">Site</span></tt> model instance: update it to use
<tt class="docutils literal"><span class="pre">Site.djangocms_pages</span></tt></p>
</div>
</div>
<div class="section" id="moved-all-templatetags-to-cms-tags">
<h3>Moved all templatetags to cms_tags<a class="headerlink" href="#moved-all-templatetags-to-cms-tags" title="Permalink to this headline">¶</a></h3>
<p>All template tags are now in the <tt class="docutils literal"><span class="pre">cms_tags</span></tt> namespace so to use any cms
template tags you can just do:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">load</span> <span class="nv">cms_tags</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="getter-and-setter-for-translatable-plugin-content">
<h3>Getter and setter for translatable plugin content<a class="headerlink" href="#getter-and-setter-for-translatable-plugin-content" title="Permalink to this headline">¶</a></h3>
<p>A plugin&#8217;s translatable content can now be read and set through <tt class="xref py py-meth docutils literal"><span class="pre">get_translatable_content()</span></tt>
and <tt class="xref py py-meth docutils literal"><span class="pre">set_translatable_content()</span></tt>. See <a class="reference internal" href="../how_to/custom_plugins.html#custom-plugins"><em>Custom Plugins</em></a> for more info.</p>
</div>
<div class="section" id="no-more-db-tablename-magic-for-plugins">
<h3>No more DB tablename magic for plugins<a class="headerlink" href="#no-more-db-tablename-magic-for-plugins" title="Permalink to this headline">¶</a></h3>
<p>Since django CMS 2.0 plugins had their table names start with <cite>cmsplugin_</cite>. We removed this behavior
in 3.0 and will display a deprecation warning with the old and new table name. If your plugin uses
south for migrations create a new empty schemamigration and rename the table by hand.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>When working in the django shell or coding at low level, you <strong>must</strong>
trigger the backward compatible behavior (a.k.a. magical rename
checking), otherwise non migrated plugins will fail.
To do this execute the following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">cms.plugin_pool</span> <span class="kn">import</span> <span class="n">plugin_pool</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plugin_pool</span><span class="o">.</span><span class="n">set_plugin_meta</span><span class="p">()</span>
</pre></div>
</div>
<p class="last">This code can be executed both in the shell or in your python
modules.</p>
</div>
</div>
<div class="section" id="added-support-for-custom-user-models">
<h3>Added support for custom user models<a class="headerlink" href="#added-support-for-custom-user-models" title="Permalink to this headline">¶</a></h3>
<p>Since Django 1.5 it has been possible to swap out the default User model for a custom user model.  This is now fully supported by DjangoCMS, and in addition a new option has been added to the test runner to allow specifying the user model to use for tests (e.g. &#8211;user=customuserapp.User)</p>
</div>
<div class="section" id="page-caching">
<h3>Page caching<a class="headerlink" href="#page-caching" title="Permalink to this headline">¶</a></h3>
<p>Pages are now cached by default.
You can disable this behavior with <a class="reference internal" href="../reference/configuration.html#std:setting-CMS_PAGE_CACHE"><tt class="xref std std-setting docutils literal"><span class="pre">CMS_PAGE_CACHE</span></tt></a></p>
</div>
<div class="section" id="placeholder-caching">
<h3>Placeholder caching<a class="headerlink" href="#placeholder-caching" title="Permalink to this headline">¶</a></h3>
<p>Plugins have a new default property: <cite>cache=True</cite>. If all plugins in a placeholder have set this to
<tt class="docutils literal"><span class="pre">True</span></tt> the whole placeholder will be cached if the toolbar is not in edit mode.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If your plugin is dynamic and processes current user or request data be sure to set <tt class="docutils literal"><span class="pre">cache=False</span></tt></p>
</div>
</div>
<div class="section" id="plugin-caching">
<h3>Plugin caching<a class="headerlink" href="#plugin-caching" title="Permalink to this headline">¶</a></h3>
<p>Plugins have a new attribute: <tt class="docutils literal"><span class="pre">cache=True</span></tt>. Its default value can be configured with <a class="reference internal" href="../reference/configuration.html#std:setting-CMS_PLUGIN_CACHE"><tt class="xref std std-setting docutils literal"><span class="pre">CMS_PLUGIN_CACHE</span></tt></a>.</p>
</div>
<div class="section" id="per-page-clickjacking-protection">
<h3>Per-page Clickjacking protection<a class="headerlink" href="#per-page-clickjacking-protection" title="Permalink to this headline">¶</a></h3>
<p>An advanced option has been added which controls, on a per-page basis, the
<tt class="docutils literal"><span class="pre">X-Frame-Options</span></tt> header. The default setting is to inherit from the parent
page. If no ancestor specifies a value, no header will be set, allowing Django&#8217;s
own middleware to handle it (if enabled).</p>
</div>
<div class="section" id="cms-template-context-variable">
<h3>CMS_TEMPLATE context variable<a class="headerlink" href="#cms-template-context-variable" title="Permalink to this headline">¶</a></h3>
<p>A new <tt class="docutils literal"><span class="pre">CMS_TEMPLATE</span></tt> variable is now available in the context: it contains the path to the
current page template.
See <a class="reference internal" href="../how_to/templates.html#page-template"><em>CMS_TEMPLATE reference</em></a> for details.</p>
</div>
</div>
<div class="section" id="upgrading-from-2-4">
<span id="id1"></span><h2>Upgrading from 2.4<a class="headerlink" href="#upgrading-from-2-4" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are reports that upgrading the CMS from 2.4 to 3.0 may fail if
Django Debug Toolbar is installed. Please remove/disable Django Debug
Toolbar and other non-essential apps before attempting to upgrade, then
once complete, re-enable them.</p>
</div>
<p>If you want to upgrade from version 2.4 to 3.0, there&#8217;s a few things you need to do.
Start of by updating the cms&#8217; package:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install django-cms==3.0
</pre></div>
</div>
<p>Next, you need to make the following changes in your <tt class="docutils literal"><span class="pre">settings.py</span></tt></p>
<ul>
<li><p class="first">settings.INSTALLED_APPS</p>
<blockquote>
<div><ul class="simple">
<li>Remove <tt class="docutils literal"><span class="pre">cms.plugin.twitter</span></tt>. This package has been deprecated, see <a class="reference internal" href="#cmsplugin-twitter-removed"><em>Twitter Plugin</em></a>.</li>
<li>Rename all the other <tt class="docutils literal"><span class="pre">cms.plugins.X</span></tt> to <tt class="docutils literal"><span class="pre">djangocms_X</span></tt>, see <a class="reference internal" href="#ex-core-plugins"><em>Plugins removed</em></a>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">settings.CONTEXT_PROCESSORS</p>
<blockquote>
<div><ul class="simple">
<li>Replace <tt class="docutils literal"><span class="pre">cms.context_processors.media</span></tt> with <tt class="docutils literal"><span class="pre">cms.context_processors.cms_settings</span></tt></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Afterwards, install all your previously renamed ex-core plugins (djangocms-X). Here&#8217;s a full list, but you probably
don&#8217;t need all of them:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install djangocms-file
pip install djangocms-flash
pip install djangocms-googlemap
pip install djangocms-inherit
pip install djangocms-picture
pip install djangocms-teaser
pip install djangocms-video
pip install djangocms-link
pip install djangocms-snippet
</pre></div>
</div>
<p>Also, please check your templates to make sure that you haven&#8217;t put the <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">cms_toolbar</span> <span class="pre">%}</span></tt> tag into a <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">block</span> <span class="pre">%}</span></tt>
tag. This is not allowed in 3.0 anymore.</p>
<p>To finish up, please update your database:</p>
<div class="highlight-python"><div class="highlight"><pre>python manage.py syncdb
python manage.py migrate  (answer yes if your prompted to delete stale content types)
</pre></div>
</div>
<p>That&#8217;s it!</p>
</div>
<div class="section" id="pending-deprecations">
<h2>Pending deprecations<a class="headerlink" href="#pending-deprecations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="placeholder-tags">
<h3>placeholder_tags<a class="headerlink" href="#placeholder-tags" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">placeholder_tags</span></tt> is now deprecated, the <tt class="docutils literal"><span class="pre">render_placeholder</span></tt> template
tag can now be loaded from the <tt class="docutils literal"><span class="pre">cms_tags</span></tt> template tag library.</p>
<p>Using <tt class="docutils literal"><span class="pre">placeholder_tags</span></tt> will cause a <tt class="docutils literal"><span class="pre">DeprecationWarning</span></tt> to occur.</p>
<p><tt class="docutils literal"><span class="pre">placeholder_tags</span></tt> will be removed in version 3.1.</p>
</div>
<div class="section" id="cms-context-processors-media">
<h3>cms.context_processors.media<a class="headerlink" href="#cms-context-processors-media" title="Permalink to this headline">¶</a></h3>
<p><tt class="docutils literal"><span class="pre">cms.context_processors.media</span></tt> is now deprecated, please use
<tt class="docutils literal"><span class="pre">cms.context_processors.cms_settings</span></tt> by updating <tt class="docutils literal"><span class="pre">TEMPLATE_CONTEXT_PROCESSORS</span></tt>
in the settings</p>
<p>Using <tt class="docutils literal"><span class="pre">cms.context_processors.media</span></tt> will cause a <tt class="docutils literal"><span class="pre">DeprecationWarning</span></tt> to occur.</p>
<p><tt class="docutils literal"><span class="pre">cms.context_processors.media</span></tt> will be removed in version 3.1.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3.0 release notes</a><ul>
<li><a class="reference internal" href="#what-s-new-in-3-0">What&#8217;s new in 3.0</a><ul>
<li><a class="reference internal" href="#new-frontend-editing">New Frontend Editing</a></li>
<li><a class="reference internal" href="#new-toolbar">New Toolbar</a></li>
<li><a class="reference internal" href="#new-page-types">New Page Types</a></li>
<li><a class="reference internal" href="#experimental-python-3-3-support">Experimental Python 3.3 support</a></li>
<li><a class="reference internal" href="#better-multilingual-editing">Better multilingual editing</a></li>
<li><a class="reference internal" href="#cms-seo-fields">CMS_SEO_FIELDS</a></li>
<li><a class="reference internal" href="#cms-menu-title-overwrite">CMS_MENU_TITLE_OVERWRITE</a></li>
<li><a class="reference internal" href="#plugin-fallback-languages">Plugin fallback languages</a></li>
<li><a class="reference internal" href="#language-chooser">language_chooser</a></li>
<li><a class="reference internal" href="#undo-and-redo">Undo and Redo</a></li>
<li><a class="reference internal" href="#plugins-removed">Plugins removed</a><ul>
<li><a class="reference internal" href="#file-plugin">File Plugin</a></li>
<li><a class="reference internal" href="#flash-plugin">Flash Plugin</a></li>
<li><a class="reference internal" href="#googlemap-plugin">Googlemap Plugin</a></li>
<li><a class="reference internal" href="#inherit-plugin">Inherit Plugin</a></li>
<li><a class="reference internal" href="#picture-plugin">Picture Plugin</a></li>
<li><a class="reference internal" href="#teaser-plugin">Teaser Plugin</a></li>
<li><a class="reference internal" href="#video-plugin">Video Plugin</a></li>
<li><a class="reference internal" href="#link-plugin">Link Plugin</a></li>
<li><a class="reference internal" href="#snippet-plugin">Snippet Plugin</a></li>
<li><a class="reference internal" href="#twitter-plugin">Twitter Plugin</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plugin-context-processors-take-a-new-argument">Plugin Context Processors take a new argument</a></li>
<li><a class="reference internal" href="#apphooks">Apphooks</a></li>
<li><a class="reference internal" href="#placeholderadmin"><tt class="docutils literal"><span class="pre">PlaceholderAdmin</span></tt></a></li>
<li><a class="reference internal" href="#placeholder-object-permissions">Placeholder object permissions</a></li>
<li><a class="reference internal" href="#placeholders-are-prefillable-with-default-plugins">Placeholders are prefillable with default plugins</a></li>
<li><a class="reference internal" href="#custom-modules-and-plugin-labels-in-the-toolbar-ui">Custom modules and plugin labels in the toolbar UI</a></li>
<li><a class="reference internal" href="#new-copy-lang-subcommand">New <tt class="docutils literal"><span class="pre">copy-lang</span></tt> subcommand</a></li>
<li><a class="reference internal" href="#frontedit-editor-for-django-models">Frontedit editor for Django models</a></li>
<li><a class="reference internal" href="#new-page-related-name-to-site">New <tt class="docutils literal"><span class="pre">Page</span> <span class="pre">related_name</span></tt> to <tt class="docutils literal"><span class="pre">Site</span></tt></a></li>
<li><a class="reference internal" href="#moved-all-templatetags-to-cms-tags">Moved all templatetags to cms_tags</a></li>
<li><a class="reference internal" href="#getter-and-setter-for-translatable-plugin-content">Getter and setter for translatable plugin content</a></li>
<li><a class="reference internal" href="#no-more-db-tablename-magic-for-plugins">No more DB tablename magic for plugins</a></li>
<li><a class="reference internal" href="#added-support-for-custom-user-models">Added support for custom user models</a></li>
<li><a class="reference internal" href="#page-caching">Page caching</a></li>
<li><a class="reference internal" href="#placeholder-caching">Placeholder caching</a></li>
<li><a class="reference internal" href="#plugin-caching">Plugin caching</a></li>
<li><a class="reference internal" href="#per-page-clickjacking-protection">Per-page Clickjacking protection</a></li>
<li><a class="reference internal" href="#cms-template-context-variable">CMS_TEMPLATE context variable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#upgrading-from-2-4">Upgrading from 2.4</a></li>
<li><a class="reference internal" href="#pending-deprecations">Pending deprecations</a><ul>
<li><a class="reference internal" href="#placeholder-tags">placeholder_tags</a></li>
<li><a class="reference internal" href="#cms-context-processors-media">cms.context_processors.media</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="3.0.3.html"
                        title="previous chapter">3.0.3 release notes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="2.4.html"
                        title="next chapter">2.4 release notes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/upgrade/3.0.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="2.4.html" title="2.4 release notes"
             >next</a> |</li>
        <li class="right" >
          <a href="3.0.3.html" title="3.0.3 release notes"
             >previous</a> |</li>
        <li><a href="../index.html">django cms 3.1.0.b1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Release notes &amp; upgrade information</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Patrick Lauber.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>