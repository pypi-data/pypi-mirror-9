<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>3.1 release notes &mdash; django cms 3.0.9 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="django cms 3.0.9 documentation" href="../index.html" />
    <link rel="up" title="Release notes &amp; upgrade information" href="index.html" />
    <link rel="next" title="3.0.10 release notes" href="3.0.10.html" />
    <link rel="prev" title="Release notes &amp; upgrade information" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="3.0.10.html" title="3.0.10 release notes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Release notes &amp; upgrade information"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">django cms 3.0.9 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Release notes &amp; upgrade information</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="release-notes">
<span id="upgrade-to-3-1"></span><h1>3.1 release notes<a class="headerlink" href="#release-notes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-s-new-in-3-1">
<h2>What&#8217;s new in 3.1<a class="headerlink" href="#what-s-new-in-3-1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="switch-from-mptt-to-mp">
<h3>Switch from MPTT to MP<a class="headerlink" href="#switch-from-mptt-to-mp" title="Permalink to this headline">¶</a></h3>
<p>Since django CMS 2.0 we relied on MPTT (Modified Preorder Tree Traversal) for efficiently handling tree structures in the DB.
Over the years it proved that MPTT was not fast enough for big tree operations (&gt;1000 pages) and regularly
the tree got corrupted because of transactional errors.</p>
<p>In 3.1 we replaced MPTT for MP (Materialized Path). MP is more efficient and has more error resistance then MPTT.
It should make the whole django CMS experience way better, faster and reliable.</p>
<div class="section" id="before-upgrading">
<h4>Before upgrading<a class="headerlink" href="#before-upgrading" title="Permalink to this headline">¶</a></h4>
<p>Be sure to run <tt class="docutils literal"><span class="pre">manage.py</span> <span class="pre">cms</span> <span class="pre">fix-mptt</span></tt> before you upgrade.</p>
</div>
</div>
<div class="section" id="dropped-support-for-django-1-4-and-1-5">
<h3>Dropped support for Django 1.4 and 1.5<a class="headerlink" href="#dropped-support-for-django-1-4-and-1-5" title="Permalink to this headline">¶</a></h3>
<p>Starting from version 3.1 the supported Django versions are 1.6 and 1.7</p>
</div>
</div>
<div class="section" id="incompatible-changes">
<h2>Incompatible changes<a class="headerlink" href="#incompatible-changes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="migrations-moved">
<h3>Migrations moved<a class="headerlink" href="#migrations-moved" title="Permalink to this headline">¶</a></h3>
<p>Migrations packages has been renamed to the standard layout:</p>
<blockquote>
<div><ul class="simple">
<li>Django 1.7 migrations are now into standard <tt class="docutils literal"><span class="pre">cms.migrations</span></tt> and <tt class="docutils literal"><span class="pre">menus.migrations</span></tt> packages</li>
<li>South migrations are now in <tt class="docutils literal"><span class="pre">cms.south_migrations</span></tt> and <tt class="docutils literal"><span class="pre">menus.south_migrations</span></tt> packages</li>
</ul>
</div></blockquote>
<p>South 1.0.2 is now required to correctly handle the above layout; if you are upgrading from Django 1.7 / django CMS 3.0.x,
please remove the old migration path from <tt class="docutils literal"><span class="pre">MIGRATION_MODULES</span></tt> settings.</p>
</div>
<div class="section" id="structure-mode-permission">
<h3>Structure mode permission<a class="headerlink" href="#structure-mode-permission" title="Permalink to this headline">¶</a></h3>
<p>The new &#8220;<strong>Can use Structure mode</strong>&#8221; permission has been added. Without this permission, a
non-superuser cannot enter structure mode anymore: this allow more strict workflow which only
enable content update for certain users.
This change include data migration
that adds the new permission to any staff user or group with
<cite>cms.change_page</cite> permission; you can then later change this according to your permission
model and workflow.
Be aware that existing users cannot be migrated if running the django CMS
migrations for the first time in the project, because permissions are not already in place;
in this case users must be given the new permission manually.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">3.1 release notes</a><ul>
<li><a class="reference internal" href="#what-s-new-in-3-1">What&#8217;s new in 3.1</a><ul>
<li><a class="reference internal" href="#switch-from-mptt-to-mp">Switch from MPTT to MP</a><ul>
<li><a class="reference internal" href="#before-upgrading">Before upgrading</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dropped-support-for-django-1-4-and-1-5">Dropped support for Django 1.4 and 1.5</a></li>
</ul>
</li>
<li><a class="reference internal" href="#incompatible-changes">Incompatible changes</a><ul>
<li><a class="reference internal" href="#migrations-moved">Migrations moved</a></li>
<li><a class="reference internal" href="#structure-mode-permission">Structure mode permission</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Release notes &amp; upgrade information</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="3.0.10.html"
                        title="next chapter">3.0.10 release notes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/upgrade/3.1.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="3.0.10.html" title="3.0.10 release notes"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Release notes &amp; upgrade information"
             >previous</a> |</li>
        <li><a href="../index.html">django cms 3.0.9 documentation</a> &raquo;</li>
          <li><a href="index.html" >Release notes &amp; upgrade information</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Patrick Lauber.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>