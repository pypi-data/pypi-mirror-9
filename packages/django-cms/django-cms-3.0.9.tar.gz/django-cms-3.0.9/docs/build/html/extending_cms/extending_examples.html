<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Extending the CMS: Examples &mdash; django cms 3.0.4 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="django cms 3.0.4 documentation" href="../index.html" />
    <link rel="up" title="Extending the CMS" href="index.html" />
    <link rel="next" title="Extending the page &amp; title models" href="extending_page_title.html" />
    <link rel="prev" title="Extending the CMS" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="extending_page_title.html" title="Extending the page &amp; title models"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Extending the CMS"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">django cms 3.0.4 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Extending the CMS</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="extending-the-cms-examples">
<h1>Extending the CMS: Examples<a class="headerlink" href="#extending-the-cms-examples" title="Permalink to this headline">¶</a></h1>
<p>From this point onwards, this tutorial assumes you have done the <a class="reference external" href="http://docs.djangoproject.com/en/1.6/intro/tutorial01/">Django
Tutorial</a> (for Django 1.6) and will show you how to integrate the tutorial&#8217;s
poll app into the django CMS. Hereafter, if a poll app is mentioned, we are
referring to the one you get after completing the <a class="reference external" href="http://docs.djangoproject.com/en/1.6/intro/tutorial01/">Django Tutorial</a>.  Also,
make sure the poll app is in your <a class="reference external" href="http://readthedocs.org/docs/django/en/latest/ref/settings.html#std:setting-INSTALLED_APPS" title="(in Django v1.8)"><tt class="docutils literal"><span class="pre">INSTALLED_APPS</span></tt></a>.</p>
<p>We assume your main <tt class="docutils literal"><span class="pre">urls.py</span></tt> looks something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">r&#39;^polls/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;polls.urls&#39;</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s">&#39;polls&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">r&#39;^&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;cms.urls&#39;</span><span class="p">)),</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="section" id="my-first-plugin">
<h2>My First Plugin<a class="headerlink" href="#my-first-plugin" title="Permalink to this headline">¶</a></h2>
<p>A Plugin is a small bit of content that you can place on your pages.</p>
<div class="section" id="the-model">
<h3>The Model<a class="headerlink" href="#the-model" title="Permalink to this headline">¶</a></h3>
<p>For our polling app we would like to have a small poll plugin which shows a
poll and lets the user vote.</p>
<p>In your poll application&#8217;s <tt class="docutils literal"><span class="pre">models.py</span></tt> add the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="kn">from</span> <span class="nn">cms.models</span> <span class="kn">import</span> <span class="n">CMSPlugin</span>

<span class="c"># existing Poll and Choice models...</span>
<span class="o">....</span>

<span class="k">class</span> <span class="nc">PollPluginModel</span><span class="p">(</span><span class="n">CMSPlugin</span><span class="p">):</span>
    <span class="n">poll</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">&#39;polls.Poll&#39;</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">&#39;plugins&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">poll</span><span class="o">.</span><span class="n">question</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">django CMS plugins must inherit from <tt class="xref py py-class docutils literal"><span class="pre">cms.models.CMSPlugin</span></tt>
(or a subclass thereof) and not
<a class="reference external" href="http://readthedocs.org/docs/django/en/latest/ref/models/instances.html#django.db.models.Model" title="(in Django v1.8)"><tt class="xref py py-class docutils literal"><span class="pre">models.Model</span></tt></a>.</p>
</div>
<p>Run <tt class="docutils literal"><span class="pre">manage.py</span> <span class="pre">syncdb</span></tt> to create the database tables for this model or see
<a class="reference internal" href="../basic_reference/using_south.html"><em>Using South with django CMS</em></a> to see how to do it using <a class="reference external" href="http://south.aeracode.org/">South</a>.</p>
</div>
<div class="section" id="the-plugin-class">
<h3>The Plugin Class<a class="headerlink" href="#the-plugin-class" title="Permalink to this headline">¶</a></h3>
<p>Now create a file <tt class="docutils literal"><span class="pre">cms_plugins.py</span></tt> in the same folder your <tt class="docutils literal"><span class="pre">models.py</span></tt> is
in. After having followed the <a class="reference external" href="http://docs.djangoproject.com/en/1.6/intro/tutorial01/">Django Tutorial</a> and adding this file your polls
app folder should look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>polls/
    templates/
        polls/
            detail.html
            index.html
            results.html
    __init__.py
    admin.py
    cms_plugins.py
    models.py
    tests.py
    urls.py
    views.py
</pre></div>
</div>
<p>The plugin class is responsible for providing the django CMS with the necessary
information to render your Plugin.</p>
<p>For our poll plugin, write the following plugin class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">cms.plugin_base</span> <span class="kn">import</span> <span class="n">CMSPluginBase</span>
<span class="kn">from</span> <span class="nn">cms.plugin_pool</span> <span class="kn">import</span> <span class="n">plugin_pool</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">PollPluginModel</span>

<span class="k">class</span> <span class="nc">PollPlugin</span><span class="p">(</span><span class="n">CMSPluginBase</span><span class="p">):</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">PollPluginModel</span>                 <span class="c"># Model where data about this plugin is saved</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&quot;Poll Plugin&quot;</span><span class="p">)</span>                 <span class="c"># Name of the plugin</span>
    <span class="n">render_template</span> <span class="o">=</span> <span class="s">&quot;polls/plugin.html&quot;</span>   <span class="c"># template to render the plugin with</span>

    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">placeholder</span><span class="p">):</span>
        <span class="n">context</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;instance&#39;</span><span class="p">:</span><span class="n">instance</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">context</span>

<span class="n">plugin_pool</span><span class="o">.</span><span class="n">register_plugin</span><span class="p">(</span><span class="n">PollPlugin</span><span class="p">)</span> <span class="c"># register the plugin</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All plugin classes must inherit from
<a class="reference internal" href="api_references.html#cms.plugin_base.CMSPluginBase" title="cms.plugin_base.CMSPluginBase"><tt class="xref py py-class docutils literal"><span class="pre">cms.plugin_base.CMSPluginBase</span></tt></a> and must register themselves
with the <tt class="xref py py-data docutils literal"><span class="pre">cms.plugin_pool.plugin_pool</span></tt>.</p>
</div>
</div>
<div class="section" id="the-template">
<h3>The Template<a class="headerlink" href="#the-template" title="Permalink to this headline">¶</a></h3>
<p>You probably noticed the
<a class="reference internal" href="api_references.html#cms.plugin_base.CMSPluginBase.render_template" title="cms.plugin_base.CMSPluginBase.render_template"><tt class="xref py py-attr docutils literal"><span class="pre">render_template</span></tt></a>
attribute in the above plugin class. In order for our plugin to work, that
template must exist and is responsible for rendering the plugin. You should
create a new file in your poll-app’s templates folder under <tt class="docutils literal"><span class="pre">polls</span></tt>
called <tt class="docutils literal"><span class="pre">plugin.html</span></tt>.</p>
<p>The template should look something like this:</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">instance.poll.question</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">&quot;</span><span class="cp">{%</span> <span class="k">url</span> <span class="s1">&#39;polls:vote&#39;</span> <span class="nv">instance.poll.id</span> <span class="cp">%}</span><span class="s">&quot;</span> <span class="na">method=</span><span class="s">&quot;post&quot;</span><span class="nt">&gt;</span>
<span class="cp">{%</span> <span class="k">csrf_token</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">choice</span> <span class="k">in</span> <span class="nv">instance.poll.choice_set.all</span> <span class="cp">%}</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">name=</span><span class="s">&quot;choice&quot;</span> <span class="na">id=</span><span class="s">&quot;choice</span><span class="cp">{{</span> <span class="nb">forloop</span><span class="nv">.counter</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">value=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">choice.id</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;choice</span><span class="cp">{{</span> <span class="nb">forloop</span><span class="nv">.counter</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">choice.choice</span> <span class="cp">}}</span><span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;submit&quot;</span> <span class="na">value=</span><span class="s">&quot;Vote&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We don&#8217;t show the errors here, because when submitting the form you&#8217;re
taken off this page to the actual voting page.</p>
</div>
</div>
</div>
<div class="section" id="my-first-app-apphook">
<h2>My First App (apphook)<a class="headerlink" href="#my-first-app-apphook" title="Permalink to this headline">¶</a></h2>
<p>Right now, external apps are statically hooked into the main <tt class="docutils literal"><span class="pre">urls.py</span></tt>. This
is not the preferred approach in the django CMS. Ideally you attach your apps
to CMS pages. This will allow the editors to move your page, and the attached
application to different parts of the page tree, without breaking anything.</p>
<p>For that purpose you write a <tt class="xref py py-class docutils literal"><span class="pre">CMSApp</span></tt>. That is
just a small class telling the CMS how to include that app.</p>
<p>CMS Apps live in a file called <tt class="docutils literal"><span class="pre">cms_app.py</span></tt>, so go ahead and create it to
make your polls app look like this:</p>
<div class="highlight-python"><div class="highlight"><pre>polls/
    templates/
        polls/
            detail.html
            index.html
            plugin.html
            results.html
    __init__.py
    admin.py
    cms_app.py
    cms_plugins.py
    models.py
    tests.py
    urls.py
    views.py
</pre></div>
</div>
<p>In this file, write:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">cms.app_base</span> <span class="kn">import</span> <span class="n">CMSApp</span>
<span class="kn">from</span> <span class="nn">cms.apphook_pool</span> <span class="kn">import</span> <span class="n">apphook_pool</span>

<span class="k">class</span> <span class="nc">PollsApp</span><span class="p">(</span><span class="n">CMSApp</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&quot;Poll App&quot;</span><span class="p">)</span>        <span class="c"># give your app a name, this is required</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;polls.urls&quot;</span><span class="p">]</span>       <span class="c"># link your app to url configuration(s)</span>
    <span class="n">app_name</span> <span class="o">=</span> <span class="s">&quot;polls&quot;</span>          <span class="c"># this is the application namespace</span>

<span class="n">apphook_pool</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">PollsApp</span><span class="p">)</span> <span class="c"># register your app</span>
</pre></div>
</div>
<p>NOTE: If your polls module is not in the root of your project folder, then you
may need to adjust the line above <tt class="docutils literal"><span class="pre">urls</span> <span class="pre">=</span> <span class="pre">[&quot;polls.urls&quot;]</span></tt> accordingly.</p>
<p>Now remove the inclusion of the polls urls in your main <tt class="docutils literal"><span class="pre">urls.py</span></tt> so it looks
like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">django.conf.urls</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="c"># delete the polls entry that was here, no longer needed!</span>
    <span class="p">(</span><span class="s">r&#39;^&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">&#39;cms.urls&#39;</span><span class="p">)),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Restart your server so that the PollsApp will now register.</p>
<p>Now open your Django Admin in your browser and navigate to the CMS app, then
choose Pages. This should display the &#8220;page tree&#8221;. From this page, create a
page called &#8220;Polls&#8221;. Save the page with the button: &#8220;Save and continue
editing&#8221;. Next, press &#8220;Advanced Settings&#8221; and choose &#8220;Poll App&#8221; in the drop-
down menu labeled &#8220;Application&#8221;. Finally, in the field named &#8220;Application
instance name&#8221;, enter &#8220;polls&#8221; and &#8220;Save&#8221;.</p>
<p><img alt="apphooks" src="../_images/cmsapphook.png" /></p>
<p>Unfortunately, for these changes to take effect, you will have to restart your
server (this is automatic when using runserver, but not other servers). So do
that and afterwards if you navigate to that CMS Page, you will see your polls
application.</p>
</div>
<div class="section" id="my-first-menu">
<h2>My First Menu<a class="headerlink" href="#my-first-menu" title="Permalink to this headline">¶</a></h2>
<p>Now you might have noticed that the menu tree stops at the CMS Page you created
in the last step. So let&#8217;s create a menu that shows a node for each poll you
have active.</p>
<p>For this we need a file called <tt class="docutils literal"><span class="pre">menu.py</span></tt>. Create it and ensure your polls app
directory looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>polls/
    templates/
        polls/
            detail.html
            index.html
            plugin.html
            results.html
    __init__.py
    admin.py
    cms_app.py
    cms_plugins.py
    menu.py
    models.py
    tests.py
    urls.py
    views.py
</pre></div>
</div>
<p>In your <tt class="docutils literal"><span class="pre">menu.py</span></tt> write:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">django.core.urlresolvers</span> <span class="kn">import</span> <span class="n">reverse</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">cms.menu_bases</span> <span class="kn">import</span> <span class="n">CMSAttachMenu</span>
<span class="kn">from</span> <span class="nn">menus.base</span> <span class="kn">import</span> <span class="n">Menu</span><span class="p">,</span> <span class="n">NavigationNode</span>
<span class="kn">from</span> <span class="nn">menus.menu_pool</span> <span class="kn">import</span> <span class="n">menu_pool</span>

<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Poll</span>

<span class="k">class</span> <span class="nc">PollsMenu</span><span class="p">(</span><span class="n">CMSAttachMenu</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&quot;Polls Menu&quot;</span><span class="p">)</span> <span class="c"># give the menu a name, this is required.</span>

    <span class="k">def</span> <span class="nf">get_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method is used to build the menu tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">poll</span> <span class="ow">in</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
            <span class="c"># the menu tree consists of NavigationNode instances</span>
            <span class="c"># Each NavigationNode takes a label as its first argument, a URL as</span>
            <span class="c"># its second argument and a (for this tree) unique id as its third</span>
            <span class="c"># argument.</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">NavigationNode</span><span class="p">(</span>
                <span class="n">poll</span><span class="o">.</span><span class="n">question</span><span class="p">,</span>
                <span class="n">reverse</span><span class="p">(</span><span class="s">&#39;polls:detail&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">poll</span><span class="o">.</span><span class="n">pk</span><span class="p">,)),</span>
                <span class="n">poll</span><span class="o">.</span><span class="n">pk</span>
            <span class="p">)</span>
            <span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nodes</span>

<span class="n">menu_pool</span><span class="o">.</span><span class="n">register_menu</span><span class="p">(</span><span class="n">PollsMenu</span><span class="p">)</span> <span class="c"># register the menu.</span>
</pre></div>
</div>
<p>At this point this menu alone doesn&#8217;t do a whole lot. We have to attach it to the
Apphook first.</p>
<p>So open your <tt class="docutils literal"><span class="pre">cms_app.py</span></tt> and write:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="kn">from</span> <span class="nn">cms.app_base</span> <span class="kn">import</span> <span class="n">CMSApp</span>
<span class="kn">from</span> <span class="nn">cms.apphook_pool</span> <span class="kn">import</span> <span class="n">apphook_pool</span>

<span class="kn">from</span> <span class="nn">.menu</span> <span class="kn">import</span> <span class="n">PollsMenu</span>

<span class="k">class</span> <span class="nc">PollsApp</span><span class="p">(</span><span class="n">CMSApp</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&quot;Poll App&quot;</span><span class="p">)</span>        <span class="c"># give your app a name, this is required</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;polls.urls&quot;</span><span class="p">]</span>       <span class="c"># link your app to url configuration(s)</span>
    <span class="n">app_name</span> <span class="o">=</span> <span class="s">&quot;polls&quot;</span>          <span class="c"># this is the application namespace</span>
    <span class="n">menus</span> <span class="o">=</span> <span class="p">[</span><span class="n">PollsMenu</span><span class="p">]</span>         <span class="c"># attach a CMSAttachMenu to this apphook.</span>

<span class="n">apphook_pool</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">PollsApp</span><span class="p">)</span> <span class="c"># register your app</span>
</pre></div>
</div>
<p>Alternatively, you can attach it to any page directly using the &#8220;Attached
Menu&#8221; field in the Advances Settings of the page’s admin. This is useful if
you need to modify the menu independent of a CMS App.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Extending the CMS: Examples</a><ul>
<li><a class="reference internal" href="#my-first-plugin">My First Plugin</a><ul>
<li><a class="reference internal" href="#the-model">The Model</a></li>
<li><a class="reference internal" href="#the-plugin-class">The Plugin Class</a></li>
<li><a class="reference internal" href="#the-template">The Template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#my-first-app-apphook">My First App (apphook)</a></li>
<li><a class="reference internal" href="#my-first-menu">My First Menu</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Extending the CMS</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="extending_page_title.html"
                        title="next chapter">Extending the page &amp; title models</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/extending_cms/extending_examples.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="extending_page_title.html" title="Extending the page &amp; title models"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Extending the CMS"
             >previous</a> |</li>
        <li><a href="../index.html">django cms 3.0.4 documentation</a> &raquo;</li>
          <li><a href="index.html" >Extending the CMS</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009, Patrick Lauber.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>