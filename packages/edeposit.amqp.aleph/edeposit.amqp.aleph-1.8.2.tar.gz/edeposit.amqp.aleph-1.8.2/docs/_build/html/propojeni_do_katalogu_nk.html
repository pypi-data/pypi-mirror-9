<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Propojeni do katalogu NK ČR &mdash; edeposit.amqp.aleph 1.8.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="edeposit.amqp.aleph 1.8.0 documentation" href="index.html" />
    <link rel="prev" title="Result classes" href="api/datastructures/results.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api/datastructures/results.html" title="Result classes"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">edeposit.amqp.aleph 1.8.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="propojeni-do-katalogu-nk-cr">
<h1>Propojeni do katalogu NK ČR<a class="headerlink" href="#propojeni-do-katalogu-nk-cr" title="Permalink to this headline">¶</a></h1>
<div class="section" id="kody-pro-poli-pro-vyhledavani">
<h2>Kódy pro polí pro vyhledávání<a class="headerlink" href="#kody-pro-poli-pro-vyhledavani" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>wrd</strong> - slova ze všech popisných údaju (název, autoři, rok vyd., nakladatel, edice, klíčová slova atd.)</li>
<li><strong>wtl</strong> - slova z názvových údajů (název, název části, edice, originál atd.)</li>
<li><strong>wau</strong> - slova z údajů o autorech</li>
<li><strong>wpb</strong> - slova z údajů o nakladateli</li>
<li><strong>wpp</strong> - slova z údajů o místě vydání</li>
<li><strong>wyr</strong> - rok vydání</li>
<li><strong>wkw</strong> - předmět (klíčová slova)</li>
<li><strong>sbn</strong> - ISBN/ISMN</li>
<li><strong>ssn</strong> - ISSN</li>
<li><strong>icz</strong> - identifikační číslo záznamu</li>
<li><strong>cnb</strong> - číslo ČNB</li>
<li><strong>sg</strong> - signatura</li>
</ul>
<p>Jedná se o kódy formulářů, tak jak by je bylo možné vybrat na webových stránkách.</p>
<div class="section" id="vyhledani-zaznamu-podle-isbn">
<h3>Vyhledání záznamů – podle ISBN<a class="headerlink" href="#vyhledani-zaznamu-podle-isbn" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><a class="reference external" href="http://aleph.nkp.cz/X?op=find&amp;request=sbn=978-80-7367-397-0&amp;base=nkc">http://aleph.nkp.cz/X?op=find&amp;request=sbn=978-80-7367-397-0&amp;base=nkc</a></div></blockquote>
</div>
<div class="section" id="vyhledani-zaznamu">
<h3>Vyhledání záznamů<a class="headerlink" href="#vyhledani-zaznamu" title="Permalink to this headline">¶</a></h3>
<div class="section" id="podle-autora-a-nazvu">
<h4>Podle autora a názvu<a class="headerlink" href="#podle-autora-a-nazvu" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><a class="reference external" href="http://aleph.nkp.cz/X?op=find&amp;request=wau=(Milan+Hejny)+and+wtl=(Dite+matematika)&amp;base=nkc">http://aleph.nkp.cz/X?op=find&amp;request=wau=(Milan+Hejny)+and+wtl=(Dite+matematika)&amp;base=nkc</a></div></blockquote>
<p>(problémy s diakritikou, interpunkci, některými spojkami atd.)</p>
<blockquote>
<div><a class="reference external" href="http://aleph.nkp.cz/X?op=find&amp;request=wau=(Milan+Hejn%C3%BD)+and+wtl=(D%C3%ADt%C4%9B+a+matematika)&amp;base=nkc">http://aleph.nkp.cz/X?op=find&amp;request=wau=(Milan+Hejn%C3%BD)+and+wtl=(D%C3%ADt%C4%9B+a+matematika)&amp;base=nkc</a></div></blockquote>
</div>
<div class="section" id="podle-nakladatele">
<h4>Podle nakladatele<a class="headerlink" href="#podle-nakladatele" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><a class="reference external" href="http://aleph.nkp.cz/X?op=find&amp;request=wau=(Hejny)+and+wtl=(matematika)+and+wpb=Portal&amp;base=nkc">http://aleph.nkp.cz/X?op=find&amp;request=wau=(Hejny)+and+wtl=(matematika)+and+wpb=Portal&amp;base=nkc</a></div></blockquote>
<div class="section" id="nakladatel-grada">
<h5>Nakladatel Grada<a class="headerlink" href="#nakladatel-grada" title="Permalink to this headline">¶</a></h5>
<blockquote>
<div><a class="reference external" href="http://aleph.nkp.cz/X?op=find&amp;request=wpb=Grada&amp;base=nkc">http://aleph.nkp.cz/X?op=find&amp;request=wpb=Grada&amp;base=nkc</a></div></blockquote>
</div>
</div>
<div class="section" id="pripadne-pouze-knihy">
<h4>Případně pouze knihy<a class="headerlink" href="#pripadne-pouze-knihy" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><a class="reference external" href="http://aleph.nkp.cz/X?op=find&amp;request=wau=(Hejny)+and+wtl=(matematika)+and+wtp=bk&amp;base=nkc">http://aleph.nkp.cz/X?op=find&amp;request=wau=(Hejny)+and+wtl=(matematika)+and+wtp=bk&amp;base=nkc</a></div></blockquote>
<p>a další možné kombinace…</p>
</div>
</div>
<div class="section" id="odpoved">
<h3>Odpověď<a class="headerlink" href="#odpoved" title="Permalink to this headline">¶</a></h3>
<p>Server vrátí odpověď, kde je uveden počet nalezených záznamů a kód množiny výsledků. Následně je možné stáhnout jeden nebo více vyhledaných záznamů v XML (formát <a class="reference external" href="http://www.openarchives.org/OAI/2.0/guidelines-oai_marc.htm">OAI-XML</a>)</p>
<div class="highlight-python"><div class="highlight"><pre>http://aleph.nkp.cz/X?op=present&amp;set_number=&lt;kód množiny výsledků&gt;&amp;set_entry=1
https://aleph.nkp.cz/X?op=present&amp;set_number=39EUFDPANCBL5134N9UPNMPHFDEXPR2LR32GMP99R85TACTN5U
</pre></div>
</div>
<p>resp.:</p>
<div class="highlight-python"><div class="highlight"><pre>http://aleph.nkp.cz/X?op=present&amp;set_number=&lt;kód množiny výsledků&gt;&amp;set_entry=5,6,11
</pre></div>
</div>
<p>resp.:</p>
<div class="highlight-python"><div class="highlight"><pre>http://aleph.nkp.cz/X?op=present&amp;set_number=&lt;kód množiny výsledků&gt;&amp;set_entry=1-25
http://aleph.nkp.cz/X?op=present&amp;set_number=077285&amp;set_entry=1-25
</pre></div>
</div>
</div>
</div>
<div class="section" id="prubeh-cele-session">
<h2>Průběh celé session<a class="headerlink" href="#prubeh-cele-session" title="Permalink to this headline">¶</a></h2>
<p>Dotaz na knihy vydavatele:</p>
<blockquote>
<div><a class="reference external" href="http://aleph.nkp.cz/X?op=find&amp;request=wpb=Grada&amp;base=nkc">http://aleph.nkp.cz/X?op=find&amp;request=wpb=Grada&amp;base=nkc</a></div></blockquote>
<p>Což vrátí:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;find&gt;
&lt;set_number&gt;016513&lt;/set_number&gt;
&lt;no_records&gt;000004998&lt;/no_records&gt;
&lt;no_entries&gt;000002500&lt;/no_entries&gt;
&lt;session-id&gt;9A5HGMD6SMHBBX6NFDGTS6JD1GNK9JUFGQENM28Y6EDTL4RABD&lt;/session-id&gt;
&lt;/find&gt;
</pre></div>
</div>
<p>Nyní získáme kódy dokumentů (přes url <a class="reference external" href="http://aleph.nkp.cz/X?op=present&amp;set_number=016513&amp;set_entry=1-100">http://aleph.nkp.cz/X?op=present&amp;set_number=016513&amp;set_entry=1-100</a> anebo ve formatu marcxml <a class="reference external" href="http://aleph.nkp.cz/X?op=ill_get_set&amp;set_number=016513&amp;start_point=1&amp;no_docs=500">http://aleph.nkp.cz/X?op=ill_get_set&amp;set_number=016513&amp;start_point=1&amp;no_docs=500</a>)</p>
<p>Použiji url <a class="reference external" href="http://aleph.nkp.cz/X?op=ill_get_set&amp;set_number=016513&amp;start_point=1&amp;no_docs=2">http://aleph.nkp.cz/X?op=ill_get_set&amp;set_number=016513&amp;start_point=1&amp;no_docs=2</a></p>
<div class="highlight-python"><div class="highlight"><pre>&lt;ill-get-set&gt;
&lt;doc-number&gt;002475050&lt;/doc-number&gt;
&lt;doc-number&gt;002468257&lt;/doc-number&gt;
&lt;no-docs&gt;000000002&lt;/no-docs&gt;
&lt;set-library&gt;NKC01&lt;/set-library&gt;
&lt;session-id&gt;F3A9P757D16J84CULSGBTYSMDMYUXDDGDD8R6EEJIJIK9YDV4H&lt;/session-id&gt;
&lt;/ill-get-set&gt;
</pre></div>
</div>
<p>Povšimněte si položek <code class="docutils literal"><span class="pre">&lt;doc-number&gt;</span></code>. Čísla z nich je možné nyní využít pro stažení samotných záznamů.</p>
<div class="section" id="stazeni-zaznamu-format-marcxml">
<h3>Stažení záznamů (formát MARCXML)<a class="headerlink" href="#stazeni-zaznamu-format-marcxml" title="Permalink to this headline">¶</a></h3>
<p>Funkce <code class="docutils literal"><span class="pre">ill_get_set</span></code> a <code class="docutils literal"><span class="pre">ill_get_doc</span></code>. Stažení záznamů (po jednom) – např.:</p>
<ul class="simple">
<li><a class="reference external" href="http://aleph.nkp.cz/X?op=ill_get_doc&amp;doc_number=001810391&amp;library=nkc01">http://aleph.nkp.cz/X?op=ill_get_doc&amp;doc_number=001810391&amp;library=nkc01</a></li>
</ul>
</div>
<div class="section" id="stazeni-zaznamu-format-mar-oai">
<h3>Stažení záznamů (formát MAR OAI)<a class="headerlink" href="#stazeni-zaznamu-format-mar-oai" title="Permalink to this headline">¶</a></h3>
<p>Stažení záznamu podle systém. čísla (funkce <code class="docutils literal"><span class="pre">find_doc</span></code>):</p>
<blockquote>
<div><a class="reference external" href="http://aleph.nkp.cz/X?op=find_doc&amp;doc_num=0018103916&amp;base=nkc">http://aleph.nkp.cz/X?op=find_doc&amp;doc_num=0018103916&amp;base=nkc</a></div></blockquote>
<p>nebo:</p>
<blockquote>
<div><a class="reference external" href="http://aleph.nkp.cz/X?op=find_doc&amp;doc_number=001810391&amp;base=NAK">http://aleph.nkp.cz/X?op=find_doc&amp;doc_number=001810391&amp;base=NAK</a></div></blockquote>
</div>
<div class="section" id="funkce-publish-avail">
<h3>Funkce publish_avail<a class="headerlink" href="#funkce-publish-avail" title="Permalink to this headline">¶</a></h3>
<p>Zjištění aktuální dostupnosti jednotek k danému záznamu (může být zadáno až 10 systém. čísel oddělených čárkami)</p>
<blockquote>
<div><p><a class="reference external" href="http://aleph.nkp.cz/X?op=publish_avail&amp;doc_num=002107662&amp;library=nkc01">http://aleph.nkp.cz/X?op=publish_avail&amp;doc_num=002107662&amp;library=nkc01</a></p>
<p>resp.</p>
<p><a class="reference external" href="http://aleph.nkp.cz/X?op=publish_avail&amp;doc_num=002107662,002124258,002105616&amp;library=nkc01">http://aleph.nkp.cz/X?op=publish_avail&amp;doc_num=002107662,002124258,002105616&amp;library=nkc01</a></p>
<p>odpověď v češtině</p>
<p><a class="reference external" href="http://aleph.nkp.cz/X?op=publish_avail&amp;doc_num=002107662,002124258,002105616&amp;library=nkc01&amp;con_lng=cze">http://aleph.nkp.cz/X?op=publish_avail&amp;doc_num=002107662,002124258,002105616&amp;library=nkc01&amp;con_lng=cze</a></p>
</div></blockquote>
</div>
<div class="section" id="nastaveni-v-tab-expand">
<h3>Nastavení v tab_expand<a class="headerlink" href="#nastaveni-v-tab-expand" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>X-AVAIL    expand_doc_bib_avail           AVA=DG,ZL,ND,RD
X-AVAIL    expand_doc_del_fields          100##,245##,250##,260##,300##,AVA##
</pre></div>
</div>
<p>Standardně, je-li vyplněn status zprac. Jednotky, je jednotka nedostupná.  To je možné změnit přidáním parametru AVA=…, kde se uvedou všechny statusy, které dostupnost neblokují.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/nkp_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Propojeni do katalogu NK ČR</a><ul>
<li><a class="reference internal" href="#kody-pro-poli-pro-vyhledavani">Kódy pro polí pro vyhledávání</a><ul>
<li><a class="reference internal" href="#vyhledani-zaznamu-podle-isbn">Vyhledání záznamů – podle ISBN</a></li>
<li><a class="reference internal" href="#vyhledani-zaznamu">Vyhledání záznamů</a><ul>
<li><a class="reference internal" href="#podle-autora-a-nazvu">Podle autora a názvu</a></li>
<li><a class="reference internal" href="#podle-nakladatele">Podle nakladatele</a><ul>
<li><a class="reference internal" href="#nakladatel-grada">Nakladatel Grada</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pripadne-pouze-knihy">Případně pouze knihy</a></li>
</ul>
</li>
<li><a class="reference internal" href="#odpoved">Odpověď</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prubeh-cele-session">Průběh celé session</a><ul>
<li><a class="reference internal" href="#stazeni-zaznamu-format-marcxml">Stažení záznamů (formát MARCXML)</a></li>
<li><a class="reference internal" href="#stazeni-zaznamu-format-mar-oai">Stažení záznamů (formát MAR OAI)</a></li>
<li><a class="reference internal" href="#funkce-publish-avail">Funkce publish_avail</a></li>
<li><a class="reference internal" href="#nastaveni-v-tab-expand">Nastavení v tab_expand</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="api/datastructures/results.html"
                        title="previous chapter">Result classes</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/propojeni_do_katalogu_nk.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="api/datastructures/results.html" title="Result classes"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">edeposit.amqp.aleph 1.8.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015 E-deposit team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>