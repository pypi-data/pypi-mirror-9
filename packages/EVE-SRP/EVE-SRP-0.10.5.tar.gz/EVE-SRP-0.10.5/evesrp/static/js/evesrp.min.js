+function(t){"use strict";function e(e){e&&3===e.which||(t(r).remove(),t(a).each(function(){var i=n(t(this)),r={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",r))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new s(this)),"string"==typeof e&&i[e].call(n)})}var r=".dropdown-backdrop",a='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.2.0",s.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var a=n(r),s=a.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var o={relatedTarget:this};if(a.trigger(i=t.Event("show.bs.dropdown",o)),i.isDefaultPrevented())return;r.trigger("focus"),a.toggleClass("open").trigger("shown.bs.dropdown",o)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),s=r.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&r.find(a).trigger("focus"),i.trigger("click");var o=" li:not(.divider):visible a",l=r.find('[role="menu"]'+o+', [role="listbox"]'+o);if(l.length){var u=l.index(l.filter(":focus"));38==e.keyCode&&u>0&&u--,40==e.keyCode&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var o=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,s.prototype.toggle).on("keydown.bs.dropdown.data-api",a+', [role="menu"], [role="listbox"]',s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof e&&r[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.2.0",n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a")[0],a=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(a),!a.isDefaultPrevented()){var s=t(i);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},n.prototype.activate=function(e,n,i){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var a=n.find("> .active"),s=i&&t.support.transition&&a.hasClass("fade");s?a.one("bsTransitionEnd",r).emulateTransitionEnd(150):r(),a.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(n){n.preventDefault(),e.call(t(this),"show")})}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.collapse"),a=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!r&&a.toggle&&"show"==e&&(e=!e),r||i.data("bs.collapse",r=new n(this,a)),"string"==typeof e&&r[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};n.VERSION="3.2.0",n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n=t.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var r=i.data("bs.collapse");if(r&&r.transitioning)return;e.call(i,"hide"),r||i.data("bs.collapse",null)}var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var o=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(350)[a](this.$element[0][o])}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var i,r=t(this),a=r.attr("data-target")||n.preventDefault()||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),s=t(a),o=s.data("bs.collapse"),l=o?"toggle":r.data(),u=r.attr("data-parent"),c=u&&t(u);o&&o.transitioning||(c&&c.find('[data-toggle="collapse"][data-parent="'+u+'"]').not(r).addClass("collapsed"),r[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(s,l)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),a="object"==typeof e&&e;(r||"destroy"!=e)&&(r||i.data("bs.tooltip",r=new n(this,a)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.2.0",n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),a=r.length;a--;){var s=r[a];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var o="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var i=this,r=this.tip(),a=this.getUID(this.type);this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,o=/\s?auto?\s?/i,l=o.test(s);l&&(s=s.replace(o,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),c=r[0].offsetWidth,p=r[0].offsetHeight;if(l){var d=s,h=this.$element.parent(),f=this.getPosition(h);s="bottom"==s&&u.top+u.height+p-f.scroll>f.height?"top":"top"==s&&u.top-f.scroll-p<0?"bottom":"right"==s&&u.right+c>f.width?"left":"left"==s&&u.left-c<f.left?"right":s,r.removeClass(d).addClass(s)}var m=this.getCalculatedOffset(s,u,c,p);this.applyPlacement(m,s);var g=function(){i.$element.trigger("shown.bs."+i.type),i.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,a=i[0].offsetHeight,s=parseInt(i.css("margin-top"),10),o=parseInt(i.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(o)&&(o=0),e.top=e.top+s,e.left=e.left+o,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=a&&(e.top=e.top+a-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var p=c.left?2*c.left-r+l:2*c.top-a+u,d=c.left?"left":"top",h=c.left?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(p,i[0][h],d)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(){function e(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName;return t.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():null,{scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:i?t(window).width():e.outerWidth(),height:i?t(window).height():e.outerHeight()},i?{top:0,left:0}:e.offset())},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var a=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var o=e.top-a-s.scroll,l=e.top+a-s.scroll+i;o<s.top?r.top=s.top-o:l>s.top+s.height&&(r.top=s.top+s.height-l)}else{var u=e.left-a,c=e.left+a+n;u<s.left?r.left=s.left-u:c>s.width&&(r.left=s.left+s.width-c)}return r},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.popover"),a="object"==typeof e&&e;(r||"destroy"!=e)&&(r||i.data("bs.popover",r=new n(this,a)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.2.0",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof e&&r[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.2.0",i.prototype.close=function(e){function n(){a.detach().trigger("closed.bs.alert").remove()}var i=t(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var a=t(r);e&&e.preventDefault(),a.length||(a=i.hasClass("alert")?i:i.parent()),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(150):n())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(t){"use strict";function e(e,i){return this.each(function(){var r=t(this),a=r.data("bs.modal"),s=t.extend({},n.DEFAULTS,r.data(),"object"==typeof e&&e);a||r.data("bs.modal",a=new n(this,s)),"string"==typeof e?a[e](i):s.show&&a.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.2.0",n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var n=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});i?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(300):n.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var n=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(150):a()}else e&&e()},n.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),r=i.attr("href"),a=t(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=a.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},a.data(),i.data());i.is("a")&&n.preventDefault(),a.one("show.bs.modal",function(t){t.isDefaultPrevented()||a.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(a,s,this)})}(jQuery),this.Handlebars=function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return l[t]||"&amp;"}function n(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function i(t){return t instanceof o?t.toString():t||0===t?(t=""+t,c.test(t)?t.replace(u,e):t):""}function r(t){return t||0===t?h(t)&&0===t.length?!0:!1:!0}function a(t,e){return(t?t+".":"")+e}var s={},o=t,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;s.extend=n;var p=Object.prototype.toString;s.toString=p;var d=function(t){return"function"==typeof t};d(/x/)&&(d=function(t){return"function"==typeof t&&"[object Function]"===p.call(t)});var d;s.isFunction=d;var h=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===p.call(t):!1};return s.isArray=h,s.escapeExpression=i,s.isEmpty=r,s.appendContextPath=a,s}(t),n=function(){"use strict";function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var r=Error.prototype.constructor.call(this,t),a=0;a<n.length;a++)this[n[a]]=r[n[a]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse||function(){},r=n.fn;if(d(e)&&(e=e.call(this)),e===!0)return r(this);if(e===!1||null==e)return i(this);if(p(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var a=g(n.data);a.contextPath=s.appendContextPath(n.data.contextPath,n.name),n={data:a}}return r(e,n)}),t.registerHelper("each",function(t,e){e||(e=t,t=this);var n,i,r=e.fn,a=e.inverse,o=0,l="";if(e.data&&e.ids&&(i=s.appendContextPath(e.data.contextPath,e.ids[0])+"."),d(t)&&(t=t.call(this)),e.data&&(n=g(e.data)),t&&"object"==typeof t)if(p(t))for(var u=t.length;u>o;o++)n&&(n.index=o,n.first=0===o,n.last=o===t.length-1,i&&(n.contextPath=i+o)),l+=r(t[o],{data:n});else for(var c in t)t.hasOwnProperty(c)&&(n&&(n.key=c,n.index=o,n.first=0===o,i&&(n.contextPath=i+c)),l+=r(t[c],{data:n}),o++);return 0===o&&(l=a(this)),l}),t.registerHelper("if",function(t,e){return d(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||s.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){d(t)&&(t=t.call(this));var n=e.fn;if(!s.isEmpty(t)){if(e.data&&e.ids){var i=g(e.data);i.contextPath=s.appendContextPath(e.data.contextPath,e.ids[0]),e={data:i}}return n(t,e)}}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}function r(t,e){m.log(t,e)}var a={},s=t,o=e,l="2.0.0-alpha.4";a.VERSION=l;var u=5;a.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:">= 2.0.0"};a.REVISION_CHANGES=c;var p=s.isArray,d=s.isFunction,h=s.toString,f="[object Object]";a.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:m,log:r,registerHelper:function(t,e,n){if(h.call(t)===f){if(n||e)throw new o("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else n&&(e.not=n),this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){h.call(t)===f?s.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(m.level<=t){var n=m.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};a.logger=m,a.log=r;var g=function(t){var e=s.extend({},t);return e._parent=t,e};return a.createFrame=g,a}(e,n),r=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=h;if(e!==n){if(n>e){var i=f[n],r=f[e];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){if(!e)throw new d("No environment passed to template");e.VM.checkRevision(t.compiler);var n=function(t,n,i,r,a,s,o){r&&(i=p.extend({},i,r));var l=e.VM.invokePartial.call(this,t,n,i,a,s,o);if(null!=l)return l;if(e.compile){var u={helpers:a,partials:s,data:o};return s[n]=e.compile(t,{data:void 0!==o},e),s[n](i,u)}throw new d("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:p.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e){var n=this.programs[t],i=this.fn(t);return e?n=s(this,t,i,e):n||(n=this.programs[t]=s(this,t,i)),n},programWithDepth:e.VM.programWithDepth,data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=p.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler},r=function(e,n){n=n||{};var a=n.data;return r._setup(n),!n.partial&&t.useData&&(a=u(e,a)),t.main.call(i,e,i.helpers,i.partials,a)};return r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)))},r._child=function(t){return i.programWithDepth(t)},r}function a(t,e){var n=Array.prototype.slice.call(arguments,2),i=this,r=i.fn(t),a=function(t,a){return a=a||{},r.apply(i,[t,i.helpers,i.partials,a.data||e].concat(n))};return a.program=t,a.depth=n.length,a}function s(t,e,n,i){var r=function(e,r){return r=r||{},n.call(t,e,t.helpers,t.partials,r.data||i)};return r.program=e,r.depth=0,r}function o(t,e,n,i,r,a){var s={partial:!0,helpers:i,partials:r,data:a};if(void 0===t)throw new d("The partial "+e+" could not be found");return t instanceof Function?t(n,s):void 0}function l(){return""}function u(t,e){return e&&"root"in e||(e=e?m(e):{},e.root=t),e}var c={},p=t,d=e,h=n.COMPILER_REVISION,f=n.REVISION_CHANGES,m=n.createFrame;return c.checkRevision=i,c.template=r,c.programWithDepth=a,c.program=s,c.invokePartial=o,c.noop=l,c}(e,n,i),a=function(t,e,n,i,r){"use strict";var a,s=t,o=e,l=n,u=i,c=r,p=function(){var t=new s.HandlebarsEnvironment;return u.extend(t,s),t.SafeString=o,t.Exception=l,t.Utils=u,t.VM=c,t.template=function(e){return c.template(e,t)},t},d=p();return d.create=p,a=d}(i,t,n,e,r);return a}(),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,a=Function.prototype,s=i.push,o=i.slice,l=i.concat,u=r.toString,c=r.hasOwnProperty,p=i.forEach,d=i.map,h=i.reduce,f=i.reduceRight,m=i.filter,g=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,S=Object.keys,$=a.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.6.0";var x=k.each=k.forEach=function(t,e,i){if(null==t)return t;if(p&&t.forEach===p)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,a=t.length;a>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s=k.keys(t),r=0,a=s.length;a>r;r++)if(e.call(i,t[s[r]],s[r],t)===n)return;return t};k.map=k.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(x(t,function(t,r,a){i.push(e.call(n,t,r,a))}),i)};var E="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),h&&t.reduce===h)return i&&(e=k.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(x(t,function(t,a,s){r?n=e.call(i,n,t,a,s):(n=t,r=!0)}),!r)throw new TypeError(E);return n},k.reduceRight=k.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return i&&(e=k.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var a=t.length;if(a!==+a){var s=k.keys(t);a=s.length}if(x(t,function(o,l,u){l=s?s[--a]:--a,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError(E);return n},k.find=k.detect=function(t,e,n){var i;return _(t,function(t,r,a){return e.call(n,t,r,a)?(i=t,!0):void 0}),i},k.filter=k.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):(x(t,function(t,r,a){e.call(n,t,r,a)&&i.push(t)}),i)},k.reject=function(t,e,n){return k.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},k.every=k.all=function(t,e,i){e||(e=k.identity);var r=!0;return null==t?r:g&&t.every===g?t.every(e,i):(x(t,function(t,a,s){return(r=r&&e.call(i,t,a,s))?void 0:n}),!!r)};var _=k.some=k.any=function(t,e,i){e||(e=k.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,i):(x(t,function(t,a,s){return r||(r=e.call(i,t,a,s))?n:void 0}),!!r)};k.contains=k.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):_(t,function(t){return t===e})},k.invoke=function(t,e){var n=o.call(arguments,2),i=k.isFunction(e);return k.map(t,function(t){return(i?e:t[e]).apply(t,n)})},k.pluck=function(t,e){return k.map(t,k.property(e))},k.where=function(t,e){return k.filter(t,k.matches(e))},k.findWhere=function(t,e){return k.find(t,k.matches(e))},k.max=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var i=-1/0,r=-1/0;return x(t,function(t,a,s){var o=e?e.call(n,t,a,s):t;o>r&&(i=t,r=o)}),i},k.min=function(t,e,n){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var i=1/0,r=1/0;return x(t,function(t,a,s){var o=e?e.call(n,t,a,s):t;
r>o&&(i=t,r=o)}),i},k.shuffle=function(t){var e,n=0,i=[];return x(t,function(t){e=k.random(n++),i[n-1]=i[e],i[e]=t}),i},k.sample=function(t,e,n){return null==e||n?(t.length!==+t.length&&(t=k.values(t)),t[k.random(t.length-1)]):k.shuffle(t).slice(0,Math.max(0,e))};var C=function(t){return null==t?k.identity:k.isFunction(t)?t:k.property(t)};k.sortBy=function(t,e,n){return e=C(e),k.pluck(k.map(t,function(t,i,r){return{value:t,index:i,criteria:e.call(n,t,i,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,n,i){var r={};return n=C(n),x(e,function(a,s){var o=n.call(i,a,s,e);t(r,o,a)}),r}};k.groupBy=T(function(t,e,n){k.has(t,e)?t[e].push(n):t[e]=[n]}),k.indexBy=T(function(t,e,n){t[e]=n}),k.countBy=T(function(t,e){k.has(t,e)?t[e]++:t[e]=1}),k.sortedIndex=function(t,e,n,i){n=C(n);for(var r=n.call(i,e),a=0,s=t.length;s>a;){var o=a+s>>>1;n.call(i,t[o])<r?a=o+1:s=o}return a},k.toArray=function(t){return t?k.isArray(t)?o.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:0>e?[]:o.call(t,0,e)},k.initial=function(t,e,n){return o.call(t,0,t.length-(null==e||n?1:e))},k.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:o.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,n){return o.call(t,null==e||n?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var I=function(t,e,n){return e&&k.every(t,k.isArray)?l.apply(n,t):(x(t,function(t){k.isArray(t)||k.isArguments(t)?e?s.apply(n,t):I(t,e,n):n.push(t)}),n)};k.flatten=function(t,e){return I(t,e,[])},k.without=function(t){return k.difference(t,o.call(arguments,1))},k.partition=function(t,e){var n=[],i=[];return x(t,function(t){(e(t)?n:i).push(t)}),[n,i]},k.uniq=k.unique=function(t,e,n,i){k.isFunction(e)&&(i=n,n=e,e=!1);var r=n?k.map(t,n,i):t,a=[],s=[];return x(r,function(n,i){(e?i&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),a.push(t[i]))}),a},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(t){var e=o.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.contains(e,t)})})},k.difference=function(t){var e=l.apply(i,o.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=k.max(k.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=k.pluck(arguments,""+n);return e},k.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},k.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(y&&t.indexOf===y)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},k.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},k.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,a=new Array(i);i>r;)a[r++]=t,t+=n;return a};var P=function(){};k.bind=function(t,e){var n,i;if($&&t.bind===$)return $.apply(t,o.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return n=o.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(o.call(arguments)));P.prototype=t.prototype;var r=new P;P.prototype=null;var a=t.apply(r,n.concat(o.call(arguments)));return Object(a)===a?a:r}},k.partial=function(t){var e=o.call(arguments,1);return function(){for(var n=0,i=e.slice(),r=0,a=i.length;a>r;r++)i[r]===k&&(i[r]=arguments[n++]);for(;n<arguments.length;)i.push(arguments[n++]);return t.apply(this,i)}},k.bindAll=function(t){var e=o.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return x(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var n={};return e||(e=k.identity),function(){var i=e.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},k.delay=function(t,e){var n=o.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(o.call(arguments,1)))},k.throttle=function(t,e,n){var i,r,a,s=null,o=0;n||(n={});var l=function(){o=n.leading===!1?0:k.now(),s=null,a=t.apply(i,r),i=r=null};return function(){var u=k.now();o||n.leading!==!1||(o=u);var c=e-(u-o);return i=this,r=arguments,0>=c?(clearTimeout(s),s=null,o=u,a=t.apply(i,r),i=r=null):s||n.trailing===!1||(s=setTimeout(l,c)),a}},k.debounce=function(t,e,n){var i,r,a,s,o,l=function(){var u=k.now()-s;e>u?i=setTimeout(l,e-u):(i=null,n||(o=t.apply(a,r),a=r=null))};return function(){a=this,r=arguments,s=k.now();var u=n&&!i;return i||(i=setTimeout(l,e)),u&&(o=t.apply(a,r),a=r=null),o}},k.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},k.wrap=function(t,e){return k.partial(e,t)},k.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},k.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=function(t){if(!k.isObject(t))return[];if(S)return S(t);var e=[];for(var n in t)k.has(t,n)&&e.push(n);return e},k.values=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},k.pairs=function(t){for(var e=k.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},k.invert=function(t){for(var e={},n=k.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},k.functions=k.methods=function(t){var e=[];for(var n in t)k.isFunction(t[n])&&e.push(n);return e.sort()},k.extend=function(t){return x(o.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},k.pick=function(t){var e={},n=l.apply(i,o.call(arguments,1));return x(n,function(n){n in t&&(e[n]=t[n])}),e},k.omit=function(t){var e={},n=l.apply(i,o.call(arguments,1));for(var r in t)k.contains(n,r)||(e[r]=t[r]);return e},k.defaults=function(t){return x(o.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var R=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var r=u.call(t);if(r!=u.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return i[a]==e;var s=t.constructor,o=e.constructor;if(s!==o&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1;n.push(t),i.push(e);var l=0,c=!0;if("[object Array]"==r){if(l=t.length,c=l==e.length)for(;l--&&(c=R(t[l],e[l],n,i)););}else{for(var p in t)if(k.has(t,p)&&(l++,!(c=k.has(e,p)&&R(t[p],e[p],n,i))))break;if(c){for(p in e)if(k.has(e,p)&&!l--)break;c=!l}}return n.pop(),i.pop(),c};k.isEqual=function(t,e){return R(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=w||function(t){return"[object Array]"==u.call(t)},k.isObject=function(t){return t===Object(t)},x(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return u.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==u.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return c.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.constant=function(t){return function(){return t}},k.property=function(t){return function(e){return e[t]}},k.matches=function(t){return function(e){if(e===t)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0}},k.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},k.now=Date.now||function(){return(new Date).getTime()};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};A.unescape=k.invert(A.escape);var H={escape:new RegExp("["+k.keys(A.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(A.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(H[t],function(e){return A[t][e]})}}),k.result=function(t,e){if(null==t)return void 0;var n=t[e];return k.isFunction(n)?n.call(t):n},k.mixin=function(t){x(k.functions(t),function(e){var n=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),L.call(this,n.apply(k,t))}})};var D=0;k.uniqueId=function(t){var e=++D+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,n){var i;n=k.defaults({},n,k.templateSettings);var r=new RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),a=0,s="__p+='";t.replace(r,function(e,n,i,r,o){return s+=t.slice(a,o).replace(q,function(t){return"\\"+j[t]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(s+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),a=o+e.length,e}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{i=new Function(n.variable||"obj","_",s)}catch(o){throw o.source=s,o}if(e)return i(e,k);var l=function(t){return i.call(this,t,k)};return l.source="function("+(n.variable||"obj")+"){\n"+s+"}",l},k.chain=function(t){return k(t).chain()};var L=function(t){return this._chain?k(t).chain():t};k.mixin(k),x(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];k.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],L.call(this,n)}}),x(["concat","join","slice"],function(t){var e=i[t];k.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,a,s,o=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;a>n;n+=1)s[n]=str(n,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+o+"]":"["+s.join(",")+"]",gap=o,r}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;a>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+o+"}":"{"+s.join(",")+"}",gap=o,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,!e||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,e){"use strict";var n=t.History=t.History||{},i=t.jQuery;if("undefined"!=typeof n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(t,e,n){i(t).bind(e,n)},trigger:function(t,e,n){i(t).trigger(e,n)},extractEventData:function(t,n,i){var r=n&&n.originalEvent&&n.originalEvent[t]||i&&i[t]||e;return r},onDomLoad:function(t){i(t)}},"undefined"!=typeof n.init&&n.init()}(window),function(t){"use strict";var e=t.document,n=t.setTimeout||n,i=t.clearTimeout||i,r=t.setInterval||r,a=t.History=t.History||{};if("undefined"!=typeof a.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");a.initHtml4=function(){return"undefined"!=typeof a.initHtml4.initialized?!1:(a.initHtml4.initialized=!0,a.enabled=!0,a.savedHashes=[],a.isLastHash=function(t){var e,n=a.getHashByIndex();return e=t===n},a.isHashEqual=function(t,e){return t=encodeURIComponent(t).replace(/%25/g,"%"),e=encodeURIComponent(e).replace(/%25/g,"%"),t===e},a.saveHash=function(t){return a.isLastHash(t)?!1:(a.savedHashes.push(t),!0)},a.getHashByIndex=function(t){var e=null;return e="undefined"==typeof t?a.savedHashes[a.savedHashes.length-1]:0>t?a.savedHashes[a.savedHashes.length+t]:a.savedHashes[t]},a.discardedHashes={},a.discardedStates={},a.discardState=function(t,e,n){var i,r=a.getHashByState(t);return i={discardedState:t,backState:n,forwardState:e},a.discardedStates[r]=i,!0},a.discardHash=function(t,e,n){var i={discardedHash:t,backState:n,forwardState:e};return a.discardedHashes[t]=i,!0},a.discardedState=function(t){var e,n=a.getHashByState(t);return e=a.discardedStates[n]||!1},a.discardedHash=function(t){var e=a.discardedHashes[t]||!1;return e},a.recycleState=function(t){var e=a.getHashByState(t);return a.discardedState(t)&&delete a.discardedStates[e],!0},a.emulated.hashChange&&(a.hashChangeInit=function(){a.checkerFunction=null;var n,i,s,o,l="",u=Boolean(a.getHash());return a.isInternetExplorer()?(n="historyjs-iframe",i=e.createElement("iframe"),i.setAttribute("id",n),i.setAttribute("src","#"),i.style.display="none",e.body.appendChild(i),i.contentWindow.document.open(),i.contentWindow.document.close(),s="",o=!1,a.checkerFunction=function(){if(o)return!1;o=!0;var e=a.getHash(),n=a.getHash(i.contentWindow.document);return e!==l?(l=e,n!==e&&(s=n=e,i.contentWindow.document.open(),i.contentWindow.document.close(),i.contentWindow.document.location.hash=a.escapeHash(e)),a.Adapter.trigger(t,"hashchange")):n!==s&&(s=n,u&&""===n?a.back():a.setHash(n,!1)),o=!1,!0}):a.checkerFunction=function(){var e=a.getHash()||"";return e!==l&&(l=e,a.Adapter.trigger(t,"hashchange")),!0},a.intervalList.push(r(a.checkerFunction,a.options.hashChangeInterval)),!0},a.Adapter.onDomLoad(a.hashChangeInit)),a.emulated.pushState&&(a.onHashChange=function(e){var n,i=e&&e.newURL||a.getLocationHref(),r=a.getHashByUrl(i),s=null,o=null;return a.isLastHash(r)?(a.busy(!1),!1):(a.doubleCheckComplete(),a.saveHash(r),r&&a.isTraditionalAnchor(r)?(a.Adapter.trigger(t,"anchorchange"),a.busy(!1),!1):(s=a.extractState(a.getFullUrl(r||a.getLocationHref()),!0),a.isLastSavedState(s)?(a.busy(!1),!1):(o=a.getHashByState(s),n=a.discardedState(s),n?(a.getHashByIndex(-2)===a.getHashByState(n.forwardState)?a.back(!1):a.forward(!1),!1):(a.pushState(s.data,s.title,encodeURI(s.url),!1),!0))))},a.Adapter.bind(t,"hashchange",a.onHashChange),a.pushState=function(e,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),a.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(r!==!1&&a.busy())return a.pushQueue({scope:a,callback:a.pushState,args:arguments,queue:r}),!1;a.busy(!0);var s=a.createStateObject(e,n,i),o=a.getHashByState(s),l=a.getState(!1),u=a.getHashByState(l),c=a.getHash(),p=a.expectedStateId==s.id;return a.storeState(s),a.expectedStateId=s.id,a.recycleState(s),a.setTitle(s),o===u?(a.busy(!1),!1):(a.saveState(s),p||a.Adapter.trigger(t,"statechange"),!a.isHashEqual(o,c)&&!a.isHashEqual(o,a.getShortUrl(a.getLocationHref()))&&a.setHash(o,!1),a.busy(!1),!0)},a.replaceState=function(e,n,i,r){if(i=encodeURI(i).replace(/%25/g,"%"),a.getHashByUrl(i))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(r!==!1&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:r}),!1;a.busy(!0);var s=a.createStateObject(e,n,i),o=a.getHashByState(s),l=a.getState(!1),u=a.getHashByState(l),c=a.getStateByIndex(-2);return a.discardState(l,s,c),o===u?(a.storeState(s),a.expectedStateId=s.id,a.recycleState(s),a.setTitle(s),a.saveState(s),a.Adapter.trigger(t,"statechange"),a.busy(!1)):a.pushState(s.data,s.title,s.url,!1),!0}),a.emulated.pushState&&a.getHash()&&!a.emulated.hashChange&&a.Adapter.onDomLoad(function(){a.Adapter.trigger(t,"hashchange")}),void 0)},"undefined"!=typeof a.init&&a.init()}(window),function(t,e){"use strict";var n=t.console||e,i=t.document,r=t.navigator,a=t.sessionStorage||!1,s=t.setTimeout,o=t.clearTimeout,l=t.setInterval,u=t.clearInterval,c=t.JSON,p=t.alert,d=t.History=t.History||{},h=t.history;try{a.setItem("TEST","1"),a.removeItem("TEST")}catch(f){a=!1}if(c.stringify=c.stringify||c.encode,c.parse=c.parse||c.decode,"undefined"!=typeof d.init)throw new Error("History.js Core has already been loaded...");d.init=function(){return"undefined"==typeof d.Adapter?!1:("undefined"!=typeof d.initCore&&d.initCore(),"undefined"!=typeof d.initHtml4&&d.initHtml4(),!0)},d.initCore=function(){if("undefined"!=typeof d.initCore.initialized)return!1;if(d.initCore.initialized=!0,d.options=d.options||{},d.options.hashChangeInterval=d.options.hashChangeInterval||100,d.options.safariPollInterval=d.options.safariPollInterval||500,d.options.doubleCheckInterval=d.options.doubleCheckInterval||500,d.options.disableSuid=d.options.disableSuid||!1,d.options.storeInterval=d.options.storeInterval||1e3,d.options.busyDelay=d.options.busyDelay||250,d.options.debug=d.options.debug||!1,d.options.initialTitle=d.options.initialTitle||i.title,d.options.html4Mode=d.options.html4Mode||!1,d.options.delayInit=d.options.delayInit||!1,d.intervalList=[],d.clearAllIntervals=function(){var t,e=d.intervalList;if("undefined"!=typeof e&&null!==e){for(t=0;t<e.length;t++)u(e[t]);d.intervalList=null}},d.debug=function(){(d.options.debug||!1)&&d.log.apply(d,arguments)},d.log=function(){var t,e,r,a,s,o="undefined"!=typeof n&&"undefined"!=typeof n.log&&"undefined"!=typeof n.log.apply,l=i.getElementById("log");for(o?(a=Array.prototype.slice.call(arguments),t=a.shift(),"undefined"!=typeof n.debug?n.debug.apply(n,[t,a]):n.log.apply(n,[t,a])):t="\n"+arguments[0]+"\n",e=1,r=arguments.length;r>e;++e){if(s=arguments[e],"object"==typeof s&&"undefined"!=typeof c)try{s=c.stringify(s)}catch(u){}t+="\n"+s+"\n"}return l?(l.value+=t+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):o||p(t),!0},d.getInternetExplorerMajorVersion=function(){var t=d.getInternetExplorerMajorVersion.cached="undefined"!=typeof d.getInternetExplorerMajorVersion.cached?d.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=i.createElement("div"),n=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&n[0];);return t>4?t:!1}();return t},d.isInternetExplorer=function(){var t=d.isInternetExplorer.cached="undefined"!=typeof d.isInternetExplorer.cached?d.isInternetExplorer.cached:Boolean(d.getInternetExplorerMajorVersion());return t},d.emulated=d.options.html4Mode?{pushState:!0,hashChange:!0}:{pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent)),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in i)||d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8)},d.enabled=!d.emulated.pushState,d.bugs={setHash:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!d.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(d.isInternetExplorer()&&d.getInternetExplorerMajorVersion()<7)},d.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},d.cloneObject=function(t){var e,n;return t?(e=c.stringify(t),n=c.parse(e)):n={},n},d.getRootUrl=function(){var t=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(t+=":"+i.location.port),t+="/"},d.getBaseHref=function(){var t=i.getElementsByTagName("base"),e=null,n="";return 1===t.length&&(e=t[0],n=e.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},d.getBaseUrl=function(){var t=d.getBaseHref()||d.getBasePageUrl()||d.getRootUrl();return t},d.getPageUrl=function(){var t,e=d.getState(!1,!1),n=(e||{}).url||d.getLocationHref();return t=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(t){return/\./.test(t)?t:t+"/"})},d.getBasePageUrl=function(){var t=d.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/";return t},d.getFullUrl=function(t,e){var n=t,i=t.substring(0,1);return e="undefined"==typeof e?!0:e,/[a-z]+\:\/\//.test(t)||(n="/"===i?d.getRootUrl()+t.replace(/^\/+/,""):"#"===i?d.getPageUrl().replace(/#.*/,"")+t:"?"===i?d.getPageUrl().replace(/[\?#].*/,"")+t:e?d.getBaseUrl()+t.replace(/^(\.\/)+/,""):d.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},d.getShortUrl=function(t){var e=t,n=d.getBaseUrl(),i=d.getRootUrl();return d.emulated.pushState&&(e=e.replace(n,"")),e=e.replace(i,"/"),d.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},d.getLocationHref=function(t){return t=t||i,t.URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:-1==t.URL.indexOf("#")&&-1!=t.location.href.indexOf("#")?t.location.href:t.URL||t.location.href},d.store={},d.idToState=d.idToState||{},d.stateToId=d.stateToId||{},d.urlToId=d.urlToId||{},d.storedStates=d.storedStates||[],d.savedStates=d.savedStates||[],d.normalizeStore=function(){d.store.idToState=d.store.idToState||{},d.store.urlToId=d.store.urlToId||{},d.store.stateToId=d.store.stateToId||{}},d.getState=function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0);var n=d.getLastSavedState();return!n&&e&&(n=d.createStateObject()),t&&(n=d.cloneObject(n),n.url=n.cleanUrl||n.url),n},d.getIdByState=function(t){var e,n=d.extractId(t.url);if(!n)if(e=d.getStateString(t),"undefined"!=typeof d.stateToId[e])n=d.stateToId[e];else if("undefined"!=typeof d.store.stateToId[e])n=d.store.stateToId[e];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof d.idToState[n]||"undefined"!=typeof d.store.idToState[n];);d.stateToId[e]=n,d.idToState[n]=t}return n},d.normalizeState=function(t){var e,n;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),e={},e.normalized=!0,e.title=t.title||"",e.url=d.getFullUrl(t.url?t.url:d.getLocationHref()),e.hash=d.getShortUrl(e.url),e.data=d.cloneObject(t.data),e.id=d.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,n=!d.isEmptyObject(e.data),(e.title||n)&&d.options.disableSuid!==!0&&(e.hash=d.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=d.getFullUrl(e.hash),(d.emulated.pushState||d.bugs.safariPoll)&&d.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},d.createStateObject=function(t,e,n){var i={data:t,title:e,url:n};return i=d.normalizeState(i)},d.getStateById=function(t){t=String(t);var n=d.idToState[t]||d.store.idToState[t]||e;return n},d.getStateString=function(t){var e,n,i;return e=d.normalizeState(t),n={data:e.data,title:t.title,url:t.url},i=c.stringify(n)},d.getStateId=function(t){var e,n;return e=d.normalizeState(t),n=e.id},d.getHashByState=function(t){var e,n;return e=d.normalizeState(t),n=e.hash},d.extractId=function(t){var e,n,i,r;return r=-1!=t.indexOf("#")?t.split("#")[0]:t,n=/(.*)\&_suid=([0-9]+)$/.exec(r),i=n?n[1]||t:t,e=n?String(n[2]||""):"",e||!1},d.isTraditionalAnchor=function(t){var e=!/[\/\?\.]/.test(t);return e},d.extractState=function(t,e){var n,i,r=null;return e=e||!1,n=d.extractId(t),n&&(r=d.getStateById(n)),r||(i=d.getFullUrl(t),n=d.getIdByUrl(i)||!1,n&&(r=d.getStateById(n)),!r&&e&&!d.isTraditionalAnchor(t)&&(r=d.createStateObject(null,null,i))),r},d.getIdByUrl=function(t){var n=d.urlToId[t]||d.store.urlToId[t]||e;return n},d.getLastSavedState=function(){return d.savedStates[d.savedStates.length-1]||e},d.getLastStoredState=function(){return d.storedStates[d.storedStates.length-1]||e},d.hasUrlDuplicate=function(t){var e,n=!1;return e=d.extractState(t.url),n=e&&e.id!==t.id},d.storeState=function(t){return d.urlToId[t.url]=t.id,d.storedStates.push(d.cloneObject(t)),t},d.isLastSavedState=function(t){var e,n,i,r=!1;return d.savedStates.length&&(e=t.id,n=d.getLastSavedState(),i=n.id,r=e===i),r},d.saveState=function(t){return d.isLastSavedState(t)?!1:(d.savedStates.push(d.cloneObject(t)),!0)},d.getStateByIndex=function(t){var e=null;return e="undefined"==typeof t?d.savedStates[d.savedStates.length-1]:0>t?d.savedStates[d.savedStates.length+t]:d.savedStates[t]},d.getCurrentIndex=function(){var t=null;return t=d.savedStates.length<1?0:d.savedStates.length-1},d.getHash=function(t){var e,n=d.getLocationHref(t);return e=d.getHashByUrl(n)},d.unescapeHash=function(t){var e=d.normalizeHash(t);return e=decodeURIComponent(e)},d.normalizeHash=function(t){var e=t.replace(/[^#]*#/,"").replace(/#.*/,"");return e},d.setHash=function(t,e){var n,r;return e!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.setHash,args:arguments,queue:e}),!1):(d.busy(!0),n=d.extractState(t,!0),n&&!d.emulated.pushState?d.pushState(n.data,n.title,n.url,!1):d.getHash()!==t&&(d.bugs.setHash?(r=d.getPageUrl(),d.pushState(null,null,r+"#"+t,!1)):i.location.hash=t),d)},d.escapeHash=function(e){var n=d.normalizeHash(e);return n=t.encodeURIComponent(n),d.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},d.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=d.unescapeHash(e)},d.setTitle=function(t){var e,n=t.title;n||(e=d.getStateByIndex(0),e&&e.url===t.url&&(n=e.title||d.options.initialTitle));try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(r){}return i.title=n,d},d.queues=[],d.busy=function(t){if("undefined"!=typeof t?d.busy.flag=t:"undefined"==typeof d.busy.flag&&(d.busy.flag=!1),!d.busy.flag){o(d.busy.timeout);var e=function(){var t,n,i;if(!d.busy.flag)for(t=d.queues.length-1;t>=0;--t)n=d.queues[t],0!==n.length&&(i=n.shift(),d.fireQueueItem(i),d.busy.timeout=s(e,d.options.busyDelay))};d.busy.timeout=s(e,d.options.busyDelay)}return d.busy.flag},d.busy.flag=!1,d.fireQueueItem=function(t){return t.callback.apply(t.scope||d,t.args||[])},d.pushQueue=function(t){return d.queues[t.queue||0]=d.queues[t.queue||0]||[],d.queues[t.queue||0].push(t),d},d.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),"undefined"!=typeof e&&(t.queue=e),d.busy()?d.pushQueue(t):d.fireQueueItem(t),d},d.clearQueue=function(){return d.busy.flag=!1,d.queues=[],d},d.stateChanged=!1,d.doubleChecker=!1,d.doubleCheckComplete=function(){return d.stateChanged=!0,d.doubleCheckClear(),d},d.doubleCheckClear=function(){return d.doubleChecker&&(o(d.doubleChecker),d.doubleChecker=!1),d},d.doubleCheck=function(t){return d.stateChanged=!1,d.doubleCheckClear(),d.bugs.ieDoubleCheck&&(d.doubleChecker=s(function(){return d.doubleCheckClear(),d.stateChanged||t(),!0},d.options.doubleCheckInterval)),d},d.safariStatePoll=function(){var e,n=d.extractState(d.getLocationHref());return d.isLastSavedState(n)?void 0:(e=n,e||(e=d.createStateObject()),d.Adapter.trigger(t,"popstate"),d)},d.back=function(t){return t!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.back,args:arguments,queue:t}),!1):(d.busy(!0),d.doubleCheck(function(){d.back(!1)}),h.go(-1),!0)},d.forward=function(t){return t!==!1&&d.busy()?(d.pushQueue({scope:d,callback:d.forward,args:arguments,queue:t}),!1):(d.busy(!0),d.doubleCheck(function(){d.forward(!1)}),h.go(1),!0)},d.go=function(t,e){var n;if(t>0)for(n=1;t>=n;++n)d.forward(e);else{if(!(0>t))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=t;--n)d.back(e)}return d},d.emulated.pushState){var f=function(){};d.pushState=d.pushState||f,d.replaceState=d.replaceState||f}else d.onPopState=function(e,n){var i,r,a=!1,s=!1;return d.doubleCheckComplete(),i=d.getHash(),i?(r=d.extractState(i||d.getLocationHref(),!0),r?d.replaceState(r.data,r.title,r.url,!1):(d.Adapter.trigger(t,"anchorchange"),d.busy(!1)),d.expectedStateId=!1,!1):(a=d.Adapter.extractEventData("state",e,n)||!1,s=a?d.getStateById(a):d.expectedStateId?d.getStateById(d.expectedStateId):d.extractState(d.getLocationHref()),s||(s=d.createStateObject(null,null,d.getLocationHref())),d.expectedStateId=!1,d.isLastSavedState(s)?(d.busy(!1),!1):(d.storeState(s),d.saveState(s),d.setTitle(s),d.Adapter.trigger(t,"statechange"),d.busy(!1),!0))},d.Adapter.bind(t,"popstate",d.onPopState),d.pushState=function(e,n,i,r){if(d.getHashByUrl(i)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.pushState,args:arguments,queue:r}),!1;
d.busy(!0);var a=d.createStateObject(e,n,i);return d.isLastSavedState(a)?d.busy(!1):(d.storeState(a),d.expectedStateId=a.id,h.pushState(a.id,a.title,a.url),d.Adapter.trigger(t,"popstate")),!0},d.replaceState=function(e,n,i,r){if(d.getHashByUrl(i)&&d.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(r!==!1&&d.busy())return d.pushQueue({scope:d,callback:d.replaceState,args:arguments,queue:r}),!1;d.busy(!0);var a=d.createStateObject(e,n,i);return d.isLastSavedState(a)?d.busy(!1):(d.storeState(a),d.expectedStateId=a.id,h.replaceState(a.id,a.title,a.url),d.Adapter.trigger(t,"popstate")),!0};if(a){try{d.store=c.parse(a.getItem("History.store"))||{}}catch(m){d.store={}}d.normalizeStore()}else d.store={},d.normalizeStore();d.Adapter.bind(t,"unload",d.clearAllIntervals),d.saveState(d.storeState(d.extractState(d.getLocationHref(),!0))),a&&(d.onUnload=function(){var t,e,n;try{t=c.parse(a.getItem("History.store"))||{}}catch(i){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in d.idToState)d.idToState.hasOwnProperty(e)&&(t.idToState[e]=d.idToState[e]);for(e in d.urlToId)d.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=d.urlToId[e]);for(e in d.stateToId)d.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=d.stateToId[e]);d.store=t,d.normalizeStore(),n=c.stringify(t);try{a.setItem("History.store",n)}catch(r){if(r.code!==DOMException.QUOTA_EXCEEDED_ERR)throw r;a.length&&(a.removeItem("History.store"),a.setItem("History.store",n))}},d.intervalList.push(l(d.onUnload,d.options.storeInterval)),d.Adapter.bind(t,"beforeunload",d.onUnload),d.Adapter.bind(t,"unload",d.onUnload)),d.emulated.pushState||(d.bugs.safariPoll&&d.intervalList.push(l(d.safariStatePoll,d.options.safariPollInterval)),("Apple Computer, Inc."===r.vendor||"Mozilla"===(r.appCodeName||""))&&(d.Adapter.bind(t,"hashchange",function(){d.Adapter.trigger(t,"popstate")}),d.getHash()&&d.Adapter.onDomLoad(function(){d.Adapter.trigger(t,"hashchange")})))},(!d.options||!d.options.delayInit)&&d.init()}(window),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=global.window&&global.window.$?t(global.window.$):function(e){if(!e.$&&!e.fn)throw new Error("Tokenfield requires a window object with jQuery or a jQuery instance");return t(e.$||e)}:t(jQuery,window)}(function(t,e){"use strict";var n=function(n,i){var r=this;this.$element=t(n),this.textDirection=this.$element.css("direction"),this.options=t.extend(!0,{},t.fn.tokenfield.defaults,{tokens:this.$element.val()},this.$element.data(),i),this._delimiters="string"==typeof this.options.delimiter?[this.options.delimiter]:this.options.delimiter,this._triggerKeys=t.map(this._delimiters,function(t){return t.charCodeAt(0)}),this._firstDelimiter=this._delimiters[0];var a=t.inArray(" ",this._delimiters),s=t.inArray("-",this._delimiters);a>=0&&(this._delimiters[a]="\\s"),s>=0&&(delete this._delimiters[s],this._delimiters.unshift("-"));var o=["\\","$","[","{","^",".","|","?","*","+","(",")"];t.each(this._delimiters,function(e,n){var i=t.inArray(n,o);i>=0&&(r._delimiters[e]="\\"+n)});var l,u=e&&"function"==typeof e.getMatchedCSSRules?e.getMatchedCSSRules(n):null,c=n.style.width,p=this.$element.width();u&&t.each(u,function(t,e){e.style.width&&(l=e.style.width)});var d="rtl"===t("body").css("direction")?"right":"left",h={position:this.$element.css("position")};h[d]=this.$element.css(d),this.$element.data("original-styles",h).data("original-tabindex",this.$element.prop("tabindex")).css("position","absolute").css(d,"-10000px").prop("tabindex",-1),this.$wrapper=t('<div class="tokenfield form-control" />'),this.$element.hasClass("input-lg")&&this.$wrapper.addClass("input-lg"),this.$element.hasClass("input-sm")&&this.$wrapper.addClass("input-sm"),"rtl"===this.textDirection&&this.$wrapper.addClass("rtl");var f=this.$element.prop("id")||(new Date).getTime()+""+Math.floor(100*(1+Math.random()));this.$input=t('<input type="text" class="token-input" autocomplete="off" />').appendTo(this.$wrapper).prop("placeholder",this.$element.prop("placeholder")).prop("id",f+"-tokenfield").prop("tabindex",this.$element.data("original-tabindex"));var m=t('label[for="'+this.$element.prop("id")+'"]');if(m.length&&m.prop("for",this.$input.prop("id")),this.$copyHelper=t('<input type="text" />').css("position","absolute").css(d,"-10000px").prop("tabindex",-1).prependTo(this.$wrapper),c?this.$wrapper.css("width",c):l?this.$wrapper.css("width",l):this.$element.parents(".form-inline").length&&this.$wrapper.width(p),(this.$element.prop("disabled")||this.$element.parents("fieldset[disabled]").length)&&this.disable(),this.$element.prop("readonly")&&this.readonly(),this.$mirror=t('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),this.$input.css("min-width",this.options.minWidth+"px"),t.each(["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],function(t,e){r.$mirror[0].style[e]=r.$input.css(e)}),this.$mirror.appendTo("body"),this.$wrapper.insertBefore(this.$element),this.$element.prependTo(this.$wrapper),this.update(),this.setTokens(this.options.tokens,!1,!this.$element.val()&&this.options.tokens),this.listen(),!t.isEmptyObject(this.options.autocomplete)){var g="rtl"===this.textDirection?"right":"left",v=t.extend({minLength:this.options.showAutocompleteOnFocus?0:null,position:{my:g+" top",at:g+" bottom",of:this.$wrapper}},this.options.autocomplete);this.$input.autocomplete(v)}if(!t.isEmptyObject(this.options.typeahead)){var y=this.options.typeahead,b={minLength:this.options.showAutocompleteOnFocus?0:null},w=t.isArray(y)?y:[y,y];w[0]=t.extend({},b,w[0]),this.$input.typeahead.apply(this.$input,w),this.typeahead=!0}};n.prototype={constructor:n,createToken:function(e,n){var i=this;if(e="string"==typeof e?{value:e,label:e}:t.extend({},e),"undefined"==typeof n&&(n=!0),e.value=t.trim(e.value),e.label=e.label&&e.label.length?t.trim(e.label):e.value,!(!e.value.length||!e.label.length||e.label.length<=this.options.minLength||this.options.limit&&this.getTokens().length>=this.options.limit)){var r=t.Event("tokenfield:createtoken",{attrs:e});if(this.$element.trigger(r),r.attrs&&!r.isDefaultPrevented()){var a=t('<div class="token" />').append('<span class="token-label" />').append('<a href="#" class="close" tabindex="-1">&times;</a>').data("attrs",e);this.$input.hasClass("tt-input")?this.$input.parent().before(a):this.$input.before(a),this.$input.css("width",this.options.minWidth+"px");var s=a.find(".token-label"),o=a.find(".close");return this.maxTokenWidth||(this.maxTokenWidth=this.$wrapper.width()-o.outerWidth()-parseInt(o.css("margin-left"),10)-parseInt(o.css("margin-right"),10)-parseInt(a.css("border-left-width"),10)-parseInt(a.css("border-right-width"),10)-parseInt(a.css("padding-left"),10)-parseInt(a.css("padding-right"),10),parseInt(s.css("border-left-width"),10)-parseInt(s.css("border-right-width"),10)-parseInt(s.css("padding-left"),10)-parseInt(s.css("padding-right"),10),parseInt(s.css("margin-left"),10)-parseInt(s.css("margin-right"),10)),s.text(e.label).css("max-width",this.maxTokenWidth),a.on("mousedown",function(){return i._disabled||i._readonly?!1:void(i.preventDeactivation=!0)}).on("click",function(t){return i._disabled||i._readonly?!1:(i.preventDeactivation=!1,t.ctrlKey||t.metaKey?(t.preventDefault(),i.toggle(a)):void i.activate(a,t.shiftKey,t.shiftKey))}).on("dblclick",function(){return i._disabled||i._readonly||!i.options.allowEditing?!1:void i.edit(a)}),o.on("click",t.proxy(this.remove,this)),this.$element.trigger(t.Event("tokenfield:createdtoken",{attrs:e,relatedTarget:a.get(0)})),n&&this.$element.val(this.getTokensList()).trigger(t.Event("change",{initiator:"tokenfield"})),this.update(),this.$element.get(0)}}},setTokens:function(e,n,i){if(e){n||this.$wrapper.find(".token").remove(),"undefined"==typeof i&&(i=!0),"string"==typeof e&&(e=this._delimiters.length?e.split(new RegExp("["+this._delimiters.join("")+"]")):[e]);var r=this;return t.each(e,function(t,e){r.createToken(e,i)}),this.$element.get(0)}},getTokenData:function(e){var n=e.map(function(){var e=t(this);return e.data("attrs")}).get();return 1==n.length&&(n=n[0]),n},getTokens:function(e){var n=this,i=[],r=e?".active":"";return this.$wrapper.find(".token"+r).each(function(){i.push(n.getTokenData(t(this)))}),i},getTokensList:function(e,n,i){e=e||this._firstDelimiter,n="undefined"!=typeof n&&null!==n?n:this.options.beautify;var r=e+(n&&" "!==e?" ":"");return t.map(this.getTokens(i),function(t){return t.value}).join(r)},getInput:function(){return this.$input.val()},listen:function(){var n=this;this.$element.on("change",t.proxy(this.change,this)),this.$wrapper.on("mousedown",t.proxy(this.focusInput,this)),this.$input.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("paste",t.proxy(this.paste,this)).on("keydown",t.proxy(this.keydown,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.$copyHelper.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keydown",t.proxy(this.keydown,this)).on("keyup",t.proxy(this.keyup,this)),this.$input.on("keypress",t.proxy(this.update,this)).on("keyup",t.proxy(this.update,this)),this.$input.on("autocompletecreate",function(){var e=t(this).data("ui-autocomplete").menu.element,i=n.$wrapper.outerWidth()-parseInt(e.css("border-left-width"),10)-parseInt(e.css("border-right-width"),10);e.css("min-width",i+"px")}).on("autocompleteselect",function(t,e){return n.createToken(e.item)&&(n.$input.val(""),n.$input.data("edit")&&n.unedit(!0)),!1}).on("typeahead:selected typeahead:autocompleted",function(t,e){e.value=n.$input.typeahead("val"),n.createToken(e)&&(n.$input.typeahead("val",""),n.$input.data("edit")&&n.unedit(!0))}),t(e).on("resize",t.proxy(this.update,this))},keydown:function(e){function n(t){if(r.$input.is(document.activeElement)){if(r.$input.val().length>0)return;t+="All";var n=r.$input.hasClass("tt-input")?r.$input.parent()[t](".token:first"):r.$input[t](".token:first");if(!n.length)return;r.preventInputFocus=!0,r.preventDeactivation=!0,r.activate(n),e.preventDefault()}else r[t](e.shiftKey),e.preventDefault()}function i(n){if(e.shiftKey){if(r.$input.is(document.activeElement)){if(r.$input.val().length>0)return;var i=r.$input.hasClass("tt-input")?r.$input.parent()[n+"All"](".token:first"):r.$input[n+"All"](".token:first");if(!i.length)return;r.activate(i)}var a="prev"===n?"next":"prev",s="prev"===n?"first":"last";r.firstActiveToken[a+"All"](".token").each(function(){r.deactivate(t(this))}),r.activate(r.$wrapper.find(".token:"+s),!0,!0),e.preventDefault()}}if(this.focused){var r=this;switch(e.keyCode){case 8:if(!this.$input.is(document.activeElement))break;this.lastInputValue=this.$input.val();break;case 37:n("rtl"===this.textDirection?"next":"prev");break;case 38:i("prev");break;case 39:n("rtl"===this.textDirection?"prev":"next");break;case 40:i("next");break;case 65:if(this.$input.val().length>0||!e.ctrlKey&&!e.metaKey)break;this.activateAll(),e.preventDefault();break;case 9:case 13:if(this.$input.data("ui-autocomplete")&&this.$input.data("ui-autocomplete").menu.element.find("li:has(a.ui-state-focus)").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-cursor").length)break;if(this.$input.hasClass("tt-input")&&this.$wrapper.find(".tt-hint").length&&this.$wrapper.find(".tt-hint").val().length)break;if(this.$input.is(document.activeElement)&&this.$input.val().length||this.$input.data("edit"))return this.createTokensFromInput(e,this.$input.data("edit"));if(13===e.keyCode){if(!this.$copyHelper.is(document.activeElement)||1!==this.$wrapper.find(".token.active").length)break;if(!r.options.allowEditing)break;this.edit(this.$wrapper.find(".token.active"))}}this.lastKeyDown=e.keyCode}},keypress:function(e){return this.lastKeyPressCode=e.keyCode,this.lastKeyPressCharCode=e.charCode,-1!==t.inArray(e.charCode,this._triggerKeys)&&this.$input.is(document.activeElement)?(this.$input.val()&&this.createTokensFromInput(e),!1):void 0},keyup:function(t){if(this.preventInputFocus=!1,this.focused){switch(t.keyCode){case 8:if(this.$input.is(document.activeElement)){if(this.$input.val().length||this.lastInputValue.length&&8===this.lastKeyDown)break;this.preventDeactivation=!0;var e=this.$input.hasClass("tt-input")?this.$input.parent().prevAll(".token:first"):this.$input.prevAll(".token:first");if(!e.length)break;this.activate(e)}else this.remove(t);break;case 46:this.remove(t,"next")}this.lastKeyUp=t.keyCode}},focus:function(){this.focused=!0,this.$wrapper.addClass("focus"),this.$input.is(document.activeElement)&&(this.$wrapper.find(".active").removeClass("active"),this.$firstActiveToken=null,this.options.showAutocompleteOnFocus&&this.search())},blur:function(t){this.focused=!1,this.$wrapper.removeClass("focus"),this.preventDeactivation||this.$element.is(document.activeElement)||(this.$wrapper.find(".active").removeClass("active"),this.$firstActiveToken=null),!this.preventCreateTokens&&(this.$input.data("edit")&&!this.$input.is(document.activeElement)||this.options.createTokensOnBlur)&&this.createTokensFromInput(t),this.preventDeactivation=!1,this.preventCreateTokens=!1},paste:function(t){var e=this;e.options.allowPasting&&setTimeout(function(){e.createTokensFromInput(t)},1)},change:function(t){"tokenfield"!==t.initiator&&this.setTokens(this.$element.val())},createTokensFromInput:function(t,e){if(!(this.$input.val().length<this.options.minLength)){var n=this.getTokensList();return this.setTokens(this.$input.val(),!0),n==this.getTokensList()&&this.$input.val().length?!1:(this.$input.hasClass("tt-input")?this.$input.typeahead("val",""):this.$input.val(""),this.$input.data("edit")&&this.unedit(e),!1)}},next:function(t){if(t){var e=this.$wrapper.find(".active:first"),n=e&&this.$firstActiveToken?e.index()<this.$firstActiveToken.index():!1;if(n)return this.deactivate(e)}var i=this.$wrapper.find(".active:last"),r=i.nextAll(".token:first");return r.length?void this.activate(r,t):void this.$input.focus()},prev:function(t){if(t){var e=this.$wrapper.find(".active:last"),n=e&&this.$firstActiveToken?e.index()>this.$firstActiveToken.index():!1;if(n)return this.deactivate(e)}var i=this.$wrapper.find(".active:first"),r=i.prevAll(".token:first");return r.length||(r=this.$wrapper.find(".token:first")),r.length||t?void this.activate(r,t):void this.$input.focus()},activate:function(e,n,i,r){if(e){if("undefined"==typeof r)var r=!0;if(i)var n=!0;if(this.$copyHelper.focus(),n||(this.$wrapper.find(".active").removeClass("active"),r?this.$firstActiveToken=e:delete this.$firstActiveToken),i&&this.$firstActiveToken){var a=this.$firstActiveToken.index()-2,s=e.index()-2,o=this;this.$wrapper.find(".token").slice(Math.min(a,s)+1,Math.max(a,s)).each(function(){o.activate(t(this),!0)})}e.addClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select()}},activateAll:function(){var e=this;this.$wrapper.find(".token").each(function(n){e.activate(t(this),0!==n,!1,!1)})},deactivate:function(t){t&&(t.removeClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},toggle:function(t){t&&(t.toggleClass("active"),this.$copyHelper.val(this.getTokensList(null,null,!0)).select())},edit:function(e){if(e){var n=e.data("attrs"),i={attrs:n,relatedTarget:e.get(0)},r=t.Event("tokenfield:edittoken",i);if(this.$element.trigger(r),!r.isDefaultPrevented()){e.find(".token-label").text(n.value);var a=e.outerWidth(),s=this.$input.hasClass("tt-input")?this.$input.parent():this.$input;e.replaceWith(s),this.preventCreateTokens=!0,this.$input.val(n.value).select().data("edit",!0).width(a),this.update(),this.$element.trigger(t.Event("tokenfield:editedtoken",i))}}},unedit:function(t){var e=this.$input.hasClass("tt-input")?this.$input.parent():this.$input;if(e.appendTo(this.$wrapper),this.$input.data("edit",!1),this.$mirror.text(""),this.update(),t){var n=this;setTimeout(function(){n.$input.focus()},1)}},remove:function(e,n){if(!(this.$input.is(document.activeElement)||this._disabled||this._readonly)){var i="click"===e.type?t(e.target).closest(".token"):this.$wrapper.find(".token.active");if("click"!==e.type){if(!n)var n="prev";if(this[n](),"prev"===n)var r=0===i.first().prevAll(".token:first").length}var a={attrs:this.getTokenData(i),relatedTarget:i.get(0)},s=t.Event("tokenfield:removetoken",a);if(this.$element.trigger(s),!s.isDefaultPrevented()){var o=t.Event("tokenfield:removedtoken",a),l=t.Event("change",{initiator:"tokenfield"});i.remove(),this.$element.val(this.getTokensList()).trigger(o).trigger(l),(!this.$wrapper.find(".token").length||"click"===e.type||r)&&this.$input.focus(),this.$input.css("width",this.options.minWidth+"px"),this.update(),e.preventDefault(),e.stopPropagation()}}},update:function(){var t=this.$input.val(),e=parseInt(this.$input.css("padding-left"),10),n=parseInt(this.$input.css("padding-right"),10),i=e+n;if(this.$input.data("edit")){if(t||(t=this.$input.prop("placeholder")),t===this.$mirror.text())return;this.$mirror.text(t);var r=this.$mirror.width()+10;if(r>this.$wrapper.width())return this.$input.width(this.$wrapper.width());this.$input.width(r)}else{var a="rtl"===this.textDirection?this.$input.offset().left+this.$input.outerWidth()-this.$wrapper.offset().left-parseInt(this.$wrapper.css("padding-left"),10)-i-1:this.$wrapper.offset().left+this.$wrapper.width()+parseInt(this.$wrapper.css("padding-left"),10)-this.$input.offset().left-i;this.$input.width(isNaN(a)?"100%":a)}},focusInput:function(e){if(!(t(e.target).closest(".token").length||t(e.target).closest(".token-input").length||t(e.target).closest(".tt-dropdown-menu").length)){var n=this;setTimeout(function(){n.$input.focus()},0)}},search:function(){this.$input.data("ui-autocomplete")&&this.$input.autocomplete("search")},disable:function(){this.setProperty("disabled",!0)},enable:function(){this.setProperty("disabled",!1)},readonly:function(){this.setProperty("readonly",!0)},writeable:function(){this.setProperty("readonly",!1)},setProperty:function(t,e){this["_"+t]=e,this.$input.prop(t,e),this.$element.prop(t,e),this.$wrapper[e?"addClass":"removeClass"](t)},destroy:function(){this.$element.val(this.getTokensList()),this.$element.css(this.$element.data("original-styles")),this.$element.prop("tabindex",this.$element.data("original-tabindex"));var e=t('label[for="'+this.$input.prop("id")+'"]');e.length&&e.prop("for",this.$element.prop("id")),this.$element.insertBefore(this.$wrapper),this.$element.removeData("original-styles").removeData("original-tabindex").removeData("bs.tokenfield"),this.$wrapper.remove(),this.$mirror.remove();var n=this.$element;return delete this,n}};var i=t.fn.tokenfield;return t.fn.tokenfield=function(e,i){var r,a=[];Array.prototype.push.apply(a,arguments);var s=this.each(function(){var s=t(this),o=s.data("bs.tokenfield"),l="object"==typeof e&&e;"string"==typeof e&&o&&o[e]?(a.shift(),r=o[e].apply(o,a)):o||"string"==typeof e||i||(s.data("bs.tokenfield",o=new n(this,l)),s.trigger("tokenfield:initialize"))});return"undefined"!=typeof r?r:s},t.fn.tokenfield.defaults={minWidth:60,minLength:0,allowEditing:!0,allowPasting:!0,limit:0,autocomplete:{},typeahead:{},showAutocompleteOnFocus:!1,createTokensOnBlur:!1,delimiter:",",beautify:!0},t.fn.tokenfield.Constructor=n,t.fn.tokenfield.noConflict=function(){return t.fn.tokenfield=i,this},n}),function(t){"use strict";function e(t){return t.replace(/,/g,".").replace(/[^0-9\.]/g,"")}function n(t){return parseFloat(e(t))>=10}var i,r={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null},a={},s=0,o={},l=0,u={},c=null,p=null,d=function(){var t,e,n,i,r="ZeroClipboard.swf";if(document.currentScript&&(i=document.currentScript.src));else{var a=document.getElementsByTagName("script");if("readyState"in a[0])for(t=a.length;t--&&("interactive"!==a[t].readyState||!(i=a[t].src)););else if("loading"===document.readyState)i=a[a.length-1].src;else{for(t=a.length;t--;){if(n=a[t].src,!n){e=null;break}if(n=n.split("#")[0].split("?")[0],n=n.slice(0,n.lastIndexOf("/")+1),null==e)e=n;else if(e!==n){e=null;break}}null!==e&&(i=e)}}return i&&(i=i.split("#")[0].split("?")[0],r=i.slice(0,i.lastIndexOf("/")+1)+r),r}(),h=function(){var t=/\-([a-z])/g,e=function(t,e){return e.toUpperCase()};return function(n){return n.replace(t,e)}}(),f=function(e,n){var i,r,a;return t.getComputedStyle?i=t.getComputedStyle(e,null).getPropertyValue(n):(r=h(n),i=e.currentStyle?e.currentStyle[r]:e.style[r]),"cursor"!==n||i&&"auto"!==i||(a=e.tagName.toLowerCase(),"a"!==a)?i:"pointer"},m=function(e){e||(e=t.event);var n;this!==t?n=this:e.target?n=e.target:e.srcElement&&(n=e.srcElement),j.activate(n)},g=function(t,e,n){t&&1===t.nodeType&&(t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n))},v=function(t,e,n){t&&1===t.nodeType&&(t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n))},y=function(t,e){if(!t||1!==t.nodeType)return t;if(t.classList)return t.classList.contains(e)||t.classList.add(e),t;if(e&&"string"==typeof e){var n=(e||"").split(/\s+/);if(1===t.nodeType)if(t.className){for(var i=" "+t.className+" ",r=t.className,a=0,s=n.length;s>a;a++)i.indexOf(" "+n[a]+" ")<0&&(r+=" "+n[a]);t.className=r.replace(/^\s+|\s+$/g,"")}else t.className=e}return t},b=function(t,e){if(!t||1!==t.nodeType)return t;if(t.classList)return t.classList.contains(e)&&t.classList.remove(e),t;if(e&&"string"==typeof e||void 0===e){var n=(e||"").split(/\s+/);if(1===t.nodeType&&t.className)if(e){for(var i=(" "+t.className+" ").replace(/[\n\t]/g," "),r=0,a=n.length;a>r;r++)i=i.replace(" "+n[r]+" "," ");t.className=i.replace(/^\s+|\s+$/g,"")}else t.className=""}return t},w=function(){var t,e,n,i=1;return"function"==typeof document.body.getBoundingClientRect&&(t=document.body.getBoundingClientRect(),e=t.right-t.left,n=document.body.offsetWidth,i=Math.round(e/n*100)/100),i},S=function(e,n){var i={left:0,top:0,width:0,height:0,zIndex:C(n)-1};if(e.getBoundingClientRect){var r,a,s,o=e.getBoundingClientRect();"pageXOffset"in t&&"pageYOffset"in t?(r=t.pageXOffset,a=t.pageYOffset):(s=w(),r=Math.round(document.documentElement.scrollLeft/s),a=Math.round(document.documentElement.scrollTop/s));var l=document.documentElement.clientLeft||0,u=document.documentElement.clientTop||0;i.left=o.left+r-l,i.top=o.top+a-u,i.width="width"in o?o.width:o.right-o.left,i.height="height"in o?o.height:o.bottom-o.top}return i},$=function(t,e){var n=null==e||e&&e.cacheBust===!0&&e.useNoCache===!0;return n?(-1===t.indexOf("?")?"?":"&")+"noCache="+(new Date).getTime():""},k=function(e){var n,i,r,a=[],s=[],o=[];if(e.trustedOrigins&&("string"==typeof e.trustedOrigins?s.push(e.trustedOrigins):"object"==typeof e.trustedOrigins&&"length"in e.trustedOrigins&&(s=s.concat(e.trustedOrigins))),e.trustedDomains&&("string"==typeof e.trustedDomains?s.push(e.trustedDomains):"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(s=s.concat(e.trustedDomains))),s.length)for(n=0,i=s.length;i>n;n++)if(s.hasOwnProperty(n)&&s[n]&&"string"==typeof s[n]){if(r=P(s[n]),!r)continue;if("*"===r){o=[r];break}o.push.apply(o,[r,"//"+r,t.location.protocol+"//"+r])}return o.length&&a.push("trustedOrigins="+encodeURIComponent(o.join(","))),"string"==typeof e.jsModuleId&&e.jsModuleId&&a.push("jsModuleId="+encodeURIComponent(e.jsModuleId)),a.join("&")},x=function(t,e,n){if("function"==typeof e.indexOf)return e.indexOf(t,n);var i,r=e.length;for("undefined"==typeof n?n=0:0>n&&(n=r+n),i=n;r>i;i++)if(e.hasOwnProperty(i)&&e[i]===t)return i;return-1},E=function(t){if("string"==typeof t)throw new TypeError("ZeroClipboard doesn't accept query strings.");return t.length?t:[t]},_=function(e,n,i,r){r?t.setTimeout(function(){e.apply(n,i)},0):e.apply(n,i)},C=function(t){var e,n;return t&&("number"==typeof t&&t>0?e=t:"string"==typeof t&&(n=parseInt(t,10))&&!isNaN(n)&&n>0&&(e=n)),e||("number"==typeof z.zIndex&&z.zIndex>0?e=z.zIndex:"string"==typeof z.zIndex&&(n=parseInt(z.zIndex,10))&&!isNaN(n)&&n>0&&(e=n)),e||0},T=function(t,e){if(t&&e!==!1&&"undefined"!=typeof console&&console&&(console.warn||console.log)){var n="`"+t+"` is deprecated. See docs for more info:\n    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";console.warn?console.warn(n):console.log(n)}},I=function(){var t,e,n,i,r,a,s=arguments[0]||{};for(t=1,e=arguments.length;e>t;t++)if(null!=(n=arguments[t]))for(i in n)if(n.hasOwnProperty(i)){if(r=s[i],a=n[i],s===a)continue;void 0!==a&&(s[i]=a)}return s},P=function(t){if(null==t||""===t)return null;if(t=t.replace(/^\s+|\s+$/g,""),""===t)return null;var e=t.indexOf("//");t=-1===e?t:t.slice(e+2);var n=t.indexOf("/");return t=-1===n?t:-1===e||0===n?null:t.slice(0,n),t&&".swf"===t.slice(-4).toLowerCase()?null:t||null},R=function(){var t=function(t,e){var n,i,r;if(null!=t&&"*"!==e[0]&&("string"==typeof t&&(t=[t]),"object"==typeof t&&"length"in t))for(n=0,i=t.length;i>n;n++)if(t.hasOwnProperty(n)&&(r=P(t[n]))){if("*"===r){e.length=0,e.push("*");break}-1===x(r,e)&&e.push(r)}},e={always:"always",samedomain:"sameDomain",never:"never"};return function(n,i){var r,a=i.allowScriptAccess;if("string"==typeof a&&(r=a.toLowerCase())&&/^always|samedomain|never$/.test(r))return e[r];var s=P(i.moviePath);null===s&&(s=n);var o=[];t(i.trustedOrigins,o),t(i.trustedDomains,o);var l=o.length;if(l>0){if(1===l&&"*"===o[0])return"always";if(-1!==x(n,o))return 1===l&&n===s?"sameDomain":"always"}return"never"}}(),A=function(t){if(null==t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},H=function(t){if(t)for(var e in t)t.hasOwnProperty(e)&&delete t[e];return t},D=function(){try{return document.activeElement}catch(t){}return null},O=function(){var t=!1;if("boolean"==typeof r.disabled)t=r.disabled===!1;else{if("function"==typeof ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(t=!0)}catch(e){}!t&&navigator.mimeTypes["application/x-shockwave-flash"]&&(t=!0)}return t},j=function(t,e){return this instanceof j?(this.id=""+s++,o[this.id]={instance:this,elements:[],handlers:{}},t&&this.clip(t),"undefined"!=typeof e&&(T("new ZeroClipboard(elements, options)",z.debug),j.config(e)),this.options=j.config(),"boolean"!=typeof r.disabled&&(r.disabled=!O()),void(r.disabled===!1&&r.outdated!==!0&&null===r.bridge&&(r.outdated=!1,r.ready=!1,F()))):new j(t,e)};j.prototype.setText=function(t){return t&&""!==t&&(a["text/plain"]=t,r.ready===!0&&r.bridge&&"function"==typeof r.bridge.setText?r.bridge.setText(t):r.ready=!1),this},j.prototype.setSize=function(t,e){return r.ready===!0&&r.bridge&&"function"==typeof r.bridge.setSize?r.bridge.setSize(t,e):r.ready=!1,this};var q=function(t){r.ready===!0&&r.bridge&&"function"==typeof r.bridge.setHandCursor?r.bridge.setHandCursor(t):r.ready=!1};j.prototype.destroy=function(){this.unclip(),this.off(),delete o[this.id]};var L=function(){var t,e,n,i=[],r=A(o);for(t=0,e=r.length;e>t;t++)n=o[r[t]].instance,n&&n instanceof j&&i.push(n);return i};j.version="1.3.5";var z={swfPath:d,trustedDomains:t.location.host?[t.location.host]:[],cacheBust:!0,forceHandCursor:!1,zIndex:999999999,debug:!0,title:null,autoActivate:!0};j.config=function(t){"object"==typeof t&&null!==t&&I(z,t);{if("string"!=typeof t||!t){var e={};for(var n in z)z.hasOwnProperty(n)&&(e[n]="object"==typeof z[n]&&null!==z[n]?"length"in z[n]?z[n].slice(0):I({},z[n]):z[n]);return e}if(z.hasOwnProperty(t))return z[t]}},j.destroy=function(){j.deactivate();for(var t in o)if(o.hasOwnProperty(t)&&o[t]){var e=o[t].instance;e&&"function"==typeof e.destroy&&e.destroy()}var n=N(r.bridge);n&&n.parentNode&&(n.parentNode.removeChild(n),r.ready=null,r.bridge=null)},j.activate=function(t){i&&(b(i,z.hoverClass),b(i,z.activeClass)),i=t,y(t,z.hoverClass),M();var e=z.title||t.getAttribute("title");if(e){var n=N(r.bridge);n&&n.setAttribute("title",e)}var a=z.forceHandCursor===!0||"pointer"===f(t,"cursor");q(a)},j.deactivate=function(){var t=N(r.bridge);t&&(t.style.left="0px",t.style.top="-9999px",t.removeAttribute("title")),i&&(b(i,z.hoverClass),b(i,z.activeClass),i=null)};var F=function(){var e,n,i=document.getElementById("global-zeroclipboard-html-bridge");if(!i){var a=j.config();a.jsModuleId="string"==typeof c&&c||"string"==typeof p&&p||null;var s=R(t.location.host,z),o=k(a),l=z.moviePath+$(z.moviePath,z),u='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+l+'"/>         <param name="allowScriptAccess" value="'+s+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+o+'"/>         <embed src="'+l+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="'+s+'"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+o+'"           scale="exactfit">         </embed>       </object>';i=document.createElement("div"),i.id="global-zeroclipboard-html-bridge",i.setAttribute("class","global-zeroclipboard-container"),i.style.position="absolute",i.style.left="0px",i.style.top="-9999px",i.style.width="15px",i.style.height="15px",i.style.zIndex=""+C(z.zIndex),document.body.appendChild(i),i.innerHTML=u}e=document["global-zeroclipboard-flash-bridge"],e&&(n=e.length)&&(e=e[n-1]),r.bridge=e||i.children[0].lastElementChild},N=function(t){for(var e=/^OBJECT|EMBED$/,n=t&&t.parentNode;n&&e.test(n.nodeName)&&n.parentNode;)n=n.parentNode;return n||null},M=function(){if(i){var t=S(i,z.zIndex),e=N(r.bridge);e&&(e.style.top=t.top+"px",e.style.left=t.left+"px",e.style.width=t.width+"px",e.style.height=t.height+"px",e.style.zIndex=t.zIndex+1),r.ready===!0&&r.bridge&&"function"==typeof r.bridge.setSize?r.bridge.setSize(t.width,t.height):r.ready=!1}return this};j.prototype.on=function(t,e){var n,i,a,s={},l=o[this.id]&&o[this.id].handlers;if("string"==typeof t&&t)a=t.toLowerCase().split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(n in t)t.hasOwnProperty(n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&this.on(n,t[n]);if(a&&a.length){for(n=0,i=a.length;i>n;n++)t=a[n].replace(/^on/,""),s[t]=!0,l[t]||(l[t]=[]),l[t].push(e);s.noflash&&r.disabled&&K.call(this,"noflash",{}),s.wrongflash&&r.outdated&&K.call(this,"wrongflash",{flashVersion:r.version}),s.load&&r.ready&&K.call(this,"load",{flashVersion:r.version})}return this},j.prototype.off=function(t,e){var n,i,r,a,s,l=o[this.id]&&o[this.id].handlers;if(0===arguments.length)a=A(l);else if("string"==typeof t&&t)a=t.split(/\s+/);else if("object"==typeof t&&t&&"undefined"==typeof e)for(n in t)t.hasOwnProperty(n)&&"string"==typeof n&&n&&"function"==typeof t[n]&&this.off(n,t[n]);if(a&&a.length)for(n=0,i=a.length;i>n;n++)if(t=a[n].toLowerCase().replace(/^on/,""),s=l[t],s&&s.length)if(e)for(r=x(e,s);-1!==r;)s.splice(r,1),r=x(e,s,r);else l[t].length=0;return this},j.prototype.handlers=function(t){var e,n=null,i=o[this.id]&&o[this.id].handlers;if(i){if("string"==typeof t&&t)return i[t]?i[t].slice(0):null;n={};for(e in i)i.hasOwnProperty(e)&&i[e]&&(n[e]=i[e].slice(0))}return n};var B=function(e,n,i,r){var a=o[this.id]&&o[this.id].handlers[e];if(a&&a.length){var s,l,u,c=n||this;for(s=0,l=a.length;l>s;s++)u=a[s],n=c,"string"==typeof u&&"function"==typeof t[u]&&(u=t[u]),"object"==typeof u&&u&&"function"==typeof u.handleEvent&&(n=u,u=u.handleEvent),"function"==typeof u&&_(u,n,i,r)}return this};j.prototype.clip=function(t){t=E(t);for(var e=0;e<t.length;e++)if(t.hasOwnProperty(e)&&t[e]&&1===t[e].nodeType){t[e].zcClippingId?-1===x(this.id,u[t[e].zcClippingId])&&u[t[e].zcClippingId].push(this.id):(t[e].zcClippingId="zcClippingId_"+l++,u[t[e].zcClippingId]=[this.id],z.autoActivate===!0&&g(t[e],"mouseover",m));
var n=o[this.id].elements;-1===x(t[e],n)&&n.push(t[e])}return this},j.prototype.unclip=function(t){var e=o[this.id];if(e){var n,i=e.elements;t="undefined"==typeof t?i.slice(0):E(t);for(var r=t.length;r--;)if(t.hasOwnProperty(r)&&t[r]&&1===t[r].nodeType){for(n=0;-1!==(n=x(t[r],i,n));)i.splice(n,1);var a=u[t[r].zcClippingId];if(a){for(n=0;-1!==(n=x(this.id,a,n));)a.splice(n,1);0===a.length&&(z.autoActivate===!0&&v(t[r],"mouseover",m),delete t[r].zcClippingId)}}}return this},j.prototype.elements=function(){var t=o[this.id];return t&&t.elements?t.elements.slice(0):[]};var U=function(t){var e,n,i,r,a,s=[];if(t&&1===t.nodeType&&(e=t.zcClippingId)&&u.hasOwnProperty(e)&&(n=u[e],n&&n.length))for(i=0,r=n.length;r>i;i++)a=o[n[i]].instance,a&&a instanceof j&&s.push(a);return s};z.hoverClass="zeroclipboard-is-hover",z.activeClass="zeroclipboard-is-active",z.trustedOrigins=null,z.allowScriptAccess=null,z.useNoCache=!0,z.moviePath="ZeroClipboard.swf",j.detectFlashSupport=function(){return T("ZeroClipboard.detectFlashSupport",z.debug),O()},j.dispatch=function(t,e){if("string"==typeof t&&t){var n=t.toLowerCase().replace(/^on/,"");if(n)for(var r=i&&z.autoActivate===!0?U(i):L(),a=0,s=r.length;s>a;a++)K.call(r[a],n,e)}},j.prototype.setHandCursor=function(t){return T("ZeroClipboard.prototype.setHandCursor",z.debug),t="boolean"==typeof t?t:!!t,q(t),z.forceHandCursor=t,this},j.prototype.reposition=function(){return T("ZeroClipboard.prototype.reposition",z.debug),M()},j.prototype.receiveEvent=function(t,e){if(T("ZeroClipboard.prototype.receiveEvent",z.debug),"string"==typeof t&&t){var n=t.toLowerCase().replace(/^on/,"");n&&K.call(this,n,e)}},j.prototype.setCurrent=function(t){return T("ZeroClipboard.prototype.setCurrent",z.debug),j.activate(t),this},j.prototype.resetBridge=function(){return T("ZeroClipboard.prototype.resetBridge",z.debug),j.deactivate(),this},j.prototype.setTitle=function(t){if(T("ZeroClipboard.prototype.setTitle",z.debug),t=t||z.title||i&&i.getAttribute("title")){var e=N(r.bridge);e&&e.setAttribute("title",t)}return this},j.setDefaults=function(t){T("ZeroClipboard.setDefaults",z.debug),j.config(t)},j.prototype.addEventListener=function(t,e){return T("ZeroClipboard.prototype.addEventListener",z.debug),this.on(t,e)},j.prototype.removeEventListener=function(t,e){return T("ZeroClipboard.prototype.removeEventListener",z.debug),this.off(t,e)},j.prototype.ready=function(){return T("ZeroClipboard.prototype.ready",z.debug),r.ready===!0};var K=function(t,s){t=t.toLowerCase().replace(/^on/,"");var o=s&&s.flashVersion&&e(s.flashVersion)||null,l=i,u=!0;switch(t){case"load":if(o){if(!n(o))return void K.call(this,"onWrongFlash",{flashVersion:o});r.outdated=!1,r.ready=!0,r.version=o}break;case"wrongflash":o&&!n(o)&&(r.outdated=!0,r.ready=!1,r.version=o);break;case"mouseover":y(l,z.hoverClass);break;case"mouseout":z.autoActivate===!0&&j.deactivate();break;case"mousedown":y(l,z.activeClass);break;case"mouseup":b(l,z.activeClass);break;case"datarequested":if(l){var c=l.getAttribute("data-clipboard-target"),p=c?document.getElementById(c):null;if(p){var d=p.value||p.textContent||p.innerText;d&&this.setText(d)}else{var h=l.getAttribute("data-clipboard-text");h&&this.setText(h)}}u=!1;break;case"complete":H(a),l&&l!==D()&&l.focus&&l.focus()}var f=l,m=[this,s];return B.call(this,t,f,m,u)};"function"==typeof define&&define.amd?define(["require","exports","module"],function(t,e,n){return c=n&&n.id||null,j}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports&&"function"==typeof t.require?(p=module.id||null,module.exports=j):t.ZeroClipboard=j}(function(){return this}()),function(t){var e=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){function i(t,e){return n(e,t)}t.each(e,i)},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?void 0:!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){return(i=n.call(null,r,t,e))?!1:void 0}),!!i):i},mixin:t.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),templatify:function(e){function n(){return String(e)}return t.isFunction(e)?e:n},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var a,s,o=this,l=arguments;return a=function(){i=null,n||(r=t.apply(o,l))},s=n&&!i,clearTimeout(i),i=setTimeout(a,e),s&&(r=t.apply(o,l)),r}},throttle:function(t,e){var n,i,r,a,s,o;return s=0,o=function(){s=new Date,r=null,a=t.apply(n,i)},function(){var l=new Date,u=e-(l-s);return n=this,i=arguments,0>=u?(clearTimeout(r),r=null,s=l,a=t.apply(n,i)):r||(r=setTimeout(o,u)),a}},noop:function(){}}}(),n="0.10.4",i=function(){"use strict";function t(t){return t=e.toStr(t),t?t.split(/\s+/):[]}function n(t){return t=e.toStr(t),t?t.split(/\W+/):[]}function i(t){return function(){var n=[].slice.call(arguments,0);return function(i){var r=[];return e.each(n,function(n){r=r.concat(t(e.toStr(i[n])))}),r}}}return{nonword:n,whitespace:t,obj:{nonword:i(n),whitespace:i(t)}}}(),r=function(){"use strict";function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}function r(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(n.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new r(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];return e?(this.list.moveToFront(e),e.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),a=function(){"use strict";function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function i(t){return JSON.stringify(e.isUndefined(t)?null:t)}function r(t){return JSON.parse(t)}var a,s;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(o){a=null}return s=a&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),r(a.getItem(this._prefix(t)))},set:function(t,r,s){return e.isNumber(s)?a.setItem(this._ttlKey(t),i(n()+s)):a.removeItem(this._ttlKey(t)),a.setItem(this._prefix(t),i(r))},remove:function(t){return a.removeItem(this._ttlKey(t)),a.removeItem(this._prefix(t)),this},clear:function(){var t,e,n=[],i=a.length;for(t=0;i>t;t++)(e=a.key(t)).match(this.keyMatcher)&&n.push(e.replace(this.keyMatcher,""));for(t=n.length;t--;)this.remove(n[t]);return this},isExpired:function(t){var i=r(a.getItem(this._ttlKey(t)));return e.isNumber(i)&&n()>i?!0:!1}}:{get:e.noop,set:e.noop,remove:e.noop,clear:e.noop,isExpired:e.noop},e.mixin(t.prototype,s),t}(),s=function(){"use strict";function n(e){e=e||{},this.cancelled=!1,this.lastUrl=null,this._send=e.transport?i(e.transport):t.ajax,this._get=e.rateLimiter?e.rateLimiter(this._get):this._get,this._cache=e.cache===!1?new r(0):l}function i(n){return function(i,r){function a(t){e.defer(function(){o.resolve(t)})}function s(t){e.defer(function(){o.reject(t)})}var o=t.Deferred();return n(i,r,a,s),o}}var a=0,s={},o=6,l=new r(10);return n.setMaxPendingRequests=function(t){o=t},n.resetCache=function(){l.reset()},e.mixin(n.prototype,{_get:function(t,e,n){function i(e){n&&n(null,e),c._cache.set(t,e)}function r(){n&&n(!0)}function l(){a--,delete s[t],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var u,c=this;this.cancelled||t!==this.lastUrl||((u=s[t])?u.done(i).fail(r):o>a?(a++,s[t]=this._send(t,e).done(i).fail(r).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(t,n,i){var r;return e.isFunction(n)&&(i=n,n={}),this.cancelled=!1,this.lastUrl=t,(r=this._cache.get(t))?e.defer(function(){i&&i(null,r)}):this._get(t,n,i),!!r},cancel:function(){this.cancelled=!0}}),n}(),o=function(){"use strict";function n(e){e=e||{},e.datumTokenizer&&e.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=e.datumTokenizer,this.queryTokenizer=e.queryTokenizer,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){return{ids:[],children:{}}}function a(t){for(var e={},n=[],i=0,r=t.length;r>i;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function s(t,e){function n(t,e){return t-e}var i=0,r=0,a=[];t=t.sort(n),e=e.sort(n);for(var s=t.length,o=e.length;s>i&&o>r;)t[i]<e[r]?i++:t[i]>e[r]?r++:(a.push(t[i]),i++,r++);return a}return e.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var a,s;a=n.datums.push(t)-1,s=i(n.datumTokenizer(t)),e.each(s,function(t){var e,i,s;for(e=n.trie,i=t.split("");s=i.shift();)e=e.children[s]||(e.children[s]=r()),e.ids.push(a)})})},get:function(t){var n,r,o=this;return n=i(this.queryTokenizer(t)),e.each(n,function(t){var e,n,i,a;if(r&&0===r.length)return!1;for(e=o.trie,n=t.split("");e&&(i=n.shift());)e=e.children[i];return e&&0===n.length?(a=e.ids.slice(0),void(r=r?s(r,a):a)):(r=[],!1)}),r?e.map(a(r),function(t){return o.datums[t]}):[]},reset:function(){this.datums=[],this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function i(t){return t.local||null}function r(i){var r,a;return a={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(r=i.prefetch||null)&&(r=e.isString(r)?{url:r}:r,r=e.mixin(a,r),r.thumbprint=n+r.thumbprint,r.ajax.type=r.ajax.type||"GET",r.ajax.dataType=r.ajax.dataType||"json",!r.url&&t.error("prefetch requires url to be set")),r}function a(n){function i(t){return function(n){return e.debounce(n,t)}}function r(t){return function(n){return e.throttle(n,t)}}var a,s;return s={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(a=n.remote||null)&&(a=e.isString(a)?{url:a}:a,a=e.mixin(s,a),a.rateLimiter=/^throttle$/i.test(a.rateLimitBy)?r(a.rateLimitWait):i(a.rateLimitWait),a.ajax.type=a.ajax.type||"GET",a.ajax.dataType=a.ajax.dataType||"json",delete a.rateLimitBy,delete a.rateLimitWait,!a.url&&t.error("remote requires url to be set")),a}return{local:i,prefetch:r,remote:a}}();!function(n){"use strict";function r(e){e&&(e.local||e.prefetch||e.remote)||t.error("one of local, prefetch, or remote is required"),this.limit=e.limit||5,this.sorter=u(e.sorter),this.dupDetector=e.dupDetector||c,this.local=l.local(e),this.prefetch=l.prefetch(e),this.remote=l.remote(e),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new o({datumTokenizer:e.datumTokenizer,queryTokenizer:e.queryTokenizer}),this.storage=this.cacheKey?new a(this.cacheKey):null}function u(t){function n(e){return e.sort(t)}function i(t){return t}return e.isFunction(t)?n:i}function c(){return!1}var p,d;return p=n.Bloodhound,d={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=r,r.noConflict=function(){return n.Bloodhound=p,r},r.tokenizers=i,e.mixin(r.prototype,{_loadPrefetch:function(e){function n(t){a.clear(),a.add(e.filter?e.filter(t):t),a._saveToStorage(a.index.serialize(),e.thumbprint,e.ttl)}var i,r,a=this;return(i=this._readFromStorage(e.thumbprint))?(this.index.bootstrap(i),r=t.Deferred().resolve()):r=t.ajax(e.url,e.ajax).done(n),r},_getFromRemote:function(t,e){function n(t,n){e(t?[]:a.remote.filter?a.remote.filter(n):n)}var i,r,a=this;if(this.transport)return t=t||"",r=encodeURIComponent(t),i=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,r),this.transport.get(i,this.remote.ajax,n)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(t,e,n){this.storage&&(this.storage.set(d.data,t,n),this.storage.set(d.protocol,location.protocol,n),this.storage.set(d.thumbprint,e,n))},_readFromStorage:function(t){var e,n={};return this.storage&&(n.data=this.storage.get(d.data),n.protocol=this.storage.get(d.protocol),n.thumbprint=this.storage.get(d.thumbprint)),e=n.thumbprint!==t||n.protocol!==location.protocol,n.data&&!e?n.data:null},_initialize:function(){function n(){r.add(e.isFunction(a)?a():a)}var i,r=this,a=this.local;return i=this.prefetch?this._loadPrefetch(this.prefetch):t.Deferred().resolve(),a&&i.done(n),this.transport=this.remote?new s(this.remote):null,this.initPromise=i.promise()},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){this.index.add(t)},get:function(t,n){function i(t){var i=a.slice(0);e.each(t,function(t){var n;return n=e.some(i,function(e){return r.dupDetector(t,e)}),!n&&i.push(t),i.length<r.limit}),n&&n(r.sorter(i))}var r=this,a=[],s=!1;a=this.index.get(t),a=this.sorter(a).slice(0,this.limit),a.length<this.limit?s=this._getFromRemote(t,i):this._cancelLastRemoteRequest(),s||(a.length>0||!this.transport)&&n&&n(a)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&s.resetCache()},ttAdapter:function(){return e.bind(this.get,this)}}),r}(this);var u=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),c=function(){"use strict";var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),e.isMsie()&&e.isMsie()<=7&&e.mixin(t.input,{marginTop:"-1px"}),t}(),p=function(){"use strict";function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i="typeahead:";return e.mixin(n.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(i+t,e)}}),n}(),d=function(){"use strict";function t(t,e,n,i){var r;if(!n)return this;for(e=e.split(l),n=i?o(n,i):n,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(n);return this}function e(e,n,i){return t.call(this,"async",e,n,i)}function n(e,n,i){return t.call(this,"sync",e,n,i)}function i(t){var e;if(!this._callbacks)return this;for(t=t.split(l);e=t.shift();)delete this._callbacks[e];return this}function r(t){var e,n,i,r,s;if(!this._callbacks)return this;for(t=t.split(l),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)r=a(n.sync,this,[e].concat(i)),s=a(n.async,this,[e].concat(i)),r()&&u(s);return this}function a(t,e,n){function i(){for(var i,r=0,a=t.length;!i&&a>r;r+=1)i=t[r].apply(e,n)===!1;return!i}return i}function s(){var t;return t=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)}}function o(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var l=/\s+/,u=s();return{onSync:n,onAsync:e,off:i,trigger:r}}(),h=function(t){"use strict";function n(t,n,i){for(var r,a=[],s=0,o=t.length;o>s;s++)a.push(e.escapeRegExChars(t[s]));return r=i?"\\b("+a.join("|")+")\\b":"("+a.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(r){function a(e){var n,i,a;return(n=o.exec(e.data))&&(a=t.createElement(r.tagName),r.className&&(a.className=r.className),i=e.splitText(n.index),i.splitText(n[0].length),a.appendChild(i.cloneNode(!0)),e.parentNode.replaceChild(a,i)),!!n}function s(t,e){for(var n,i=3,r=0;r<t.childNodes.length;r++)n=t.childNodes[r],n.nodeType===i?r+=e(n)?1:0:s(n,e)}var o;r=e.mixin({},i,r),r.node&&r.pattern&&(r.pattern=e.isArray(r.pattern)?r.pattern:[r.pattern],o=n(r.pattern,r.caseSensitive,r.wordsOnly),s(r.node,a))}}(window.document),f=function(){"use strict";function n(n){var r,a,o,l,u=this;n=n||{},n.input||t.error("input is missing"),r=e.bind(this._onBlur,this),a=e.bind(this._onFocus,this),o=e.bind(this._onKeydown,this),l=e.bind(this._onInput,this),this.$hint=t(n.hint),this.$input=t(n.input).on("blur.tt",r).on("focus.tt",a).on("keydown.tt",o),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop),e.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){s[t.which||t.keyCode]||e.defer(e.bind(u._onInput,u,t))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function r(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function a(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,d,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=s[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var n,i,r;switch(t){case"tab":i=this.getHint(),r=this.getInputValue(),n=i&&i!==r&&!a(e);break;case"up":case"down":n=!a(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!a(e);break;default:n=!0}return n},_checkInputValue:function(){var t,e,n;t=this.getInputValue(),e=r(t,this.query),n=e?this.query.length!==t.length:!1,this.query=t,e?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n,i;t=this.getInputValue(),e=this.getHint(),n=t!==e&&0===e.indexOf(t),i=""!==t&&n&&!this.hasOverflow(),!i&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:document.selection?(i=document.selection.createRange(),i.moveStart("character",-t),t===i.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),m=function(){"use strict";function n(n){n=n||{},n.templates=n.templates||{},n.source||t.error("missing source"),n.name&&!a(n.name)&&t.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||e.getUniqueId(),this.source=n.source,this.displayFn=i(n.display||n.displayKey),this.templates=r(n.templates,this.displayFn),this.$el=t(u.dataset.replace("%CLASS%",this.name))}function i(t){function n(e){return e[t]}return t=t||"value",e.isFunction(t)?t:n}function r(t,n){function i(t){return"<p>"+n(t)+"</p>"}return{empty:t.empty&&e.templatify(t.empty),header:t.header&&e.templatify(t.header),footer:t.footer&&e.templatify(t.footer),suggestion:t.suggestion||i}}function a(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var s="ttDataset",o="ttValue",l="ttDatum";return n.extractDatasetName=function(e){return t(e).data(s)},n.extractValue=function(e){return t(e).data(o)},n.extractDatum=function(e){return t(e).data(l)},e.mixin(n.prototype,d,{_render:function(n,i){function r(){return m.templates.empty({query:n,isEmpty:!0})}function a(){function r(e){var n;return n=t(u.suggestion).append(m.templates.suggestion(e)).data(s,m.name).data(o,m.displayFn(e)).data(l,e),n.children().each(function(){t(this).css(c.suggestionChild)}),n}var a,p;return a=t(u.suggestions).css(c.suggestions),p=e.map(i,r),a.append.apply(a,p),m.highlight&&h({className:"tt-highlight",node:a[0],pattern:n}),a}function p(){return m.templates.header({query:n,isEmpty:!f})}function d(){return m.templates.footer({query:n,isEmpty:!f})}if(this.$el){var f,m=this;this.$el.empty(),f=i&&i.length,!f&&this.templates.empty?this.$el.html(r()).prepend(m.templates.header?p():null).append(m.templates.footer?d():null):f&&this.$el.html(a()).prepend(m.templates.header?p():null).append(m.templates.footer?d():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(t){function e(e){n.canceled||t!==n.query||n._render(t,e)}var n=this;this.query=t,this.canceled=!1,this.source(t,e)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),g=function(){"use strict";function n(n){var r,a,s,o=this;n=n||{},n.menu||t.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=e.map(n.datasets,i),r=e.bind(this._onSuggestionClick,this),a=e.bind(this._onSuggestionMouseEnter,this),s=e.bind(this._onSuggestionMouseLeave,this),this.$menu=t(n.menu).on("click.tt",".tt-suggestion",r).on("mouseenter.tt",".tt-suggestion",a).on("mouseleave.tt",".tt-suggestion",s),e.each(this.datasets,function(t){o.$menu.append(t.getRoot()),t.onSync("rendered",o._onRendered,o)})}function i(t){return new m(t)}return e.mixin(n.prototype,d,{_onSuggestionClick:function(e){this.trigger("suggestionClicked",t(e.currentTarget))},_onSuggestionMouseEnter:function(e){this._removeCursor(),this._setCursor(t(e.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function t(t){return t.isEmpty()}this.isEmpty=e.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(t){var e,n,i,r;if(this.isOpen){if(n=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),i=e.index(n)+t,i=(i+1)%(e.length+1)-1,-1===i)return void this.trigger("cursorRemoved");-1>i&&(i=e.length-1),this._setCursor(r=e.eq(i)),this._ensureVisible(r)}},_ensureVisible:function(t){var e,n,i,r;e=t.position().top,n=e+t.outerHeight(!0),i=this.$menu.scrollTop(),r=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>e?this.$menu.scrollTop(i+e):n>r&&this.$menu.scrollTop(i+(n-r))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:m.extractDatum(t),value:m.extractValue(t),datasetName:m.extractDatasetName(t)}),e},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(t){function n(e){e.update(t)}e.each(this.datasets,n)},empty:function(){function t(t){t.clear()}e.each(this.datasets,t),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function t(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,e.each(this.datasets,t)}}),n}(),v=function(){"use strict";function n(n){var r,a,s;n=n||{},n.input||t.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.$node=i(n.input,n.withHint),r=this.$node.find(".tt-dropdown-menu"),a=this.$node.find(".tt-input"),s=this.$node.find(".tt-hint"),a.on("blur.tt",function(t){var n,i,s;n=document.activeElement,i=r.is(n),s=r.has(n).length>0,e.isMsie()&&(i||s)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){a.focus()}))}),r.on("mousedown.tt",function(t){t.preventDefault()}),this.eventBus=n.eventBus||new p({el:a}),this.dropdown=new g({menu:r,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new f({input:a,hint:s}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(e,n){var i,a,o,l;i=t(e),a=t(u.wrapper).css(c.wrapper),o=t(u.dropdown).css(c.dropdown),l=i.clone().css(c.hint).css(r(i)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),i.data(s,{dir:i.attr("dir"),autocomplete:i.attr("autocomplete"),spellcheck:i.attr("spellcheck"),style:i.attr("style")}),i.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?c.input:c.inputWithNoHint);try{!i.attr("dir")&&i.attr("dir","auto")}catch(p){}return i.wrap(a).parent().prepend(n?l:null).append(o)}function r(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function a(t){var n=t.find(".tt-input");e.each(n.data(s),function(t,i){e.isUndefined(t)?n.removeAttr(i):n.attr(i,t)}),n.detach().removeData(s).removeClass("tt-input").insertAfter(t),t.remove()}var s="ttAttrs";return e.mixin(n.prototype,{_onSuggestionClicked:function(t,e){var n;(n=this.dropdown.getDatumForSuggestion(e))&&this._select(n)},_onCursorMoved:function(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(t,e){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),e.preventDefault()):this.autoselect&&i&&(this._select(i),e.preventDefault())},_onTabKeyed:function(t,e){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,n,i,r,a,s;t=this.dropdown.getDatumForTopSuggestion(),t&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=f.normalizeQuery(n),r=e.escapeRegExChars(i),a=new RegExp("^(?:"+r+")(.+$)","i"),s=a.exec(t.value),s?this.input.setHint(n+s[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,n,i,r;e=this.input.getHint(),n=this.input.getQuery(),i=t||this.input.isCursorAtEnd(),e&&n!==e&&i&&(r=this.dropdown.getDatumForTopSuggestion(),r&&this.input.setInputValue(r.value),this.eventBus.trigger("autocompleted",r.raw,r.datasetName))},_select:function(t){this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),e.defer(e.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=e.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),a(this.$node),this.$node=null}}),n}();!function(){"use strict";
var n,i,r;n=t.fn.typeahead,i="ttTypeahead",r={initialize:function(n,r){function a(){var a,s,o=t(this);e.each(r,function(t){t.highlight=!!n.highlight}),s=new v({input:o,eventBus:a=new p({el:o}),withHint:e.isUndefined(n.hint)?!0:!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:r}),o.data(i,s)}return r=e.isArray(r)?r:[].slice.call(arguments,1),n=n||{},this.each(a)},open:function(){function e(){var e,n=t(this);(e=n.data(i))&&e.open()}return this.each(e)},close:function(){function e(){var e,n=t(this);(e=n.data(i))&&e.close()}return this.each(e)},val:function(e){function n(){var n,r=t(this);(n=r.data(i))&&n.setVal(e)}function r(t){var e,n;return(e=t.data(i))&&(n=e.getVal()),n}return arguments.length?this.each(n):r(this.first())},destroy:function(){function e(){var e,n=t(this);(e=n.data(i))&&(e.destroy(),n.removeData(i))}return this.each(e)}},t.fn.typeahead=function(e){var n;return r[e]&&"initialize"!==e?(n=this.filter(function(){return!!t(this).data(i)}),r[e].apply(n,[].slice.call(arguments,1))):r.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this}}()}(window.jQuery),Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var a,s,o=[];for(a in r)t.call(r,a)&&o.push(a);if(e)for(s=0;i>s;s++)t.call(r,n[s])&&o.push(n[s]);return o}}());var EveSRP;EveSRP||(EveSRP={}),EveSRP.util={capitalize:function(t){var e=t.substr(0,1).toUpperCase();return e+=t.slice(1)},monthAbbr:function(t){switch(t){case 0:return"Jan";case 1:return"Feb";case 2:return"Mar";case 3:return"Apr";case 4:return"May";case 5:return"Jun";case 6:return"Jul";case 7:return"Aug";case 8:return"Sep";case 9:return"Oct";case 10:return"Nov";case 11:return"Dec"}},padNum:function(t,e){for(t+="";t.length<e;)t=0+t;return t},statusColor:function(t){switch(t){case"evaluating":return"warning";case"approved":return"info";case"paid":return"success";case"incomplete":case"rejected":return"danger";default:return""}},pageNumbers:function(t,e,n){void 0===n&&(n={left_edge:2,left_current:2,right_current:5,right_edge:2});for(var i=[],r=0;t>r;++r)r<n.left_edge?i.push(r):e-n.left_current-1<r&&r<e+n.right_current?i.push(r):t-n.right_edge-1<r?i.push(r):null!==i[i.length-1]&&i.push(null);return i},getAttributeChoices:function(t){if("status"===t){var e=["evaluating","approved","rejected","incomplete","paid"];return $.Deferred().resolve({key:"status",status:e})}return"details"===t?$.Deferred().resolve({key:"details",details:null}):$.ajax({type:"GET",url:$SCRIPT_ROOT+"/api/filter/"+t+"/"})},trimEmpty:function(t){var e=t.slice(0);return""===e[0]&&(e=e.slice(1)),""===e.slice(-1)[0]&&(e=e.slice(0,-1)),e},splitFilterString:function(t){var e=t.split("/"),n=["page","division","alliance","corporation","pilot","system","constellation","region","ship","status","details","sort","payout","base_payout","submit_timestamp","kill_timestamp"],i=[];for(e=this.trimEmpty(e),e.reverse();e.length>0&&-1===$.inArray(e.slice(-1)[0],n);)i.push(e.pop());return e.reverse(),[i.join("/"),e.join("/")]},parseFilterString:function(t){var e,n,i,r,a={};if(_.defaults(a,{page:1,sort:"-submit_timestamp"}),void 0===t||""===t)return a;if(e=t.split("/"),e=this.trimEmpty(e),e.length%2!==0)return a;for(n=0;n<e.length;n+=2)i=e[n].toLowerCase(),r=decodeURIComponent(e[n+1]),i in a||(a[i]=[]),"details"===i?a.details=_(a[i]).union(r):"page"===i?a.page=parseInt(r,10):"sort"===i?a.sort=r:-1!==r.indexOf(",")?(r=r.split(","),a[i]=_(a[i]).union(r)):a[i]=_(a[i]).union([r]);return a},unparseFilters:function(t){var e,n=[];return e=Object.keys(t),e.sort(),$.each(e,function(e,i){var r=t[i];"details"===i?$.each(r,function(t,e){n.push("details/"+e)}):"page"===i?n.push("page/"+r):"sort"===i?n.push("sort/"+r):r.length>0&&(r.sort(),n.push(i+"/"+r.join(",")))}),n.join("/")},keyDifference:function(t,e){var n,i,r=_.union(_.keys(t),_.keys(e)),a=[];for(n=0;n<r.length;n++)i=r[n],"_keys"!==i&&("page"!==i&&(i in t&&_.isEmpty(t[i])&&(delete t[i],i in e||r.splice(n--,1)),i in e&&_.isEmpty(e[i])&&(delete e[i],i in t||r.splice(n--,1))),i in t&&i in e?_.isEqual(t[i],e[i])||a.push(i):a.push(i));return a}},Handlebars.registerHelper("csrf",function(){return $("meta[name='csrf_token']").attr("content")}),Handlebars.registerHelper("capitalize",function(t){return EveSRP.util.capitalize(t)}),Handlebars.registerHelper("datefmt",function(t){return"string"==typeof t&&(t=new Date(t)),[EveSRP.util.padNum(t.getUTCDate(),2),EveSRP.util.monthAbbr(t.getUTCMonth()),t.getUTCFullYear()].join(" ")}),Handlebars.registerHelper("timefmt",function(t){return"string"==typeof t&&(t=new Date(t)),[EveSRP.util.padNum(t.getUTCHours(),2),EveSRP.util.padNum(t.getUTCMinutes(),2)].join(":")}),Handlebars.registerHelper("status_color",function(t){return EveSRP.util.statusColor(t)}),Handlebars.registerHelper("compare",function(t,e,n){var i=n.hash.operator||"===",r={"==":function(t,e){return t==e},"!=":function(t,e){return t!=e},"===":function(t,e){return t===e},"!==":function(t,e){return t!==e},"<":function(t,e){return e>t},">":function(t,e){return t>e},"<=":function(t,e){return e>=t},">=":function(t,e){return t>=e},"in":function(t,e){return t in e}},a=r[i](t,e);return a?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("count",function(t){return t.length}),Handlebars.registerHelper("transformed",function(t,e){return _.has(t.transformed,e)?new Handlebars.SafeString('<a href="'+t.transformed[e]+'" target="_blank">'+t[e]+' <i class="fa fa-external-link"></i></a>'):t[e]}),function(){var t=Handlebars.template,e=Handlebars.templates=Handlebars.templates||{};e.action_menu=t({1:function(t,e,n,i){var r,a,s="function",o=this.escapeExpression,l=e.helperMissing,u="\n  ";return r=e["if"].call(t,null==i||i===!1?i:i.first,{name:"if",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),(r||0===r)&&(u+=r),u+='\n  <li>\n    <a href="#" id="'+o(typeof t===s?t.apply(t):t)+'">'+o((a=e.capitalize||t&&t.capitalize||l,a.call(t,t,{name:"capitalize",hash:{},data:i})))+"</a>\n  </li>\n",r=e["if"].call(t,null==i||i===!1?i:i.last,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),(r||0===r)&&(u+=r),u+"\n"},2:function(){return'\n<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n  <span class="caret"></span>\n  <span class="sr-only">Toggle Dropdown</span>\n</button>\n<ul class="dropdown-menu" role="menu">\n  '},4:function(){return"\n</ul>\n"},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a='<button type="submit" id="comment" class="btn btn-default">Comment</button>\n';return r=e.each.call(t,t&&t.valid_actions,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),(r||0===r)&&(a+=r),a+"\n"},useData:!0}),e.actions=t({1:function(t,e,n,i){var r,a,s=e.helperMissing,o="function",l=this.escapeExpression,u='\n<div class="list-group-item">\n  ';return a=e.status_color||t&&t.status_color||s,r=a.call(t,t&&t.type,{name:"status_color",hash:{},data:i}),r=e["if"].call(t,r,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),(r||0===r)&&(u+=r),u+'\n  <blockquote class="list-group-item-text">\n    <p>'+l((a=e.note||t&&t.note,typeof a===o?a.call(t,{name:"note",hash:{},data:i}):a))+"</p>\n    <footer>"+l((r=t&&t.user,r=null==r||r===!1?r:r.name,typeof r===o?r.apply(t):r))+" ("+l((a=e.datefmt||t&&t.datefmt||s,a.call(t,t&&t.timestamp,{name:"datefmt",hash:{},data:i})))+" @ "+l((a=e.timefmt||t&&t.timefmt||s,a.call(t,t&&t.timestamp,{name:"timefmt",hash:{},data:i})))+")</footer>\n  </blockquote>\n</div>\n"},2:function(t,e,n,i){var r,a=e.helperMissing,s=this.escapeExpression;return'\n  <h4 class="list-group-item-heading text-'+s((r=e.status_color||t&&t.status_color||a,r.call(t,t&&t.type,{name:"status_color",hash:{},data:i})))+'">'+s((r=e.capitalize||t&&t.capitalize||a,r.call(t,t&&t.type,{name:"capitalize",hash:{},data:i})))+"</h4>\n  "},4:function(){return'\n  <h4 class="list-group-item-heading"></h4>\n  '},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a="";return r=e.each.call(t,t&&t.actions,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),(r||0===r)&&(a+=r),a+"\n"},useData:!0}),e.api_keys=t({1:function(t,e,n,i){var r,a="function",s=this.escapeExpression,o=e.helperMissing;return'\n<tr>\n  <td class="key-button">\n    <button class="btn btn-default btn-sm copy-btn" data-clipboard-text="'+s((r=e.key||t&&t.key,typeof r===a?r.call(t,{name:"key",hash:{},data:i}):r))+'">'+s((r=e.key||t&&t.key,typeof r===a?r.call(t,{name:"key",hash:{},data:i}):r))+"</button>\n  </td>\n  <td>"+s((r=e.datefmt||t&&t.datefmt||o,r.call(t,t&&t.timestamp,{name:"datefmt",hash:{},data:i})))+" @ "+s((r=e.timefmt||t&&t.timefmt||o,r.call(t,t&&t.timestamp,{name:"timefmt",hash:{},data:i})))+'</td>\n  <td>\n    <form method="post">\n      <input id="csrf_token" name="csrf_token" type="hidden" value="'+s(e.csrf.call(t,{name:"csrf",hash:{},data:i}))+'">\n      <input id="action" name="action" type="hidden" value="delete">\n      <input id="key_id" name="key_id" type="hidden" value="'+s((r=e.id||t&&t.id,typeof r===a?r.call(t,{name:"id",hash:{},data:i}):r))+'">\n      <button type="submit" class="close">&times;</button>\n    </form>\n  </td>\n</tr>\n'},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a="";return r=e.each.call(t,t&&t.api_keys,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),(r||0===r)&&(a+=r),a+"\n"},useData:!0}),e.entity_table=t({1:function(t,e,n,i,r){var a,s="function",o=this.escapeExpression,l="\n  <tr>\n    <td>"+o((a=t&&t.name,typeof a===s?a.apply(t):a))+"</td>\n    ";return a=e["if"].call(t,t&&t.length,{name:"if",hash:{},fn:this.program(2,i),inverse:this.program(4,i),data:i}),(a||0===a)&&(l+=a),l+"\n    <td>"+o((a=t&&t.source,typeof a===s?a.apply(t):a))+'</td>\n    <td>\n      <form method="post">\n        <input id="csrf_token" name="csrf_token" type="hidden" value="'+o(e.csrf.call(t,{name:"csrf",hash:{},data:i}))+'">\n        <input id="id_" name="id_" type="hidden" value="'+o((a=t&&t.id,typeof a===s?a.apply(t):a))+'">\n        <input id="permission" name="permission" type="hidden" value="'+o((a=r&&r.name,typeof a===s?a.apply(t):a))+'">\n        <input id="action" name="action" type="hidden" value="delete">\n        <input id="form_id" name="form_id" type="hidden" value="entity">\n        <button class="close" type="submit">&times;</button>\n      </form>\n  </tr>\n  '},2:function(t){var e,n="function",i=this.escapeExpression;return"\n    <td>Group ("+i((e=t&&t.length,typeof e===n?e.apply(t):e))+")</td>\n    "},4:function(){return"\n    <td>User</td>\n    "},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a='<table class="table table-condensed">\n  <tr>\n    <th>Name</th>\n    <th>Type</th>\n    <th>Authentication Source</th>\n    <th>Remove</th>\n  </tr>\n  ';return r=e.each.call(t,t&&t.entities,{name:"each",hash:{},fn:this.programWithDepth(1,i,t),inverse:this.noop,data:i}),(r||0===r)&&(a+=r),a+"\n</table>\n"},useData:!0}),e.filter_suggestion=t({1:function(){return"\n"},3:function(t,e,n,i){var r,a,s=e.helperMissing,o=' <small class="text-muted">\n';return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.sign,"-",{name:"compare",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),(r||0===r)&&(o+=r),o+"\n"},4:function(){return"\nnot</small>\n"},6:function(t,e,n,i){var r,a,s=e.helperMissing,o=" ";return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.sign,"<",{name:"compare",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),(r||0===r)&&(o+=r),o+"\n"},7:function(){return"\nbefore</small>\n"},9:function(t,e,n,i){var r,a,s=e.helperMissing,o=" ";return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.sign,">",{name:"compare",hash:{},fn:this.program(10,i),inverse:this.noop,data:i}),(r||0===r)&&(o+=r),o+"\n"},10:function(){return"\nafter</small>\n"},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a,s=e.helperMissing,o="function",l=this.escapeExpression,u="<p>\n";return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.sign,"=",{name:"compare",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),(r||0===r)&&(u+=r),u+"\n"+l((a=e.real_value||t&&t.real_value,typeof a===o?a.call(t,{name:"real_value",hash:{},data:i}):a))+' <small class="text-muted text-right">'+l((a=e.attr||t&&t.attr,typeof a===o?a.call(t,{name:"attr",hash:{},data:i}):a))+"</small></p>\n"},useData:!0}),e.flash=t({1:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return'\n  <div class="alert alert-dismissable fade in alert-success" id="flash-'+s((r=e.id||t&&t.id,typeof r===a?r.call(t,{name:"id",hash:{},data:i}):r))+'">\n'},3:function(t,e,n,i){var r,a,s=e.helperMissing,o="\n  ";return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.category,"warning",{name:"compare",hash:{},fn:this.program(4,i),inverse:this.program(6,i),data:i}),(r||0===r)&&(o+=r),o+"\n"},4:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return'\n    <div class="alert alert-dismissable fade in alert-warning" id="flash-'+s((r=e.id||t&&t.id,typeof r===a?r.call(t,{name:"id",hash:{},data:i}):r))+'">\n  '},6:function(t,e,n,i){var r,a,s=e.helperMissing,o="\n    ";return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.category,"error",{name:"compare",hash:{},fn:this.program(7,i),inverse:this.program(9,i),data:i}),(r||0===r)&&(o+=r),o+"\n  "},7:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return'\n      <div class="alert alert-dismissable fade in alert-danger" id="flash-'+s((r=e.id||t&&t.id,typeof r===a?r.call(t,{name:"id",hash:{},data:i}):r))+'">\n    '},9:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return'\n      <div class="alert alert-dismissable fade in alert-info" id="flash-'+s((r=e.id||t&&t.id,typeof r===a?r.call(t,{name:"id",hash:{},data:i}):r))+'">\n    '},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a,s=e.helperMissing,o="function",l=this.escapeExpression,u="";return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.category,"message",{name:"compare",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),(r||0===r)&&(u+=r),u+'\n  <button type="button" class="close" data-dismiss="alert">&times;</button>\n  '+l((a=e.message||t&&t.message,typeof a===o?a.call(t,{name:"message",hash:{},data:i}):a))+"\n</div>\n"},useData:!0}),e.modifier=t({1:function(){return'\n<div class="panel panel-danger">\n'},3:function(){return'\n<div class="panel panel-success">\n'},5:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return'\n    <div class="panel-body">\n      '+s((r=e.note||t&&t.note,typeof r===a?r.call(t,{name:"note",hash:{},data:i}):r))+"\n    </div>\n    "},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a,s=e.helperMissing,o="function",l=this.escapeExpression,u="";return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.value,0,{name:"compare",hash:{operator:"<"},fn:this.program(1,i),inverse:this.program(3,i),data:i}),(r||0===r)&&(u+=r),u+='\n  <div class="panel-heading" data-toggle="collapse" data-target="#modifier'+l((a=e.id||t&&t.id,typeof a===o?a.call(t,{name:"id",hash:{},data:i}):a))+'">\n    <h4 class="panel-title">'+l((a=e.value_str||t&&t.value_str,typeof a===o?a.call(t,{name:"value_str",hash:{},data:i}):a))+'</h4>\n  </div>\n  <div id="modifier'+l((a=e.id||t&&t.id,typeof a===o?a.call(t,{name:"id",hash:{},data:i}):a))+'" class="collapse in">\n    ',r=e["if"].call(t,t&&t.note,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),(r||0===r)&&(u+=r),u+'\n    <div class="panel-footer">\n      '+l((r=t&&t.user,r=null==r||r===!1?r:r.name,typeof r===o?r.apply(t):r))+" at "+l((a=e.timefmt||t&&t.timefmt||s,a.call(t,t&&t.timestamp,{name:"timefmt",hash:{},data:i})))+" "+l((a=e.datefmt||t&&t.datefmt||s,a.call(t,t&&t.timestamp,{name:"datefmt",hash:{},data:i})))+"\n    </div>\n  </div>\n</div>\n"},useData:!0}),e.payout_panel=t({1:function(t,e,n,i){var r,a='\n        <dt>Modifiers</dt>\n        <dd>\n          <a class="small-popover" data-toggle="popover" data-trigger="focus" data-content="\n            <ul>\n              ';return r=e.each.call(t,t&&t.modifiers,{name:"each",hash:{},fn:this.program(2,i),inverse:this.noop,data:i}),(r||0===r)&&(a+=r),a+'\n          </ul>" data-html="true" data-container="body" href="#" tabindex="0">Modifiers</a>\n        </dd>\n        '},2:function(t,e,n,i){var r,a="\n              ";return r=e.unless.call(t,t&&t["void"],{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),(r||0===r)&&(a+=r),a+"\n              "},3:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return"\n              <li>"+s((r=e.value_str||t&&t.value_str,typeof r===a?r.call(t,{name:"value_str",hash:{},data:i}):r))+"</li>\n              "},5:function(){return'\n            <button class="btn btn-success btn-xs paid-btn" type="submit">Mark Paid</button>\n            '},7:function(){return'\n            <button class="btn btn-success btn-xs paid-btn" type="submit" disabled>Mark Paid</button>\n            '},9:function(t,e,n,i){var r,a,s=e.helperMissing,o="\n    ";return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.type,"comment",{name:"compare",hash:{operator:"!=="},fn:this.program(10,i),inverse:this.noop,data:i}),(r||0===r)&&(o+=r),o+"\n    "},10:function(t,e,n,i){var r,a,s=e.helperMissing,o=this.escapeExpression,l="function",u='\n    <tr class="'+o((a=e.status_color||t&&t.status_color||s,a.call(t,t&&t.type,{name:"status_color",hash:{},data:i})))+'">\n      <td>'+o((a=e.capitalize||t&&t.capitalize||s,a.call(t,t&&t.type,{name:"capitalize",hash:{},data:i})))+"</td>\n      <td>"+o((r=t&&t.user,r=null==r||r===!1?r:r.name,typeof r===l?r.apply(t):r))+"</td>\n      ";return r=e["if"].call(t,t&&t.note,{name:"if",hash:{},fn:this.program(11,i),inverse:this.program(13,i),data:i}),(r||0===r)&&(u+=r),u+"\n      <td>"+o((a=e.timestamp||t&&t.timestamp,typeof a===l?a.call(t,{name:"timestamp",hash:{},data:i}):a))+"</td>\n    </tr>\n    "},11:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return'\n      <td>\n        <a class="small-popover" data-toggle="popover" data-trigger="focus" data-content="'+s((r=e.note||t&&t.note,typeof r===a?r.call(t,{name:"note",hash:{},data:i}):r))+'" href="#" tabindex="0">Comment</a></td>\n      </td>\n      '},13:function(){return"\n      <td></td>\n      "},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a,s=e.helperMissing,o=this.escapeExpression,l="function",u='<div class="panel panel-'+o((a=e.status_color||t&&t.status_color||s,a.call(t,t&&t.status,{name:"status_color",hash:{},data:i})))+'" data-request-id="'+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+'" id="request-'+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+'">\n  <div class="panel-heading">\n    <span class="panel-title">\n      <a href="'+o((a=e.href||t&&t.href,typeof a===l?a.call(t,{name:"href",hash:{},data:i}):a))+'">Request #'+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+'</a>\n    </span>\n  </div>\n  <div class="panel-body">\n    <div class="row">\n      <dl class="col-sm-6 dl-horizontal">\n        <dt>External Lossmail</dt>\n        <dd><a href="'+o((a=e.killmail_url||t&&t.killmail_url,typeof a===l?a.call(t,{name:"killmail_url",hash:{},data:i}):a))+'" target="_blank">'+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+' <i class="fa fa-external-link"></i></a></dd>\n        <dt>Details</dt>\n        <dd>\n          <a class="small-popover" data-toggle="popover" data-trigger="focus" data-content="'+o((a=e.details||t&&t.details,typeof a===l?a.call(t,{name:"details",hash:{},data:i}):a))+'" data-container="body" href="#" tabindex="0">Details</a>\n        </dd>\n        <dt>Ship</dt>\n        <dd>'+o((a=e.transformed||t&&t.transformed||s,a.call(t,t,"ship",{name:"transformed",hash:{},data:i})))+"</dd>\n        ";return r=e["if"].call(t,t&&t.modifiers,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),(r||0===r)&&(u+=r),u+='\n        <dt>Actions</dt>\n        <dd><a class="null-link" data-toggle="collapse" data-parent="#requests" href="#" data-target="#actions-'+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+'">'+o((a=e.count||t&&t.count||s,a.call(t,t&&t.actions,{name:"count",hash:{},data:i})))+'</a></dd>\n      </dl>\n      <dl class="col-sm-6 dl-horizontal spaced">\n        <dt>Division</dt>\n        <dd>'+o((r=t&&t.division,r=null==r||r===!1?r:r.name,typeof r===l?r.apply(t):r))+'</dd>\n        <dt>Pilot</dt>\n        <dd>\n          <button class="btn btn-default btn-xs copy-btn" data-clipboard-text="'+o((r=t&&t.pilot,r=null==r||r===!1?r:r.name,typeof r===l?r.apply(t):r))+'" data-toggle="tooltip" title="Copy \''+o((r=t&&t.pilot,r=null==r||r===!1?r:r.name,typeof r===l?r.apply(t):r))+"' to clipboard\">"+o((r=t&&t.pilot,r=null==r||r===!1?r:r.name,typeof r===l?r.apply(t):r))+'</button>\n        </dd>\n        <dt>Payout</dt>\n        <dd>\n          <button class="btn btn-default btn-xs copy-btn" data-clipboard-text="'+o((a=e.payout_str||t&&t.payout_str,typeof a===l?a.call(t,{name:"payout_str",hash:{},data:i}):a))+'" data-toggle="tooltip" title="Copy \''+o((a=e.payout_str||t&&t.payout_str,typeof a===l?a.call(t,{name:"payout_str",hash:{},data:i}):a))+"' to clipboard\">"+o((a=e.payout_str||t&&t.payout_str,typeof a===l?a.call(t,{name:"payout_str",hash:{},data:i}):a))+'</button>\n        </dd>\n        <dt>Reason</dt>\n        <dd>\n          <button class="btn btn-default btn-xs copy-btn" data-clipboard-text="Payment for '+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+'" data-toggle="tooltip" title="Copy \'Payment for '+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+"' to clipboard\">Payment for "+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+'</button>\n        </dd>\n        <dt></dt>\n        <dd>\n          <form method="post" action="'+o((a=e.href||t&&t.href,typeof a===l?a.call(t,{name:"href",hash:{},data:i}):a))+'">\n            <input id="id_" name="id_" type="hidden" value="action">\n            <input id="type_" name="type_" type="hidden" value="paid">\n            <input id="csrf_token" name="csrf_token" type="hidden" value="'+o(e.csrf.call(t,{name:"csrf",hash:{},data:i}))+'">\n            ',a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.status,"approved",{name:"compare",hash:{},fn:this.program(5,i),inverse:this.program(7,i),data:i}),(r||0===r)&&(u+=r),u+='\n          </form>\n        </dd>\n      </dl>\n    </div>\n  </div>\n  <table class="table collapse" id="actions-'+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+'">\n    <tr>\n      <th>Actions</th>\n      <th>User</th>\n      <th></th>\n      <th>Timestamp</th>\n    </tr>\n    ',r=e.each.call(t,t&&t.actions,{name:"each",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),(r||0===r)&&(u+=r),u+"\n  </table>\n</div>\n"},useData:!0}),e.request_rows=t({1:function(t,e,n,i){var r,a,s=e.helperMissing,o=this.escapeExpression,l="function";return'\n<tr class="'+o((a=e.status_color||t&&t.status_color||s,a.call(t,t&&t.status,{name:"status_color",hash:{},data:i})))+'">\n  <td data-attribute="id"><a href="'+o((a=e.href||t&&t.href,typeof a===l?a.call(t,{name:"href",hash:{},data:i}):a))+'">'+o((a=e.id||t&&t.id,typeof a===l?a.call(t,{name:"id",hash:{},data:i}):a))+'</a></td>\n  <td class="filterable" data-attribute="pilot"><a href="#">'+o((r=t&&t.pilot,r=null==r||r===!1?r:r.name,typeof r===l?r.apply(t):r))+'</a></td>\n  <td class="filterable" data-attribute="ship"><a href="#">'+o((a=e.ship||t&&t.ship,typeof a===l?a.call(t,{name:"ship",hash:{},data:i}):a))+'</a></td>\n  <td class="filterable" data-attribute="system"><a href="#">'+o((a=e.system||t&&t.system,typeof a===l?a.call(t,{name:"system",hash:{},data:i}):a))+'</a></td>\n  <td class="filterable" data-attribute="status"><a href="#">'+o((a=e.capitalize||t&&t.capitalize||s,a.call(t,t&&t.status,{name:"capitalize",hash:{},data:i})))+'</a></td>\n  <td data-attribute="payout">'+o((a=e.payout_str||t&&t.payout_str,typeof a===l?a.call(t,{name:"payout_str",hash:{},data:i}):a))+'</td>\n  <td data-attribute="submit_timestamp">'+o((a=e.datefmt||t&&t.datefmt||s,a.call(t,t&&t.submit_timestamp,{name:"datefmt",hash:{},data:i})))+" @ "+o((a=e.timefmt||t&&t.timefmt||s,a.call(t,t&&t.submit_timestamp,{name:"timefmt",hash:{},data:i})))+'</td>\n  <td class="filterable" data-attribute="division"><a href="#">'+o((r=t&&t.division,r=null==r||r===!1?r:r.name,typeof r===l?r.apply(t):r))+"</a></td>\n</tr>\n"},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a="";return r=e.each.call(t,t,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),(r||0===r)&&(a+=r),a+"\n"},useData:!0}),e.typeahead_empty=t({compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return'<div class="tt-suggestion">\n  No users or groups with names containing \''+s((r=e.query||t&&t.query,typeof r===a?r.call(t,{name:"query",hash:{},data:i}):r))+"' found.\n</div>\n"},useData:!0}),e.typeahead_suggestion=t({compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return s((r=e.name||t&&t.name,typeof r===a?r.call(t,{name:"name",hash:{},data:i}):r))+' <small class="text-muted text-right">'+s((r=e.type||t&&t.type,typeof r===a?r.call(t,{name:"type",hash:{},data:i}):r))+" from "+s((r=e.source||t&&t.source,typeof r===a?r.call(t,{name:"source",hash:{},data:i}):r))+"</small>\n"},useData:!0}),e.voidable_modifier=t({1:function(){return'\n<div class="panel panel-danger">\n'},3:function(){return'\n<div class="panel panel-success">\n'},5:function(t,e,n,i){var r,a="function",s=this.escapeExpression;return'\n    <div class="panel-body">\n      '+s((r=e.note||t&&t.note,typeof r===a?r.call(t,{name:"note",hash:{},data:i}):r))+"\n    </div>\n    "},compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a,s=e.helperMissing,o="function",l=this.escapeExpression,u="";return a=e.compare||t&&t.compare||s,r=a.call(t,t&&t.value,0,{name:"compare",hash:{operator:"<"},fn:this.program(1,i),inverse:this.program(3,i),data:i}),(r||0===r)&&(u+=r),u+='\n  <div class="panel-heading" data-toggle="collapse" data-target="#modifier'+l((a=e.id||t&&t.id,typeof a===o?a.call(t,{name:"id",hash:{},data:i}):a))+'">\n    <form class="form" method="post">\n      <input id="csrf_token" name="csrf_token" type="hidden" value="'+l(e.csrf.call(t,{name:"csrf",hash:{},data:i}))+'">\n      <input id="id_" name="id_" type="hidden" value="void">\n      <input id="modifier_id_'+l((a=e.id||t&&t.id,typeof a===o?a.call(t,{name:"id",hash:{},data:i}):a))+'" name="modifier_id" type="hidden" value="'+l((a=e.id||t&&t.id,typeof a===o?a.call(t,{name:"id",hash:{},data:i}):a))+'">\n      <button class="close" type="submit" name="void_modifier">&times;</button>\n    </form>\n    <h4 class="panel-title">'+l((a=e.value_str||t&&t.value_str,typeof a===o?a.call(t,{name:"value_str",hash:{},data:i}):a))+'</h4>\n  </div>\n  <div id="modifier'+l((a=e.id||t&&t.id,typeof a===o?a.call(t,{name:"id",hash:{},data:i}):a))+'" class="collapse in">\n    ',r=e["if"].call(t,t&&t.note,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),(r||0===r)&&(u+=r),u+'\n    <div class="panel-footer">\n      '+l((r=t&&t.user,r=null==r||r===!1?r:r.name,typeof r===o?r.apply(t):r))+" at "+l((a=e.datefmt||t&&t.datefmt||s,a.call(t,t&&t.timestamp,{name:"datefmt",hash:{},data:i})))+" "+l((a=e.timefmt||t&&t.timefmt||s,a.call(t,t&&t.timestamp,{name:"timefmt",hash:{},data:i})))+"\n    </div>\n  </div>\n</div>\n"},useData:!0}),e.voided_modifier=t({compiler:[5,">= 2.0.0"],main:function(t,e,n,i){var r,a,s="function",o=this.escapeExpression,l=e.helperMissing;return'<div class="panel panel-default">\n  <div class="panel-heading" data-toggle="collapse" data-target="#modifier'+o((a=e.id||t&&t.id,typeof a===s?a.call(t,{name:"id",hash:{},data:i}):a))+'">\n    <del><h4 class="panel-title">'+o((a=e.value_str||t&&t.value_str,typeof a===s?a.call(t,{name:"value_str",hash:{},data:i}):a))+'</h4></del>\n  </div>\n  <div id="modifier'+o((a=e.id||t&&t.id,typeof a===s?a.call(t,{name:"id",hash:{},data:i}):a))+'" class="collapse">\n    <div class="panel-body">\n      <del>\n        '+o((a=e.note||t&&t.note,typeof a===s?a.call(t,{name:"note",hash:{},data:i}):a))+" (voided by "+o((r=t&&t["void"],r=null==r||r===!1?r:r.user,r=null==r||r===!1?r:r.name,typeof r===s?r.apply(t):r))+" at "+o((a=e.datefmt||t&&t.datefmt||l,a.call(t,(r=t&&t["void"],null==r||r===!1?r:r.timestamp),{name:"datefmt",hash:{},data:i})))+" "+o((a=e.timefmt||t&&t.timefmt||l,a.call(t,(r=t&&t["void"],null==r||r===!1?r:r.timestamp),{name:"timefmt",hash:{},data:i})))+')\n      </del>\n    </div>\n    <div class="panel-footer">\n      '+o((r=t&&t.user,r=null==r||r===!1?r:r.name,typeof r===s?r.apply(t):r))+" at "+o((a=e.timefmt||t&&t.timefmt||l,a.call(t,t&&t.timestamp,{name:"timefmt",hash:{},data:i})))+" "+o((a=e.datefmt||t&&t.datefmt||l,a.call(t,t&&t.timestamp,{name:"datefmt",hash:{},data:i})))+"\n    </div>\n  </div>\n</div>\n"},useData:!0})}();var EveSRP;EveSRP||(EveSRP={}),"ui"in EveSRP||(EveSRP.ui={}),EveSRP.ui.renderFlashes=function(t){var e=$("#content"),n=t.flashed_messages;for(index in n){var i,r=_.random(1e4),a=n[index];a.id=r,i=Handlebars.templates.flash(n[index]),e.prepend(i),window.setTimeout(function(){$("#flash-"+r).alert("close")},5e3)}},EveSRP.ui.renderNavbar=function(t){var e=t.nav_counts;_.each(e,function(t,e){var n=$("#badge-"+e);n.text(0!=t?t:"")})},EveSRP.ui.setupEvents=function(){$(document).ajaxComplete(function(t,e){var n=e.responseJSON;n&&"flashed_messages"in n&&EveSRP.ui.renderFlashes(e.responseJSON),n&&"nav_counts"in n&&EveSRP.ui.renderNavbar(e.responseJSON)})},EveSRP.ui.setupEvents(),EveSRP.ui.setupClipboard=function(){ZeroClipboard.config({moviePath:$SCRIPT_ROOT+"/static/ZeroClipboard.swf"}),EveSRP.ui.clipboardClient=new ZeroClipboard($(".copy-btn"))};var EveSRP;EveSRP||(EveSRP={}),"ui"in EveSRP||(EveSRP.ui={}),EveSRP.ui.request={render:function(t){var e,n=$("#actionMenu"),i=$("#actionList"),r=$("#request-status"),a=$("#modifierList"),s=$("#request-details"),o=$("#request-payout"),l=$("#request-division"),u=$(".evaluating-only");n.empty(),n.append(Handlebars.templates.action_menu(t)),i.empty(),i.append(Handlebars.templates.actions(t)),r.removeClass("label-warning label-info label-success label-danger"),r.addClass("label-"+EveSRP.util.statusColor(t.status)),r.text(EveSRP.util.capitalize(t.status)),e=$.map(t.modifiers,function(e){return e["void"]?Handlebars.templates.voided_modifier(e):"evaluating"===t.status&&-1!==t.valid_actions.indexOf("approved")?Handlebars.templates.voidable_modifier(e):Handlebars.templates.modifier(e)}),a.empty(),a.append(e),s.text(t.details),o.tooltip("destroy"),o.tooltip({title:"Base Payout: "+t.base_payout_str,placement:"right"}),o.text(t.payout_str),"evaluating"===t.status?u.prop("disabled",!1):u.prop("disabled",!0),l.text(t.division.name),_.each(t.transformed,function(e,n){var i,a;i="status"===n?r:$("#"+n),a="pilot"===n?t.pilot.name:t[n],i.html('<a href="'+e+'" target="_blank">'+a+' <i class="fa fa-external-link"></i></a>')})},submitAction:function(t){var e=$(t.target),n=e.closest("form");return"A"!==e.prop("nodeName")&&e.hasClass("dropdown-toggle")?!0:(n.find("input[name='type_']").attr("value",e.attr("id")),$.post(window.location.pathname,n.serialize(),function(t){n.find("textarea").val(""),e.hasClass("btn")||n.find("button.dropdown-toggle").dropdown("toggle"),EveSRP.ui.request.render(t)}),!1)},submitModifier:function(){var t=$(this),e=t.closest("form");return e.find("input[name='type_']").attr("value",t.attr("id")),e.find("button.dropdown-toggle").dropdown("toggle"),$.ajax({type:"POST",url:window.location.pathname,data:e.serialize(),success:function(){e.find("textarea").val(""),e.find("input#value").val("")
},complete:function(t){EveSRP.ui.request.render(t.responseJSON)}}),!1},voidModifier:function(t){var e=$(t.target);return $.post(window.location.pathname,e.serialize(),function(t){EveSRP.ui.request.render(t)}),!1},setPayout:function(){var t=$(this);return $.post(window.location.pathname,t.serialize(),function(e){t.find("input#value").val(""),EveSRP.ui.request.render(e)}),!1},updateDetails:function(){var t=$(this);return $.post(window.location.pathname,t.serialize(),function(t){EveSRP.ui.request.render(t)}),$("#detailsModal").modal("hide"),!1},setupEvents:function(){$("#actionMenu").click(EveSRP.ui.request.submitAction),$("ul#request-modifier-type li a").click(EveSRP.ui.request.submitModifier),$("#modifierList").submit(EveSRP.ui.request.voidModifier),$("form#payoutForm").submit(EveSRP.ui.request.setPayout),$("#detailsModal form").submit(EveSRP.ui.request.updateDetails),$("#request-payout").tooltip({title:$("#request-payout").data("initial-title"),placement:"right"})}},0!==$("#actionMenu").length&&EveSRP.ui.request.setupEvents();var EveSRP;EveSRP||(EveSRP={}),"ui"in EveSRP||(EveSRP.ui={}),EveSRP.ui.division={render:function(t){var e,n=["submit","review","pay","audit","admin"];for(e=0;e<n.length;++e){var i=n[e],r=$("#"+i).find("table"),a=Handlebars.templates.entity_table({entities:t[i],name:i});r.replaceWith(a)}},setEntityID:function(t,e){$(this).closest("form").find("input[name='id_']").attr("value",e.id)},createEntitySource:function(){var t=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.nonword("name"),queryTokenizer:Bloodhound.tokenizers.nonword,prefetch:{url:$SCRIPT_ROOT+"/api/entities/",ttl:18e5,filter:function(t){return t.entities}}});return t.initialize(),t},createTypeahead:function(t,e){var n=$(t).typeahead({hint:!0,highlight:!0},{displayKey:"name",source:e.ttAdapter(),templates:{suggestion:Handlebars.templates.typeahead_suggestion,empty:Handlebars.templates.typeahead_empty}});return n},selectAttribute:function(){var t=$(this),e=t.find("option:selected").val();return""!==e&&t.find('option[value=""]').remove(),$.ajax({type:"GET",url:window.location.pathname+"transformers/"+e+"/",success:function(t){var n,i=$("select#transformer");i.empty(),n=t[e],1===n.length?i.prop("disabled",!0):i.prop("disabled",!1),$.each(n,function(t,e){var n=$("<option></option>");n.append(e[1]),n.attr("value",e[0]),e[2]===!0&&n.prop("selected",!0),i.append(n)})}}),!0},selectTransformer:function(){var t=$(this),e=($("select#attribute option:selected").text(),t.find("option:selected").text(),t.parents("form"));return $.ajax({type:"POST",url:window.location.pathname,data:e.serialize()}),!0},changePermission:function(t,e,n){var i=$(t.target);return void 0!==e&&(EveSRP.ui.division.setEntityID(t,e,n),i=i.closest("form")),$.ajax({type:"POST",url:window.location.pathname,data:i.serialize(),success:function(){i.find(".entity-typeahead").typeahead("val",""),i.find("#id_").val("")},complete:function(t){var e=t.responseJSON;EveSRP.ui.division.render(e.entities)}}),!1},setupEvents:function(){var t=EveSRP.ui.division.createEntitySource();EveSRP.ui.division.createTypeahead(".entity-typeahead",t).on("typeahead:autocompleted",EveSRP.ui.division.setEntityID).on("typeahead:cursorchanged",EveSRP.ui.division.setEntityID).on("typeahead:selected",EveSRP.ui.division.changePermission),$("select#attribute").change(EveSRP.ui.division.selectAttribute),$("select#transformer").change(EveSRP.ui.division.selectTransformer),$(".permission").submit(EveSRP.ui.division.changePermission)}},0!==$(".entity-typeahead").length&&EveSRP.ui.division.setupEvents();var EveSRP;EveSRP||(EveSRP={}),EveSRP.tokenfield={addedToken:function(t){function e(t){var e;t.attr in r||(r[t.attr]=[]),e="="!==t.sign?t.sign+t.real_value:t.real_value,r[t.attr]=_(r[t.attr]).union([e])}var n,i=EveSRP.util.splitFilterString(window.location.pathname),r=EveSRP.util.parseFilterString(i[1]),a=History.getState();if(t.attrs instanceof Array)for(var s=0;s<t.attrs.length;++s)e(t.attrs[s]);else e(t.attrs);_.defaults(a.data,{page:1,sort:"-submit_timestamp"}),_.defaults(r,{page:1,sort:"-submit_timestamp"}),_.isEqual(a.data,r)||(n=EveSRP.util.keyDifference(a.data,r),_.contains(n,"page")||(r.page=1),i[1]=EveSRP.util.unparseFilters(r),History.pushState(r,null,"/"+i.join("/")))},modifyToken:function(t){function e(t){if(void 0===t.attr){var e=t.label.split(":");1===e.length?(t.attr="details",t.real_value=e[0],t.value="details:"+e[0],t.sign="="):(t.attr=e[0],t.real_value="status"===t.attr?e.slice(1).join(":").toLowerCase():e.slice(1).join(":"))}t.label=t.value}if(t.attrs instanceof Array)for(var n=0;n<t.attrs.length;++n)e(t.attrs[n]);else e(t.attrs)},removedToken:function(t){function e(t){var e;e="="!==t.sign?t.sign+t.real_value:t.real_value,i[t.attr]=_(i[t.attr]).without(e),_.isEmpty(i[t.attr])&&delete i[t.attr]}var n=EveSRP.util.splitFilterString(window.location.pathname),i=EveSRP.util.parseFilterString(n[1]);if(t.attrs instanceof Array)for(var r=0;r<t.attrs.length;++r)e(t.attrs[r]);else e(t.attrs);n[1]=EveSRP.util.unparseFilters(i),History.pushState(i,null,"/"+n.join("/"))},attachTokenfield:function(t,e){var n,i,r,a,s,o=[];return o.push({hint:!1,highlight:!0}),o.push({name:"all_args",displayKey:function(t){var e;return"status"===t.attr?(e=t.real_value.substr(0,1).toUpperCase(),e+=t.real_value.slice(1),t.attr+":"+e):"="===t.sign?t.attr+":"+t.real_value:t.attr+":"+t.sign+t.real_value},source:e.ttAdapter(),templates:{suggestion:Handlebars.templates.filter_suggestion}}),i=History.getState(),_.isEmpty(i.data)?(r=EveSRP.util.splitFilterString(window.location.pathname),a=EveSRP.util.parseFilterString(r[1])):a=i.data,s=this.tokensFromFilter(a),n=t.tokenfield({typeahead:o,tokens:s}).on("tokenfield:createtoken",EveSRP.tokenfield.modifyToken).on("tokenfield:createdtoken",EveSRP.tokenfield.addedToken).on("tokenfield:removetoken",EveSRP.tokenfield.removedToken),$(window).on("statechange",function(){var t,e=History.getState();t=EveSRP.tokenfield.tokensFromFilter(e.data),$(n).tokenfield("setTokens",t)}),n},tokensFromFilter:function(t){var e=[];return $.each(Object.keys(t),function(n,i){"sort"!==i&&"page"!==i&&$.each(t[i],function(t,n){var r,a,s=i+":"+n;_.contains("=-<>",n.slice(0,1))?(r=n.slice(0,1),a=n.slice(1)):(r="=",a=n),e.push({label:s,value:s,attr:i,real_value:a,sign:r})})}),e}};var EveSRP;EveSRP||(EveSRP={}),"ui"in EveSRP||(EveSRP.ui={}),EveSRP.ui.requestList={setupTokenField:function(){var t,e,n;t=["pilot","corporation","alliance","system","constellation","region","ship","status","division","details","submit_timestamp","kill_timestamp"],e=new Bloodhound({name:"tokens",local:[],datumTokenizer:function(t){var e,n=[];return e=t.real_value.split(/\s+/),$.each(e,function(e,i){"="===t.sign&&(n.push(t.attr),n.push(i)),n.push(t.sign+i)}),n},queryTokenizer:function(t){var e,n,i,r,a,s=[];return i=t.split(":"),n=i[0],r=i.slice(1).join(":"),""===r?r=n:s.push(n),_.contains(["-","=","<",">"],r.slice(0,1))?(e=r.slice(0,1),a=r.slice(1).split(/\s+/),a=_.map(s,function(){return e+s})):a=r.split(/\s+/),Array.prototype.push.apply(s,a),s}}),n=e.initialize(),$.each(t,function(t,i){var r=EveSRP.util.getAttributeChoices(i);$.when(r,n).done(function(t){var n,i,r=[];$.isArray(t)&&(t=t[0]),n=t.key,i=t[t.key],null!==i&&($.each(i,function(t,e){_.contains(["details","status"],n)?r.push({real_value:e,attr:n,sign:"="}):$.each(["=","-","<",">"],function(t,i){r.push({real_value:e,attr:n,sign:i})})}),e.add(r))})}),tokenfield=EveSRP.tokenfield.attachTokenfield($(".filter-tokenfield"),e)},getColumns:function(t){var e;return void 0===t&&(t=$("table#requests tr").not($(".popover tr"))),e=t.first(),e.find("th").map(function(t,e){return $(e).attr("id").substring(4)})},pageSize:15,render:function(t,e){var n,i=$("table#requests tr").not($(".popover tr")),r=i.parent(),a=(i.first().find("th"),i.not(":first")),s=(this.getColumns(i),$("ul.pagination"),t.requests),o=$("#requestsSummary");0!=a.length&&a.remove(),n=Handlebars.templates.request_rows(s),r.append(n),r.find(".filterable a").on("click",EveSRP.ui.requestList.addQuickFilter),o.text(t.request_count+" requests • "+t.total_payouts+" ISK"),this.renderPager(t.request_count,e.page-1)},renderPager:function(t,e){var n=$("ul.pagination"),i=Math.ceil(t/this.pageSize-1)+1;if(n.empty(),i>1){n.removeClass("hidden"),n.append(0===e?'<li class="disabled"><span>&laquo;</span></li>':'<li><a id="prev_page" href="#">&laquo;</a></li>'),pageNums=EveSRP.util.pageNumbers(i,e);for(var r=0;r<pageNums.length;++r)n.append(null!==pageNums[r]?pageNums[r]!==e?'<li><a href="#">'+(pageNums[r]+1)+"</a></li>":'<li class="active"><a href="#">'+(pageNums[r]+1)+'<span class="sr-only"> (current)</span></a></li>':'<li class="disabled"><span>&hellip;</span></li>');n.append(e===i-1?'<li class="disabled"><span>&raquo;</span></li>':'<li><a id="next_page" href="#">&raquo;</a></li>')}else n.addClass("hidden")},getRequests:function(){var t=History.getState();$.ajax({type:"GET",url:t.url,success:function(e){var n,i;_.isEmpty(t.data)?(i=EveSRP.util.splitFilterString(window.location.pathname),n=EveSRP.util.parseFilterString(i[1])):n=t.data,EveSRP.ui.requestList.render(e,n)}})},changeSort:function(){var t,e=$(this),n=e.parent("th"),i=n.parent().children("th"),r=n.attr("id").substring(4),a=History.getState(),s=EveSRP.util.splitFilterString(window.location.pathname);return"None"===r?!1:(t=_.isEmpty(a.data)?EveSRP.util.parseFilterString(s[1]):a.data,t.sort=t.sort.slice(1)===r||t.sort===r?"-"===t.sort.charAt(0)?r:"-"+r:r,i.find("i.fa").removeClass(),e.find("i").addClass("-"===t.sort.charAt(0)?"fa fa-chevron-down":"fa fa-chevron-up"),s[1]=EveSRP.util.unparseFilters(t),History.pushState(t,null,"/"+s.join("/")),!1)},changePage:function(t){var e,n=EveSRP.util.splitFilterString(window.location.pathname),i=EveSRP.util.parseFilterString(n[1]),r=$(t.target);return"prev_page"===r.attr("id")?i.page=i.page-1:"next_page"==r.attr("id")?i.page=i.page+1:(e=parseInt(r.contents()[0].data,10),i.page=e),n[1]=EveSRP.util.unparseFilters(i),History.pushState(i,null,"/"+n.join("/")),!1},addQuickFilter:function(t){var e=$(t.target).closest("td"),n={sign:"="};return n.attr=e.data("attribute"),n.real_value=e.text(),"status"===n.attr&&(n.real_value=n.real_value.toLowerCase()),n.value=n.label=n.attr+":"+n.real_value,$(".filter-tokenfield").tokenfield("createToken",n),!1},setupEvents:function(){$("th a.heading").on("click",this.changeSort),$("ul.pagination").on("click",EveSRP.ui.requestList.changePage),$(".filterable a").on("click",EveSRP.ui.requestList.addQuickFilter),$(window).on("statechange",this.getRequests)}},0!==$(".filter-tokenfield").length&&EveSRP.ui.requestList.setupTokenField(),0!==$("table#requests").length&&EveSRP.ui.requestList.setupEvents();var EveSRP;EveSRP||(EveSRP={}),"ui"in EveSRP||(EveSRP.ui={}),EveSRP.ui.payouts={markPaid:function(t){var e=$(t.target).closest("form");return $.ajax({type:"POST",url:e.attr("action"),data:e.serialize(),success:EveSRP.ui.payouts.renderRequest}),EveSRP.ui.payouts.getRequests(),!1},copyUpdate:function(){var t=$(this),e=(new Date).getTime(),n=t.closest(".panel");e-EveSRP.ui.payouts.lastRefresh>EveSRP.ui.payouts.refreshDelay&&EveSRP.ui.payouts.updateRequest(n.data("request-id"))},renderRequest:function(t){var e,n=$("#requests"),i=n.find("#request-"+t.id),r=$(Handlebars.templates.payout_panel(t));0!==i.length?(e=i.find(".copy-btn"),e.tooltip("destroy"),EveSRP.ui.clipboardClient.unclip(e),i.find(".small-popover").popover("destroy"),0!==i.find("table.in").length&&r.find("table.collapse").addClass("in"),i.replaceWith(r)):n.append(r),i=n.find("#request-"+t.id),e=i.find(".copy-btn"),EveSRP.ui.clipboardClient.clip(e),e.tooltip({trigger:"manual"}),i.find(".small-popover").on("click",!1).popover(),$(".null-link").on("click",function(t){t.preventDefault()})},getRequests:function(){var t=History.getState(),e=(new Date).getTime();e-EveSRP.ui.payouts.lastRefresh<EveSRP.ui.payouts.refreshDelay||(EveSRP.ui.payouts.lastRefresh=e,$.ajax({type:"GET",url:t.url,success:function(t){_.each(t.requests,function(t){EveSRP.ui.payouts.renderRequest(t)})}}))},updateRequest:function(t){$.ajax({type:"GET",url:$SCRIPT_ROOT+"/request/"+t,success:EveSRP.ui.payouts.renderRequest})},lastRefresh:(new Date).getTime(),refreshDelay:7e3,infiniteScroll:function(){var t=$(window),e=$(document);t.scrollTop()>e.height()-t.height()-300&&EveSRP.ui.payouts.getRequests()},setupEvents:function(){var t=$(window);EveSRP.ui.setupClipboard(),EveSRP.ui.clipboardClient.on("complete",EveSRP.ui.payouts.copyUpdate),$(".copy-btn").tooltip({trigger:"manual"}),EveSRP.ui.clipboardClient.on("mouseover",function(){$(this).tooltip("show")}).on("mouseout",function(){$(this).tooltip("hide")}),$(".small-popover").on("click",!1).popover(),$("#requests").on("submit",EveSRP.ui.payouts.markPaid),t.on("statechange",this.getRequests),t.on("scroll",EveSRP.ui.payouts.infiniteScroll),$(".null-link").on("click",function(t){t.preventDefault()})}},0!==$("div#requests").length&&EveSRP.ui.payouts.setupEvents();var EveSRP;EveSRP||(EveSRP={}),"ui"in EveSRP||(EveSRP.ui={}),EveSRP.ui.apiKeys={render:function(t){var e,n=$("#apikeys"),i=n.find("tr:first"),r=n.find("tr").not(":first").not(":last"),a=r.find(".copy-btn");EveSRP.ui.clipboardClient.unclip(a),a.find(".copy-btn").each(function(t,e){$(e).tooltip("destroy")}),r.remove(),0!==t.api_keys.length?(e=$(Handlebars.templates.api_keys(t)),a=e.find(".copy-btn"),EveSRP.ui.clipboardClient.clip(a),a.tooltip({placement:"bottom",title:"Copy to clipboard",trigger:"manual focus"})):e=$('<tr><td class="text-center" colspan="3">No API keys created.</td></tr>'),i.after(e)},modifyKey:function(t){var e=$(t.target),n=e.closest("form");return $.ajax({type:"POST",url:window.location.pathname,data:n.serialize(),complete:function(t){EveSRP.ui.apiKeys.render(t.responseJSON)}}),!1},setupEvents:function(){EveSRP.ui.setupClipboard(),$("#apikeys").on("submit",EveSRP.ui.apiKeys.modifyKey),$("#ckreateKey").on("submit",EveSRP.ui.apiKeys.modifyKey)}},0!==$("#apikeys").length&&EveSRP.ui.apiKeys.setupEvents();
//# sourceMappingURL=evesrp.min.js.map