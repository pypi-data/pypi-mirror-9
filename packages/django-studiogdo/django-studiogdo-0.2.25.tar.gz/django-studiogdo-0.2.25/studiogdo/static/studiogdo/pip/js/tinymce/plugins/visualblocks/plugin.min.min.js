tinymce.PluginManager.add("visualblocks",function(h,g){function l(){var a=this;a.active(i),h.on("VisualBlocks",function(){a.active(h.dom.hasClass(h.getBody(),"mce-visualblocks"))})}var k,j,i;window.NodeList&&(h.addCommand("mceVisualBlocks",function(){var b,a=h.dom;k||(k=a.uniqueId(),b=a.create("link",{id:k,rel:"stylesheet",href:g+"/css/visualblocks.css"}),h.getDoc().getElementsByTagName("head")[0].appendChild(b)),h.on("PreviewFormats AfterPreviewFormats",function(c){i&&a.toggleClass(h.getBody(),"mce-visualblocks","afterpreviewformats"==c.type)}),a.toggleClass(h.getBody(),"mce-visualblocks"),i=h.dom.hasClass(h.getBody(),"mce-visualblocks"),j&&j.active(a.hasClass(h.getBody(),"mce-visualblocks")),h.fire("VisualBlocks")}),h.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:l}),h.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:l,selectable:!0,context:"view",prependToContext:!0}),h.on("init",function(){h.settings.visualblocks_default_state&&h.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),h.on("remove",function(){h.dom.removeClass(h.getBody(),"mce-visualblocks")}))});