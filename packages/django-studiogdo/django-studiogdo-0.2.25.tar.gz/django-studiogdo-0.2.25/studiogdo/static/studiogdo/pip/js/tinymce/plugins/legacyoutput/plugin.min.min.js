!function(b){b.on("AddEditor",function(c){c.editor.settings.inline_styles=!1}),b.PluginManager.add("legacyoutput",function(a,f,e){a.on("init",function(){var i="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",h=b.explode(a.settings.font_size_style_values),g=a.schema;a.formatter.register({alignleft:{selector:i,attributes:{align:"left"}},aligncenter:{selector:i,attributes:{align:"center"}},alignright:{selector:i,attributes:{align:"right"}},alignjustify:{selector:i,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(c){return b.inArray(h,c.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),b.each("b,i,u,strike".split(","),function(c){g.addValidElements(c+"[*]")}),g.getElementRule("font")||g.addValidElements("font[face|size|color|style]"),b.each(i.split(","),function(d){var c=g.getElementRule(d);c&&(c.attributes.align||(c.attributes.align={},c.attributesOrder.push("align")))})}),a.addButton("fontsizeselect",function(){var g=[],i="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7",h=a.settings.fontsize_formats||i;return a.$.each(h.split(" "),function(j,n){var m=n,l=n,k=n.split("=");k.length>1&&(m=k[0],l=k[1]),g.push({text:m,value:l})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:g,fixedWidth:!0,onPostRender:function(){var c=this;a.on("NodeChange",function(){var d;d=a.dom.getParent(a.selection.getNode(),"font"),c.value(d?d.size:"")})},onclick:function(c){c.control.settings.value&&a.execCommand("FontSize",!1,c.control.settings.value)}}}),a.addButton("fontselect",function(){function d(j){j=j.replace(/;$/,"").split(";");for(var c=j.length;c--;){j[c]=j[c].split("=")}return j}var i="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",h=[],g=d(a.settings.font_formats||i);return e.each(g,function(j,c){h.push({text:{raw:c[0]},value:c[1],textStyle:-1==c[1].indexOf("dings")?"font-family:"+c[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:h,fixedWidth:!0,onPostRender:function(){var c=this;a.on("NodeChange",function(){var j;j=a.dom.getParent(a.selection.getNode(),"font"),c.value(j?j.face:"")})},onselect:function(c){c.control.settings.value&&a.execCommand("FontName",!1,c.control.settings.value)}}})})}(tinymce);