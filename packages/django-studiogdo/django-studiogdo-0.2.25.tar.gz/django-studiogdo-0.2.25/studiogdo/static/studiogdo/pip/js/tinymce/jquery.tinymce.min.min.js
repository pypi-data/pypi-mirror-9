!function(h){function g(){function a(b){"remove"===b&&this.each(function(e,d){var o=m(d);o&&o.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,d){var o=tinymce.get(d.id.replace(/_parent$/,""));o&&o.remove()})}function n(b){var o,e=this;if(null!=b){a.call(e),e.each(function(p,r){var q;(q=tinymce.get(r.id))&&q.setContent(b)})}else{if(e.length>0&&(o=tinymce.get(e[0].id))){return o.getContent()}}}function m(e){var d=null;return e&&e.id&&i.tinymce&&(d=tinymce.get(e.id)),d}function f(b){return !!(b&&b.length&&i.tinymce&&b.is(":tinymce"))}var c={};h.each(["text","html","val"],function(d,p){var o=c[p]=h.fn[p],e="text"===p;h.fn[p]=function(q){var t=this;if(!f(t)){return o.apply(t,arguments)}if(q!==l){return n.call(t.filter(":tinymce"),q),o.apply(t.not(":tinymce"),arguments),t}var s="",r=arguments;return(e?t:t.eq(0)).each(function(u,w){var v=m(w);s+=v?e?v.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):v.getContent({save:!0}):o.apply(h(w),r)}),s}}),h.each(["append","prepend"],function(e,q){var p=c[q]=h.fn[q],o="prepend"===q;h.fn[q]=function(r){var d=this;return f(d)?r!==l?("string"==typeof r&&d.filter(":tinymce").each(function(s,u){var t=m(u);t&&t.setContent(o?r+t.getContent():t.getContent()+r)}),p.apply(d.not(":tinymce"),arguments),d):void 0:p.apply(d,arguments)}}),h.each(["remove","replaceWith","replaceAll","empty"],function(p,o){var b=c[o]=h.fn[o];h.fn[o]=function(){return a.call(this,o),b.apply(this,arguments)}}),c.attr=h.fn.attr,h.fn.attr=function(d,r){var q=this,p=arguments;if(!d||"value"!==d||!f(q)){return r!==l?c.attr.apply(q,p):c.attr.apply(q,p)}if(r!==l){return n.call(q.filter(":tinymce"),r),c.attr.apply(q.not(":tinymce"),p),q}var o=q[0],e=m(o);return e?e.getContent({save:!0}):c.attr.apply(h(o),p)}}var l,k,j=[],i=window;h.fn.tinymce=function(r){function q(){var m=[],c=0;e||(g(),e=!0),d.each(function(s,n){var v,u=n.id,t=r.oninit;u||(n.id=u=tinymce.DOM.uniqueId()),tinymce.get(u)||(v=new tinymce.Editor(u,r,tinymce.EditorManager),m.push(v),v.on("init",function(){var x,w=t;d.css("visibility",""),t&&++c==m.length&&("string"==typeof w&&(x=-1===w.indexOf(".")?null:tinymce.resolve(w.replace(/\.\w+$/,"")),w=tinymce.resolve(w)),w.apply(x||tinymce,m))}))}),h.each(m,function(s,n){n.render()})}var p,o,f,e,d=this,b="";if(!d.length){return d}if(!r){return window.tinymce?tinymce.get(d[0].id):null}if(d.css("visibility","hidden"),i.tinymce||k||!(p=r.script_url)){1===k?j.push(q):q()}else{k=1,o=p.substring(0,p.lastIndexOf("/")),-1!=p.indexOf(".min")&&(b=".min"),i.tinymce=i.tinyMCEPreInit||{base:o,suffix:b},-1!=p.indexOf("gzip")&&(f=r.language||"en",p=p+(/\?/.test(p)?"&":"?")+"js=true&core=true&suffix="+escape(b)+"&themes="+escape(r.theme||"modern")+"&plugins="+escape(r.plugins||"")+"&languages="+(f||""),i.tinyMCE_GZ||(i.tinyMCE_GZ={start:function(){function c(m){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(m))}c("langs/"+f+".js"),c("themes/"+r.theme+"/theme"+b+".js"),c("themes/"+r.theme+"/langs/"+f+".js"),h.each(r.plugins.split(","),function(m,n){n&&(c("plugins/"+n+"/plugin"+b+".js"),c("plugins/"+n+"/langs/"+f+".js"))})},end:function(){}}));var a=document.createElement("script");a.type="text/javascript",a.onload=a.onreadystatechange=function(c){c=c||window.event,2===k||"load"!=c.type&&!/complete|loaded/.test(a.readyState)||(tinymce.dom.Event.domLoaded=1,k=2,r.script_loaded&&r.script_loaded(),q(),h.each(j,function(n,m){m()}))},a.src=p,document.body.appendChild(a)}return d},h.extend(h.expr[":"],{tinymce:function(d){var c;return d.id&&"tinymce" in window&&(c=tinymce.get(d.id),c&&c.editorManager===tinymce)?!0:!1}})}(jQuery);