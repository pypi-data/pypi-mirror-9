tinymce.ThemeManager.add("modern",function(b){function d(){function p(u){var s,t=[];if(u){return o(u.split(/[ ,]/),function(x){function v(){var y=b.selection;"bullist"==w&&y.selectorChanged("ul > li",function(B,C){for(var z,A=C.parents.length;A--&&(z=C.parents[A].nodeName,"OL"!=z&&"UL"!=z);){}x.active(B&&"UL"==z)}),"numlist"==w&&y.selectorChanged("ol > li",function(B,C){for(var z,A=C.parents.length;A--&&(z=C.parents[A].nodeName,"OL"!=z&&"UL"!=z);){}x.active(B&&"OL"==z)}),x.settings.stateSelector&&y.selectorChanged(x.settings.stateSelector,function(z){x.active(z)},!0),x.settings.disabledStateSelector&&y.selectorChanged(x.settings.disabledStateSelector,function(z){x.disabled(z)})}var w;"|"==x?s=null:n.has(x)?(x={type:x},m.toolbar_items_size&&(x.size=m.toolbar_items_size),t.push(x),s=null):(s||(s={type:"buttongroup",items:[]},t.push(s)),b.buttons[x]&&(w=x,x=b.buttons[w],"function"==typeof x&&(x=x()),x.type=x.type||"button",m.toolbar_items_size&&(x.size=m.toolbar_items_size),x=n.create(x),s.items.push(x),b.initialized?v():b.on("init",v)))}),q.push({type:"toolbar",layout:"flow",items:t}),!0}}var q=[];if(tinymce.isArray(m.toolbar)){if(0===m.toolbar.length){return}tinymce.each(m.toolbar,function(s,t){m["toolbar"+(t+1)]=s}),delete m.toolbar}for(var r=1;10>r&&p(m["toolbar"+r]);r++){}return q.length||m.toolbar===!1||p(m.toolbar||e),q.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:q}:void 0}function f(){function r(y){var x;return"|"==y?{text:"|"}:x=b.menuItems[y]}function u(y){var z,A,B,C,D;if(D=tinymce.makeMap((m.removed_menuitems||"").split(/[ ,]/)),m.menu?(A=m.menu[y],C=!0):A=c[y],A){z={text:A.title},B=[],o((A.items||"").split(/[ ,]/),function(F){var E=r(F);E&&!D[F]&&B.push(r(F))}),C||o(b.menuItems,function(E){E.context==y&&("before"==E.separator&&B.push({text:"|"}),E.prependToContext?B.unshift(E):B.push(E),"after"==E.separator&&B.push({text:"|"}))});for(var x=0;x<B.length;x++){"|"==B[x].text&&(0===x||x==B.length-1)&&B.splice(x,1)}if(z.menu=B,!z.menu.length){return null}}return z}var v,w=[],p=[];if(m.menu){for(v in m.menu){p.push(v)}}else{for(v in c){p.push(v)}}for(var q="string"==typeof m.menubar?m.menubar.split(/[ ,]/):p,s=0;s<q.length;s++){var t=q[s];t=u(t),t&&w.push(t)}return w}function g(p){function q(r){var s=p.find(r)[0];s&&s.focus(!0)}b.shortcuts.add("Alt+F9","",function(){q("menubar")}),b.shortcuts.add("Alt+F10","",function(){q("toolbar")}),b.shortcuts.add("Alt+F11","",function(){q("elementpath")}),p.on("cancel",function(){b.focus()})}function h(r,v){function p(w){return{width:w.clientWidth,height:w.clientHeight}}var q,s,t,u;q=b.getContainer(),s=b.getContentAreaContainer().firstChild,t=p(q),u=p(s),null!==r&&(r=Math.max(m.min_width||100,r),r=Math.min(m.max_width||65535,r),a.setStyle(q,"width",r+(t.width-u.width)),a.setStyle(s,"width",r)),v=Math.max(m.min_height||100,v),v=Math.min(m.max_height||65535,v),a.setStyle(s,"height",v),b.fire("ResizeEditor")}function i(p,q){var r=b.getContentAreaContainer();l.resizeTo(r.clientWidth+p,r.clientHeight+q)}function j(t){function u(){if(r&&r.moveRel&&r.visible()&&!r._fixed){var y=b.selection.getScrollContainer(),z=b.getBody(),A=0,B=0;if(y){var w=a.getPos(z),x=a.getPos(y);A=Math.max(0,x.x-w.x),B=Math.max(0,x.y-w.y)}r.fixed(!1).moveRel(z,b.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(A,B)}}function v(){r&&(r.show(),u(),a.addClass(b.getBody(),"mce-edit-focus"))}function p(){r&&(r.hide(),a.removeClass(b.getBody(),"mce-edit-focus"))}function q(){return r?void (r.visible()||v()):(r=l.panel=n.create({type:s?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!s,border:1,items:[m.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:f()},d()]}),b.fire("BeforeRenderUI"),r.renderTo(s||document.body).reflow(),g(r),v(),b.on("nodeChange",u),b.on("activate",v),b.on("deactivate",p),void b.nodeChanged())}var r,s;return m.fixed_toolbar_container&&(s=a.select(m.fixed_toolbar_container)[0]),m.content_editable=!0,b.on("focus",function(){t.skinUiCss?tinymce.DOM.styleSheetLoader.load(t.skinUiCss,q,q):q()}),b.on("blur hide",p),b.on("remove",function(){r&&(r.remove(),r=null)}),t.skinUiCss&&tinymce.DOM.styleSheetLoader.load(t.skinUiCss),{}}function k(r){var s,p,q;return r.skinUiCss&&tinymce.DOM.loadCSS(r.skinUiCss),s=l.panel=n.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[m.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:f()},d(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),m.resize!==!1&&(p={type:"resizehandle",direction:m.resize,onResizeStart:function(){var t=b.getContentAreaContainer().firstChild;q={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"==m.resize?h(q.width+t.deltaX,q.height+t.deltaY):h(null,q.height+t.deltaY)}}),m.statusbar!==!1&&s.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},p]}),m.readonly&&s.find("*").disabled(!0),b.fire("BeforeRenderUI"),s.renderBefore(r.targetNode).reflow(),m.width&&tinymce.DOM.setStyle(s.getEl(),"width",m.width),b.on("remove",function(){s.remove(),s=null}),g(s),{iframeContainer:s.find("#iframe")[0].getEl(),editorContainer:s.getEl()}}var l=this,m=b.settings,n=tinymce.ui.Factory,o=tinymce.each,a=tinymce.DOM,c={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},e="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";l.renderUI=function(p){var q=m.skin!==!1?m.skin||"lightgray":!1;if(q){var r=m.skin_url;r=r?b.documentBaseURI.toAbsolute(r):tinymce.baseURL+"/skins/"+q,p.skinUiCss=tinymce.Env.documentMode<=7?r+"/skin.ie7.min.css":r+"/skin.min.css",b.contentCSS.push(r+"/content"+(b.inline?".inline":"")+".min.css")}return b.on("ProgressState",function(s){l.throbber=l.throbber||new tinymce.ui.Throbber(l.panel.getEl("body")),s.state?l.throbber.show(s.time):l.throbber.hide()}),m.inline?j(p):k(p)},l.resizeTo=h,l.resizeBy=i});