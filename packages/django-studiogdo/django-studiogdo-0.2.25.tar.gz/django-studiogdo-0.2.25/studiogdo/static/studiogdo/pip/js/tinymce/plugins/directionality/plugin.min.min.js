tinymce.PluginManager.add("directionality",function(e){function d(a){var i,h=e.dom,g=e.selection.getSelectedBlocks();g.length&&(i=h.getAttrib(g[0],"dir"),tinymce.each(g,function(b){h.getParent(b.parentNode,"*[dir='"+a+"']",h.getRoot())||(i!=a?h.setAttrib(b,"dir",a):h.setAttrib(b,"dir",null))}),e.nodeChanged())}function f(g){var c=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(a){c.push(a+"[dir="+g+"]")}),c.join(",")}e.addCommand("mceDirectionLTR",function(){d("ltr")}),e.addCommand("mceDirectionRTL",function(){d("rtl")}),e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:f("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:f("rtl")})});