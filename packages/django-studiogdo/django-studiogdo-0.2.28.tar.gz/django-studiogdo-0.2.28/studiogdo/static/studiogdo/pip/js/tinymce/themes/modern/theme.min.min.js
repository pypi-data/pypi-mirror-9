tinymce.ThemeManager.add("modern",function(D){function C(){function a(c){var h,g=[];if(c){return s(c.split(/[ ,]/),function(d){function j(){var b=D.selection;"bullist"==i&&b.selectorChanged("ul > li",function(k,n){for(var m,l=n.parents.length;l--&&(m=n.parents[l].nodeName,"OL"!=m&&"UL"!=m);){}d.active(k&&"UL"==m)}),"numlist"==i&&b.selectorChanged("ol > li",function(k,n){for(var m,l=n.parents.length;l--&&(m=n.parents[l].nodeName,"OL"!=m&&"UL"!=m);){}d.active(k&&"OL"==m)}),d.settings.stateSelector&&b.selectorChanged(d.settings.stateSelector,function(k){d.active(k)},!0),d.settings.disabledStateSelector&&b.selectorChanged(d.settings.disabledStateSelector,function(k){d.disabled(k)})}var i;"|"==d?h=null:t.has(d)?(d={type:d},u.toolbar_items_size&&(d.size=u.toolbar_items_size),g.push(d),h=null):(h||(h={type:"buttongroup",items:[]},g.push(h)),D.buttons[d]&&(i=d,d=D.buttons[i],"function"==typeof d&&(d=d()),d.type=d.type||"button",u.toolbar_items_size&&(d.size=u.toolbar_items_size),d=t.create(d),h.items.push(d),D.initialized?j():D.on("init",j)))}),f.push({type:"toolbar",layout:"flow",items:g}),!0}}var f=[];if(tinymce.isArray(u.toolbar)){if(0===u.toolbar.length){return}tinymce.each(u.toolbar,function(d,c){u["toolbar"+(c+1)]=d}),delete u.toolbar}for(var e=1;10>e&&a(u["toolbar"+e]);e++){}return f.length||u.toolbar===!1||a(u.toolbar||p),f.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:f}:void 0}function B(){function a(d){var e;return"|"==d?{text:"|"}:e=D.menuItems[d]}function E(K){var J,I,H,G,F;if(F=tinymce.makeMap((u.removed_menuitems||"").split(/[ ,]/)),u.menu?(I=u.menu[K],G=!0):I=q[K],I){J={text:I.title},H=[],s((I.items||"").split(/[ ,]/),function(d){var e=a(d);e&&!F[d]&&H.push(a(d))}),G||s(D.menuItems,function(c){c.context==K&&("before"==c.separator&&H.push({text:"|"}),c.prependToContext?H.unshift(c):H.push(c),"after"==c.separator&&H.push({text:"|"}))});for(var b=0;b<H.length;b++){"|"==H[b].text&&(0===b||b==H.length-1)&&H.splice(b,1)}if(J.menu=H,!J.menu.length){return null}}return J}var o,n=[],m=[];if(u.menu){for(o in u.menu){m.push(o)}}else{for(o in q){m.push(o)}}for(var l="string"==typeof u.menubar?u.menubar.split(/[ ,]/):m,k=0;k<l.length;k++){var j=l[k];j=E(j),j&&n.push(j)}return n}function A(a){function d(b){var e=a.find(b)[0];e&&e.focus(!0)}D.shortcuts.add("Alt+F9","",function(){d("menubar")}),D.shortcuts.add("Alt+F10","",function(){d("toolbar")}),D.shortcuts.add("Alt+F11","",function(){d("elementpath")}),a.on("cancel",function(){D.focus()})}function z(a,n){function m(b){return{width:b.clientWidth,height:b.clientHeight}}var l,k,j,i;l=D.getContainer(),k=D.getContentAreaContainer().firstChild,j=m(l),i=m(k),null!==a&&(a=Math.max(u.min_width||100,a),a=Math.min(u.max_width||65535,a),r.setStyle(l,"width",a+(j.width-i.width)),r.setStyle(k,"width",a)),n=Math.max(u.min_height||100,n),n=Math.min(u.max_height||65535,n),r.setStyle(k,"height",n),D.fire("ResizeEditor")}function y(a,f){var e=D.getContentAreaContainer();v.resizeTo(e.clientWidth+a,e.clientHeight+f)}function x(i){function d(){if(k&&k.moveRel&&k.visible()&&!k._fixed){var h=D.selection.getScrollContainer(),E=D.getBody(),o=0,n=0;if(h){var m=r.getPos(E),l=r.getPos(h);o=Math.max(0,l.x-m.x),n=Math.max(0,l.y-m.y)}k.fixed(!1).moveRel(E,D.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,n)}}function c(){k&&(k.show(),d(),r.addClass(D.getBody(),"mce-edit-focus"))}function b(){k&&(k.hide(),r.removeClass(D.getBody(),"mce-edit-focus"))}function a(){return k?void (k.visible()||c()):(k=v.panel=t.create({type:j?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!j,border:1,items:[u.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:B()},C()]}),D.fire("BeforeRenderUI"),k.renderTo(j||document.body).reflow(),A(k),c(),D.on("nodeChange",d),D.on("activate",c),D.on("deactivate",b),void D.nodeChanged())}var k,j;return u.fixed_toolbar_container&&(j=r.select(u.fixed_toolbar_container)[0]),u.content_editable=!0,D.on("focus",function(){i.skinUiCss?tinymce.DOM.styleSheetLoader.load(i.skinUiCss,a,a):a()}),D.on("blur hide",b),D.on("remove",function(){k&&(k.remove(),k=null)}),i.skinUiCss&&tinymce.DOM.styleSheetLoader.load(i.skinUiCss),{}}function w(d){var c,b,a;return d.skinUiCss&&tinymce.DOM.loadCSS(d.skinUiCss),c=v.panel=t.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[u.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:B()},C(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),u.resize!==!1&&(b={type:"resizehandle",direction:u.resize,onResizeStart:function(){var e=D.getContentAreaContainer().firstChild;a={width:e.clientWidth,height:e.clientHeight}},onResize:function(e){"both"==u.resize?z(a.width+e.deltaX,a.height+e.deltaY):z(null,a.height+e.deltaY)}}),u.statusbar!==!1&&c.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},b]}),u.readonly&&c.find("*").disabled(!0),D.fire("BeforeRenderUI"),c.renderBefore(d.targetNode).reflow(),u.width&&tinymce.DOM.setStyle(c.getEl(),"width",u.width),D.on("remove",function(){c.remove(),c=null}),A(c),{iframeContainer:c.find("#iframe")[0].getEl(),editorContainer:c.getEl()}}var v=this,u=D.settings,t=tinymce.ui.Factory,s=tinymce.each,r=tinymce.DOM,q={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},p="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";v.renderUI=function(a){var f=u.skin!==!1?u.skin||"lightgray":!1;if(f){var e=u.skin_url;e=e?D.documentBaseURI.toAbsolute(e):tinymce.baseURL+"/skins/"+f,a.skinUiCss=tinymce.Env.documentMode<=7?e+"/skin.ie7.min.css":e+"/skin.min.css",D.contentCSS.push(e+"/content"+(D.inline?".inline":"")+".min.css")}return D.on("ProgressState",function(b){v.throbber=v.throbber||new tinymce.ui.Throbber(v.panel.getEl("body")),b.state?v.throbber.show(b.time):v.throbber.hide()}),u.inline?x(a):w(a)},v.resizeTo=z,v.resizeBy=y});