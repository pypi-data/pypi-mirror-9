(function(){var b=function(d,e){return function(){return d.apply(e,arguments)}},a={}.hasOwnProperty,c=function(g,e){for(var d in e){if(a.call(e,d)){g[d]=e[d]}}function f(){this.constructor=g}f.prototype=e.prototype;g.prototype=new f();g.__super__=e.prototype;return g};define(["list/listAndSelection"],function(d){var e;return e=(function(g){c(f,g);function f(i,h){this.annuler=b(this.annuler,this);this.valider=b(this.valider,this);this.creer=b(this.creer,this);this.showListCallback=b(this.showListCallback,this);f.__super__.constructor.call(this,i,null,h)}f.prototype.showListCallback=function(){var i,h;f.__super__.showListCallback.apply(this,arguments);this.creerBtn=this.list.querySelector("#creer");if(this.creerBtn!=null){this.creerBtn.addEventListener("click",this.creer)}if((this.creerBtn!=null)&&(this.sNewCommand==null)){alert("New command (sNewCommand) not defined")}this.form=this.list.querySelector("#holder");if(this.form!=null){h=this.form.querySelector("#valider")}if(h!=null){h.addEventListener("click",this.valider)}if(this.form!=null){i=this.form.querySelector("#annuler")}if(i!=null){i.addEventListener("click",this.annuler)}if(this.form!=null){return this.stencilHolderNom=this.form.querySelector("#stencilHolderNom")}};f.prototype.creer=function(h){var i;if(h){h.preventDefault()}i=new BOCall;i.done=(function(j){return function(){var k;j.commandPath=i.commandPath;k=new BOCall;k.appendBOParam("ap1","U3RlbmNpbEhvbGRlcg==");k.done=function(){return j.stencilHolderNom.innerHTML=k.responseText};k.postFacet(j.commandPath,'<input id="inputNom" data-value="Nom" name="s_"/>',"dom5");j.creerBtn.classList.add("hidden");return j.form.classList.remove("hidden")}})(this);return i.applyCommand(this.path,this.sNewCommand)};f.prototype.valider=function(h){var i,j;if(h){h.preventDefault()}i=new BOCall;j=this.form.querySelector("#inputNom");i.appendBOParam(j.getAttribute("name"),j.value);i.done=(function(k){return function(){k.creerBtn.classList.remove("hidden");k.form.classList.add("hidden");return k.showList()}})(this);return i.applyCommand(this.commandPath,"NextStep")};f.prototype.annuler=function(h){var i;if(h){h.preventDefault()}i=new BOCall;i.applyCommand(this.commandPath,"Cancel");return i.done=(function(j){return function(){j.creerBtn.classList.remove("hidden");return j.form.classList.add("hidden")}})(this)};return f})(d)})}).call(this);