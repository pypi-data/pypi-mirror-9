(function(){var a=function(b,c){return function(){return b.apply(c,arguments)}};define(function(){var b;return b=(function(){function c(d,e){this.filter=d;this.filter_skel=e;this.onKeypress=a(this.onKeypress,this);this.resetFilter=a(this.resetFilter,this);this.filterCallback=a(this.filterCallback,this);this.drawFilterCallback=a(this.drawFilterCallback,this);this.drawFilterBOCallback=a(this.drawFilterBOCallback,this);this.drawFilter=a(this.drawFilter,this);this.showFilter=a(this.showFilter,this);this.hideFilter=a(this.hideFilter,this);this.mode="django"}c.prototype.hideFilter=function(){if(this.filter==null){return}return $(this.filter).hide().addClass("hidden")};c.prototype.showFilter=function(p){var r,l,n,o,q,j,i,g,m,e,d,k,h,f;if(this.filter==null){return}l=function(t){var s;s=$(t).closest(".form-group");if(s.length>0){s.hide()}else{$(t).hide()}return $(t.label).hide()};q=function(t){var s;s=$(t).closest(".form-group");if(s.length>0){s.show()}else{$(t).show()}return $(t.label).show()};k=$("INPUT",this.form);for(j=0,m=k.length;j<m;j++){n=k[j];if(n.getAttribute("type")==="checkbox"){if(!p&&n.getAttribute("checked")!=="checked"){l(n)}else{if(n.id!==""){q(n)}}}else{if(!p&&n.value===""){l(n)}else{q(n)}}}h=$("select",this.form);for(i=0,e=h.length;i<e;i++){o=h[i];if(!p&&o.querySelectorAll("option[selected]").length===0){l(o)}else{q(o)}}f=$("br",this.form);for(g=0,d=f.length;g<d;g++){r=f[g];if(p){$(r).show()}else{$(r).hide()}}return $(this.filter).show().removeClass("hidden")};c.prototype.drawFilter=function(e){var d;if(this.filter==null){return}this.hideFilter();d=new BOCall;d.done=(function(f){return function(){f.drawFilterBOCallback(d);return typeof e==="function"?e():void 0}})(this);return d.postFacet(null,this.filter_skel,this.mode)};c.prototype.drawFilterBOCallback=function(d){if(d!=null){$(this.filter).html(d.responseText)}return this.drawFilterCallback()};c.prototype.drawFilterCallback=function(){var g,f,e,i,d,h;f=$("form",this.filter);if(f.length===0){return}this.form=f.get(0);$("#plus",this.filter).on("click",(function(j){return function(k){if(k!=null){k.preventDefault()}return j.showFilter(true)}})(this));$("#moins",this.filter).on("click",(function(j){return function(k){if(k!=null){k.preventDefault()}j.resetFilter();return j.filterCallback(k)}})(this));$("#go",this.filter).on("click",(function(j){return function(k){if(k!=null){k.preventDefault()}return j.filterCallback(k)}})(this));$(this.form).on("submit",this.filterCallback);$(this.form).on("keypress",this.onKeypress);h=$("label");for(i=0,d=h.length;i<d;i++){e=h[i];if(!(e.htmlFor!=="")){continue}g=document.getElementById(e.htmlFor);if(g!=null){g.label=e}}return this.showFilter()};c.prototype.filterCallback=function(d){var f,e;if(d!=null){d.preventDefault()}if(this.form!=null){f=new FormData(this.form)}return(e=this.list)!=null?e.drawList(null,f,this.drawFilter):void 0};c.prototype.resetFilter=function(){var n,m,p,k,j,g,o,e,d,l,i,f,h;l=$("input",this.form);for(k=0,o=l.length;k<o;k++){n=l[k];if(n.id!=="nbre_ligne"){$(n).val("")}}i=$("select",this.form);h=[];for(j=0,e=i.length;j<e;j++){p=i[j];f=$("option",p).val();for(g=0,d=f.length;g<d;g++){m=f[g];m.selected=false}h.push(p.querySelector("option").selected=true)}return h};c.prototype.onKeypress=function(d){if(d.which===13){return this.filterCallback(d)}};return c})()})}).call(this);