<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Development &mdash; Ringo 0.15.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.15.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Ringo 0.15.1 documentation" href="index.html" />
    <link rel="next" title="Configuration" href="config.html" />
    <link rel="prev" title="Architecture" href="architecture.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="config.html" title="Configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="architecture.html" title="Architecture"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Ringo 0.15.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="development">
<span id="id1"></span><h1>Development<a class="headerlink" href="#development" title="Permalink to this headline">¶</a></h1>
<p>This part describes some aspects on the ringo development. It shows how to
setup an enviroment for development, gives examples and recipes on
customisation of a ringo based application and finally shows how to test the
ringo framework.</p>
<p>Ringo is not just a library which can be used in other applications.
Ringo is also standalone application! This means you can start Ringo
and click around in the web application and use all the features provided by
Ringo.</p>
<p>This is very helpful when developing features in ringo, as you can see
immediately the result of your changes without effects from applications based
on ringo.</p>
<div class="section" id="environment">
<span id="development-env"></span><h2>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h2>
<p>This chapter will show you how to build a development environment for ringo
development. The example shows my personal way of organising the code which was quite
handy over the last time.</p>
<p>First I recommend to setup a dedicated development environment based on a
<a class="reference external" href="https://pypi.python.org/pypi/virtualenv">Virtual Python Environment</a> for
each application (including ringo itself) you want to develop.</p>
<p>The general layout of an development environment looks like this:</p>
<div class="highlight-python"><div class="highlight"><pre>       / appname
       |-lib
       | |-ringo
       | |-formbar
       |-src
       \-env

* appname: Root folder of the environment. Usually named with the name of the
  application.
* lib: Folder for libraries. To be able to have differen versions of the core
  libraries ringo and formbar I recommend to install the development version
  for each application.
* src: The source folder of your application.
* env: The virtual python environment.
</pre></div>
</div>
<div class="section" id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h3>
<p>This section will give you an example how create a development environment for
an existing ringo based application named <a class="reference external" href="https://bitbucket.org/ti/plorma">Plorma</a>:</p>
<div class="highlight-python"><div class="highlight"><pre>cd /path/to/your/development/root/folder
# create a folder for the application you like to create.
mkdir &lt;yourappname&gt;
cd &lt;yourappname&gt;

# Create and activate a new virtual environment and do all following
steps with # the activaed virtual env.
virtualenv --no-site-packages env
source env/bin/activate

# create a subfolder for all libs external libs.
mkdir lib
cd lib
# Install a development version of formbar.
hg clone https://bitbucket.org/ti/formbar
cd formbar
python setup.py develop
# Install a development version of ringo.
hg clone https://bitbucket.org/ti/ringo
cd ringo
python setup.py develop
cd ..

# Checkout the application you want to work on.
hg clone https://bitbucket.org/ti/plorma src
cd src
python setup.py develop
</pre></div>
</div>
<p>That is all. The environment is now ready. Follow the steps described in the
README comming with the source of the application to initialize and start the
application.</p>
</div>
</div>
<div class="section" id="general">
<span id="create-ringo-based-application"></span><h2>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h2>
<div class="section" id="core-development">
<h3>Core development<a class="headerlink" href="#core-development" title="Permalink to this headline">¶</a></h3>
<p>Core development means working on the ringo framework itself. The environment
descibed in <a class="reference internal" href="#development-env"><em>Environment</em></a> can be used too. Just work in the
<cite>lib</cite> folder.</p>
<p>Ringo is not just a library which can be used in other applications.
Ringo is also standalone application! This means you can start Ringo
and click around in the web application and use all the features provided by
Ringo.</p>
<p>This is very helpful when developing features in ringo, as you can see
immediately the result of your changes without effects from applications based
on ringo.</p>
<p>See the README file coming with ringo to see how to initialize and setup a
standalone version of ringo.</p>
</div>
<div class="section" id="app-development">
<h3>App development<a class="headerlink" href="#app-development" title="Permalink to this headline">¶</a></h3>
<p>The setup process in <a class="reference internal" href="#development-env"><em>Environment</em></a> already describes how to setup an
enviroment for an existing ringo based application.</p>
<p>If you want to start to work on a new ringo application head over to the next
section.</p>
<div class="section" id="create-a-new-application">
<h4>Create a new application<a class="headerlink" href="#create-a-new-application" title="Permalink to this headline">¶</a></h4>
<p>Creating a new Ringo based application is easy. In the following example we
will create an new application named &#8216;&#8217;yourappname&#8217;&#8216;. As precodition a
development environment must be already created (expect the application
specific part) and the virtual environment is activated. The new application
can be created with the following commands:</p>
<div class="highlight-python"><div class="highlight"><pre># Change to your development folder
cd &lt;yourappname&gt;
# Create the new application
pcreate -s ringo &lt;yourappname&gt;
# Rename the folder to meet the naming convention
mv &lt;yourappname&gt; src
cd src
python setup.py develop
</pre></div>
</div>
<p>This will trigger the creation of an application skeleton based on the
<a class="reference internal" href="xxx.html#scaffold-basic"><em>Basic Scaffold</em></a>.</p>
</div>
</div>
</div>
<div class="section" id="customisation-recipes">
<h2>Customisation / Recipes<a class="headerlink" href="#customisation-recipes" title="Permalink to this headline">¶</a></h2>
<p>The behaviour of the application can be modified in different ways. You can
customize the</p>
<blockquote>
<div><ul class="simple">
<li><em>View</em>: Change visual aspects like the layout of forms, overviews and or the whole page layout.</li>
<li><em>Model</em>: Add attributes or methods to your model.</li>
<li><em>Logic</em>: Custimize the application logic located in the application view.</li>
</ul>
</div></blockquote>
<p>So nearly all aspects can be changed more or less easily.</p>
<p>First you need to know what you are about to change. Is it something which is defined in the
ringo base application, or is it in your own application? This is important as
it determines the method to apply to change the behaviour.</p>
<p>If you want to change to behaviour of your own application the things to do
should be quite clear: Do the changes directly in the relevant templates,
model or views.</p>
<p>If you want to change the behaviour defined in the ringo app you have
different options. Static files are usually overwritten. Models are extended
or modified by overwriting or extending a inherited version of the ringo model
in your application. The application logic can be modified be relinking the
mapped functions on URLs.</p>
<p>In the next sections I will give some examples on how to customise things in a
ringo application.</p>
<div class="section" id="add-a-new-extension">
<h3>Add a new extension<a class="headerlink" href="#add-a-new-extension" title="Permalink to this headline">¶</a></h3>
<p>The following commands will create a new extension namend &#8220;evaluation&#8221; and
install it in your system to make it available for other applications:</p>
<div class="highlight-python"><div class="highlight"><pre>pcreate -t ringo_extension evaluation
cd evaluation
python setup.py develop
</pre></div>
</div>
<p>Now can can register the new extension for the first time with your
application. Registering is done in three steps.</p>
<p>In the model/__init__.py file of your application:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">ringo.model</span> <span class="kn">import</span> <span class="n">Base</span><span class="p">,</span> <span class="n">extensions</span>
<span class="kn">from</span> <span class="nn">ringo.lib</span> <span class="kn">import</span> <span class="n">helpers</span>

<span class="n">extensions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;ringo_evaluation&quot;</span><span class="p">)</span>

<span class="c"># Dynamically import all model files here to have the model available in</span>
<span class="c"># the sqlalchemy metadata. This is needed for the schema migration with</span>
<span class="c"># alembic. Otherwise the migration will produce many table drops as the</span>
<span class="c"># tables of the models are not present in the metadata</span>
</pre></div>
</div>
<p>If your extension provides some extension specific actions they should be
implemented in a Extension Mixin class. Overwrite the &#8216;get_mixin_actions&#8217;
method to define the actions the extension should provide to other modules:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Evaluable</span><span class="p">(</span><span class="n">Mixin</span><span class="p">):</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_mixin_actions</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c"># Add Evaluation action</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">ActionItem</span><span class="p">()</span>
        <span class="n">action</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;Evaluate&#39;</span>
        <span class="n">action</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s">&#39;evaluate/{id}&#39;</span>
        <span class="n">action</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s">&#39;glyphicon glyphicon-stats&#39;</span>
        <span class="n">action</span><span class="o">.</span><span class="n">permission</span> <span class="o">=</span> <span class="s">&#39;read&#39;</span>
        <span class="n">action</span><span class="o">.</span><span class="n">bundle</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">actions</span>
</pre></div>
</div>
<p>To make the actions available in other modules you need to Inherit form this
mixin:</p>
<div class="highlight-python"><div class="highlight"><pre>class MyClass(Evaluable, Blobform, ..., BaseItem, Base):
</pre></div>
</div>
<p>In case your extention provides custom templates you need to configure an
additional search path for your templates in the ini file:</p>
<div class="highlight-python"><div class="highlight"><pre># mako template settings
mako.directories = ringo:templates
mako.directories = ringo_evaluation:templates
</pre></div>
</div>
<p>On the next start of your application the extension will be registerd with
your application and a new modul entry will be created.</p>
</div>
<div class="section" id="add-a-new-modul-to-your-application">
<span id="add-modules"></span><h3>Add a new modul to your application<a class="headerlink" href="#add-a-new-modul-to-your-application" title="Permalink to this headline">¶</a></h3>
<p>If you want to add a new modul to your ringo based application or the the
ringo base then you should use the ringo-admin command:</p>
<div class="highlight-python"><div class="highlight"><pre>ringo-admin modul add name
ringo-admin db upgrade
</pre></div>
</div>
<p>The the help page of the command for more informations.</p>
<p>The generated modul only has some default fields like the <cite>uuid</cite> or <cite>id</cite>
field. In the next step you can extend the new modul with fields. See
<em class="xref std std-ref">_add_fields</em> for more information.</p>
</div>
<div class="section" id="adding-new-fields-to-the-model">
<span id="add-fields"></span><h3>Adding new fields to the model<a class="headerlink" href="#adding-new-fields-to-the-model" title="Permalink to this headline">¶</a></h3>
<p>Adding new fields to the model of a modul can be achieved by the following
steps.</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">First open the form definiton which is located under <cite>views/forms/&lt;modulname&gt;.xml</cite>.</p>
</li>
<li><p class="first">Add new fields (entities) to the form. See <a class="reference external" href="http://pythonhosted.org//formbar/">formbar documentation</a> for more information on how to add new entities.</p>
</li>
<li><p class="first">Generate the python code to be placed in the model file by calling:</p>
<div class="highlight-python"><div class="highlight"><pre>ringo-admin model fields &lt;modulname&gt;
</pre></div>
</div>
</li>
</ol>
<blockquote>
<div>Note that the modulname will have a &#8220;s&#8221; appended. So a modul called
&#8220;client&#8221; becomes &#8220;clients&#8221; here. The generated code will include all
entities defined in the form, so you will need to filter out the new fields
on your own.</div></blockquote>
<ol class="arabic" start="4">
<li><p class="first">Place the generated code snippet in the modul file of the modul under <cite>model/&lt;modulname&gt;.py</cite>.</p>
</li>
<li><p class="first">Generate a new revision file:</p>
<div class="highlight-python"><div class="highlight"><pre>almebic revision --autogenerate -m &quot;Your message here&quot;
</pre></div>
</div>
</li>
<li><p class="first">Migrate database:</p>
<div class="highlight-python"><div class="highlight"><pre>ringo-admin db upgrade
</pre></div>
</div>
</li>
<li><p class="first">Commit the changes.</p>
</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="adding-a-single-custom-actions-to-a-module">
<span id="add-action"></span><h3>Adding a single custom actions to a module<a class="headerlink" href="#adding-a-single-custom-actions-to-a-module" title="Permalink to this headline">¶</a></h3>
<p>If you are need specific single action to your modul you need to do the following steps.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Adding such an actions is only loose integrated into the ringo framework.
So will not be able to configure the permission in the webinterface and the
actions will not be listed automatically anywhere in the application.</p>
</div>
<p>I will explain it with the example of adding a &#8220;Mark as read&#8221; operation for
the news modul. This is a very specific actions which is only used in the
newslisting. Adding such a specific action as new generic action for the modul
as described in <em class="xref std std-ref">newmodulaction</em> would be overkill.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Configure the routes and views</li>
<li>Implement action in view.</li>
</ol>
</div></blockquote>
<p>First configure the route for the new action. Open the __init__ file of your
application and search for the section where the routing is configured. There
insert the following line:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="n">News</span><span class="o">.</span><span class="n">get_action_routename</span><span class="p">(</span><span class="n">News</span><span class="p">,</span> <span class="s">&#39;markasread&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">),</span>
                 <span class="s">&#39;rest/news/{id}/markasread&#39;</span><span class="p">,</span>
                 <span class="n">factory</span><span class="o">=</span><span class="n">get_resource_factory</span><span class="p">(</span><span class="n">News</span><span class="p">))</span>
</pre></div>
</div>
<p>Now implement the new action in the view. Open &#8216;views/news.py&#8217; and add the
following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="n">News</span><span class="o">.</span><span class="n">get_action_routename</span><span class="p">(</span><span class="n">News</span><span class="p">,</span> <span class="s">&#39;markasread&#39;</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s">&#39;rest&#39;</span><span class="p">),</span>
                <span class="n">renderer</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">,</span>
                <span class="n">request_method</span><span class="o">=</span><span class="s">&quot;PATCH&quot;</span><span class="p">,</span>
                <span class="n">permission</span><span class="o">=</span><span class="s">&#39;read&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">rest_markasread</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="o">...</span> <span class="n">your</span> <span class="n">code</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-new-actions-to-a-module">
<span id="newmodulactions"></span><h3>Adding new actions to a module<a class="headerlink" href="#adding-new-actions-to-a-module" title="Permalink to this headline">¶</a></h3>
<p>Write me</p>
</div>
<div class="section" id="overwriting-static-files">
<h3>Overwriting static files<a class="headerlink" href="#overwriting-static-files" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="configuring-forms">
<h3>Configuring forms<a class="headerlink" href="#configuring-forms" title="Permalink to this headline">¶</a></h3>
<p>Simply overwrite the form configuration in your application</p>
</div>
<div class="section" id="configuring-overviews">
<h3>Configuring overviews<a class="headerlink" href="#configuring-overviews" title="Permalink to this headline">¶</a></h3>
<p>Simply overwrite the table configuration in your application</p>
</div>
<div class="section" id="extending-existing-ringo-models">
<h3>Extending existing ringo models<a class="headerlink" href="#extending-existing-ringo-models" title="Permalink to this headline">¶</a></h3>
<p>Ringo comes with some predefined modules which provide some common
functionality. However the modules might not match your need, so they can be
extended or modified.</p>
<div class="section" id="add-new-fields-to-the-model">
<h4>Add new fields to the model<a class="headerlink" href="#add-new-fields-to-the-model" title="Permalink to this headline">¶</a></h4>
<p>You need to create a new model file in your application. In this file
create a model which inherits from the base modul and add attributes and
extend or overwrite functions as needed. In the following example we add two
additional columns to the base Profile modul:</p>
<div class="highlight-python"><div class="highlight"><pre>import sqlalchemy as sa
from ringo.model.user import Profile

class MyProfile(Profile):
&quot;&quot;&quot;Specific profile. Inherited from ringos base profile&quot;&quot;&quot;
    col1 = sa.Column(sa.Text)
    col2 = sa.Column(sa.Text)
    ...

    # Overwrite relation with a new backref name to be able to refer
    # to the new Profile in the user object. Will raise a SAWarning.
    user = sa.orm.relation(&quot;User&quot;, cascade=&quot;all, delete-orphan&quot;,
                           backref=&quot;pprofile&quot;, single_parent=True,
                           uselist=False)

    def __unicode__(self):
        return &quot;%s&quot; % (self.col1)
</pre></div>
</div>
</div>
<div class="section" id="overwrite-existing-statemachine-workflow">
<h4>Overwrite existing Statemachine/Workflow<a class="headerlink" href="#overwrite-existing-statemachine-workflow" title="Permalink to this headline">¶</a></h4>
<p>If you want to change the statemachine/workflow for the model you need
overwrite some attributes of the modul in order to inject your new
StateMachine.  In the follwing example we overwrite the StateMachine of the
imaginary class &#8220;Foo&#8221; which has a statemachine available under the name
&#8220;foo_state&#8221;.:</p>
<div class="highlight-python"><div class="highlight"><pre>import sqlalchemy as sa
from ringo.model.statemachine import Statemachine, State, \
null_handler as handler, null_condition as condition
import Bar

class FooStatemachine(Statemachine):

    def setup(self):
        # Do the setup here

class Foo(Bar):
    # Overwrite attributes of the StateMixin from the inherited
    # clazz to inject the custom statemachine.
    _statemachines = {&#39;foo_state_id&#39;: FooStatemachine}

    @property
    def foo_state(self):
        state = self.get_statemachine(&#39;foo_state_id&#39;)
        return state.get_state()
</pre></div>
</div>
</div>
<div class="section" id="let-your-application-know-about-the-new-model">
<h4>Let your application know about the new model<a class="headerlink" href="#let-your-application-know-about-the-new-model" title="Permalink to this headline">¶</a></h4>
<p>Next we need to import the new model in the __init__.py file of the application:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">myapp.model.modul</span> <span class="kn">import</span> <span class="n">Modul</span>
<span class="c"># AUTOREPLACEIMPORT</span>
<span class="c"># END AUTOGENERATED IMPORTS</span>
<span class="kn">from</span> <span class="nn">myapp.model.profile</span> <span class="kn">import</span> <span class="n">MyProfile</span>
</pre></div>
</div>
<p>Now we can use alembic to add the new added fields to the database. Therefor
we generate a migration script with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>alembic revision --autogenerate -m &quot;Added new fields to the Profile modul&quot;
</pre></div>
</div>
<p>A new migration script should now be generated including the new added fields.
Before adding the new fields to the database please backup your old database.
Then the new fields can be added with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>alembic upgrade head
</pre></div>
</div>
<p>The form and table configuration can be simply overwritten by placing the form
and table config file with the same name in your application.</p>
<p>Finally we must tell the application to use the new created profile. The
information where to find the model clazz of the modul is stored in the
database in the field &#8220;clazzpath&#8221; for each modul.
This field can&#8217;t be changed in the UI. You must to the change on the database
directly. By changing this value to the path of your new modul the application
will now use the new model. Please note, that you my need to overwrite
existing relations to be able to refer to the overwritten model.</p>
</div>
</div>
<div class="section" id="calling-alternative-views">
<h3>Calling alternative views<a class="headerlink" href="#calling-alternative-views" title="Permalink to this headline">¶</a></h3>
<p>Application logic is defined in the view function. The view for the model was
setup on initialisation of the application and uses the default view logic in
ringo by default.
But the view for specific actions can be overwritten.
In the following example we will overwrite the default &#8216;index&#8217; method of the
&#8216;home&#8217; view. So you need to define your custom method in your view file view
file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;home&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s">&#39;/index.mako&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c"># Write your own logic here.</span>
    <span class="n">handle_history</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="o">...</span>
    <span class="k">return</span> <span class="n">values</span>
</pre></div>
</div>
<p>Note, that we reconfigure the view by calling &#8216;view_config&#8217; with an already
configured route_name. This will overwrite the configured view and the
application will use your custom view now for the route named &#8216;home&#8217;.</p>
<p>If you only want to extend the functionallity from the default you can do this
too. No need to rewrite the default logic again in your custom view:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">ringo.views.home</span> <span class="kn">import</span> <span class="n">index_view</span> <span class="k">as</span> <span class="n">ringo_index_view</span>

<span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="s">&#39;home&#39;</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="s">&#39;/index.mako&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="c"># First call the default view.</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">ringo_index_view</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="c"># Now extend the logic.</span>
    <span class="o">...</span>
    <span class="c"># Finally return the values.</span>
    <span class="k">return</span> <span class="n">values</span>
</pre></div>
</div>
</div>
<div class="section" id="using-callbacks-in-the-views">
<h3>Using callbacks in the views<a class="headerlink" href="#using-callbacks-in-the-views" title="Permalink to this headline">¶</a></h3>
<p>Callback kann be used to implement custom application logic after the logic of
the default view has been processed. This is usefull e.g if you want to send
notification mails, modifiy values after a new item has been created or clean
up things after something has been deleted.</p>
<p>A callback has the following structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">foo_callback</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :request: Current request</span>
<span class="sd">    :item: Item which has been created, edited, deleted...</span>
<span class="sd">    :returns item</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># Do something with the item and finally return the item.</span>
    <span class="k">return</span> <span class="n">item</span>
</pre></div>
</div>
<p>The reqeust an item should give you all the context you should need to to the
desired modifications.</p>
<p>The callback must be supplied in the call of the main view function like
this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@view_config</span><span class="p">(</span><span class="n">route_name</span><span class="o">=</span><span class="n">Foo</span><span class="o">.</span><span class="n">get_action_routename</span><span class="p">(</span><span class="s">&#39;create&#39;</span><span class="p">),</span>
        <span class="n">renderer</span><span class="o">=</span><span class="s">&#39;/default/create.mako&#39;</span><span class="p">,</span>
        <span class="n">permission</span><span class="o">=</span><span class="s">&#39;create&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">create_</span><span class="p">(</span><span class="n">Foo</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">foo_callback</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="change-the-name-of-the-application">
<h3>Change the name of the application<a class="headerlink" href="#change-the-name-of-the-application" title="Permalink to this headline">¶</a></h3>
<p>The name of the application is defined in the &#8220;ini&#8221; file. Check the
<tt class="docutils literal"><span class="pre">app.title</span></tt> configuration variable.</p>
</div>
</div>
<div class="section" id="tests">
<h2>Tests<a class="headerlink" href="#tests" title="Permalink to this headline">¶</a></h2>
<p>Ringo come two types of tests:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Functional and Unit tests and</li>
<li>Behaviour driven tests using the <a class="reference external" href="http://www.behave.org">Behave</a> framework. All tests are located are under &#8220;ringo/tests&#8221; directory.</li>
</ol>
</div></blockquote>
<p>Start the tests by invoking the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>invoke tests
</pre></div>
</div>
<p>This will create new test database calls the tests and make some statistics on
the code coverage.</p>
</div>
<div class="section" id="translation">
<h2>Translation<a class="headerlink" href="#translation" title="Permalink to this headline">¶</a></h2>
<p>Translation of ringo is managed using <a class="reference external" href="https://www.transifex.com/projects/p/plorma/">the Transifex webservice</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Development</a><ul>
<li><a class="reference internal" href="#environment">Environment</a><ul>
<li><a class="reference internal" href="#setup">Setup</a></li>
</ul>
</li>
<li><a class="reference internal" href="#general">General</a><ul>
<li><a class="reference internal" href="#core-development">Core development</a></li>
<li><a class="reference internal" href="#app-development">App development</a><ul>
<li><a class="reference internal" href="#create-a-new-application">Create a new application</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#customisation-recipes">Customisation / Recipes</a><ul>
<li><a class="reference internal" href="#add-a-new-extension">Add a new extension</a></li>
<li><a class="reference internal" href="#add-a-new-modul-to-your-application">Add a new modul to your application</a></li>
<li><a class="reference internal" href="#adding-new-fields-to-the-model">Adding new fields to the model</a></li>
<li><a class="reference internal" href="#adding-a-single-custom-actions-to-a-module">Adding a single custom actions to a module</a></li>
<li><a class="reference internal" href="#adding-new-actions-to-a-module">Adding new actions to a module</a></li>
<li><a class="reference internal" href="#overwriting-static-files">Overwriting static files</a></li>
<li><a class="reference internal" href="#configuring-forms">Configuring forms</a></li>
<li><a class="reference internal" href="#configuring-overviews">Configuring overviews</a></li>
<li><a class="reference internal" href="#extending-existing-ringo-models">Extending existing ringo models</a><ul>
<li><a class="reference internal" href="#add-new-fields-to-the-model">Add new fields to the model</a></li>
<li><a class="reference internal" href="#overwrite-existing-statemachine-workflow">Overwrite existing Statemachine/Workflow</a></li>
<li><a class="reference internal" href="#let-your-application-know-about-the-new-model">Let your application know about the new model</a></li>
</ul>
</li>
<li><a class="reference internal" href="#calling-alternative-views">Calling alternative views</a></li>
<li><a class="reference internal" href="#using-callbacks-in-the-views">Using callbacks in the views</a></li>
<li><a class="reference internal" href="#change-the-name-of-the-application">Change the name of the application</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tests">Tests</a></li>
<li><a class="reference internal" href="#translation">Translation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="architecture.html"
                        title="previous chapter">Architecture</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="config.html"
                        title="next chapter">Configuration</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/development.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="config.html" title="Configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="architecture.html" title="Architecture"
             >previous</a> |</li>
        <li><a href="index.html">Ringo 0.15.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, 2014 Torsten Irländer.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>