# -*- mode: python; coding: utf-8 -*-

from . import FunctionalTestCase


class AppTests(FunctionalTestCase):
    def test_app(self):
        res = self.app.get('/', status=200)
        self.assertTrue(b'<title>{{project}} (test)</title>' in res.body)

    def test_login(self):
        res = self.app.post('/auth/login', {'username': 'admin',
                                            'password': 'admin'})
        self.assertTrue(res.json['success'])
        self.assertTrue(res.json['is_admin'])
        self.assertEqual(res.json['fullname'], 'Ad Min')
