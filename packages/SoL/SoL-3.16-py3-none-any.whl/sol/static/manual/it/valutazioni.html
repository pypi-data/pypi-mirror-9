<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Gestione valutazioni Glicko &mdash; SoL 3, manuale utente</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.16',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations-it.js"></script>
    <link rel="top" title="SoL 3, manuale utente" href="index.html" />
    <link rel="up" title="Anagrafiche di base" href="anagrafiche.html" />
    <link rel="next" title="Valutazioni dei giocatori" href="valutazionigiocatori.html" />
    <link rel="prev" title="Correzione concorrenti" href="concorrenti.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigazione</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Indice generale"
             accesskey="I">indice</a></li>
        <li class="right" >
          <a href="valutazionigiocatori.html" title="Valutazioni dei giocatori"
             accesskey="N">successivo</a> |</li>
        <li class="right" >
          <a href="concorrenti.html" title="Correzione concorrenti"
             accesskey="P">precedente</a> |</li>
        <li><a href="index.html">Manuale d&#39;uso</a> &raquo;</li>
          <li><a href="interfacciautente.html" >Interfaccia utente</a> &raquo;</li>
          <li><a href="anagrafiche.html" accesskey="U">Anagrafiche di base</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="gestione-valutazioni-glicko">
<span id="id1"></span><h1>Gestione valutazioni Glicko<a class="headerlink" href="#gestione-valutazioni-glicko" title="link permanente per questa intestazione">¶</a></h1>
<p id="index-0">Dalla versione 3 di SoL è stata introdotta la gestione delle valutazioni dei giocatori secondo
il <a class="reference external" href="http://it.wikipedia.org/wiki/Sistema_Glicko">sistema Glicko</a>, primariamente per permettere di eliminare la componente <em>casuale</em> nella
generazione degli abbinamenti per il primo turno nei tornei <em>importanti</em>.</p>
<p>In poche parole, la valutazione dei giocatori calcolata con questo sistema rappresenta la
probabilità di vittoria reciproca: un giocatore con valutazione 2200 molto probabilmente
vincerà scontrandosi con un giocatore con una valutazione 1700.</p>
<p>Quando un torneo viene associato a una certa <em>valutazione Glicko</em>, la generazione dei turni
viene effettuata tenendo conto della <em>valutazione corrente</em> di ciascun giocatore.</p>
<div class="section" id="voci-del-menu">
<h2>Voci del menu<a class="headerlink" href="#voci-del-menu" title="link permanente per questa intestazione">¶</a></h2>
<p>Oltre alle <a class="reference internal" href="azionistd.html#pulsanti-standard"><em>azioni standard</em></a> il menu contiene
queste voci:</p>
<dl class="docutils">
<dt><em class="guilabel">Tornei</em></dt>
<dd>Apre la <a class="reference internal" href="tornei.html#gestione-tornei"><em>gestione dei tornei</em></a> che utilizzano
la valutazione selezionata</dd>
<dt><em class="guilabel">Giocatori</em></dt>
<dd>Apre le <a class="reference internal" href="valutazionigiocatori.html#valutazioni-giocatori"><em>valutazioni dei giocatori</em></a> secondo
la valutazione selezionata</dd>
<dt><em class="guilabel">Ricalcola</em></dt>
<dd>Ricalcola l&#8217;intera valutazione selezionata, riesaminando tutti i
risultati di tutti i tornei che la utilizzano</dd>
<dt><em class="guilabel">Scarica</em></dt>
<dd>Permette di scaricare i dati di tutti i tornei che utilizzano la
valutazione selezionata</dd>
</dl>
</div>
<div class="section" id="inserimento-e-modifica">
<h2>Inserimento e modifica<a class="headerlink" href="#inserimento-e-modifica" title="link permanente per questa intestazione">¶</a></h2>
<p id="index-1">Ogni valutazione è identificata da una <em class="guilabel">descrizione</em> univoca, cioè non è possibile
inserire due diverse valutazioni con la medesima descrizione.</p>
<p>Il <em class="guilabel">livello</em> stabilisce in sostanza l&#8217;<em>importanza</em> della valutazione e la sua
<em>attendibilità</em>.</p>
<p>Se <em class="guilabel">eredita</em> è attivo, allora quando in un torneo associato a una certa valutazione
viene stabilita la valutazione di ciascun concorrente, viene usata la più recente nella
valutazione di riferimento <strong>oppure</strong> in una a livello <em>superiore</em>. Al contrario, se è
disattivo, la ricerca è limitata esclusivamente alla valutazione di riferimento.</p>
<p>Il <em class="guilabel">tau</em> è il coefficiente primario per pilotare il calcolo della valutazione
nell&#8217;algoritmo Glicko2.</p>
<p>La <em class="guilabel">valutazione</em>, la <em class="guilabel">deviazione</em> e la <em class="guilabel">volatilità</em> sono i valori
di default della valutazione per un giocatori che partecipi per la prima volta a un torneo
associato alla valutazione.</p>
<p>Il <em class="guilabel">match outcome</em> determina la formula usata per calcolare l&#8217;<cite>outcome</cite> dei due
avversari in un particolare match e può assumere i seguenti valori:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">Standard</span> <span class="pre">Glicko</span></code></dt>
<dd><p class="first">è incluso solo per ragioni storiche e non dovrebbe essere usato dal momento che non
è particolarmente adatto al gioco del Carrom:</p>
<div class="last math">
<p><img src="_images/math/1d01238f892d91b09bb1d5b49508b6a5bcb353f1.png" alt="O_{1}=\begin{cases}
1&amp; \text{se $S_{1} &gt; S_{2}$},\\
0.5&amp; \text{se $S_{1} = S_{2}$},\\
0&amp; \text{se $S_{1} &lt; S_{2}$}.
\end{cases}"/></p>
</div></dd>
<dt><code class="docutils literal"><span class="pre">Formula</span> <span class="pre">di</span> <span class="pre">Guido</span></code></dt>
<dd><p class="first">è la formula elaborata da Guido Truffelli considerando le caratteristiche del Carrom,
approvata dal dott. Glickman stesso:</p>
<div class="last math">
<p><img src="_images/math/0096dae4cde0a0bb9e78d50cb36d2240d651e2c1.png" alt="O_{1} = S_{1} / (S_{1} + S_{2})"/></p>
</div></dd>
<dt><code class="docutils literal"><span class="pre">Esponenziale</span> <span class="pre">sulla</span> <span class="pre">differenza</span> <span class="pre">pedine</span></code></dt>
<dd><p class="first">è un tentativo di tenere in considerazione la differenza pedine, in modo tale che un
giocatore ottenga un outcome migliore se vince per <code class="docutils literal"><span class="pre">20—15</span></code> piuttosto che per <code class="docutils literal"><span class="pre">4—3</span></code>:</p>
<div class="last math">
<p><img src="_images/math/74f3f19c84687081b59cfb727832e52d1f6bd9d0.png" alt="O_{1}=\begin{cases}
1&amp; \text{se $S_{1}-S_{2} &gt; 22$},\\
0&amp; \text{se $S_{1}-S_{2} &lt; -22$},\\
1 / (1 + e^{-0.3 (S_{1} - S_{2})})&amp; \text{altrimenti}.
\end{cases}"/></p>
</div></dd>
</dl>
<p>La <em class="guilabel">valutazione minima</em> e la <em class="guilabel">valutazione massima</em> sono i valori estremi
utilizzati per <em>interpolare</em> la valutazione dei giocatori <em>esordienti</em> (che non hanno cioè
alcuna valutazione precedente), qualora vi fossero <strong>meno</strong> di due giocatori già
valutati. Tipicamente questo succede al primo torneo inserito in una nuova valutazione,
specialmente se <em class="guilabel">eredita</em> è disattivato.</p>
<div class="admonition important">
<p class="first admonition-title">Importante</p>
<p>Questi valori risultano modificabili solo dall&#8217;amministratore del sistema: di
norma <strong>non</strong> devono essere modificati, se non da chi sa come e perché farlo,
oppure per fare esperimenti.</p>
<p class="last">In ogni caso, modificando questi valori rende necessario il ricalcolo della
valutazione.</p>
</div>
<p>Il <em class="guilabel">club</em>, se assegnato, indica che la valutazione potrà essere utilizzata solo dai
tornei organizzati dal medesimo club. Se lasciato in bianco, qualsiasi torneo potrà
utilizzarla.</p>
<p>Il <em class="guilabel">responsabile</em> generalmente indica l&#8217;utente che ha inserito quella particolare
valutazione: i dati della valutazione potranno essere modificati solo da lui (oltre che
dall&#8217;<em>amministratore</em> del sistema.).</p>
</div>
<div class="section" id="valutazioni-storiche">
<h2>Valutazioni storiche<a class="headerlink" href="#valutazioni-storiche" title="link permanente per questa intestazione">¶</a></h2>
<p>Le valutazioni storiche possono essere caricate con lo strumento a linea di comando <code class="docutils literal"><span class="pre">soladmin</span>
<span class="pre">load-historical-rating</span></code> che accetta le seguenti opzioni e richiede due parametri posizionali,
rispettivamente il file di configurazione e un URL del file contenente le valutazioni:</p>
<table class="docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">--date</span></kbd></td>
<td>Data fittizia, di default 1900-01-01</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--deviation</span></kbd></td>
<td>Valore della deviazione, per default 100, oppure una formula per calcolarla a
partire da altri campi</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--volatility</span></kbd></td>
<td>Valore della volatilità, di default 0.006, oppure una formula per calcolarla a
partire da altri campi</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--rate</span></kbd></td>
<td>Formula per calcolare la valutazione del giocatore, se il valore nel file
necessita qualche correzione</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--description</span></kbd></td>
<td>Descrizione della valutazione</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--level</span></kbd></td>
<td>Il livello della valutazione, 0 di default: 0=storica, 1=internazionale,
2=nazionale, 3=regionale, 4=amatoriale</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--inherit</span></kbd></td>
<td>Specifica se le valutazioni di un giocatore verranno ereditate dalle altre
valutazioni allo stesso livello o superiore, False di default</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--map</span></kbd></td>
<td>Specifica una corrispondenza tra il nome del campo interno (SoL) e quello
esterno</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--encoding</span></kbd></td>
<td>Codifica del file CSV, di default UTF-8</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--tsv</span></kbd></td>
<td>Specifica che i campi sono separati da TAB, non da virgole</td></tr>
<tr><td class="option-group">
<kbd><span class="option">--dry-run</span></kbd></td>
<td>Mostra solo il risultato, non caricare i dati nel database</td></tr>
</tbody>
</table>
<p>Il file contenente i dati può essere specificato sia con un URL tipo
<code class="docutils literal"><span class="pre">http://sito.it/percorso/dati.txt</span></code> oppure come <code class="docutils literal"><span class="pre">file:///tmp/locale.txt</span></code> se risiede sul
filesystem locale.</p>
<p>Il testo specificato può contenere o dei <cite>campi separati da virgole</cite> oppure <cite>campi separati dal
carattere TAB</cite> (se viene specificata l&#8217;opzione <code class="docutils literal"><span class="pre">--tsv</span></code>). Se non viene specificato
diversamente con l&#8217;opzione <code class="docutils literal"><span class="pre">--encoding</span></code> viene assunta la codifica UTF-8.</p>
<p>La prima riga del file è considerata come <cite>intestazione</cite> che specifica i nomi delle singole
colonne mentre ciascuna riga rimanente contiene la valutazione di un singolo giocatore.</p>
<p>Ogni riga deve contenere almeno i campi <code class="docutils literal"><span class="pre">firstname</span></code>, <code class="docutils literal"><span class="pre">lastname</span></code> e <code class="docutils literal"><span class="pre">nickname</span></code> che
identificano univocamente un particolare giocatore e opzionalmente i campi <code class="docutils literal"><span class="pre">sex</span></code> e <code class="docutils literal"><span class="pre">club</span></code>,
rispettivamente il suo sesso e il club per cui gioca. Ovviamente ci deve essere il campo
<code class="docutils literal"><span class="pre">rate</span></code> con il valore della valutazione storica del giocatore. Questi sono i nomi usati
internamente, ma con l&#8217;opzione <code class="docutils literal"><span class="pre">--map</span></code> è possibile specificare delle associazioni arbitrarie
con gli effettivi campi contenuti nel file.</p>
<p>Come esempio, i seguenti dati</p>
<div class="highlight-python"><div class="highlight"><pre>id,cognome,nome,nomignolo,valutazione,partite_giocate,club,sesso
1,Gaifas,EMANUELE,,1000,30,,Scarambol Club Rovereto,M
2,Rossi,Paolo,,1468,6,Scarambol Club Rovereto,M
3,Verdi,Giuseppe,,1427,34,Italian Carrom Federation,M
4,Bianchi,Stefania,,1495,7,,F
</pre></div>
</div>
<p>possono essere caricati con il seguente comando:</p>
<div class="highlight-python"><div class="highlight"><pre>soladmin load-historical-rating \
         --map lastname=cognome \
         --map firstname=nome \
         --map nickname=nomignolo \
         --map rate=valutazione \
         --map partite_giocate \
         --map club \
         --map sex=sesso \
         --deviation &quot;350.0 / (10.0 - 9.0*exp(-partite_giocate / 60.0))&quot; \
         --description &quot;Historical rating&quot; \
         --dry-run \
         config.ini /tmp/giocatori.csv
</pre></div>
</div>
<p>che dovrebbe produrre qualcosa del tipo:</p>
<div class="highlight-python"><div class="highlight"><pre>Loading ratings from file:///tmp/players.csv...
Gaifas Emanuele “lele” (Scarambol Club Rovereto): rate=1000 deviation=77 volatility=0.006
NEW Rossi Paolo (Scarambol Club Rovereto): rate=1468 deviation=188 volatility=0.006
NEW Verdi Giuseppe (Italian Carrom Federation): rate=1427 deviation=71 volatility=0.006
NEW Bianchi Stefania (None): rate=1495 deviation=175 volatility=0.006
</pre></div>
</div>
<p>dove puoi notare che:</p>
<ol class="loweralpha simple">
<li>l&#8217;opzione <code class="docutils literal"><span class="pre">--dry-run</span></code> mostra solo cosa succederebbe, senza alterare il database</li>
<li>i nomi dei giocatori vengono <em>normalizzati</em>, vale a dire <code class="docutils literal"><span class="pre">EMANUELE</span></code> diventa <code class="docutils literal"><span class="pre">Emanuele</span></code></li>
<li>i nuovi giocatori sono automaticamente inseriti nel database</li>
<li>il valore della deviazione viene calcolato a partire dal numero di match giocati</li>
</ol>
<p>Quando sei soddisfatto, ometti l&#8217;opzione <code class="docutils literal"><span class="pre">--dry-run</span></code> e i dati verranno effettivamente
caricati.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Tabella dei contenuti</a></h3>
  <ul>
<li><a class="reference internal" href="#">Gestione valutazioni Glicko</a><ul>
<li><a class="reference internal" href="#voci-del-menu">Voci del menu</a></li>
<li><a class="reference internal" href="#inserimento-e-modifica">Inserimento e modifica</a></li>
<li><a class="reference internal" href="#valutazioni-storiche">Valutazioni storiche</a></li>
</ul>
</li>
</ul>

  <h4>Argomento precedente</h4>
  <p class="topless"><a href="concorrenti.html"
                        title="capitolo precedente">Correzione concorrenti</a></p>
  <h4>Argomento successivo</h4>
  <p class="topless"><a href="valutazionigiocatori.html"
                        title="capitolo successivo">Valutazioni dei giocatori</a></p>
  <div role="note" aria-label="source link">
    <h3>Questa pagina</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/valutazioni.txt"
            rel="nofollow">Mostra sorgente</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Ricerca veloce</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Vai" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Inserisci un termine di ricerca un modulo, classe o nome di funzione
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigazione</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Indice generale"
             >indice</a></li>
        <li class="right" >
          <a href="valutazionigiocatori.html" title="Valutazioni dei giocatori"
             >successivo</a> |</li>
        <li class="right" >
          <a href="concorrenti.html" title="Correzione concorrenti"
             >precedente</a> |</li>
        <li><a href="index.html">Manuale d&#39;uso</a> &raquo;</li>
          <li><a href="interfacciautente.html" >Interfaccia utente</a> &raquo;</li>
          <li><a href="anagrafiche.html" >Anagrafiche di base</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2008—2015, Lele Gaifax.
      Creato con <a href="http://sphinx-doc.org/">Sphinx</a> 1.3b2.
    </div>
  </body>
</html>