{% extends 'layout.html' %}

{% block title %} Repository {{ repo.name }} {% endblock %}
{% block page_title %} Repository &laquo;{{ repo.name }}&raquo; {% endblock %}

{% block toolbar %}
    <a href="{{ url_for('web.home') }}">Return to the repositories list</a>
{% endblock %}

{% block content %}
    {% if repo.packages|count == 0 %}
    <p>Sorry, but there are no packages in this repository.</p>
    {% elif repo.packages|count == 1 %}
    <p>There is 1 package in this repository:</p>
    {% else %}
    <p>There are {{ repo.packages|count }} packages in this repository:</p>
    {% endif %}

    <ul>
        {% for package in repo.packages.keys()|sort %}
        <li>
            <a href="{{ url_for('web.package', package=package, repo=repo) }}">
                {{ package }}</a>
            {% if repo.packages[package].releases|count > 0 %}
            <small>
                {{ repo.packages[package].releases_sorted[0] }}
            </small>
            {% else %}
            <small>no releases yet</small>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
{% endblock %}
