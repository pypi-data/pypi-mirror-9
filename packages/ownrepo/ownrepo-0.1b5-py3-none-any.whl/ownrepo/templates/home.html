{% extends 'layout.html' %}

{% block title %} Repositories {% endblock %}
{% block page_title %} All repositories {% endblock %}

{% block toolbar %}
    {% if g.authenticated_as %}
    You're logged in as <b>{{ g.authenticated_as }}</b>.
    {% else %}
    <a href="{{ url_for('web.login') }}">Log in</a> to access private repositories.
    {% endif %}
{% endblock %}

{% block content %}
    {% if repos|count > 0 %}
        <p>Here is a list of all repositories you've access to:</p>
        <ul>
            {% for repo in repos.keys()|sort %}
            <li>
                <a href="{{ url_for('web.repo', repo=repo) }}">{{ repo }}</a>
                &nbsp;
                <small>
                    {% if repos[repo].all_packages|count == 0 %}
                    no packages
                    {% elif repos[repo].all_packages|count == 1 %}
                    1 package
                    {% else %}
                    {{ repos[repo].all_packages|count }} packages
                    {% endif %}
                    {% if repos[repo].private %}
                    &nbsp;
                    <span class="private">private</span>
                    {% endif %}
                </small>
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Sorry, but you haven't access to any repository.</p>
    {% endif %}
{% endblock %}
