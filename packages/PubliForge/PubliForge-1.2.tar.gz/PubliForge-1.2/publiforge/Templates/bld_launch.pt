<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="base">
<head><title></title></head>
<body>
<div id="mainPanel" metal:fill-slot="main">
  ${form.begin(request.current_route_path(_anchor='current'), multipart=True)}
  <!-- ............................... Buttons ............................ -->
  <div id="buttons">
    <div class="first">
      ${request.breadcrumbs.back_button()}
    </div>
   <div class="last">
      ${form.submit('bld!.x', _('Launch build'), class_='buttonMain slow')}
      ${form.button(route('project_dashboard', project_id=project['project_id']), _('View dashboard'))}
    </div>
    <hr class="hidden"/>
  </div>
  <div id="main">
    <h2 id="subtitle" class="build" title="${_('Build')}">${project['label']}</h2>
    <!-- ............................. Flash .............................. -->
    <div tal:define="flash load: flash.macro.pt" metal:use-macro="flash"/>
    <!-- ............................ Processing .......................... -->
    <div tal:define="build_processing load: bld_processing.macro.pt" metal:use-macro="build_processing"/>
    <!-- ............................... Pack ............................. -->
    <div class="formItem">
      <label><em>${_('Packs:')}</em></label>
      <div id="packs">
        <ul>
          <li tal:repeat="pack packs" class="files">
            <h3><a href="${route('pack_view', project_id=pack.project_id, pack_id=pack.pack_id)}">${pack.label}</a></h3>
            <ul tal:define="files [k for k in pack.files if k.visible]"
                tal:condition="len(files)">
              <li tal:repeat="item files">
                <div tal:define="build_pack load: bld_pack.macro.pt" metal:use-macro="build_pack"/>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
    <!-- .............................. Output ............................ -->
    <div tal:define="build_output load: bld_output.macro.pt" metal:use-macro="build_output"></div>
  </div>
  <div id="content"></div>
  ${form.end()}
</div>
</body>
</html>
