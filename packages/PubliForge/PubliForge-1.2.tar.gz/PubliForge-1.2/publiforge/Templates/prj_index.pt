<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="base">
<head><title></title></head>
<body>
<div id="mainPanel" metal:fill-slot="main">
  <div id="main">
    ${form.begin()}
    <!-- ............................... Filter ........................... -->
    <div  class="filter">
      <h3><span>${_('Project filter')}</span></h3>
      <div class="col11">
        <div class="colFirst">
          ${form.grid_text('f_label', _('Label:'))}
        </div>
        <div class="colLast">
          ${form.grid_select('f_status', _('Status:'),
            [('*', '')] + project_status.items(), autosubmit=True)}
        </div>
        <div class="submit">${form.submit('filter', _('Apply filter'), class_='button')}</div>
      </div>
    </div>
    <!-- ............................. Flash .............................. -->
    <div tal:define="flash load: flash.macro.pt" metal:use-macro="flash"></div>
    <!-- ............................ Action list ......................... -->
    <h3 class="list">${_('Project List')}</h3>
    <div class="listActions">
      <div class="first">${paging.pager_top('project22', _('All projects'))}</div>
      <div class="last">
        ${form.submit_image('exp!#', _('Export selected projects'),
          '/Static/Images/action_export.png')}
      </div>
    </div>
    <!-- ............................. Projects ........................... -->
    <div id="content">
      <table class="list">
        <caption>${_('Projects')}</caption>
        <tr>
          <th class="checkbox" id="check_all"></th>
          <th>${paging.sortable_column(_('Label'), 'label')}</th>
          <th>${_('Description')}</th>
          <th>${paging.sortable_column(_('Deadline'), 'deadline')}</th>
          <th class="last">${_('Actions')}</th>
        </tr>
        <tr tal:repeat="project paging">
          <td class="checkbox">
            ${form.checkbox('#%s' % project.project_id, id=None, class_='listCheck')}
          </td>
          <td>
            <a href="${route('project_dashboard', project_id=project.project_id)}">
              ${project.label}
            </a>
          </td>
          <td class="info">${project.description}</td>
          <td>${project.deadline and project.deadline.strftime(_('%m/%d/%Y')) or ''}</td>
          <td class="last actions">
            <span tal:switch="project.project_id in in_menus" tal:omit-tag="">
              <span tal:case="True" tal:omit-tag="">
                ${form.submit_image('men-%d' % project.project_id, _('In menu'),
                  '/Static/Images/in_menu_on.png')}
              </span>
              <span tal:case="False" tal:omit-tag="">
                ${form.submit_image('men+%d' % project.project_id, _('Not in menu'),
                  '/Static/Images/in_menu_off.png')}
              </span>
            </span>
            ${form.button(route('project_view', project_id=project.project_id),
              src='/Static/Images/action_info_one.png', title=_('View settings'))}
            ${form.submit_image('exp!%d' % project.project_id, _('Export project'),
              '/Static/Images/action_export_one.png')}
          </td>
        </tr>
      </table>
    </div>
    <div class="listPager">
      <div class="first">${paging.pager_bottom('project', _('All projects'))}</div>
      <div class="last">
        ${_('Lines per page:')} ${form.select('page_size', '', paging.page_sizes, True)}
      </div>
    </div>
    ${form.end()}
  </div>
</div>
</body>
</html>
