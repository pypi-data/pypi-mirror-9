<div metal:define-macro="mbr_groups_edit" tal:omit-tag=""
       xmlns:tal="http://xml.zope.org/namespaces/tal"
       xmlns:metal="http://xml.zope.org/namespaces/metal">
  <div class="listActions">
    <div class="first">
      <img src="/Static/Images/group22.png" alt="${_('Member groups')}"/>
      <label>${_('Member groups')}</label>
    </div>
    <div class="last">
      ${form.submit_image('agp?', _('Add group'), '/Static/Images/action_add.png')}
     </div>
  </div>
  <table class="list smallList">
    <caption>${_('Member groups')}</caption>
    <tr>
      <th>${_('Label')}</th>
      <th>${_('Permission')}</th>
      <th class="last">${_('Action')}</th>
    </tr>
    <tr tal:repeat="member_group member_groups">
      <td><a href="${route('group_view', group_id=member_group.group_id)}">${member_group.label}</a></td>
      <td>
        ${form.select('grp_%s' % member_group.group_id, member_group.perm, PERMS.items())}
      </td>
      <td class="last" tal:switch="action == 'rgp?%s' % member_group.group_id">
        <span tal:case="True" tal:omit-tag="">
          ${form.submit('rgp!%s.x' % member_group.group_id, _('Confirm removal'), class_='button')}
          ${form.submit_cancel(_('Cancel'))}
        </span>
        <span tal:case="False" tal:omit-tag="">
          ${form.submit_image('rgp?%s' % member_group.group_id, _('Remove group'),
            '/Static/Images/action_remove_one.png')}
        </span>
      </td>
    </tr>
  </table>
</div>
