<div tal:replace="structure provider:form_prefix" />
<div class="form widget-box"
	 tal:attributes="id string:form_${view/id};
					 class string:widget-box ${view/cssClass};"
	 i18n:domain="ztfy.appskin">
	<div class="widget-title">
		<span class="icon">
			<i class="icon-align-justify" tal:attributes="class view/icon_class | default"></i>
		</span>
		<h5 tal:content="view/legend | default" i18n:translate="">Table contents</h5>
		<div class="actions" tal:content="structure provider:table_actions" />
	</div>
	<div class="widget-content nopadding">
		<tal:var define="help view/help | nothing" condition="help">
			<div class="help alert alert-info" tal:define="i18n_help help/i18n:translate" tal:content="structure i18n_help/html:text" />
		</tal:var>
		<div class="form-horizontal">
			<div class="viewspace"
				 tal:attributes="class string:viewspace ${view/mode};">
				<h4 tal:condition="view/label|nothing"
					tal:content="view/label">Form Label</h4>
				<div class="status"
					 tal:define="status view/status; errors view/errors;"
					 tal:condition="status"
					 tal:attributes="class string:alert ${view/status_class}">
					<div class="summary" tal:define="status status/text:translate" tal:content="structure status/html:text">Form status summary</div>
					<ul class="errors"
						tal:condition="errors">
						<li tal:repeat="error errors">
							<tal:if condition="error/widget">
								<span tal:replace="python:error.widget.label" />: 
							</tal:if>
							<span tal:replace="structure error/render">Error Type</span>
						</li>
					</ul>
				</div>
				<div class="widgets-prefix" tal:define="prefix provider:widgets_prefix"
											tal:condition="prefix"
											tal:content="structure prefix" />
				<div class="widgets">
					<tal:loop repeat="group view/groups">
						<fieldset tal:define="legend group/legend;
											  klass python:'' if group.visible else 'switched';"
								  tal:attributes="id string:group_${group/id};
												  class string:${group/cssClass} ${klass};"
								  tal:omit-tag="not:legend">
							<legend tal:condition="legend">
								<img tal:define="src python:'/--static--/ztfy.skin/img/%s.png' % ('mi' if group.visible else 'pl')"
									 tal:condition="group/switch"
									 tal:attributes="src src;
													 onclick string:$$.ZTFY.dialog.switchGroup(this, '${group/id}');" />
								<span tal:content="legend" i18n:translate="" />
							</legend>
							<div tal:omit-tag="not:group/switch"
								 tal:attributes="id string:group_${group/id};
												 class python:'visible' if group.visible else 'hidden';">
								<tal:var define="help group/help" condition="help">
									<div class="help" tal:define="i18n_help help/i18n:translate" tal:content="structure i18n_help/html:text" />
								</tal:var>
								<tal:loop repeat="widget group/widgets">
									<div id="" class="control-group"
										 tal:condition="python:widget.mode != 'hidden'"
										 tal:attributes="id string:${widget/id}-row">
										<label class="control-label" tal:attributes="for widget/id">
											<span i18n:translate="" tal:content="widget/label">label</span>
										</label>
										<div class="error" tal:define="error widget/error" tal:omit-tag="not:error">
											<div class="controls">
												<div class="widget"
													 tal:content="structure widget/render"
													 tal:attributes="data-ztfy-submit-callback python:view.getWidgetCallback(widget.field.getName())" />
												<span class="help-block"
													  tal:define="description widget/field/description"
													  tal:condition="description"
													  tal:content="description" />
											</div>
										</div>
									</div>
									<input type="hidden" value=""
										   tal:condition="python:widget.mode == 'hidden'"
										   tal:replace="structure widget/render" />
								</tal:loop>
							</div>
						</fieldset>
					</tal:loop>
				</div>
				<div class="widgets-suffix" tal:define="suffix provider:widgets_suffix"
											tal:condition="suffix"
											tal:content="structure suffix" />
				<div class="subforms"
					 tal:condition="view/subforms | nothing"
					 tal:attributes="class view/subforms_class | default">
					<fieldset tal:define="title view/subforms_legend | nothing"
							  tal:omit-tag="not:title">
						<legend tal:condition="title" tal:content="title" i18n:translate="" />
						<tal:loop repeat="form view/subforms">
							<tal:var replace="structure form/render" />
						</tal:loop>
					</fieldset>
				</div>
				<div id="tabforms" class="tabforms"
					 tal:condition="view/tabforms"
					 tal:attributes="class view/tabforms_class | default">
					<ul class="tabs">
						<li tal:repeat="form view/tabforms"
							tal:attributes="class python:form.widgets.errors and 'error' or ''">
							<a href="#" tal:content="form/tabLabel" i18n:translate="" />
						</li>
					</ul>
					<div class="panes">
						<div class="pane" tal:repeat="form view/tabforms"
							 tal:attributes="id string:tabform_${repeat/form/number}"
							 tal:content="structure form/render" />
					</div>
				</div>
			</div>
		</div>
		<div class="actions">
			<div class="form-actions" tal:condition="view/actions | nothing">
				<input tal:repeat="action view/actions/values"
					   tal:replace="structure action/render" />
			</div>
		</div>
	</div>
</div>
<div tal:replace="structure provider:form_suffix" />
