function setSortableList(t,e,a,o){var n=new List(t,{valueNames:e,page:500});n.sort(a,{order:o})}function setTabMemory(t){if(Modernizr.localstorage&&"undefined"!=typeof localStorage[t]){var e=Foundation.utils.S("#"+t),a=e.find("ul.tabs li.tab-title.active");a.children("a").attr("href").substr(1)!==localStorage[t]&&(a.removeClass("active"),e.find("div.tabs-content div.content.active").removeClass("active"),e.find('li.tab-title a[href*="#'+localStorage[t]+'"]').parent().addClass("active"),e.find("div.tabs-content div#"+localStorage[t]).addClass("active"))}}function removePlayerOnClose(){Foundation.utils.S("#reveal-main").on("closed",function(){$(this).children(".flex-video").remove()})}function removeErrorImages(t){Foundation.utils.S("#"+t+" img.primo_img").on("error",function(t){$(this).remove()})}function revealInit(t){var e=t.find("input[type=text], input[type=radio], input[type=checkbox], textarea, select").filter(":visible:first");e.length>0&&e.focus(),t.find("form").submit(function(){var t=$(this).parents(".reveal-modal").children("h2"),e=$(this).find('[type="submit"]');t.children(".close-reveal-modal").remove(),t.append('<i class="fa fa-refresh fa-spin no-pad"></i>'),e.attr("disabled","disabled")})}function setRevealFormNewPage(t,e){Foundation.utils.S("#"+t).submit(function(t){t.preventDefault();var a=$(this),o=Foundation.utils.S("#"+e);$.post(a.attr("action"),a.serialize()).done(function(t){var e=$.parseHTML(t);$(e).find(".error").length?(o.empty().html(t),revealInit(o)):(o.foundation("reveal","close"),document.location.href=t)})})}function _alertBoxRemover(t,e){e.hasClass("alert")||e.delay(5e3).slideUp(function(){t.remove()}),e.on("click","> a.close",function(e){e.preventDefault(),e.stopPropagation(),t.slideUp(function(){$(this).remove()})})}function setAlertBox(t,e,a){var o="";a&&(o+="<h3>"+a+"</h3>"),o+=e+'<a class="close"></a>';var n=$("<div>",{id:"js-alert_box","class":"small-12 columns"}),i=$("<div>",{"class":"alert-box radius "+t,"data-alert":"data-alert",html:o,css:{display:"none"}});n.prepend(i),Foundation.utils.S("main").prepend(n),i.slideDown(),_alertBoxRemover(n,i)}function alterAlertBox(){$box=Foundation.utils.S(".alert-box"),_alertBoxRemover($box.parent("div"),$box)}function scrollerDisplay(){Foundation.utils.S("#breadcrumb").isOnScreen()?Foundation.utils.S(".scroll-top").fadeOut("fast"):Foundation.utils.S(".scroll-top").fadeIn("slow")}function setForumSearchReplyForm(t){Foundation.utils.S("#"+t).submit(function(t){var e=$(this);(""===e.find('input[type="text"]').first().val()||""===e.find("textarea").first().val())&&(t.preventDefault(),e.find("div.fieldErrorBox").fadeIn())})}function cleanForumSearchResults(){Foundation.utils.S("#searchResults dd span").each(function(t){var e=$(this).html(),a=e.lastIndexOf("blockquote");a>0&&$(this).html(e.substr(a+14))})}function setPlanLegend(){for(var t=Foundation.utils.S("#course_plan-plan span"),e="",a=["type_File","type_Image","type_Lienweb","type_Lecteurexportable","type_CatalogueBU","type_Presentationssonorisees","type_Webconference","type_Examen","type_AutoEvaluation","type_BoiteDepot","type_SalleVirtuelle"],o=[],n="",i=0;11>i;i++)t.hasClass(a[i])||Foundation.utils.S("#course_plan-legend dl.typeElement dd."+a[i]).remove();Foundation.utils.S("#course_plan-legend dl.typeElement dd:not(.hide)").hover(function(t){n=$(this).attr("class"),e=Foundation.utils.S("#course_plan-plan span:not(."+n+")"),e.fadeTo(200,.33)},function(t){e.fadeTo(200,1)})}function setConditionalFormat(t,e,a){a="undefined"!=typeof a?a:"tbody",$(a+" td:nth-child("+t+")").each(function(){var t=parseFloat($(this).text().replace(",","."));switch(!0){case 0===t:$(this).addClass("zero_score");break;case.25*e>t:$(this).addClass("firstQuarter");break;case.5*e>t:$(this).addClass("secondQuarter");break;case.75*e>t:$(this).addClass("thirdQuarter");break;case e>t:$(this).addClass("lastQuarter");break;default:$(this).addClass("max_score")}})}function readSwitcher(){var t=Foundation.utils.S("#course_plan-plan");t.on("click","a.right",function(e){if(e.preventDefault(),e.stopPropagation(),!isRefreshing){isRefreshing=!0;var a=$(this),o=Foundation.utils.S("#js-update_title"),n=a.attr("href"),i=o.html();o.html(MSG_LOADING),t.fadeTo(200,.33,function(){$.get(n,function(e,n){a.children("i.fa").toggleClass("fa-check-square-o fa-square-o"),t.fadeTo(200,1,function(){o.html(i),isRefreshing=!1})})})}})}$.fn.isOnScreen=function(){var t=$(window),e={top:t.scrollTop(),left:t.scrollLeft()};e.right=e.left+t.width(),e.bottom=e.top+t.height();var a=this.offset();return a.right=a.left+this.outerWidth(),a.bottom=a.top+this.outerHeight(),!(e.right<a.left||e.left>a.right||e.bottom<a.top||e.top>a.bottom)};var MSG_LOADING='<i class="fa fa-spin fa-refresh"></i>'+MSG_LOADING_TEXT,MSG_LOADING_OK='<i class="fa fa-thumbs-o-up"></i>'+MSG_LOADING_OK_TEXT,isRefreshing=!1;$(document).foundation({dropdown:{align:"left"},reveal:{animation:"fade",animation_speed:200,close_on_background_click:!0},tab:{callback:function(t){var e=t.parent("ul").parent("div").attr("id"),a=t.children("a").attr("href").substr(1);localStorage&&localStorage[e]!==a&&(localStorage[e]=a)}},tooltip:{disable_for_touch:!0,touch_close_text:MSG_TAP2CLOSE_TEXT},topbar:{custom_back_text:!1,mobile_show_parent_link:!1}}),$(document).ready(function(){$(document).ajaxError(function(t,e,a,o){Foundation.utils.S("[data-reveal]").foundation("reveal","close"),setAlertBox("alert","Une erreur est survenue",o)}),$(document).on("opened","[data-reveal]:not(#reveal-connect)",function(){revealInit($(this))}),Foundation.utils.S(window).scroll(function(){scrollerDisplay()}),Foundation.utils.S("body > footer").on("click",".scroll-top",function(t){t.preventDefault(),t.stopPropagation(),Foundation.utils.S("#breadcrumb").isOnScreen()||Foundation.utils.S("html, body").animate({opacity:.8},"fast").animate({scrollTop:0},"slow").animate({opacity:1},"fast")})});