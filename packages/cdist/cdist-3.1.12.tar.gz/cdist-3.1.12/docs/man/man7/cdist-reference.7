'\" t
.\"     Title: cdist-reference
.\"    Author: Nico Schottelius <nico-cdist--@--schottelius.org>
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 03/19/2015
.\"    Manual: \ \&
.\"    Source: \ \&
.\"  Language: English
.\"
.TH "CDIST\-REFERENCE" "7" "03/19/2015" "\ \&" "\ \&"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
cdist-reference \- Variable, path and type reference for cdist
.SH "EXPLORERS"
.sp
The following global explorers are available:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
cpu_cores
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
cpu_sockets
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
hostname
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
interfaces
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
lsb_codename
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
lsb_description
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
lsb_id
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
lsb_release
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
machine
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
machine_type
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
memory
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
os
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
os_version
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
runlevel
.RE
.SH "PATHS"
.PP
$HOME/\&.cdist
.RS 4
The standard cdist configuration directory relative to your home directory This is usually the place you want to store your site specific configuration
.RE
.PP
cdist/conf/
.RS 4
The distribution configuration directory This contains types and explorers to be used
.RE
.PP
confdir
.RS 4
Cdist will use all available configuration directories and create a temporary confdir containing links to the real configuration directories\&. This way it is possible to merge configuration directories\&. By default it consists of everything in $HOME/\&.cdist and cdist/conf/\&. For more details see cdist(1)
.RE
.PP
confdir/manifest/init
.RS 4
This is the central entry point\&. It is an executable (+x bit set) shell script that can use values from the explorers to decide which configuration to create for the specified target host\&. Its intent is to used to define mapping from configurations to hosts\&.
.RE
.PP
confdir/manifest/*
.RS 4
All other files in this directory are not directly used by cdist, but you can seperate configuration mappings, if you have a lot of code in the conf/manifest/init file\&. This may also be helpful to have different admins maintain different groups of hosts\&.
.RE
.PP
confdir/explorer/<name>
.RS 4
Contains explorers to be run on the target hosts, see cdist\-explorer(7)\&.
.RE
.PP
confdir/type/
.RS 4
Contains all available types, which are used to provide some kind of functionality\&. See cdist\-type(7)\&.
.RE
.PP
confdir/type/<name>/
.RS 4
Home of the type <name>\&. This directory is referenced by the variable __type (see below)\&.
.RE
.PP
confdir/type/<name>/man\&.text
.RS 4
Manpage in Asciidoc format (required for inclusion into upstream)
.RE
.PP
confdir/type/<name>/manifest
.RS 4
Used to generate additional objects from a type\&.
.RE
.PP
confdir/type/<name>/gencode\-local
.RS 4
Used to generate code to be executed on the source host
.RE
.PP
confdir/type/<name>/gencode\-remote
.RS 4
Used to generate code to be executed on the target host
.RE
.PP
confdir/type/<name>/parameter/required
.RS 4
Parameters required by type, \en seperated list\&.
.RE
.PP
confdir/type/<name>/parameter/optional
.RS 4
Parameters optionally accepted by type, \en seperated list\&.
.RE
.PP
confdir/type/<name>/parameter/default/*
.RS 4
Default values for optional parameters\&. Assuming an optional parameter name of
\fIfoo\fR, it\(cqs default value would be read from the file confdir/type/<name>/parameter/default/foo\&.
.RE
.PP
confdir/type/<name>/parameter/boolean
.RS 4
Boolean parameters accepted by type, \en seperated list\&.
.RE
.PP
confdir/type/<name>/explorer
.RS 4
Location of the type specific explorers\&. This directory is referenced by the variable __type_explorer (see below)\&. See cdist\-explorer(7)\&.
.RE
.PP
confdir/type/<name>/files
.RS 4
This directory is reserved for user data and will not be used by cdist at any time\&. It can be used for storing supplementary files (like scripts to act as a template or configuration files)\&.
.RE
.PP
out/
.RS 4
This directory contains output of cdist and is usually located in a temporary directory and thus will be removed after the run\&. This directory is referenced by the variable __global (see below)\&.
.RE
.PP
out/explorer
.RS 4
Output of general explorers\&.
.RE
.PP
out/object
.RS 4
Objects created for the host\&.
.RE
.PP
out/object/<object>
.RS 4
Contains all object specific information\&. This directory is referenced by the variable __object (see below)\&.
.RE
.PP
out/object/<object>/explorers
.RS 4
Output of type specific explorers, per object\&.
.RE
.SH "TYPES"
.sp
The following types are available:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__apt_update_index (cdist\-type__apt_update_index(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__cdistmarker (cdist\-type__cdistmarker(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__config_file (cdist\-type__config_file(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_agent (cdist\-type__consul_agent(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_check (cdist\-type__consul_check(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_reload (cdist\-type__consul_reload(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_service (cdist\-type__consul_service(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_template_template (cdist\-type__consul_template_template(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_template (cdist\-type__consul_template(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul (cdist\-type__consul(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_watch_checks (cdist\-type__consul_watch_checks(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_watch_event (cdist\-type__consul_watch_event(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_watch_keyprefix (cdist\-type__consul_watch_keyprefix(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_watch_key (cdist\-type__consul_watch_key(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_watch_nodes (cdist\-type__consul_watch_nodes(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_watch_services (cdist\-type__consul_watch_services(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__consul_watch_service (cdist\-type__consul_watch_service(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__firewalld_rule (cdist\-type__firewalld_rule(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__group (cdist\-type__group(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__package_apt (cdist\-type__package_apt(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__package_pkgng_freebsd (cdist\-type__package_pkgng_freebsd(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__package_update_index (cdist\-type__package_update_index(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__package_upgrade_all (cdist\-type__package_upgrade_all(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__package_yum (cdist\-type__package_yum(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__qemu_img (cdist\-type__qemu_img(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__rsync (cdist\-type__rsync(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__ssh_authorized_keys (cdist\-type__ssh_authorized_keys(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__ssh_authorized_key (cdist\-type__ssh_authorized_key(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__ssh_dot_ssh (cdist\-type__ssh_dot_ssh(7))
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
__staged_file (cdist\-type__staged_file(7))
.RE
.SH "OBJECTS"
.sp
For object to object communication and tests, the following paths are usable within a object directory:
.PP
files
.RS 4
This directory is reserved for user data and will not be used by cdist at any time\&. It can be used freely by the type (for instance to store template results)\&.
.RE
.PP
changed
.RS 4
This empty file exists in an object directory, if the object has code to be excuted (either remote or local)
.RE
.PP
stdin
.RS 4
This file exists and contains data, if data was provided on stdin when the type was called\&.
.RE
.SH "ENVIRONMENT VARIABLES (FOR READING)"
.sp
The following environment variables are exported by cdist:
.PP
__explorer
.RS 4
Directory that contains all global explorers\&. Available for: initial manifest, explorer, type explorer, shell
.RE
.PP
__manifest
.RS 4
Directory that contains the initial manifest\&. Available for: initial manifest, type manifest, shell
.RE
.PP
__global
.RS 4
Directory that contains generic output like explorer\&. Available for: initial manifest, type manifest, type gencode, shell
.RE
.PP
__messages_in
.RS 4
File to read messages from\&. Available for: initial manifest, type manifest, type gencode
.RE
.PP
__messages_out
.RS 4
File to write messages\&. Available for: initial manifest, type manifest, type gencode
.RE
.PP
__object
.RS 4
Directory that contains the current object\&. Available for: type manifest, type explorer, type gencode and code scripts
.RE
.PP
__object_id
.RS 4
The type unique object id\&. Available for: type manifest, type explorer, type gencode and code scripts Note: The leading and the trailing "/" will always be stripped (caused by the filesystem database and ensured by the core)\&. Note: Double slashes ("//") will not be fixed and result in an error\&.
.RE
.PP
__object_name
.RS 4
The full qualified name of the current object\&. Available for: type manifest, type explorer, type gencode
.RE
.PP
__target_host
.RS 4
The host we are deploying to\&. Available for: explorer, initial manifest, type explorer, type manifest, type gencode, shell
.RE
.PP
__type
.RS 4
Path to the current type\&. Available for: type manifest, type gencode
.RE
.PP
__type_explorer
.RS 4
Directory that contains the type explorers\&. Available for: type explorer
.RE
.SH "ENVIRONMENT VARIABLES (FOR WRITING)"
.sp
The following environment variables influence the behaviour of cdist:
.PP
require
.RS 4
Setup dependencies between objects (see cdist\-manifest(7))
.RE
.PP
CDIST_LOCAL_SHELL
.RS 4
Use this shell locally instead of /bin/sh to execute scripts
.RE
.PP
CDIST_REMOTE_SHELL
.RS 4
Use this shell remotely instead of /bin/sh to execute scripts
.RE
.PP
CDIST_OVERRIDE
.RS 4
Allow overwriting type parameters (see cdist\-manifest(7))
.RE
.PP
CDIST_ORDER_DEPENDENCY
.RS 4
Create dependencies based on the execution order (see cdist\-manifest(7))
.RE
.SH "SEE ALSO"
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
cdist(1)
.RE
.SH "COPYING"
.sp
Copyright (C) 2011\-2014 Nico Schottelius\&. Free use of this software is granted under the terms of the GNU General Public License version 3 (GPLv3)\&.
.SH "AUTHOR"
.PP
\fBNico Schottelius\fR <\&nico\-cdist\-\-@\-\-schottelius\&.org\&>
.RS 4
Author.
.RE
