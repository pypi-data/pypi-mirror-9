'\" t
.\"     Title: cdist-hacker
.\"    Author: Nico Schottelius <nico-cdist--@--schottelius.org>
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 02/10/2015
.\"    Manual: \ \&
.\"    Source: \ \&
.\"  Language: English
.\"
.TH "CDIST\-HACKER" "7" "02/10/2015" "\ \&" "\ \&"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
cdist-hacker \- How to get (stuff) into cdist
.SH "WELCOME"
.sp
Welcome dear hacker! I invite you to a tour of pointers to get into the usable configuration mangament system, cdist\&.
.sp
The first thing to know is probably that cdist is brought to you by people who care about how code looks like and who think twice before merging or implementing a feature: Less features with good usability are far better than the opposite\&.
.SH "REPORTING BUGS"
.sp
If you believe you\(cqve found a bug and verified that it is in the latest version, drop a mail to the cdist mailing list, subject prefixed with "[BUG] " or create an issue on github\&.
.SH "CODING CONVENTIONS (EVERYWHERE)"
.sp
If something should be better done or needs to fixed, add the word FIXME nearby, so grepping for FIXME gives all positions that need to be fixed\&.
.sp
Indention is 4 spaces (welcome to the python world)\&.
.SH "HOW TO SUBMIT STUFF FOR INCLUSION INTO UPSTREAM CDIST"
.sp
If you did some cool changes to cdist, which you value as a benefit for everybody using cdist, you\(cqre welcome to propose inclusion into upstream\&.
.sp
There are though some requirements to ensure your changes don\(cqt break others work nor kill the authors brain:
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
All files should contain the usual header (Author, Copying, etc\&.)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Code submission must be done via git
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Do not add cdist/conf/manifest/init \- This file should only be touched in your private branch!
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Code to be included should be branched of the upstream "master" branch
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Exception: Bugfixes to a version branch
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
On a merge request, always name the branch I should pull from
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
Always ensure
\fBall\fR
manpages build\&. Use
\fB\&./build man\fR
to test\&.
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
If you developed more than
\fBone\fR
feature, consider submitting them in separate branches\&. This way one feature can already be included, even if the other needs to be improved\&.
.RE
.sp
As soon as your work meets these requirements, write a mail for inclusion to the mailinglist \fBcdist at cdist \(em at \(em l\&.schottelius\&.org\fR or open a pull request at http://github\&.com/telmich/cdist\&.
.SH "HOW TO SUBMIT A NEW TYPE"
.sp
For detailled information about types, see cdist\-type(7)\&.
.sp
Submitting a type works as described above, with the additional requirement that a corresponding manpage named man\&.text in asciidoc format with the manpage\-name "cdist\-type__NAME" is included in the type directory AND asciidoc is able to compile it (i\&.e\&. do NOT have to many "=" in the second line)\&.
.sp
Warning: Submitting "exec" or "run" types that simply echo their parameter in gencode* will not be accepted, because they are of no use\&. Every type can output code and thus such a type introduces redundant functionality that is given by core cdist already\&.
.SH "EXAMPLE GIT WORKFLOW"
.sp
The following workflow works fine for most developers:
.sp
.if n \{\
.RS 4
.\}
.nf
# get latest upstream master branch
git clone https://github\&.com/telmich/cdist\&.git

# update if already existing
cd cdist; git fetch \-v; git merge origin/master

# create a new branch for your feature/bugfix
cd cdist # if you haven\*(Aqt done before
git checkout \-b documentation_cleanup

# *hack*
*hack*

# clone the cdist repository on github if you haven\*(Aqt done so

# configure your repo to know about your clone (only once)
git remote add github git@github\&.com:YOURUSERNAME/cdist\&.git

# push the new branch to github
git push github documentation_cleanup

# (or everything)
git push \-\-mirror github

# create a pull request at github (use a browser)
# *fixthingsbecausequalityassurancefoundissuesinourpatch*
*hack*

# push code to github again
git push \&.\&.\&. # like above

# add comment that everything should be green now (use a browser)

# go back to master branch
git checkout master

# update master branch that includes your changes now
git fetch \-v origin
git diff master\&.\&.origin/master
git merge origin/master
.fi
.if n \{\
.RE
.\}
.sp
If at any point you want to go back to the original master branch, you can use \fBgit stash\fR to stash your changes away:
.sp
.if n \{\
.RS 4
.\}
.nf
# assume you are on documentation_cleanup
git stash

# change to master and update to most recent upstream version
git checkout master
git fetch \-v origin
git merge origin/master
.fi
.if n \{\
.RE
.\}
.sp
Similar when you want to develop another new feature, you go back to the master branch and create another branch based on it:
.sp
.if n \{\
.RS 4
.\}
.nf
# change to master and update to most recent upstream version
git checkout master
git fetch \-v origin
git merge origin/master

git checkout \-b another_feature
.fi
.if n \{\
.RE
.\}
.sp
(you can repeat the code above for as many features as you want to develop in parallel)
.SH "SEE ALSO"
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
cdist(7)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
git(1)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
git\-checkout(1)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
git\-stash(1)
.RE
.SH "COPYING"
.sp
Copyright (C) 2011\-2013 Nico Schottelius\&. Free use of this software is granted under the terms of the GNU General Public License version 3 (GPLv3)\&.
.SH "AUTHOR"
.PP
\fBNico Schottelius\fR <\&nico\-cdist\-\-@\-\-schottelius\&.org\&>
.RS 4
Author.
.RE
