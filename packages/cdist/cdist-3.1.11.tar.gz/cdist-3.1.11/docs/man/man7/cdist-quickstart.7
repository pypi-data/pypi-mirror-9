'\" t
.\"     Title: cdist-quickstart
.\"    Author: Nico Schottelius <nico-cdist--@--schottelius.org>
.\" Generator: DocBook XSL Stylesheets v1.78.1 <http://docbook.sf.net/>
.\"      Date: 02/10/2015
.\"    Manual: \ \&
.\"    Source: \ \&
.\"  Language: English
.\"
.TH "CDIST\-QUICKSTART" "7" "02/10/2015" "\ \&" "\ \&"
.\" -----------------------------------------------------------------
.\" * Define some portability stuff
.\" -----------------------------------------------------------------
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.\" http://bugs.debian.org/507673
.\" http://lists.gnu.org/archive/html/groff/2009-02/msg00013.html
.\" ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\" -----------------------------------------------------------------
.\" * set default formatting
.\" -----------------------------------------------------------------
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.\" -----------------------------------------------------------------
.\" * MAIN CONTENT STARTS HERE *
.\" -----------------------------------------------------------------
.SH "NAME"
cdist-quickstart \- jump in and enjoy cdist
.SH "INTRODUCTION"
.sp
This tutorial is aimed at people learning cdist and shows typical approaches as well as gives an easy start into the world of configuration management\&.
.sp
This tutorial assumes you are configuring \fBlocalhost\fR, because it is always available\&. Just replace \fBlocalhost\fR with your target host for real life usage\&.
.SH "QUICK START - GET YOUR HANDS DIRTY NOW"
.sp
For those who just want to configure a system with the cdist configuration management and do not need (or want) to understand everything\&.
.sp
Cdist uses \fBssh\fR for communication and transportation and usually logs into the \fBtarget host\fR as the \fBroot\fR user\&. So you need to configure the \fBssh server\fR of the target host to allow root logins: Edit the file \fB/etc/ssh/sshd_config\fR and add one of the following lines:
.sp
.if n \{\
.RS 4
.\}
.nf
# Allow login only via public key
PermitRootLogin without\-password

# Allow login via password and public key
PermitRootLogin yes
.fi
.if n \{\
.RE
.\}
.sp
As cdist uses ssh intensively, it is recommended to setup authentication with public keys:
.sp
.if n \{\
.RS 4
.\}
.nf
# Generate pubkey pair as a normal user
ssh\-keygen

# Copy pubkey over to target host
ssh\-copy\-id root@localhost
.fi
.if n \{\
.RE
.\}
.sp
Have a look at ssh\-agent(1) and ssh\-add(1) on how to cache the password for your public key\&. Usually it looks like this:
.sp
.if n \{\
.RS 4
.\}
.nf
# Start agent and export variables
eval `ssh\-agent`

# Add keys (requires password for every identity file)
ssh\-add
.fi
.if n \{\
.RE
.\}
.sp
At this point you should be able to \fB\fBssh root@localhost\fR\fR without re\-entering the password\&. If something failed until here, ensure that all steps went successfully and you have read and understood the documentation\&.
.sp
As soon as you are able to login without password to localhost, we can use cdist to configure it\&. You can copy and paste the following code into your shell to get started and configure localhost:
.sp
.if n \{\
.RS 4
.\}
.nf
# Get cdist
# Mirrors can be found on
# http://www\&.nico\&.schottelius\&.org/software/cdist/install/#index2h4
git clone git://git\&.schottelius\&.org/cdist

# Create manifest (maps configuration to host(s)
cd cdist
echo \*(Aq__file /etc/cdist\-configured\*(Aq > cdist/conf/manifest/init

# Configure localhost in verbose mode
\&./bin/cdist config \-v localhost

# Find out that cdist created /etc/cdist\-configured
ls \-l /etc/cdist\-configured
.fi
.if n \{\
.RE
.\}
.sp
That\(cqs it, you\(cqve successfully used cdist to configure your first host! Continue reading the next sections, to understand what you did and how to create a more sophisticated configuration\&.
.SH "SEE ALSO"
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
cdist(1)
.RE
.sp
.RS 4
.ie n \{\
\h'-04'\(bu\h'+03'\c
.\}
.el \{\
.sp -1
.IP \(bu 2.3
.\}
cdist\-tutorial(7)
.RE
.SH "COPYING"
.sp
Copyright (C) 2011\-2012 Nico Schottelius\&. Free use of this software is granted under the terms of the GNU General Public License version 3 (GPLv3)\&.
.SH "AUTHOR"
.PP
\fBNico Schottelius\fR <\&nico\-cdist\-\-@\-\-schottelius\&.org\&>
.RS 4
Author.
.RE
