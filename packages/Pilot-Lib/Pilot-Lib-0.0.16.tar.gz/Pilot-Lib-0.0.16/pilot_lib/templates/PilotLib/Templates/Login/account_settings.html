
{% extends "PilotLib/Templates/Login/login-layout.html" %}

{% block login_content %}
            <h2>{{ login_title | default('Account Settings')}}</h2>

            <div role="tabpanel">

              <!-- Nav tabs -->
              <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#home" aria-controls="home" role="tab" data-toggle="tab">Edit Name & Photo</a></li>
                <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab">Change Login</a></li>
                <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">Change Password</a></li>
              </ul>

              <!-- Tab panes -->
              <div class="tab-content">

                <div role="tabpanel" class="tab-pane active" id="home">

                        <input type="hidden" id="profile-pic-url" name="profile_pic_url" value="" />
                        <div class="col-md-6">
                            <form method="POST" action="{{url_for('Login:change_info')}}">
                                <h3>Edit Name</h3>
                                <div class="form-group">
                                    <input type="text" class="form-control"  name="name" value="{{current_user.name}}" placeholder="Name">
                                </div>

                                <button type="submit" class="btn btn-primary">Save</button>

                            </form>
                        </div>

                        <div class="col-md-6">
                            <h3>Change Profile Picture</h3>

                            <div class="s3-upload-profile-pic-preview profile-pic-avatar size-150">
                                <img src="{{ current_user.profile_pic_url }}"  />
                            </div>

                            <input s3:upload
                                   type="file"
                                   id="profile-pic"
                                   data-id="profile-pic"
                                   data-filename-prefix="user/profile-pic/{{ current_user.id }}"
                                   data-type="image"
                                   data-s3-url="{{ url_for('Login:sign_s3_upload') }}"
                                   data-update-url="{{ url_for('Login:change_profile_pic') }}"
                                   data-update-name="profile_pic_url"
                                   data-status="#upload-status"
                                   data-preview=".s3-upload-profile-pic-preview"
                            >
                            <div id="upload-status"></div>

                        </div>

                    </form>
                </div>

                <div role="tabpanel" class="tab-pane" id="profile">
                    <form method="POST" action="{{url_for('Login:change_login')}}">

                        <h3>Change Login</h3>

                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" class="form-control"  name="email" value="{{current_user.email}}" placeholder="Email">
                        </div>

                        <div class="form-group">
                            <label>Current Password:</label>
                            <input type="password" class="form-control"  name="confirm-password" placeholder="Current Password">
                        </div>

                        <button type="submit" class="btn btn-primary">Save</button>
                    </form>
                </div>


                <div role="tabpanel" class="tab-pane" id="messages">

                    <form method="POST" action="{{url_for('Login:change_password')}}">

                        <h3>Change Password</h3>

                        <div class="form-group">
                            <label>Old Password:</label>
                            <input type="password" class="form-control"  name="confirm-password"  placeholder="Old Password">
                        </div>

                        <div class="form-group">
                            <label>New Password:</label>
                            <input type="password" class="form-control" name="password" placeholder="New Password">
                        </div>
                        <div class="form-group">
                            <label>Retype New Password:</label>
                            <input type="password" class="form-control" name="password2" placeholder="Retype New Password">
                        </div>

                        <button type="submit" class="btn btn-primary">Save</button>
                    </form>
                </div>
              </div>
            </div>


{% endblock %}

