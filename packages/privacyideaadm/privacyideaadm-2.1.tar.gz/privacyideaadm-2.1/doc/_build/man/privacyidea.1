.\" Man page generated from reStructuredText.
.
.TH "PRIVACYIDEA" "1" "March 10, 2015" "2.1" "privacyidea"
.SH NAME
privacyidea \- privacyidea Documentation
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
privacyidea \-U URL \-a ADMIN [\-p PASSWORD] COMMMAND <COMMAND\-OPTIONS>
.SH DESCRIPTON
.sp
This is the command line tool for the privacyIDEA server. It can be used to do
several special actions like
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
enrolling tokens,
.IP \(bu 2
listing users and tokens,
.IP \(bu 2
assign and delete tokens,
.IP \(bu 2
create and manage machines etc.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
You can put parameters like the password or the host connection definition into a file
like \(aqmy\-secret\-connection\-values.txt\(aq and reference this file like this at
the command line:
.sp
@my\-secret\-connection\-values.txt
.sp
Thus you can use the command line tool to perform automatic tasks and avoid exposing
secret credentials in the process list.
.SH OPTIONS
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-h\fP,\fB  \-\-help
show this help message and exit
.TP
.BI \-U \ URL\fP,\fB \ \-\-url \ URL
The URL of the privacyIDEA server including protocol
and port like \fI\%https://localhost:5001\fP
.TP
.BI \-a \ ADMIN\fP,\fB \ \-\-admin \ ADMIN
The name of the administrator like \fI\%admin@admin\fP
.TP
.BI \-p \ PASSWORD\fP,\fB \ \-\-password \ PASSWORD
The password of the administrator. Please avoid to
post the password at the command line. You will be
asked for it \- or you can provide the password in a
configuration file. Note, that you can write a file
password.txt containing two lines \(aq\-\-password\(aq and the
second line the password itself and add this to the
command line with @password.txt
.TP
.B \-v\fP,\fB  \-\-version
Print the version of the program.
.TP
.B \-\-nosslcheck
The ssl certificate is not checked.
\fBOnly use this, if you know what you are doing\fP\&.
You should use an SSL certificate from a \fBreally\fP
trusted CA.
.UNINDENT
.UNINDENT
.UNINDENT
.SH COMMANDS
.INDENT 0.0
.INDENT 3.5
The command line tool requires commands, to know what action it should
take. Some commands have only one level, other commands are grouped and
have two levels.
.sp
You can get help at each level by appending the parameter \-h.
.sp
Top level commands are:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
user: list the available users.
.IP \(bu 2
token: token commands used to list tokens, assign, enroll, resync ...
.IP \(bu 2
machine: machine commands used to list machines and assign tokens and
.UNINDENT
.sp
applications to these machines
* securitymodule: Get the status of the securitymodule or set the password of the securitymodule
* config: server configuration
* realm: realm configuration
* resolver: resolver configuration
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.SH EXAMPLES
.SS Enroll a Yubikey in challenge response mode
.INDENT 0.0
.INDENT 3.5
privacyidea @secrets.txt token yubikey_mass_enroll \-\-yubiCR \-\-yubislot 2
.UNINDENT
.UNINDENT
.sp
This will enroll the Yubikey in challenge response mode and the C/R will
be written to slot 2. Thus the yubikey can be used for LUKS.
.sp
The file \fIsecrets.txt\fP would look like this:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
\-\-password
topSecr3t
\-\-url
https://your\-server:443
\-\-admin
admin@admin
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Get the Authentication Items from a Yubikey in challenge Response mode
.sp
You have assigned the above enrolled Yubikey to a machine with the LUKS
application. You can then get the authentication item like this:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
privacyidea @secrets machine authitem \-\-hostname <machine>
Please enter password for \(aqadmin\(aq:

 {   u\(aqstatus\(aq: True,
     u\(aqvalue\(aq: {   u\(aqluks\(aq: [   {   u\(aqchallenge\(aq: u\(aq43eca67a4cf12a1b158c4ec7c1100b7529fb3f3d19370c040320c2245a4ae91d\(aq,
                                    u\(aqpartition\(aq: u\(aq/dev/sda\(aq,
                                    u\(aqresponse\(aq: u\(aq1636b930f3ee4b37b8fe0cd9f979bb9fc99cd3ed\(aq,
                                    u\(aqslot\(aq: u\(aq1\(aq}]}}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
This means the \fBchallenge\fP sent to the Yubikey will always produce the
mentioned \fBresponse\fP\&.
.sp
This can be used to populate an LUKS slot.
.sp
To verify this use the command:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ykchalresp 43eca67a4cf12a1b158c4ec7c1100b7529fb3f3d19370c040320c2245a4ae91d
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Enroll an eToken NG OTP under Windows
.sp
You need the SafeNet Authentication Client (driver/middleware) to enroll the eToken NG.
Please ensure, that you have installed it.
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
You should have administrative rights, when enrolling the eToken NG.
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 0.0
.INDENT 3.5
If you are experiencing problems like "ET_TokenInitFinal failed", you
should install the eToken PKI Client 5.1 SP1.
.UNINDENT
.UNINDENT
.sp
Now you need to install Python for Windows 2.7.8. You can get this from
\fI\%https://www.python.org/downloads/release/\fP\&.
.sp
This will be installed to C:python27 by default.
.sp
You need an additional python module \fBusb\fP, which you can get here:
\fI\%http://sourceforge.net/projects/pyusb/files/PyUSB%201.0/1.0.0\-beta\-2/pyusb\-1.0.0b2.zip/download\fP
.sp
Please unpack it and from within the new folder issue the following commands:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
c:\epython27\epython setup.py build
c:\epython27\epython setup.py install
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Now you need to unpack the latest privacyideaadm package and also install it via the
same commands \fIsetup.py build\fP and \fIinstall\fP as above.
.sp
The scripts are installed to \fIC:python27scripts\fP\&.
.sp
Now you can start the command line client to enroll eToken NG:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
c:\epython27\epython c:\epython27\epython\escripts\eprivacyidea \e
\-U https://server
\-a admin@admin token etokenng_mass_enroll
.ft P
.fi
.UNINDENT
.UNINDENT
.SH AUTHOR
Cornelius Kölbel
.SH COPYRIGHT
2014-2015, Cornelius Kölbel
.\" Generated by docutils manpage writer.
.
