


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Defining advanced service dependencies &mdash; Shinken Manual 2.2 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'2.2',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
    <link rel="top" title="Shinken Manual 2.2 documentation" href="../index.html"/>
        <link rel="up" title="Advanced Topics" href="index.html"/>
        <link rel="next" title="Shinken’s distributed architecture" href="distributed-shinken.html"/>
        <link rel="prev" title="Scaling Shinken for large deployments" href="scaling-shinken.html"/> 

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="icon icon-home"> Shinken Manual</a>
        <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search docs" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../01_about/index.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../01_about/about.html">About Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_about/whatsnew.html">Feature comparison between Shinken and Nagios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_about/shinken-innovative-features.html">Shinken notable innovations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_about/the-project-vision.html">The project Vision</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_about/features-and-release-cycle.html">Feature selection and release cycle</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../02_gettingstarted/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../02_gettingstarted/beginners.html">Advice for Beginners</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_gettingstarted/quickstart.html">Quickstart Installation Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_gettingstarted/installations/index.html">Installations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../02_gettingstarted/upgrading-shinken.html">Upgrading Shinken</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../03_configuration/index.html">Configuring Shinken</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/config.html">Configuration Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/configmain.html">Main Configuration File (shinken.cfg) Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/configobject.html">Object Configuration Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/objectdefinitions.html">Object Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/customobjectvars.html">Custom Object Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../03_configuration/configmain-advanced.html">Main advanced configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../04_runningshinken/index.html">Running Shinken</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../04_runningshinken/verifyconfig.html">Verifying Your Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../04_runningshinken/startstop.html">Starting and Stopping Shinken</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../05_thebasics/index.html">The Basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/configure-shinken.html">Setting up a basic Shinken Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/plugins.html">Monitoring Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/macros.html">Understanding Macros and How They Work</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/macrolist.html">Standard Macros in Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/hostchecks.html">Host Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/servicechecks.html">Service Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/activechecks.html">Active Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/passivechecks.html">Passive Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/statetypes.html">State Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/timeperiods.html">Time Periods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/networkreachability.html">Determining Status and Reachability of Network Hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/notifications.html">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/active-module-checks.html">Active data acquisition modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/dependencies-in-shinken.html">Setup Network and logical dependencies in Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_thebasics/update.html">Update Shinken</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../06_medium/index.html">Medium</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/business-rules.html">Business rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/dmz-monitoring.html">Monitoring a DMZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/high-availability.html">Shinken High Availability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/mix-windows-and-linux-polling.html">Mixed GNU/linux AND Windows pollers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/notification-escalations.html">Notifications and escalations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/notification-ways.html">The Notification Ways, AKA mail 24x7, SMS only the night for a same contact</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/passive-checks.html">Passive data acquisition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../06_medium/snapshots.html">Snapshots</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Advanced Topics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="extcommands.html">External Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="eventhandlers.html">Event Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="volatileservices.html">Volatile Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="freshness.html">Service and Host Freshness Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="distributed.html">Distributed Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="redundancy.html">Redundant and Failover Network Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="flapping.html">Detection and Handling of State Flapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="escalations.html">Notification Escalations</a></li>
<li class="toctree-l2"><a class="reference internal" href="oncallrotation.html">On-Call Rotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="clusters.html">Monitoring Service and Host Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependencies.html">Host and Service Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="stalking.html">State Stalking</a></li>
<li class="toctree-l2"><a class="reference internal" href="perfdata.html">Performance Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="downtime.html">Scheduled Downtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="adaptative.html">Adaptive Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependencychecks.html">Predictive Dependency Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="cachedchecks.html">Cached Checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="passivestatetranslation.html">Passive Host State Translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="checkscheduling.html">Service and Host Check Scheduling</a></li>
<li class="toctree-l2"><a class="reference internal" href="objectinheritance.html">Object Inheritance</a></li>
<li class="toctree-l2"><a class="reference internal" href="objecttricks.html">Advanced tricks</a></li>
<li class="toctree-l2"><a class="reference internal" href="migratingfromnagios.html">Migrating from Nagios to Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi-layer-discovery.html">Multi layer discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="multiple-urls.html">Multiple action urls</a></li>
<li class="toctree-l2"><a class="reference internal" href="rule-agregation.html">Aggregation rule</a></li>
<li class="toctree-l2"><a class="reference internal" href="scaling-shinken.html">Scaling Shinken for large deployments</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Defining advanced service dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="distributed-shinken.html">Shinken&#8217;s distributed architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="distributed-with-realm.html">Shinken&#8217;s distributed architecture with realms</a></li>
<li class="toctree-l2"><a class="reference internal" href="macro-modulations.html">Macro modulations</a></li>
<li class="toctree-l2"><a class="reference internal" href="sms-with-android.html">Shinken and Android</a></li>
<li class="toctree-l2"><a class="reference internal" href="sms-with-gateway.html">Send sms by gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="triggers.html">Triggers</a></li>
<li class="toctree-l2"><a class="reference internal" href="unused-nagios-parameters.html">Unused nagios parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="discovery-with-shinken-advanced.html">Advanced discovery with Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="discovery-with-shinken.html">Discovery with Shinken</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../08_configobjects/index.html">Config</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/host.html">Host Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/hostgroup.html">Host Group Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/service.html">Service Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/servicegroup.html">Service Group Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/contact.html">Contact Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/contactgroup.html">Contact Group Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/timeperiod.html">Time Period Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/command.html">Command Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/servicedependency.html">Service Dependency Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/serviceescalation.html">Service Escalation Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/hostdependency.html">Host Dependency Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/hostescalation.html">Host Escalation Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/hostextinfo.html">Extended Host Information Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/serviceextinfo.html">Extended Service Information Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/notificationway.html">Notification Way Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/realm.html">Realm Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/arbiter.html">Arbiter Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/scheduler.html">Scheduler Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/poller.html">Poller Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/reactionner.html">Reactionner Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../08_configobjects/broker.html">Broker Definition</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../09_architecture/index.html">Shinken Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/about-the-high-availability.html">Arbiter supervision of Shinken processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/advanced-features.html">Advanced architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/how-dispatching-works.html">How are commands and configurations managed in Shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/problems-and-impacts.html">Problems and impacts correlation management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../09_architecture/the-shinken-architecture.html">Shinken Architecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../10_troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../10_troubleshooting/troubleshooting-shinken.html">FAQ - Shinken troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../11_integration/index.html">Integration With Other Software</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/integration.html">Integration Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/snmptrap.html">SNMP Trap Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/tcpwrappers.html">TCP Wrappers Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/thruk.html">Use Shinken with Thruk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/specific-cgi-parameters.html">Nagios CGI UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/thruk-screenshot.html">Thruk interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/use-shinken-with.html">Use Shinken with ...</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/centreon.html">Use Shinken with Centreon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/graphite.html">Use Shinken with Graphite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/multisite.html">Use Shinken with Multisite</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/nagvis.html">Use Shinken with Nagvis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/old-cgi-and-vshell.html">Use Shinken with Old CGI and VShell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/pnp.html">Use Shinken with PNP4Nagios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../11_integration/webui.html">Use Shinken with WebUI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../12_tuning/index.html">Security and Performance Tuning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/security.html">Security Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/tuning.html">Tuning Shinken For Maximum Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/largeinstalltweaks.html">Scaling a Shinken installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/statistics.html">Shinken performance statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_tuning/mrtggraphs.html">Graphing Performance Info With MRTG and nagiostats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../13_monitoring/index.html">How to monitor ...</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/dc.html">Monitoring Active Directory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/asterisk.html">Monitoring Asterisk servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/dhcp.html">Monitoring DHCP servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/iis.html">Monitoring IIS servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/linux.html">Monitoring Linux devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/monitoring-a-linux.html">Monitoring Linux devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/monitoring-a-linux-via-local-agent.html">Monitoring Linux devices via a Local Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/monitoring-a-linux-via-snmp.html">Monitoring Linux devices via SNMP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/exchange.html">Monitoring Microsoft Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/mssql.html">Monitoring Microsoft SQL databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/mysql.html">Monitoring MySQL databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/routers.html">Monitoring Routers and Switches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/router-or-switch.html">Monitoring Network devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/oracle.html">Monitoring Oracle databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/printer.html">Monitoring Printers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/network-service.html">Monitoring Publicly Available Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/vmware.html">Monitoring VMware hosts and machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/windows.html">Monitoring Windows devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/windows-monitoring-with-nsclient.html">Monitoring Windows devices via NSClient++</a></li>
<li class="toctree-l2"><a class="reference internal" href="../13_monitoring/configure-check-wmi-plus-onwindows.html">Monitoring Windows devices via WMI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../14_contributing/index.html">How to contribute</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../14_contributing/create-and-push-packs.html">Shinken packs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../14_contributing/create-a-package.html">Shinken modules and Shinken packs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../14_contributing/help-the-project.html">Help the Shinken project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../14_contributing/how-to-contribute.html">Getting Help and Ways to Contribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../14_contributing/spm.html">Shinken Package Manager</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../15_development/index.html">Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../15_development/programming-rules.html">Shinken Programming Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/test-driven-development.html">Test Driven Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/pluginapi.html">Shinken Plugin API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/modules.html">Developing Shinken Daemon Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/hackingcode.html">Hacking the Shinken Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../15_development/documentation.html">Shinken documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../98_deprecated/index.html">Deprecated</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../98_deprecated/install-script.html">Review of script&#8217;s option and parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../98_deprecated/install-script.html#review-of-variable-used-in-the-script">Review of variable used in the script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../98_deprecated/redhat-thruk-pnp4nagios-howto.html">Shinken on RedHat 6 with Thruk and PNP4Nagios HOWTO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../89_packages/index.html">Shinken modules</a><ul class="simple">
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../99_references/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../99_references/exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/modules.html">shinken</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.html">shinken Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.clients.html">clients Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.daemons.html">daemons Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.discovery.html">discovery Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.misc.html">misc Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.objects.html">objects Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../99_references/shinken.webui.html">webui Package</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top">
        <i data-toggle="wy-nav-top" class="icon icon-reorder"></i>
        <a href="../index.html">Shinken Manual</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <ul class="wy-breadcrumbs">
  <li><a href="../index.html">Docs</a> &raquo;</li>
  <li><a href="">Defining advanced service dependencies</a></li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="../_sources/07_advanced/advanced-dependencies.txt" rel="nofollow"> View page source</a>
      
    </li>
</ul>
<hr/>

          
  <div class="section" id="defining-advanced-service-dependencies">
<span id="advanced-advanced-dependencies"></span><h1>Defining advanced service dependencies<a class="headerlink" href="#defining-advanced-service-dependencies" title="Permalink to this headline">¶</a></h1>
<p>First, the basics. You create service dependencies by adding <a class="reference internal" href="../08_configobjects/servicedependency.html#configobjects-servicedependency"><em>service dependency definitions</em></a> in your <a class="reference internal" href="../03_configuration/configobject.html#configuration-configobject"><em>object config file(s)</em></a>. In each definition you specify the <em>dependent</em> service, the service you are <em>depending on</em>, and the criteria (if any) that cause the execution and notification dependencies to fail (these are described later).</p>
<p>You can create several dependencies for a given service, but you must add a separate service dependency definition for each dependency you create.</p>
<div class="section" id="example-service-dependencies">
<h2>Example Service Dependencies<a class="headerlink" href="#example-service-dependencies" title="Permalink to this headline">¶</a></h2>
<p>The image below shows an example logical layout of service notification and execution dependencies. Different services are dependent on other services for notifications and check execution.</p>
<a class="reference internal image-reference" href="../_images/service-dependencies.png"><img alt="../_images/service-dependencies.png" src="../_images/service-dependencies.png" style="width: 514.8px; height: 397.8px;" /></a>
<p>In this example, the dependency definitions for <em>Service F</em> on <em>Host C</em> would be defined as follows:</p>
<div class="highlight-python"><pre>define servicedependency{
  host_name    Host B
  service_description    Service D
  dependent_host_name    Host C
  dependent_service_description    Service F
  execution_failure_criteria    o
  notification_failure_criteria    w,u
}

define servicedependency{
  host_name    Host B
  service_description    Service E
  dependent_host_name    Host C
  dependent_service_description    Service F
  execution_failure_criteria    n
  notification_failure_criteria    w,u,c
}

define servicedependency{
  host_name    Host B
  service_description    Service C
  dependent_host_name    Host C
  dependent_service_description    Service F
  execution_failure_criteria    w
  notification_failure_criteria    c
}</pre>
</div>
<p>The other dependency definitions shown in the image above would be defined as follows:</p>
<div class="highlight-python"><pre>define servicedependency{
  host_name    Host A
  service_description    Service A
  dependent_host_name    Host B
  dependent_service_description    Service D
  execution_failure_criteria    u
  notification_failure_criteria    n
}

define servicedependency{
  host_name    Host A
  service_description    Service B
  dependent_host_name    Host B
  dependent_service_description    Service E
  execution_failure_criteria    w,u
  notification_failure_criteria    c
}

define servicedependency{
  host_name    Host B
  service_description    Service C
  dependent_host_name    Host B
  dependent_service_description    Service E
  execution_failure_criteria    n
  notification_failure_criteria    w,u,c
}</pre>
</div>
</div>
<div class="section" id="how-service-dependencies-are-tested">
<h2>How Service Dependencies Are Tested<a class="headerlink" href="#how-service-dependencies-are-tested" title="Permalink to this headline">¶</a></h2>
<p>Before Shinken executes a service check or sends notifications out for a service, it will check to see if the service has any dependencies. If it doesn&#8217;t have any dependencies, the check is executed or the notification is sent out as it normally would be. If the service <em>does</em> have one or more dependencies, Shinken will check each dependency entry as follows:</p>
<blockquote>
<div><ul class="simple">
<li>Shinken gets the current status:ref:<cite>* &lt;advanced/dependencies#advancedtopics_dependencies_hard_dependencies&gt;</cite> of the service that is being <em>depended upon</em>.</li>
<li>Shinken compares the current status of the service that is being <em>depended upon</em> against either the execution or notification failure options in the dependency definition (whichever one is relevant at the time).</li>
<li>If the current status of the service that is being <em>depended upon</em> matches one of the failure options, the dependency is said to have failed and Shinken will break out of the dependency check loop.</li>
<li>If the current state of the service that is being <em>depended upon</em> does not match any of the failure options for the dependency entry, the dependency is said to have passed and Shinken will go on and check the next dependency entry.</li>
</ul>
</div></blockquote>
<p>This cycle continues until either all dependencies for the service have been checked or until one dependency check fails.</p>
<blockquote>
<div><ul class="simple">
<li>One important thing to note is that by default, Shinken will use the most current <a class="reference internal" href="../05_thebasics/statetypes.html#thebasics-statetypes"><em>hard state</em></a> of the service(s) that is/are being depended upon when it does the dependency checks. If you want Shinken to use the most current state of the services (regardless of whether its a soft or hard state), enable the <a class="reference internal" href="../03_configuration/configmain-advanced.html#configuration-configmain-advanced-soft-state-dependencies"><em>soft_state_dependencies</em></a> option.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="execution-dependencies">
<h2>Execution Dependencies<a class="headerlink" href="#execution-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Execution dependencies are used to restrict when <a class="reference internal" href="../05_thebasics/activechecks.html#thebasics-activechecks"><em>active checks</em></a> of a service can be performed. <a class="reference internal" href="../05_thebasics/passivechecks.html#thebasics-passivechecks"><em>Passive checks</em></a> are not restricted by execution dependencies.</p>
<p>If all of the execution dependency tests for the service passed, Shinken will execute the check of the service as it normally would. If even just one of the execution dependencies for a service fails, Shinken will temporarily prevent the execution of checks for that (dependent) service. At some point in the future the execution dependency tests for the service may all pass. If this happens, Shinken will start checking the service again as it normally would. More information on the check scheduling logic can be found <a class="reference internal" href="checkscheduling.html#advanced-checkscheduling"><em>here</em></a>.</p>
<p>In the example above, <strong>Service E</strong> would have failed execution dependencies if <strong>Service B</strong> is in a WARNING or UNKNOWN state. If this was the case, the service check would not be performed and the check would be scheduled for (potential) execution at a later time.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Execution dependencies will limit the load due to useless checks, but can limit some correlation logics, and so should be used only if you trully need them.</p>
</div>
</div>
<div class="section" id="notification-dependencies">
<h2>Notification Dependencies<a class="headerlink" href="#notification-dependencies" title="Permalink to this headline">¶</a></h2>
<p>If all of the notification dependency tests for the service <em>passed</em>, Shinken will send notifications out for the service as it normally would. If even just one of the notification dependencies for a service fails, Shinken will temporarily repress notifications for that (dependent) service. At some point in the future the notification dependency tests for the service may all pass. If this happens, Shinken will start sending out notifications again as it normally would for the service. More information on the notification logic can be found <a class="reference internal" href="../05_thebasics/notifications.html#thebasics-notifications"><em>here</em></a>.</p>
<p>In the example above, <strong>Service F</strong> would have failed notification dependencies if <strong>Service C</strong> is in a CRITICAL state, //and/or* <strong>Service D</strong> is in a WARNING or UNKNOWN state, <em>and/or// if **Service E*</em> is in a WARNING, UNKNOWN, or CRITICAL state. If this were the case, notifications for the service would not be sent out.</p>
</div>
<div class="section" id="dependency-inheritance">
<h2>Dependency Inheritance<a class="headerlink" href="#dependency-inheritance" title="Permalink to this headline">¶</a></h2>
<p>As mentioned before, service dependencies are not inherited by default. In the example above you can see that Service F is dependent on Service E. However, it does not automatically inherit Service E&#8217;s dependencies on Service B and Service C. In order to make Service F dependent on Service C we had to add another service dependency definition. There is no dependency definition for Service B, so Service F is not dependent on Service B.</p>
<p>If you do wish to make service dependencies inheritable, you must use the inherits_parent directive in the <a class="reference internal" href="../08_configobjects/servicedependency.html#configobjects-servicedependency"><em>service dependency</em></a> definition. When this directive is enabled, it indicates that the dependency inherits dependencies of the service that is being depended upon (also referred to as the master service). In other words, if the master service is dependent upon other services and any one of those dependencies fail, this dependency will also fail.</p>
<p>In the example above, imagine that you want to add a new dependency for service F to make it dependent on service A. You could create a new dependency definition that specified service F as the dependent service and service A as being the master service (i.e. the service that is being dependend on). You could alternatively modify the dependency definition for services D and F to look like this:</p>
<div class="highlight-python"><pre>define servicedependency{
  host_name    Host B
  service_description    Service D
  dependent_host_name    Host C
  dependent_service_description    Service F
  execution_failure_criteria    o
  notification_failure_criteria    n
  inherits_parent    1
}</pre>
</div>
<p>Since the inherits_parent directive is enabled, the dependency between services A and D will be tested when the dependency between services F and D are being tested.</p>
<p>Dependencies can have multiple levels of inheritance. If the dependency definition between A and D had its inherits_parent directive enable and service A was dependent on some other service (let&#8217;s call it service G), the service F would be dependent on services D, A, and G (each with potentially different criteria).</p>
</div>
<div class="section" id="host-dependencies">
<h2>Host Dependencies<a class="headerlink" href="#host-dependencies" title="Permalink to this headline">¶</a></h2>
<p>As you&#8217;d probably expect, host dependencies work in a similar fashion to service dependencies. The difference is that they&#8217;re for hosts, not services.</p>
<p>Do not confuse host dependencies with parent/child host relationships. You should be using parent/child host relationships (defined with the parents directive in <a class="reference internal" href="../08_configobjects/host.html#configobjects-host"><em>host</em></a> definitions) for most cases, rather than host dependencies. A description of how parent/child host relationships work can be found in the documentation on <a class="reference internal" href="../05_thebasics/networkreachability.html#thebasics-networkreachability"><em>network reachability</em></a>.</p>
<p>Here are the basics about host dependencies:</p>
<blockquote>
<div><ul class="simple">
<li>A host can be dependent on one or more other host</li>
<li>Host dependencies are not inherited (unless specifically configured to)</li>
<li>Host dependencies can be used to cause host check execution and host notifications to be suppressed under different circumstances (UP, DOWN, and/or UNREACHABLE states)</li>
<li>Host dependencies might only be valid during specific <a class="reference internal" href="../05_thebasics/timeperiods.html#thebasics-timeperiods"><em>timeperiods</em></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="example-host-dependencies">
<h2>Example Host Dependencies<a class="headerlink" href="#example-host-dependencies" title="Permalink to this headline">¶</a></h2>
<p>The image below shows an example of the logical layout of host notification dependencies. Different hosts are dependent on other hosts for notifications.</p>
<a class="reference internal image-reference" href="../_images/host-dependencies.png"><img alt="../_images/host-dependencies.png" src="../_images/host-dependencies.png" style="width: 352.8px; height: 311.4px;" /></a>
<p>In the example above, the dependency definitions for Host C would be defined as follows:</p>
<div class="highlight-python"><pre>define hostdependency{
  host_name    Host A
  dependent_host_name    Host C
  notification_failure_criteria    d
}

define hostdependency{
  host_name    Host B
  dependent_host_name    Host C
  notification_failure_criteria    d,u
}</pre>
</div>
<p>As with service dependencies, host dependencies are not inherited. In the example image you can see that Host C does not inherit the host dependencies of Host B. In order for Host C to be dependent on Host A, a new host dependency definition must be defined.</p>
<p>Host notification dependencies work in a similar manner to service notification dependencies. If <em>all</em> of the notification dependency tests for the host <em>pass</em>, Shinken will send notifications out for the host as it normally would. If even just one of the notification dependencies for a host fails, Shinken will temporarily repress notifications for that (dependent) host. At some point in the future the notification dependency tests for the host may all pass. If this happens, Shinken will start sending out notifications again as it normally would for the host. More information on the notification logic can be found <a class="reference internal" href="../05_thebasics/notifications.html#thebasics-notifications"><em>here</em></a>.</p>
</div>
</div>


          <footer>
  
    <div class="rst-footer-buttons">
      
        <a href="distributed-shinken.html" class="btn btn-neutral float-right" title="Shinken’s distributed architecture"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="scaling-shinken.html" class="btn btn-neutral" title="Scaling Shinken for large deployments"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <p>
      &copy; Copyright 2013, Shinken Team.
  </p>

  <a href="https://www.github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="http://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>