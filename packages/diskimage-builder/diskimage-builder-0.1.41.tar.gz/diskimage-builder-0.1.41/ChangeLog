CHANGES
=======

0.1.41
------

* Ironic: uefi localboot support
* Fix check for installtype
* ironic-agent: exclude content of /tmp from initramfs
* UEFI secure boot support for iso element
* Install Fedora kernel-modules pkg for iscsi_tcp
* Set DIB_RELEASE in ubuntu element
* Fix race in svc-map
* Use package-installs on dpkg-based elements
* package-installs: work with Python < 2.7
* Split out README into separate files
* Add wget to package-installs.yaml for epel
* Updated readme
* Fix unbound variables in apt-{preferences,sources}
* pkg-map: respect --missing-ok also on missing pkg-map file
* update epel version number in epel element
* Add a link to the "Writing an element" section
* Quote to handle empty DIB_RELEASE
* Namespace PYPI_MIRROR_URL vars with DIB
* Fix memory detection in ironic-discoverd-ramdisk
* Add documentation of DIB_IMAGE_CACHE variable
* Simplify ironic-discoverd-ramdisk
* Support assigning IPMI credentials in ironic-discoverd-ramdisk
* Use oslosphinx for docs site
* Standarise tracing for scripts
* Bump to hacking 0.10
* Fix the bootloader on UEFI machines
* Add `tox -edocs` capability
* Create docs site containing element READMEs
* Fix type in DIB_DISTRIBUTION_MIRROR use
* Pass BOOTIF to ironic-discoverd from the ramdisk
* Use package-installs for ubuntu and base elements
* Add apt-get autoremove
* Add install-static element
* Enable vm element to create PowerPC image
* Dont fail if we have no old-style package-installs
* Use sudo -E when squashing package installs files

0.1.40
------

* setfiles consistently
* Ironic: Local boot
* Corrected `element-info` usage
* Add installtype support to package-installs
* Fix issue with leaking /tmp/image.* directories
* ironic-discoverd-ramdisk element cleanup
* Add support for using local PowerPC VM image
* ramdisk-image-create: add support for vmlinux file

0.1.39
------

* Switch manage_etc_hosts from True to localhost
* Set http_proxy to retrieve the signed Release file
* Run Registration Once
* Fix Satellite Repo
* Use DIB_IMAGE_CACHE in dpkg element
* Fix for RHEL6
* Allow for disabling rhel registration
* dracut-ramdisk: fix support for elements with ramdisk-install.d
* Don't trace RHEL registration scripts
* Ignore stderr from pkg-map
* Allow absolute path to image with ironic-agent
* Add install section to Ironic agent systemd service file
* Fail helpfully if uuidgen is missing
* Continue past dependency ordering diffs
* Add element for ubuntu-core
* Add rax-nova-agent element
* Add minimal ubuntu and centos base elements

0.1.38
------

* Rework package-installs to collapse on build host
* Fallback to a boot_server kernel param if ip= not passed
* Add some speedups to dpkg
* Deprecates username and password from boot time registration
* Use env python
* Fix repo enablement for RHEL during registration
* Allow injecting arbitrary yum repo configuration
* Don't use lsb_release
* Fix rst rendering
* Add Activation Key Support For Customer Portal
* Migrate to new package-installs
* Add new package-installs system
* Improve --ramdisk-element docs
* Unset requiretty if it exists in sudoers
* Remove the grub2 install from redhat-common
* Remove use of sudo from yum pre and post elements
* Add element for hardware discovery ramdisk for ironic-discoverd

0.1.37
------

* disk-image-create: fix test when no argument is given
* Warning when using pypi element without a mirror
* Make some pkg-map errors soft
* Fail helpfully if no elements are specified
* Check python with flake8 instead of dib-lint
* Update RHEL Registration

0.1.36
------

* Deprecate map-packages, replaced by pkg-map
* Allow multiple identical sources
* Add DIB_DEBOOTSTRAP_EXTRA_ARGS environment variable
* deploy-kexec depends on deploy
* Remove duplicate binary-deps from dracut-ramdisk
* Add element for building ramdisk with ironic-python-agent
* Simplify Dracut cmdline script
* Add deprecation warning when using map-services
* Fix indent exclusion
* Install PyYAML for the svc-map element
* Install lsb_release from package
* Enable RHEL Registration
* Support installing packages by default
* Optimize speed of deletion in find command
* package-installs assumes packages have a pkg-map
* Updated from global requirements
* Unset trap before dracut ramdisk build script exits
* iso element to use 'search --label' for grub
* Update Debian repo to retrieve signed Release file
* export DIB_ROOT_LABEL to make it global

0.1.35
------

* Use binary-deps.d for dracut ramdisks
* Move busybox binary-dep to ramdisk element
* svc-map requires PyYAML
* iso element to build bootable ISO images
* Handle extra spaces in merge-svc-map-files
* Enable dracut deploy ramdisks
* Revert "introduce $SYSTEMD_SYSTEM_UNIT_DIR"
* Avoid overwritting of hooks
* Disable all interfaces on eni systems
* Remove first-boot.d support
* Force empty $TMPDIR inside the chroot
* Allow source-repositories to be disabled completely

0.1.34
------

* Move to final release of CentOS7 images
* Consolidate lsb_release source-repositories
* Allow for multiple image outputs from raw source
* Echo that qemu-img convert is running
* Preserve exit value when leaving cleanup trap
* Don't re-install cloud-init for centos7 images
* Check for epel before installing it

0.1.33
------

* Do not try to detach non-existant loopback devices
* Move install bin from rpm-distro to yum
* Use DIB_IMAGE_CACHE everywhere
* Save extended attributes when creating tar
* Ensure epel7 is installed only on rhel7/centos7
* Update EPEL release rpm
* Fix $DISTRO_NAME usage for centos7 element

0.1.32
------

* Add unit test for cache-url
* Use $((EXPRESSION)) instead of $[EXPRESSION]
* Install openstack-selinux on RHEL
* Updated from global requirements
* Move dpkg manifest creation to finalise
* Allow custom rootfs labels
* Add svc-map element
* Refactor ramdisk element to allow alternate implementations
* Updated from global requirements
* Adds EPEL repo, cleans up rhel7 repos
* Update to newer Centos7 images
* Provide ability to build images for other architectures
* Handle non-existing *generic kernel and initrd

0.1.31
------

* Change order for yum-repos file in centos7 element
* Make diskimage-builder work in Docker
* Add ceilometer service mappings

0.1.30
------

* Run environment.d hook for manifests earlier
* Reset yum configuration in post-install.d
* Add vmedia boot support for deploy-ironic element
* opensuse: Support pkg removal in install-packages
* Use package-installs in more elements
* Replace backticks with $()
* Fix openSUSE kernel/initrd detection
* Correct statement about ramdisk and tmpfs
* Fix for host env leak into grub

0.1.29
------

* Fix openSUSE cloud image download and extraction
* Add element-manifest
* Changed serial console setup
* Map dkms package for SUSE in base element
* Fix capitalization of openSUSE
* Fix ramdisk pkg-map for openSUSE
* Truncate instead of deleting log files
* Lock around extract-image downloads and extracts
* Add support for flashing ILO BMC's from ramdisks
* Remove docs about deprecated pypi-mirror tool
* Use dib-run-parts from dib-utils

0.1.28
------

* Make RHSM registration set -u safe
* Add service mappings for ironic
* Revert "Remove the temporary deploy element after rename"
* Remove hardcoded version
* Increase source-repositories support for tarballs
* map-services: add openstack-nova-novncproxy
* Allow to specify an empty package list in pkg_map
* Use package-installs in fedora
* package-installs for pre-install.d/post-install.d
* Formatting fixes for dhcp-all-interfaces
* Remove disable_interface from dhcp-all-interfaces

0.1.27
------

* Relabel filesystem if SELinux is available
* debian: exclude contents of /tmp from debootstrap tarballs
* Centralize handling of /lost+found

0.1.26
------

* Cleanup apt cache after grub install
* Extend/fix support for extlinux bootloader
* Create cache directory
* Remove package mapping for mariadb-rdo-galera-server
* Adds RHEL common element
* Support for UBoot
* Add dib-lint exclusions
* Revert "Cleanup apt cache after grub install"
* Fix sourcing of environment files
* Add virtual media boot support in ramdisk element
* Cleanup apt cache after grub install
* Update RHEL7 element since release
* Bump hacking to 0.9.x series
* Lock around ubuntu tarball download
* Avoid to install a blank list of packages
* Don't try to install if packages is empty
* Add a ramdisk-install.d hook path
* Initial centos7 support

0.1.25
------

* Update RHEL 6.5 Image name
* Add dhcp support for ramdisk element
* Handle non-script grub2-install
* Use readlink to get script path
* Detail 'other' directories in the README

0.1.24
------

* Lock around source repositories setup
* Really handle Ubuntu mirror cache skew,
* Echo output when pkg-map fails
* Optimizing directory creation
* Revert "Don't match editor backup files in env..
* Allow overwriting old images
* Correction: if then statement code style
* Last ditch effort to correct a wrong shasum
* Avoid to install a blank list of packages
* Add global exclusions to dib-lint
* Don't match editor backup files in environment
* Remove fixfiles from rpm-distro finalize

0.1.23
------

* Rename rhel element yum blacklist
* Set LC_ALL=C into dib-run-parts env
* update opensuse element
* Use $DISTRO_NAME instead of local lsb_release
* Add RHEL7 to Red Hat family in pkg-map
* Use common element select-boot-kernel-initrd
* Always bind-mount pypi mirror if dir exists
* Add select-boot-kernel-initrd element

0.1.22
------

* Ignore manifest outputs more carefully
* VM element: Enable serial console on Debian
* Disk-image-create should allow sending compat flags to qemu-img
* Ensure cache directory exists before use
* update zypper element

0.1.21
------

* Drop ending slash from DIB_CLOUD_IMAGES
* Update base element to make use of pkg-map
* opensuse: support pkg-map in bin/install-packages
* dpkg: support pkg-map in bin/install-packages
* Element to remove unwanted kernel/initrd
* introduce $SYSTEMD_SYSTEM_UNIT_DIR
* Update README regarding Debian and OpenSUSE support
* Do not use DatasourceNone for precise cloud-init
* Explicitly name element enable-serial-console
* avoid failure if /lib/firmware doesn't exist
* Tidy base image by removing /var/log files
* debian: fix network on Wheezy

0.1.20
------

* Refactor code to select boot kernel
* fail at startup with no operating-system element
* Add test to ensure we don't duplicate filenames
* Name deploy-ironic and deploy-baremetal files uniq
* Name 10-rhel-cloud-image uniquely
* Name 01-install-bin uniquely
* Delete redhat-common 00-usr-local-bin-secure-path
* Name 99-setup-first-boot uniquely
* Yum: support pkg-map in bin/install-packages
* Add tar as an output type
* Correct source-repository comments
* dpkg: local cache for .deb files
* map-services: add openvswitch
* Ensure dib-run-parts profiling works with py3 and py2
* Rename old image file instead of rewrite it
* Add missing dollar
* Replacing deploy to deploy-baremetal in README.md
* Reinstate Trusty as default for Ubuntu
* Only use Ec2 cloud-init data source for Ubuntu
* Remove uneeded code from pkg-map
* Correct the wrong rename in rhel element
* Add manifests to .gitignore
* Check return code of element-info
* Add new cloud-init-datasources element

0.1.19
------

* Set DISTRO_NAME in OS environment.d

0.1.18
------

* Add pkg-map element
* Factor out error behavior in dib-lint
* Fix package removal
* Create an element to allow using a dpkg manifest
* Check for set -o pipefail
* Set -o pipefail new scripts
* Add support for source-repos gerrit refs

0.1.17
------

* Stop using bash arrays for whitelisting in yum
* Tidy up SuSE kernel selection
* Parameterise PXE kernel and initrd selection
* Debian: Support additional debootstrap arguments
* `set -u` doesn't permit bash arrays to test -n
* Ensure we can read the kernel out
* Export unbound variable DIB_RHSM_USER
* indent: search for !=4 spaces indentation
* 4 spaces indent
* Updated from global requirements
* Adding -x to set parameters for more output

0.1.16
------

* Ensure scripts are set -u
* set -u and -o pipefail everywhere
* Fedora: Add support for configuring Yum mirrors
* dib-lint: check for tab indent in files
* dib-lint: ensure file finish with a new line
* add some missing \n at end of file
* Add map-services for debian distros
* Make sure all scripts are set -e
* Allow excluding tests from certain files
* Eliminate 'tr' in favor of inline bash
* Support declarative package installs/uninstalls
* Build raw image in separate tmpfs
* debian: properly deal with Debian stable/unstable

0.1.15
------

* Permit cache-url to work with fifos
* debian: add systemd support
* debian: support upstart on Wheezy
* Debian element should activate eth0
* Respect inmutable resolv.conf in the image
* set -e all the things
* Explicitly use bash
* Remove All Rights Reserved

0.1.14
------

* Add package uninstall support
* Revert default Ubuntu release back to Saucy
* Add a mapping for kernel headers
* Map openjdk-7-jre-headless to RHEL+SUSE
* Sort rhel/bin/map-packages
* Add sysv support to elements/dhcp-all-interfaces
* Place /usr/lib64/ccache in PATH
* Small fixes for dhcp-all-interfaces
* cleaning up 01-copy-manifests-dir
* Remove the temporary deploy element after rename
* Use provides to note an element provides deploy
* Remove dependency on /etc/lsb-release
* indent: replace tab by 4 spaces
* Make "trusty" (Ubuntu 14.04) the default release
* Add switch to turn on caching for debian element
* Remove cloudy interfaces in dhcp-all-interfaces
* debian: simplify the way debian element is called

0.1.13
------

* Fix set -eu and pipefail failures
* Move instead of copy the temporary git manifest
* Add mapping for mariadb rdo package
* map-services: add apache2 in the list
* Remove map-services from fedora element
* Use provides to note an element provides an OS
* Standardise manifest creation and retrieval
* Remove call to depmod in busybox
* apt-conf: uninitialised variables fix

0.1.12
------

* Iterate over provided elements first
* Add ability to add extra apt keys
* doc: indentation rules for element
* Document a little the concerns for operators
* debian: use sudo to create file in the chroot
* Disable splashimage for legacy grub
* Change refspec used to fetch all branches and tags
* fix grub2 installation on Debian Wheezy
* Fix Grub configurations for Fedora images built on a UEFI host

0.1.11
------

* Fix dhcp-all-interfaces upstart job
* Fix dhcp-all-interfaces on Ubuntu/Debian
* Fix resource exhaustion with upstart
* Write a dpkg manifest to list installed packages
* Fix "(None)" seed hostname on Debian
* dhcp-all-interfaces: correct ifquery return stmt

0.1.10
------

* Make stable-interface-names its own element
* Uses policy-rc.d to prevent dpkg starting daemons
* Enforce alphabetical ordering of element-deps
* Alphabetize all element-deps
* Add dib-lint script
* Adds package mapping for mariadb packages
* Adding pypi-mirror dependencies for redhat
* Revert "Only create a tmpfs big enough for DIB_MIN_TMPFS"
* debian: install cloud-init on Wheezy
* Remove an excess cp of disk images
* Adds "element-provides" support to element dependencies
* Add console kernel parameters to extlinux configuration
* Permit use of wheel mirrors in pypi element
* baremetal: correct the path of ifcfg-eth0
* Adds libmariadb-dev package mapping
* rename udev.rules to dhcp-all-interfaces-udev
* serial-console: Use udev rules to startup getty
* Set +x on executable files

0.1.9
-----

* DHCP: make udev rules want dhcp-interface@.service
* Add RHEL 7 image element
* Use redhat-common in fedora element
* Add redhat-common element
* Correct README.md markdown errors
* Support adding DHCP interfaces one at a time
* Move install type enablement into base element
* Remove hardcoded /tftpboot/ from token's tftp path
* RHEL Package maps for build-essential, python-dev and libz-dev
* Extract move cache logic to a function
* Always export IMAGE_NAME
* baremetal element: Enable stable interface names
* Fixup all occurrences of REPONAME for replacing '-'
* Create a git manifest from source-repositories
* Add apache2 mod_wsgi pkg map for suse
* Updated from global requirements
* 98-source-repositories tries to return from script
* Add libaio1 to libaio pkg map for fedora
* Only create a tmpfs big enough for DIB_MIN_TMPFS
* Additional swift storage service mappings
* Update openSUSE package mapping for libffi-dev
* Better apt-sources docs
* Add nfs-common package mapping
* Replace more then just "-" in REPONAME
* Bash eval the lines in source-repository scripts
* Fix spelling error in "vm" element README.md
* Add $EXTRA_ARGS back to yum call
* Update the image name for RHEL Guest Image
* Alphabetize openSUSE services dictionary
* Alphabetize openSUSE packages dictionary
* Alphabetize Fedora services dictionary
* Alphabetize Fedora packages dictionary
* Enable extlinux support for (non-Ubuntu) Debian platforms
* Replace use of show-ref with name-rev

0.1.8
-----

* Fix syntax error in GRUB_OPTS env var handling
* Update README formatting and content
* Improve local-config proxy handling
* Enable custom apt.conf in apt-conf element
* Add rsync to the package list used by debootstrap
* Enable simple modification of git repo location
* Add NFS package mapping
* Improve usability of the source-repositories cache
* Fix unbound variable in debian element

0.1.7
-----

* Replace security.ubuntu.com when setting mirror
* Generalize install-packages for yum
* Remove accidental merge marker
* Add libvirt-bin -> libvirtd to map-services
* Make max-online-resize an option
* Correct DIB long option parsing
* Add 00-fedora-fixup-vim
* Update pypi element to suggest pypi-mirror
* Permit using arbitrary PyPI urls
* Pep8/Pyflakes fixing
* Shift debian element to DIB_DISTRIBUTION_MIRROR
* Revert "Add Fedora DHCP interfaces via udev rules."
* Revert "Support adding DHCP interfaces one at a time. "
* Teach cache-url to handle file:// URIs

0.1.6
-----

* Remove tox locale overrides
* Add Fedora DHCP interfaces via udev rules
* Support adding DHCP interfaces one at a time
* Rename Openstack to OpenStack
* Don't hardcode environment.d
* Add more package name mappings for openSUSE
* Add lsof package to all Fedora images
* ifquery doesn't exist on Fedora
* Remove unneeded service mapping for mysql on openSUSE
* Fix misspellings in diskimage-builder
* Fix kernel extraction on openSUSE
* Adjust neutron package install for Fedora
* Make the MIRROR_TARGET directory if it didn't exist
* Add tgt service mapping for Fedora
* Update openSUSE package mappings for OpenStack
* Updated from global requirements
* Update map-services for Fedora
* Add Fedora packages mappings for snmpd
* Add mysql mapping for Fedora
* Add package map for stunnel4
* Add ability to use local cloud image
* Add a service mapping for openSUSE
* Add bash as a dependency to the deploy ramdisk
* Include /lib64 into the deploy ramdisk on openSUSE
* Fix tftp mapping on openSUSE
* Use /usr/bin/env, not /bin/env

0.1.5
-----

* Rename generate-interfaces-file.sh..
* Only configure DHCP for real interfaces
* Add map-services
* Skip relabel unless SELinux is enforcing
* Mount root filesystem readonly during boot
* Fix kernel/initrd extraction for SUSE based distros
* Fix ramdisk element for openSUSE
* Workaround broken udev update on openSUSE
* Make copy_required_libs() more robust
* Add Copyright and License header to debian element
* Setup ccache symlinks on openSUSE
* Add support for Red Hat Satellite
* Support list of Red Hat channels and repos
* Add support Red Hat Network (RHN)
* Update default RHEL guest image
* Create a new baremetal element
* Fix mysql package mappings for opensuse
* fedora/RHEL: use env from /usr/bin
* Allow use of mirrors when building Ubuntu images
* Update to Fedora 20
* Convert -dev to -devel in fedora/map-packages
* Fix the curl command in the ironic-deploy element
* Move Babel and argparse from test-requirements.txt
* Symlink correct element install type
* dib-run-parts should dereference symlinks
* Add debian-upstart for experimenting with upstart
* Allow adding packages to debootstrap
* Add support for Debian
* Wait for tgtd socket to be available

0.1.4
-----

* Add new modprobe-blacklist element
* Install traceroute on Fedora
* Retry link check up to 10 times
* Implement serial-console for systemd
* Removing the config-applier element
* Add package support to source-repositories
* Increase padding to allow for smaller images
* Remove old versions of grub2 from the yum cache
* Implement dhcp-all-interfaces for systemd
* Install tcpdump on Fedora
* Mark install-packages +x
* Make sure a loop device exists before kpartx is called
* Fixed command dib-init-system not found error
* Refactor unmount_image with unmount_dir
* Fixed device or resource busy issue in EXIT trap
* Add a package mapping for libvirt-dev

0.1.3
-----

* Log unsupported source repository types
* Improve source-repositories git caching
* Add element to modify /etc/apt/sources.list in dib
* Fix package-mappings for openSUSE
* Update login.defs on openSUSE
* Make sure sbin paths are in $PATH

0.1.2
-----

* Add -U to pip install command in tox.ini
* Add zypper element
* Increase the size heuristic for images
* opensuse: Update README.md
* Fix $TARGET_ROOT usage in yum element
* local-config: Configure proxy for zypper repos
* Updates tox.ini to use new features
* Quieten disk-image-get-kernel

0.1.1
-----

* Add support for building openSUSE images
* Add examples for ramdisk-image-create
* Fix no busybox symlinks issue on rhel
* Log the repository fetches in source-repositories
* Default name for ramdisks to image
* Add deploy ramdisk element for Ironic

0.1.0
-----

* Modify /etc/selinux/config if it exists
* Drop default distribution root element support
* Remove dot after TMP_HOOKS_PATH
* Store DIB_* only env variables
* Remove the dot typo in extra-data script
* Updates .gitignore
* Switch Ubuntu element to installing saucy
* Enhance dib-run-parts usage message
* Add mapping for tgt to RHEL element
* Update openssl for Fedora
* Add option --image-size
* Fix typo in source-repositories README

0.0.11
------

* Detect udevd version and behave accordingly
* Fix issue with Ubuntu grub pre-install step for ARM
* Check existence of rhel rpm key
* Fix troubleshooting override
* Support building wheels (PEP-427)
* Document ramdisk troubleshooting
* Add troubleshooting override to deploy ramdisk
* Add mapping for gearmand
* Make pxe_mac accurate in two common cases
* /bin/bash all the things
* Split network bringup out of base ramdisk init
* Don't block the upstart daemon if it doesn't exist
* Make sorting of ramdisk init elements explicit
* Provide a way of determining init system used
* Usage message enhancement

0.0.10
------

* Add mapping for libffi-dev
* Allow heat-admin to sudo without tty
* Python code refactorings
* Add *.egg to .gitignore
* Remove BUSYBOX variable from ramdisk-defaults
* Replace assertEquals with assertEqual
* Updated from global requirements

0.0.9
-----

* Check existence of directory 'lost+found'
* Remove mapping of atftpd to tftpd-server
* Remove dependency on dracut-network
* Add redhat mapping from tftpd-hpa to tftp-server

0.0.8
-----

* Add apache and mod_wsgi to Fedora's package map
* Allow for bad Fedora image mirrors
* exit 44 if http 404 is returned
* Ignore basename failures
* Dracut regenerate initrd w/ the right kernel
* Fix disk-image-get-kernel for redhat
* Remove framebuffer video drivers from ramdisks
* Remove old-kernels for fedora

0.0.7
-----

* Conditionally add dhcp-all-interfaces

0.0.6
-----

* Remove \r chars from dhcp-all-interfaces
* Make dhcp-all-interfaces block all interfaces
* Fix ifquery call in dhcp-all-interfaces
* Allow for redirects to ftp servers
* Updated from global requirements
* Specify distro release in fedora image name
* Move /tmp/ccache setup to base element
* Use --numeric-owner when extracting base image
* Mount /dev/pts in chroot
* Using python to run testr instead
* Make RHEL subscription optional

0.0.5
-----

* Increase journal size to 64 M for ext4 file system
* Fix mellanox module loading
* Ignore empty files returned by curl
* Generate interfaces file before cloud-init runs
* Updated from global requirements
* Fix typo in dhcp-all-interfaces
* Set locale for the profiling printf command
* Update from requirements

0.0.4
-----

* Deprecate first-boot.d
* Add mapping for atftpd in fedora/rhel
* Make RHEL subscriptions optional
* Add RHEL mapping for openssh-client
* Add RHEL mapping for augeas-tools
* Add RHEL mapping for default-jre
* Translations license statement correction

0.0.3
-----

* Do not prompt on removal of apt-xapian-index from ubuntu cloud images
* Add DIB_IMAGE_CACHE

0.0.2
-----

* Remove apt-xapian-index from ubuntu cloud images
* Use lazy umount to avoid race problems with dev
* Remove github references
* Move textmode forcer to vm element
* Fix grub/linux text mode override
* Add deploy-kexec element
* Consolidate the checks for /etc/grub
* Check cached file size when downloading an url
* Fedora 19 has no grub2 conf file
* Install fedora grub from cached rpm during finalise
* Remove -r option from kpartx for successful build
* Fixes files ordering when choosing newest image
* Add package mapping for default-jre
* Set raw image size to be multiple of 64k

0.0.1
-----

* Delete -new image once copied
* Add --list support to dib-run-parts
* On Fedora, use Linux Foundation bzr lsb_release
* Add support for file to source-repositories
* Install patch for dracut patching
* Add rhel installation element
* Add option --min-tmpfs <size> to disk-image-create
* Add package mappings for MySQL-MariaDB
* Combine compress and save image into one function
* Extlinux fallback
* Rename 51-grub to 51-bootloader
* Add a pip-cache element
* Fix URL to os-apply-config
* qpid package mappings
* Call sync before unmounting keeps the mount from being busy
* Remove a device mapping, then let the loop device get removed
* Extracting common functionality for rpm based distros
* Use kpartx if partition device doesn't exist
* Set file permission to be executable
* Fixed a network setup issue for F19
* Update stackforge references to openstack
* Package dib-run-parts
* Add yum element
* dkms is unavailable on RHEL and derivatives
* Fix pypi element README.md errors
* Allow using a pypi mirror to install via pip
* Make $HOME in the chroot be reasonable
* Cleanup mount points automatically
* Change the rootfs label in F18 and F19
* Remove explicit sudoers requirement
* Document the dangers of co-existing elements
* Blacklist H803
* Capture the repositories from source-repositories
* Improve caching documentation
* Package with pbr
* Add a new break on error
* Ensure $TMP_BUILD_DIR is actually created
* Modify relative paths of lib, elements for packaging
* Add binaries for setuptools
* Make Ubuntu 13.04 (raring) the default release
* Ignore emacs autosave files in source-repositories
* Provide hint for what package contains qemu-img
* Fix hacking errors
* Add downloadonly flag to fedora
* Fixed up test-requirements
* Add needed symlink for Fedora deployment ramdisk
* Install which on Fedora
* Only remove $TMP_BUILD_DIR on cleanup
* Enable running disk-image-create on SUSE Linux
* Update TripleO incubator URL reference
* Support repo names with multiple '-'s
* Set work-dir to cached repository
* Move the getsources hook earlier
* Cache repository-sources data
* Update the Fedora element to honour --offline
* Enable --offline support for Ubuntu root images
* Fix the DIB_OFFLINE setting to actually work
* Document an interface for offline operation
* Allow 'sudo kpartx -d' used in EACTION for Fedora
* Move end user docs higher up in README.md
* Remove excess whitespace in README.md
* Fedora 19 GRUB
* Fix for mounted readonly filesystem for Fedora 19
* EFI hosts
* F19 GRUB configuration file
* Add package mappings for augeas-tools and openssh-client
* Build ramdisks in an image chroot
* Make cloud-init-nocloud work cross-platform
* Update Fedora cloud image to its latest version
* Adding docs for the source-repositories element
* Use ccache to cache all compiles between builds
* Add environment.d hook to setup environment
* Curl to redo the request (Found 302)
* Fix loop0p2 does not exist on F19
* Add arping to the fedora map-packages
* Fix 50-firmware.rules no such file on Fedora 19
* Add mysql-devel to fedora map-packages
* Fix cache-url to use single '=' in test expression
* Fix cloud-init routing issue on Fedora
* Move functions to common-functions for reuse
* Factor out element processing
* Consolidate more ramdisk and disk-image code
* Fix pyOpenSSL on Fedora
* Improve debugging of missing elements
* Fix unit tests to have accurate return code
* Use the source-repository interface
* Install git with source-repositories element
* Use full path to dib-run-parts during firstboot
* Enable Flake8 F*** checks
* Switch from pep8 to flake8/hacking
* Re-use cache_url() in fedora element
* Improve first time download of ubuntu images
* Use dib-run-parts on dib-first-boot
* Reduce duplication between ramdisk and disk image codepaths
* Add mechanism to send error messages to helper
* Make bash troubleshooting configurable
* Make the finalise_base function less Ubuntu-ish
* Adding element to get source for elements
* deploy element: Call find_disk in loop w/ timeout
* Add disable-selinux element
* dib-run-parts was failing with empty targets
* Add /usr/local/bin to the secure_path variable
* Fix cloud-init-nocloud to actually work
* Stop apt-get installing qemu-img
* Change the rootfs label in fedora's /etc/fstab
* Add zlib-devel and qemu-img to fedora map-packages
* Document some dependencies
* Add RedHat support for disk-image-get-kernel
* Add dracut-network element
* Add fedora support for ramdisk-image-create
* Remove obsolete Fedora rc-local install.d hook
* Switch from losetup+partprobe to kpartx for Fedora image creation
* Move package install of dkms to install.d
* Fix fedora element to work with qcow2 images
* Install dkms before using it
* Build all dkms modules near the end of the image build
* Set correct mode for .ssh/authorized_keys files
* Update sudoers rules for 1PB resizing
* Increase the size heuristic for images
* The ext4 resize fix was faulty - fix it
* Basic wall clock profiling per element script
* Move the ensure_nbd function call
* Ensure that the ext4 fs can be rebuilt up to 1PB in size
* Force text mode console in base element
* Refactor the first boot routine
* Run fixfiles restore in chroot instead of firstboot
* Trigger SELinux autorelabel on first boot
* An element for putting SELinux in permissive mode
* Fix for running /etc/rc.local on Fedora
* Honor $DIB_IMAGE_SIZE
* install redhat-lsb before pre-install.d baseline-tools
* install redhat-lsb-core instead of redhat-lsb
* Enable serial console for fedora
* Fix fedora fstab so / is mounted rw properly
* Add an element to configure a serial console
* Retry losetup -d for up to 10 seconds
* Force the inclusion of /usr/local/bin in PATH
* Tweak the moved cleanup_dirs to match the original
* Remove img-functions from ramdisk-image-create
* Ignore errors when ldd'ing static binaries
* Extend mellanox support to disk images
* Reinstate support for real hardware with Ubuntu
* Remove tripleo PPA from base element
* Only use tmpfs if build machine has 4GB+ RAM
* Use conditional GET to fetch latest ubuntu image
* Revert "Improve Fedora build host support."
* Fix architecture filter
* Unbreak grub for precise
* Fix GRUB command quote escape for VM element
* Fix GRUB for for precise
* Fix missing export of $ARCH
* Improve Fedora build host support
* Use a different approach to solving the ramdisk-image-create failure
* Source img-functions into common-functions
* Build images using loopdev instead of qemu-nbd
* Add few other packages to the map list for fedora
* Fix up the conflict between audit and glibc packages
* Improve Fedora build host support: architectures
* Fix Ubuntu image fetching
* Fix a small typo in fake init scripts
* Adds support for post-install scripts
* Grab the next available /dev/nbdX
* Allow build dir to be changed from /tmp
* Migrate cloud image URL/Release options to DIB_
* Introduce the DIB_ namespace for build-time config
* Fedora element allows root to sudo without TTY
* Generate ssh hostkeys on first-boot
* Add armhf support
* Always include the in-tree elements directory
* Delete elements moved to tripleo-image-elements
* Update README.md for build-time state capture
* Fix mysql migration script to handle errors
* Remove strict sql_mode setting which breaks apps
* Do not require arguments for os-svc-daemon
* Store build-time settings
* Disable tunneling in quantum-ovs
* Migrate data into MySQL from bootstrap
* Run os-config-applier using os-refresh-config
* Bring os-svc-install element docs up-to-date
* Enable use_namespaces setting for quantum agents
* Clearly mark unaudited config templates as such
* Replace glance-api+glance-reg elements with glance:
* Streamline upstart scripts in os-svc-daemon
* Add a nova-baremetal element
* Add a quantum element
* Run all openstack services in virtualenvs:
* Add element to run DHCP on all network interfaces
* Create users in mysql server based on metadata
* Set mysql server_id based on instance-id
* Refactor mysql element to do less in first-boot.d
* Adding cfn-credentials file to heat-cfntools
* remove unnecessary '/usr/local/bin' from install.d
* Install os-config-applier from stackforge repo
* Switch to using the incubator-bootstrap tree
* Fix os-refresh-config failing without scripts
* Remove duplicate file extensions
* Correctly translate all branches/tags/shas:
* Update keystone middleware in cinder api-paste:
* Fix script that installs os-refresh-config scripts
* local-config: Configure proxy for apt and/or yum
* Fix issues causing Fedora images to fail
* Seperate install of services and start scripts:
* Update keystone element to use os-refresh-config
* Make 99-install-config-templates executable:
* Install os-refresh-config scripts automatically
* local-config element adds authorized_key for root:
* Integrate os-refresh-config with heat-cfntools
* Allow elements to include skeleton config
* Add a cinder element
* Namespace SHA256SUMS file to distro/release/arch
* Fix heat-cfntools to work on Fedora
* Verify Ubuntu Cloud Images using SHA256SUMS
* Fix elements_path default path
* Use multiple locations for elements dir
* Specify os-refresh-config path in README
* Don't use sudo in base
* Add an openstack all-openstack-db element:
* Devstack element pulls from master
* Fix ramdisk-image-create
* Run alternatives pip -> pip-python
* Install heat-cfntools from pypi
* Support multiple outputs disk formats
* Prevent silent failure of element-info:
* Fix the sudo rules for unpacking fedora raw images
* first-boot.d scripts log to a file:
* Fedora needs to depend on dib-run-parts too
* New element that uses a fedora cloud image as the base
* Add dib-run-parts install command to sudoers.d
* Use dib-run-parts for running scripts in target
* Make populate_libs() more generic
* Work in progress run-parts replacement
* Move the dpkg specific stuff to a dpkg element rather than being hardcoded
* Change run-parts usage to be compatible with Fedora
* Give stack user passwordless sudo:
* Consolidate common OS installation into a script:
* Bad code landed, causing ubuntu to be always landed
* cloud-init-nocloud element for non-cloud image
* Add cfn-hup configuration for os-refresh-config
* Fix broken pep8 in setup.py
* Add element to call os-refresh-config
* Add default element selection
* Correct misuse of return in ramdisk-image-create
* Fix unnecessarily creating a temporary directory
* ramdisk-image-create shows a failed binary dependency
* The default ARCH was broken due to $ARCH not being exported
* Add missing python-pip dependency in heat-jeos
* Work around cfn API bug in HEAT w/ specific boto
* Move initial root contents into a hook
* Make it possible for openstack-CI to run tests
* Export the ELEMENTS_DIR so that dependencies work
* Add os-config-applier element
* Split stack user creation out of devstack element
* Improve error message for missing element
* Create install-packages as a binary
* Add option to clear environment
* Switch locale to C
* Add sudoers rule to format and mount anykind of partitions in disks
* Add openstack-all element
* Add element to install config-applier
* Enable 'ec2-user' in HEAT for quantal images
* Add a simple implementation of element dependency
* Disable Apt Recommends
* add default gateway to deploy init script
* Allow manual installation of packages
* Include English locale in base
* Install nova-api from github
* Add Icinga elements
* Add missing whitespace to local-config
* Replace demo references with incubator
* Add an element to install the HEAT JEOS tools
* Install quantum-api from github
* Clean up the MySQL element to make it suitable for generic use
* Fix disk-image-create's getopt error handling:
* Tidy up base element:
* Add guidelines for composing elements
* Copy both http and https proxy to local-config
* Add a test framework for testing elements
* Ignore .pyc files
* Add a .testr.conf configuration and ignore .testrepository
* Add the ability to break into a shell during builds
* Add glance-api element
* Move everything 'common' into base, making it avoidable for tests
* Make it possible to not recompress the qcow2 image at the end
* Added true to avoid exit on error
* updating devstack element to reference incubator
* Add keystone element
* Add copyright to lib/ramdisk-*
* Generate apt.conf files with correct content, fixes bug 1088805
* Further fleshing out of hwdiscovery element
* Move grub installation to the vm element
* Rename flavour to element
* Configure git proxy settings and prefer http(s) protocol
* Use system resolv.conf file when available
* Remove udev stuff from the source tree
* Add .gitreview file
* Jenkins image fixed
* Reinstate /mnt redirection of jenkins - HPCS cloud images have a very restricted /
* Untrap EXIT before run-parts
* Update hwdiscovery flavour to have lots more structure that we can build on
* fix crappy header
* Updated jenkins flavour
* Make a primitive jenkins image
* be smarter about mounting qcow images
* Use base in all examples
* added br* filter for interfaces
* adding BASIC hardware discovery
* adding dhclient support
* adding dhclient
* move misplaced salt-master install script
* mount_qcow_image should mount p1
* removes AMQP install and adds hwinfo
* added lsmod to default busybox links
* add salt-master flavor
* remove force-xtrace in disk-image-get-kernel
* add some tooling that baremetal-devstack wants
* move tgtd & tgtadm to bin-deps of deploy and remove from lib/ramdisk-functions
* Adding python-AMQPLib install to HWdiscovery
* Fix copyrights for HP work
* Add a flavour for doing generic this-node-is-in-a-cloud stuff, like cloud-init tweaks
* adding mysql flavor (untested)
* Document more about the layers
* Some cleanup on nova-vm flavour
* Add support for flavours to ship udev rules.d files and port over the mellanox variant to use this
* Fix mysql passwords
* Default to 2G in size - 1G is just too small
* Fix handling of parameters that are not set by any flavour for eval_run_d
* Make it possible to set a size from within a flavour, and use that for devstack
* Rename baremetal to deploy
* Remove some whitespace
* Update ramdisk building to support init hooks for flavours
* Update docs for ramdisk building
* Add readmes to the ramdisk flavours
* Documented binary-deps feature
* Port old baremetal-mkinitrd.sh to the new image creation standards
* Land an extension of baremetal-mkinitrd.sh which can also build flavours, with a start at making hwdiscovery and hwburning flavours
* Bring across disk image code
* Ignore temporary files
* Support KVM instances - allow /dev/vda to be detected as a disk
* Turn off udev logging, it makes debugging too hard. Better would be to log to a file or something
* change working directory name template
* Rename to baremetal-mkinitrd.sh
* initial commit
