README for apycot
=================

Apycot_ is an Automated Python Code Testing platform built on narval_
and cubicweb_.

.. _Apycot: http://www.cubicweb.org/project/apycot
.. _narval: http://www.cubicweb.org/project/narval
.. _cubicweb: http://www.cubicweb.org/project/cubicweb

Installation and configuration
``````````````````````````````

Apycot_ is based on narval_, so make sure you have a working narval_
setup. Please refer to narval's documentation for help on installing a
narval setup.

Once you have a properly functionning narval setup, you have to
install Apycot elements on both the website part and the narval-bot
side.

On the web/data server host
---------------------------

* Install the `cubicweb-apycot` package (more info in the
  `cubicweb book`_).

* Modify password for the narval user for better security.


On the bot host
---------------

* Install the `narval-apycot` package.

* Edit `/etc/narval/narval.ini`, is neccessary (or `~/etc/narval.ini`
  when running code from hg) to adjust the bot configuration. You can
  also generate a stub configuration file using `narval rcfile >
  /etc/narval/narval.ini`.

* Indicate the connection informations for each instance in the
  `/etc/narval/narval-cw-sources.ini` file (makesure this file is not
  world readable), for instance::

      [cwo]
      url=https://www.cubicweb.org/
      token_id=The Token Name
      secret=<generated secret>

      [elo]
      url=https://www.logilab.org/
      token_id=The Other Token Name
      secret=<generated secret>

  where each section is the configuration for a cubicweb
  application.

* For those running from source, `narval/bin/narval` **must** be in
  `PATH` (since the `narval` daemon spawns subprocess via the `narval`
  command).

.. _`cubicweb book`: http://www.cubicweb.org/

You may check the bot can connect to the cubicweb instances by
watching the narval bot's logs (usually in `/var/log/narval/`).


More documentation
``````````````````

Beside low-level installation (described here), all the documentation to setup your
continuous integration environment is available online through your instance at
`http://<your instance url>/doc/apycot`

You should read this documentation in order to be able to create all
the required objects to build your own testing and continuous
integration platform.


Feedbacks, bug reports
``````````````````````

Comments and bug reports are welcome on the
python-projects@list.logilab.org mailing-list.
