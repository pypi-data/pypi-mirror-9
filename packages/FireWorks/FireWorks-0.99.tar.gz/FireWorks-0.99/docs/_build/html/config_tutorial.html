<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Modifying the FW Config &mdash; FireWorks 0.99 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.99',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="FireWorks 0.99 documentation" href="index.html" />
    <link rel="next" title="Improving FireWorks performance" href="performance_tutorial.html" />
    <link rel="prev" title="Configuring Security" href="security_tutorial.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="performance_tutorial.html" title="Improving FireWorks performance"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="security_tutorial.html" title="Configuring Security"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">FireWorks 0.99 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="modifying-the-fw-config">
<h1>Modifying the FW Config<a class="headerlink" href="#modifying-the-fw-config" title="Permalink to this headline">¶</a></h1>
<p>Many parameters used by FireWorks can be changed to suit your needs. Some examples include:</p>
<ul class="simple">
<li>specifying the default locations of your configuration files. This will save you <strong>a lot</strong> of typing when running FireWorks scripts, e.g. <tt class="docutils literal"><span class="pre">lpad</span> <span class="pre">-l</span> <span class="pre">my_launchpad.yaml</span> <span class="pre">get_fws</span></tt> becomes <tt class="docutils literal"><span class="pre">lpad</span> <span class="pre">get_fws</span></tt> once you&#8217;ve set your default LaunchPad location.</li>
<li>enabling FireTasks for which the code is located outside of the FireWorks package</li>
<li>smaller adjustments, e.g. whether to print a <tt class="docutils literal"><span class="pre">FW.json</span></tt> file in your run directory</li>
<li>performance tweaks (not recommended!)</li>
</ul>
<div class="section" id="how-to-modify-the-fw-config">
<h2>How to modify the FW Config<a class="headerlink" href="#how-to-modify-the-fw-config" title="Permalink to this headline">¶</a></h2>
<p>A sample FW_config file (that does not change any settings) is located in the FireWorks tutorial directory: <tt class="docutils literal"><span class="pre">&lt;INSTALL_DIR&gt;/fw_tutorials/fw_config/FW_config.yaml</span></tt>.</p>
<ol class="arabic">
<li><dl class="first docutils">
<dt>To activate the config file, you can do any one of the following:</dt>
<dd><ol class="first lowerroman simple">
<li>put it in the current directory where you run FireWorks commands</li>
<li>put it in your root <tt class="docutils literal"><span class="pre">&lt;INSTALL_DIR&gt;</span></tt> (do not change it&#8217;s name!). Recall that your <tt class="docutils literal"><span class="pre">&lt;INSTALL_DIR&gt;</span></tt> can be found by typing <tt class="docutils literal"><span class="pre">lpad</span> <span class="pre">version</span></tt>.</li>
<li>put the config file in <tt class="docutils literal"><span class="pre">&lt;HOME&gt;/.fireworks</span></tt> where <tt class="docutils literal"><span class="pre">&lt;HOME&gt;</span></tt> is your home directory (don&#8217;t forget the <tt class="docutils literal"><span class="pre">.</span></tt> in the <tt class="docutils literal"><span class="pre">.fireworks</span></tt> directory!)</li>
<li>put the config file anywhere, but set the <cite>FW_CONFIG_FILE</cite> as an environment variable in your OS. The <tt class="docutils literal"><span class="pre">FW_CONFIG_FILE</span></tt> environment variable should be set to the <strong>full</strong> path (no relative links!) of your config file, including the filename.</li>
</ol>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The config file in the current directory will always take precedence.</p>
</div>
</dd>
</dl>
</li>
<li><p class="first">To test whether your config file is activated, run any LaunchPad command:</p>
<div class="highlight-python"><div class="highlight"><pre>lpad version
</pre></div>
</div>
</li>
</ol>
<p>You should see text printed to the Terminal saying <tt class="docutils literal"><span class="pre">successfully</span> <span class="pre">loaded</span> <span class="pre">your</span> <span class="pre">custom</span> <span class="pre">FW_config.yaml!</span></tt>. You can remove this text by deleting the <tt class="docutils literal"><span class="pre">ECHO_TEST</span></tt> parameter from your <tt class="docutils literal"><span class="pre">FW_config.yaml</span></tt> file.</p>
<div class="section" id="specifying-default-locations-for-the-config-files">
<span id="configfile-label"></span><h3>Specifying default locations for the config files<a class="headerlink" href="#specifying-default-locations-for-the-config-files" title="Permalink to this headline">¶</a></h3>
<p>It can be annoying to manually type in the <tt class="docutils literal"><span class="pre">-l</span></tt>, <tt class="docutils literal"><span class="pre">-w</span></tt>, and <tt class="docutils literal"><span class="pre">-q</span></tt> parameters in FireWorks scripts (corresponding to the locations of the LaunchPad, FireWorker, and QueueAdapter files, respectively). You can set these parameters once and for all by specifying the following variables in your FWConfig:</p>
<div class="highlight-python"><div class="highlight"><pre>LAUNCHPAD_LOC: fullpath/to/my_launchpad.yaml
FWORKER_LOC: fullpath/to/my_fworker.yaml
QUEUEADAPTER_LOC: fullpath/to/my_qadapter.yaml
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">be sure to use full paths, not relative paths or BASH shortcuts!</p>
</div>
</div>
<div class="section" id="specifying-default-locations-for-the-config-files-alternate">
<h3>Specifying default locations for the config files (alternate)<a class="headerlink" href="#specifying-default-locations-for-the-config-files-alternate" title="Permalink to this headline">¶</a></h3>
<p>An alternate strategy is to set a single parameter in FWConfig called <tt class="docutils literal"><span class="pre">CONFIG_FILE_DIR</span></tt>. This should be the full path to a directory containing files named <tt class="docutils literal"><span class="pre">my_launchpad.yaml</span></tt>, <tt class="docutils literal"><span class="pre">my_fworker.yaml</span></tt>, and <tt class="docutils literal"><span class="pre">my_qadapter.yaml</span></tt>. FireWorks looks for these files in the <tt class="docutils literal"><span class="pre">CONFIG_FILE_DIR</span></tt> if it cannot find them elsewhere. If unset in the FWConfig, the <tt class="docutils literal"><span class="pre">CONFIG_FILE_DIR</span></tt> is automatically set to the directory you are running your FW script in.</p>
</div>
<div class="section" id="linking-to-firetasks-in-external-packages">
<h3>Linking to FireTasks in external packages<a class="headerlink" href="#linking-to-firetasks-in-external-packages" title="Permalink to this headline">¶</a></h3>
<p>If you&#8217;ve placed Python code for some of your own custom FireTasks in an external Python package named <em>my_package.firetasks</em>, you can notify FireWorks of the FireTasks in this directory by adding the packages to your config:</p>
<div class="highlight-python"><div class="highlight"><pre>ADD_USER_PACKAGES:
  - my_package.firetasks
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure your package is in your PYTHONPATH! For example, typing <tt class="docutils literal"><span class="pre">from</span> <span class="pre">my_package</span> <span class="pre">import</span> <span class="pre">firetasks</span></tt> in an interactive Python terminal should succeed.</p>
</div>
<p>An alternative is to give your FireTasks a _fw_name such as <tt class="docutils literal"><span class="pre">{{package.subpackage.module.Class}}</span></tt>. When enclosed in double braces, FireWorks will not search USER_PACKAGES and instead directly load the class. The disadvantage of this method is that you <em>must</em> update the <em>FW_NAME_UPDATES</em> key of the FWConfig if you refactor or move the class.</p>
</div>
<div class="section" id="parameters-you-might-want-to-change">
<h3>Parameters you might want to change<a class="headerlink" href="#parameters-you-might-want-to-change" title="Permalink to this headline">¶</a></h3>
<p>A few basic parameters that can be tweaked are:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">SORT_FWS:</span> <span class="pre">''</span></tt> - set to <tt class="docutils literal"><span class="pre">FIFO</span></tt> if you want older FireWorks to be run first, <tt class="docutils literal"><span class="pre">FILO</span></tt> if you want recent FireWorks run first. Note that higher priority FireWorks are always run first.</li>
<li><tt class="docutils literal"><span class="pre">PRINT_FW_JSON:</span> <span class="pre">True</span></tt> - whether to print the <tt class="docutils literal"><span class="pre">FW.json</span></tt> file in your run directory</li>
<li><tt class="docutils literal"><span class="pre">PRINT_FW_YAML:</span> <span class="pre">False</span></tt> - whether to print the <tt class="docutils literal"><span class="pre">FW.yaml</span></tt> file in your run directory</li>
<li><tt class="docutils literal"><span class="pre">SUBMIT_SCRIPT_NAME:</span> <span class="pre">FW_submit.script</span></tt> - the name to give the script for submitting PBS/SLURM/etc. queue jobs</li>
<li><tt class="docutils literal"><span class="pre">FW_LOGGING_FORMAT:</span> <span class="pre">%(asctime)s</span> <span class="pre">%(levelname)s</span> <span class="pre">%(message)s</span></tt> - format for loggers (this String will be passed to <tt class="docutils literal"><span class="pre">logging.Formatter()</span></tt>)</li>
<li><tt class="docutils literal"><span class="pre">ALWAYS_CREATE_NEW_BLOCK:</span> <span class="pre">False</span></tt> - set True if you want the Queue Launcher to always create a new block directory every time it is called, False if you want to re-use previous blocks</li>
<li><tt class="docutils literal"><span class="pre">TEMPLATE_DIR</span></tt> - where to store templates if you are using the <a class="reference internal" href="templatewritertask.html"><em>TemplateWriterTask</em></a>.</li>
<li><tt class="docutils literal"><span class="pre">REMOVE_USELESS_DIRS:</span> <span class="pre">False</span></tt> - tries to delete empty launch directories created when setting the <tt class="docutils literal"><span class="pre">_launch_dir</span></tt> in the spec of your Firework.</li>
<li><tt class="docutils literal"><span class="pre">EXCEPT_DETAILS_ON_RERUN:</span> <span class="pre">False</span></tt> - if True, when rerunning a FIZZLED Firework, the serialized exception details are added to the spec.</li>
</ul>
</div>
<div class="section" id="parameters-that-you-probably-shouldn-t-change">
<h3>Parameters that you probably shouldn&#8217;t change<a class="headerlink" href="#parameters-that-you-probably-shouldn-t-change" title="Permalink to this headline">¶</a></h3>
<p>Some parameters that you can change, but probably shouldn&#8217;t, are:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">QUEUE_RETRY_ATTEMPTS:</span> <span class="pre">10</span></tt> - number of attempts to re-try communicating with queue server when communication fails</li>
<li><tt class="docutils literal"><span class="pre">QUEUE_UPDATE_INTERVAL:</span> <span class="pre">5</span></tt> - max interval (seconds) needed for queue to update after submitting a job</li>
<li><tt class="docutils literal"><span class="pre">WFLOCK_EXPIRATION_SECS:</span> <span class="pre">300</span></tt> -  wait this long (in seconds) for a WFLock before expiring. Must set <em>much</em> higher than DB update time for a WF.</li>
<li><tt class="docutils literal"><span class="pre">WFLOCK_EXPIRATION_KILLL</span> <span class="pre">True</span></tt> - If True, kill WFLock on expiration if True. If False, raise Error instead.</li>
<li><tt class="docutils literal"><span class="pre">PING_TIME_SECS:</span> <span class="pre">3600</span></tt> - means that the Rocket will ping the LaunchPad that it&#8217;s alive every 3600 seconds. See the <a class="reference internal" href="failures_tutorial.html"><em>failures tutorial</em></a>.</li>
<li><tt class="docutils literal"><span class="pre">RUN_EXPIRATION_SECS:</span> <span class="pre">14400</span></tt> - means that the LaunchPad will mark a Rocket FIZZLED if it hasn&#8217;t received a ping in 14400 seconds. See the <a class="reference internal" href="failures_tutorial.html"><em>failures tutorial</em></a>.</li>
<li><tt class="docutils literal"><span class="pre">RESERVATION_EXPIRATION_SECS:</span> <span class="pre">1209600</span></tt> - means that the LaunchPad will cancel the reservation of a Firework that&#8217;s been in the queue for 1209600 seconds (14 days). See the <a class="reference internal" href="queue_tutorial_pt2.html"><em>queue reservation tutorial</em></a>.</li>
<li><tt class="docutils literal"><span class="pre">FW_BLOCK_FORMAT:</span> <span class="pre">%Y-%m-%d-%H-%M-%S-%f</span></tt> - the <tt class="docutils literal"><span class="pre">launcher_</span></tt> and <tt class="docutils literal"><span class="pre">block_</span></tt> directories written by the Rocket and Queue Launchers add a date stamp to the directory. You can change this if desired.</li>
<li><tt class="docutils literal"><span class="pre">QSTAT_FREQUENCY:</span> <span class="pre">50</span></tt> - number of jobs submitted to queue before re-executing a qstat. 1 means always do qstat, higher avoids unnecessarily loading the qstat server. Set this low if you have multiple processes submitting jobs to the same queue.</li>
<li><tt class="docutils literal"><span class="pre">PW_CHECK_NUM:</span> <span class="pre">10</span></tt> - how many FireWorks/Worflows can be changed with a single LaunchPad command (like <tt class="docutils literal"><span class="pre">rerun_fws</span></tt>) before a password is required.</li>
</ul>
<p>For a full list of parameters that can be changed, you can browse the <tt class="docutils literal"><span class="pre">fw_config.py</span></tt> file in the FireWorks source.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Modifying the FW Config</a><ul>
<li><a class="reference internal" href="#how-to-modify-the-fw-config">How to modify the FW Config</a><ul>
<li><a class="reference internal" href="#specifying-default-locations-for-the-config-files">Specifying default locations for the config files</a></li>
<li><a class="reference internal" href="#specifying-default-locations-for-the-config-files-alternate">Specifying default locations for the config files (alternate)</a></li>
<li><a class="reference internal" href="#linking-to-firetasks-in-external-packages">Linking to FireTasks in external packages</a></li>
<li><a class="reference internal" href="#parameters-you-might-want-to-change">Parameters you might want to change</a></li>
<li><a class="reference internal" href="#parameters-that-you-probably-shouldn-t-change">Parameters that you probably shouldn&#8217;t change</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="security_tutorial.html"
                        title="previous chapter">Configuring Security</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="performance_tutorial.html"
                        title="next chapter">Improving FireWorks performance</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/config_tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="performance_tutorial.html" title="Improving FireWorks performance"
             >next</a> |</li>
        <li class="right" >
          <a href="security_tutorial.html" title="Configuring Security"
             >previous</a> |</li>
        <li><a href="index.html">FireWorks 0.99 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2013, Anubhav Jain.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53488807-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>