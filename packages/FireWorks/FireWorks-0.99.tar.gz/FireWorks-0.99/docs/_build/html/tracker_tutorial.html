<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Tracking an output file during execution &mdash; FireWorks 0.99 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.99',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="FireWorks 0.99 documentation" href="index.html" />
    <link rel="next" title="Plotting workflows" href="plotting.html" />
    <link rel="prev" title="Using the Web GUI" href="basesite_tutorial.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting workflows"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="basesite_tutorial.html" title="Using the Web GUI"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">FireWorks 0.99 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="tracking-an-output-file-during-execution">
<h1>Tracking an output file during execution<a class="headerlink" href="#tracking-an-output-file-during-execution" title="Permalink to this headline">¶</a></h1>
<p>You can track the last few lines of file during Firework execution. For example, you can monitor an output file to make sure the run is progressing as expected. Setting one or more such <em>trackers</em> is simple.</p>
<div class="section" id="adding-a-tracker-via-files">
<h2>Adding a tracker (via files)<a class="headerlink" href="#adding-a-tracker-via-files" title="Permalink to this headline">¶</a></h2>
<p>To add a tracker, set a key called <tt class="docutils literal"><span class="pre">_tracker</span></tt> in your <em>fw_spec</em> to be an array of objects with <tt class="docutils literal"><span class="pre">filename</span></tt> and <tt class="docutils literal"><span class="pre">nlines</span></tt> keys. Each tracker will track the desired number of final lines of a particular file. The example below has two trackers, one for <tt class="docutils literal"><span class="pre">inputs.txt</span></tt> and another for <tt class="docutils literal"><span class="pre">words.txt</span></tt> (see the <tt class="docutils literal"><span class="pre">_trackers</span></tt> section at the bottom):</p>
<div class="highlight-python"><div class="highlight"><pre>name: Tracker FW
spec:
  _tasks:
  - _fw_name: TemplateWriterTask
    context:
      opt1: 5.0
      opt2: fast method
    output_file: inputs.txt
    template_file: simple_template.txt
  - _fw_name: ScriptTask
    script: wc -w &lt; inputs.txt &gt; words.txt
    use_shell: true
  _trackers:
  - filename: words.txt
    nlines: 25
  - filename: inputs.txt
    nlines: 25
</pre></div>
</div>
<p>You can see this example in &lt;INSTALL_DIR&gt;/fw_tutorials/tracker.</p>
</div>
<div class="section" id="adding-a-tracker-via-code">
<h2>Adding a tracker (via code)<a class="headerlink" href="#adding-a-tracker-via-code" title="Permalink to this headline">¶</a></h2>
<p>The following code example creates the Firework above with two trackers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">fireworks</span> <span class="kn">import</span> <span class="n">Firework</span><span class="p">,</span> <span class="n">Tracker</span><span class="p">,</span> <span class="n">ScriptTask</span><span class="p">,</span> <span class="n">TemplateWriterTask</span>

<span class="c"># create the Firework consisting of multiple tasks</span>
<span class="n">firetask1</span> <span class="o">=</span> <span class="n">TemplateWriterTask</span><span class="p">({</span><span class="s">&#39;context&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;opt1&#39;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span> <span class="s">&#39;opt2&#39;</span><span class="p">:</span> <span class="s">&#39;fast method&#39;</span><span class="p">},</span> <span class="s">&#39;template_file&#39;</span><span class="p">:</span> <span class="s">&#39;simple_template.txt&#39;</span><span class="p">,</span> <span class="s">&#39;output_file&#39;</span><span class="p">:</span> <span class="s">&#39;inputs.txt&#39;</span><span class="p">})</span>
<span class="n">firetask2</span> <span class="o">=</span> <span class="n">ScriptTask</span><span class="o">.</span><span class="n">from_str</span><span class="p">(</span><span class="s">&#39;wc -w &lt; inputs.txt &gt; words.txt&#39;</span><span class="p">)</span>
<span class="c"># define the trackers</span>
<span class="n">tracker1</span> <span class="o">=</span> <span class="n">Tracker</span><span class="p">(</span><span class="s">&#39;words.txt&#39;</span><span class="p">,</span> <span class="n">nlines</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">tracker2</span> <span class="o">=</span> <span class="n">Tracker</span><span class="p">(</span><span class="s">&#39;inputs.txt&#39;</span><span class="p">,</span> <span class="n">nlines</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">fw</span> <span class="o">=</span> <span class="n">Firework</span><span class="p">([</span><span class="n">firetask1</span><span class="p">,</span> <span class="n">firetask2</span><span class="p">],</span> <span class="n">spec</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;_trackers&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">tracker1</span><span class="p">,</span> <span class="n">tracker2</span><span class="p">]})</span>

<span class="n">fw</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="s">&#39;fw_tracker.yaml&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="viewing-the-tracked-file">
<h2>Viewing the tracked file<a class="headerlink" href="#viewing-the-tracked-file" title="Permalink to this headline">¶</a></h2>
<p>You can view the tracked files for all FireWorks (during or after execution) with the command:</p>
<div class="highlight-python"><div class="highlight"><pre>lpad track_fws
</pre></div>
</div>
<p>which will print out data like:</p>
<div class="highlight-python"><div class="highlight"><pre># FW id: 1
## Launch id: 1
### Filename: words.txt
       7
### Filename: inputs.txt
option1 = 5.0
option2 = fast method
</pre></div>
</div>
<div class="section" id="choosing-the-firework-s-for-which-to-view-the-tracked-files">
<h3>Choosing the Firework(s) for which to view the tracked files<a class="headerlink" href="#choosing-the-firework-s-for-which-to-view-the-tracked-files" title="Permalink to this headline">¶</a></h3>
<p>Besides for the &lt;FW_ID&gt;, there are additional options for specifying the Firework(s) that you want to get the tracked data for. For example, you can search for the tracker data of a particular Firework id or of all <em>FIZZLED</em> FireWorks via:</p>
<div class="highlight-python"><div class="highlight"><pre>lpad track_fws -i &lt;FW_ID&gt;
lpad track_fws -s FIZZLED
</pre></div>
</div>
<p>Type <tt class="docutils literal"><span class="pre">lpad</span> <span class="pre">track_fws</span> <span class="pre">-h</span></tt> to see all the options, including advanced queries.</p>
</div>
<div class="section" id="choosing-the-tracked-files-to-display">
<h3>Choosing the tracked files to display<a class="headerlink" href="#choosing-the-tracked-files-to-display" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">--include</span></tt> (or <tt class="docutils literal"><span class="pre">-c</span></tt>) and <tt class="docutils literal"><span class="pre">--exclude</span></tt> (or <tt class="docutils literal"><span class="pre">-x</span></tt>) options can be used to filter what files are displayed in the Tracker Report. The <tt class="docutils literal"><span class="pre">--include</span></tt> option means to only display those files, whereas the <tt class="docutils literal"><span class="pre">--exclude</span></tt> option means to filter out those files from the report:</p>
<div class="highlight-python"><div class="highlight"><pre>lpad track_fws --include words.txt
lpad track_fws --exclude words.txt
</pre></div>
</div>
<p>You can separate multiple filenames by spaces.</p>
</div>
</div>
<div class="section" id="frequency-of-monitoring">
<h2>Frequency of monitoring<a class="headerlink" href="#frequency-of-monitoring" title="Permalink to this headline">¶</a></h2>
<p>The output file is monitored for changes at every update ping interval, as well as at the beginning and completion of execution. By default, the ping interval is set to be every hour; this is to avoid overloading the database with pings if tens of thousands of runs are happening simultaneously. You can change the ping interval (<tt class="docutils literal"><span class="pre">PING_TIME_SECS</span></tt>) in the <a class="reference internal" href="config_tutorial.html"><em>FW config</em></a>.</p>
</div>
<div class="section" id="a-note-about-nlines">
<h2>A note about nlines<a class="headerlink" href="#a-note-about-nlines" title="Permalink to this headline">¶</a></h2>
<p>The tracker is meant to give basic debug information about a job, not to permanently store output files. There is a limit of 1000 lines to keep the Mongo document size reasonable, and to keep FireWorks performing well. We suggest you leave nlines to be less than 100 lines and only use this feature for basic debugging.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Tracking an output file during execution</a><ul>
<li><a class="reference internal" href="#adding-a-tracker-via-files">Adding a tracker (via files)</a></li>
<li><a class="reference internal" href="#adding-a-tracker-via-code">Adding a tracker (via code)</a></li>
<li><a class="reference internal" href="#viewing-the-tracked-file">Viewing the tracked file</a><ul>
<li><a class="reference internal" href="#choosing-the-firework-s-for-which-to-view-the-tracked-files">Choosing the Firework(s) for which to view the tracked files</a></li>
<li><a class="reference internal" href="#choosing-the-tracked-files-to-display">Choosing the tracked files to display</a></li>
</ul>
</li>
<li><a class="reference internal" href="#frequency-of-monitoring">Frequency of monitoring</a></li>
<li><a class="reference internal" href="#a-note-about-nlines">A note about nlines</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="basesite_tutorial.html"
                        title="previous chapter">Using the Web GUI</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="plotting.html"
                        title="next chapter">Plotting workflows</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tracker_tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="plotting.html" title="Plotting workflows"
             >next</a> |</li>
        <li class="right" >
          <a href="basesite_tutorial.html" title="Using the Web GUI"
             >previous</a> |</li>
        <li><a href="index.html">FireWorks 0.99 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2013, Anubhav Jain.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53488807-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>