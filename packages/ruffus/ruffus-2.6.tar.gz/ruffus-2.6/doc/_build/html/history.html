<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Ruffus is a Computation Pipeline library for python. It is open-sourced, powerful and user-friendly, and widely used in science and bioinformatics" name="description" />
<meta content="python, pipeline, computation, cluster, Ruffus, bioinformatics, parallel' name='keywords" name="keywords" />
<meta content="Leo Goodstadt" name="Author" />
<meta content="Leo Goodstadt" name="Publisher" />
<meta content="ruffus&#64;llew.org.uk" name="Email" />
<meta content="index, follow" name="robots" />
<meta content="en-uk" name="language" />
<meta content="United Kingdom" name="country" />
<meta content="Leo Goodstadt 2009-2014" name="copyright" />

    <title>Major Features added to Ruffus &mdash; ruffus 2.6 documentation</title>
    
    <link rel="stylesheet" href="_static/ruffus.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="ruffus 2.6 documentation" href="index.html" />
    <link rel="next" title="New Object orientated syntax for Ruffus in Version 2.6" href="tutorials/new_syntax.html" />
    <link rel="prev" title="Design &amp; Architecture" href="design.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tutorials/new_syntax.html" title="New Object orientated syntax for Ruffus in Version 2.6"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="design.html" title="Design &amp; Architecture"
             accesskey="P">previous</a> |</li>
        Ruffus v. 2.6
            <li><a href="index.html">Home</a> | </li>
            <li><a href="contents.html">Contents</a> | </li>
            <li><a href="installation.html">Install</a>  | </li>
            <li><a href="tutorials/new_tutorial/introduction.html">Manual</a>  / </li>
            <li><a href="tutorials/new_tutorial/manual_contents.html">(TOC)</a>  | </li>
            <li><a href="faq.html">FAQ</a>  | </li>
            <li><a href="cheatsheet.html">Cheat sheet</a> | </li>
            <li><a href="tutorials/new_tutorial/command_line.html">Command Line</a> | </li>
            <li><a href="gallery.html">Gallery</a> |  </li>
            <li><a href="new_syntax.html">New syntax in v 2.6</a> | </li>
            <li><a href="#">Latest Changes</a> &raquo; </li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <p><span class="raw-html"><style> .red {color:red} </style></span></p>
<div class="section" id="major-features-added-to-ruffus">
<h1>Major Features added to Ruffus<a class="headerlink" href="#major-features-added-to-ruffus" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">See <a class="reference internal" href="todo.html#todo"><em>To do list</em></a> for future enhancements to Ruffus</p>
</div>
<div class="section" id="version-2-6">
<h2>version 2.6<a class="headerlink" href="#version-2-6" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>12th March 2015</div></blockquote>
<div class="section" id="bug-fixes">
<h3>1) Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">pipeline_printout_graph()</span></tt> incompatibility with python3 fixed</li>
<li>checkpointing did not work correctly with <a class="reference internal" href="decorators/split.html#decorators-split"><em>&#64;split(...)</em></a> and <a class="reference internal" href="decorators/subdivide.html#decorators-subdivide"><em>&#64;subdivide(...)</em></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="transform-suffix-xxx-output-dir-new-output-path">
<h3>2) <cite>&#64;transform `(..., suffix(&#8220;xxx&#8221;),</cite> <span class="red">output_dir</span> <cite>= &#8220;/new/output/path&#8221;)</cite><a class="headerlink" href="#transform-suffix-xxx-output-dir-new-output-path" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Thanks to the suggestion of Milan Simonovic.</p>
<p><a class="reference internal" href="decorators/transform.html#decorators-transform"><em>&#64;transform(..., suffix(...) )</em></a> has easy to understand syntax and takes care of all the common use cases
of Ruffus.</p>
<p>However, when we need to place the output in a different directories, we suddenly have to plunge into the deep end and parse file paths using
<a class="reference internal" href="decorators/indicator_objects.html#decorators-regex"><em>regex()</em></a> or <a class="reference internal" href="tutorials/new_tutorial/output_file_names.html#new-manual-formatter"><em>formatter()</em></a>.</p>
<p>Now, <a class="reference internal" href="decorators/transform.html#decorators-transform"><em>&#64;transform</em></a> takes an optional <tt class="docutils literal"><span class="pre">output_dir</span></tt> named parameter so that we can continue to use <a class="reference internal" href="tutorials/new_tutorial/output_file_names.html#new-manual-suffix"><em>suffix()</em></a> even when the output needs
to go into a new directory.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="c">#</span>
<span class="hll"><span class="c">#   input/a.fasta -&gt; output/a.sam</span>
</span><span class="hll"><span class="c">#   input/b.fasta -&gt; output/b.sam</span>
</span><span class="c">#</span>
<span class="n">starting_files</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;input/a.fasta&quot;</span><span class="p">,</span><span class="s">&quot;input/b.fasta&quot;</span><span class="p">]</span>
<span class="nd">@transform</span><span class="p">(</span><span class="n">starting_files</span><span class="p">,</span>
           <span class="n">suffix</span><span class="p">(</span><span class="s">&#39;.fasta&#39;</span><span class="p">),</span>
           <span class="s">&#39;.sam&#39;</span><span class="p">,</span>
<span class="hll">           <span class="n">output_dir</span> <span class="o">=</span> <span class="s">&quot;output&quot;</span><span class="p">)</span>
</span><span class="k">def</span> <span class="nf">map_dna_sequence</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">output_file</span><span class="p">)</span> <span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div></blockquote>
<p>See example <tt class="docutils literal"><span class="pre">test\test_suffix_output_dir.py</span></tt></p>
</div></blockquote>
</div>
<div class="section" id="named-parameters">
<h3>2) Named parameters<a class="headerlink" href="#named-parameters" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Decorators can take named parameters.</p>
<p>These are self documenting, and improve clarity.</p>
<p>Note that the usual Python rules for function parameters apply:</p>
<ul class="simple">
<li>Positional arguments must precede named arguments</li>
<li>Named arguments cannot be used to fill in for &#8220;missing&#8221; positional arguments</li>
</ul>
<p>For example the following two functions are identical:</p>
<p><strong>Positional parameters:</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="nd">@merge</span><span class="p">(</span><span class="n">prev_task</span><span class="p">,</span> <span class="p">[</span><span class="s">&quot;a.summary&quot;</span><span class="p">,</span> <span class="s">&quot;b.summary&quot;</span><span class="p">],</span> <span class="mi">14</span><span class="p">,</span> <span class="s">&quot;extra_info&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;a&quot;</span><span class="p">:</span><span class="mi">45</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">})</span>
<span class="k">def</span> <span class="nf">merge_task</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">extra_num</span><span class="p">,</span> <span class="n">extra_str</span><span class="p">,</span> <span class="n">extra_dict</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Named parameters:</strong></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="c"># new style is a bit clearer</span>
<span class="nd">@merge</span><span class="p">(</span><span class="nb">input</span>   <span class="o">=</span> <span class="n">prev_task</span><span class="p">,</span>
       <span class="n">output</span>  <span class="o">=</span> <span class="p">[</span><span class="s">&quot;a.summary&quot;</span><span class="p">,</span> <span class="s">&quot;b.summary&quot;</span><span class="p">],</span>
       <span class="n">extras</span>  <span class="o">=</span> <span class="p">[</span><span class="mi">14</span><span class="p">,</span> <span class="s">&quot;extra_info&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s">&quot;a&quot;</span><span class="p">:</span><span class="mi">45</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">:</span><span class="mi">5</span><span class="p">}]</span>
       <span class="p">)</span>
<span class="k">def</span> <span class="nf">merge_task</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">extra_num</span><span class="p">,</span> <span class="n">extra_str</span><span class="p">,</span> <span class="n">extra_dict</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><tt class="docutils literal"><span class="pre">,extras=</span></tt> takes all the <em>extras</em> parameters (<tt class="docutils literal"><span class="pre">14,</span> <span class="pre">&quot;extra_info&quot;,</span> <span class="pre">{&quot;a&quot;:45,</span> <span class="pre">&quot;b&quot;:5}</span></tt>) as a single list</p>
</div>
<ul>
<li><dl class="first docutils">
<dt><a class="reference internal" href="decorators/split.html#decorators-split"><em>&#64;split(...)</em></a> and <a class="reference internal" href="decorators/merge.html#decorators-merge"><em>&#64;merge(...)</em></a></dt>
<dd><ul class="first last simple">
<li><em>input</em></li>
<li><em>output</em></li>
<li>[<em>extras</em>]</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="decorators/transform.html#decorators-transform"><em>&#64;transform(...)</em></a> and <a class="reference internal" href="decorators/mkdir.html#decorators-mkdir"><em>&#64;mkdir(...)</em></a></dt>
<dd><ul class="first last simple">
<li><em>input</em></li>
<li><em>filter</em></li>
<li>[<em>replace_inputs</em> or <em>add_inputs</em>]</li>
<li><em>output</em></li>
<li>[<em>extras</em>]</li>
<li>[<em>output_dir</em>]</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="decorators/collate.html#decorators-collate"><em>&#64;collate(...)</em></a> and <a class="reference internal" href="decorators/collate.html#decorators-collate"><em>&#64;subdivide(...)</em></a></dt>
<dd><ul class="first last simple">
<li><em>input</em></li>
<li><em>filter</em></li>
<li><em>output</em></li>
<li>[<em>extras</em>]</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="decorators/originate.html#decorators-originate"><em>&#64;originate(...)</em></a></dt>
<dd><ul class="first last simple">
<li><em>output</em></li>
<li>[<em>extras</em>]</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="decorators/product.html#decorators-product"><em>&#64;product(...)</em></a>, <a class="reference internal" href="decorators/permutations.html#decorators-permutations"><em>&#64;permutations(...)</em></a>, <a class="reference internal" href="decorators/combinations.html#decorators-combinations"><em>&#64;combinations(...)</em></a>, and <a class="reference internal" href="decorators/combinations_with_replacement.html#decorators-combinations-with-replacement"><em>&#64;combinations_with_replacement(...)</em></a></dt>
<dd><ul class="first last simple">
<li><em>input</em></li>
<li><em>filter</em></li>
<li>[<em>input2...NNN</em>] (only for <tt class="docutils literal"><span class="pre">product</span></tt>)</li>
<li>[<em>filter2...NNN</em>] (only for <tt class="docutils literal"><span class="pre">product</span></tt>) where NNN is an incrementing number</li>
<li><em>tuple_size</em> (except for <tt class="docutils literal"><span class="pre">product</span></tt>)</li>
<li>[<em>replace_inputs</em> or <em>add_inputs</em>]</li>
<li><em>output</em></li>
<li>[<em>extras</em>]</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="new-object-orientated-syntax-for-ruffus">
<h3>3) New object orientated syntax for Ruffus<a class="headerlink" href="#new-object-orientated-syntax-for-ruffus" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Ruffus Pipelines can now be created directly using the new <tt class="docutils literal"><span class="pre">Pipeline</span></tt> and <tt class="docutils literal"><span class="pre">Task</span></tt> objects instead of via decorators.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="c"># make ruffus pipeline</span>
<span class="n">my_pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;test&quot;</span><span class="p">)</span>
<span class="n">my_pipeline</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">task_func</span>  <span class="o">=</span> <span class="n">map_dna_sequence</span><span class="p">,</span>
                      <span class="nb">input</span>      <span class="o">=</span> <span class="n">starting_files</span><span class="p">,</span>
                      <span class="nb">filter</span>     <span class="o">=</span> <span class="n">suffix</span><span class="p">(</span><span class="s">&#39;.fasta&#39;</span><span class="p">),</span>
                      <span class="n">output</span>     <span class="o">=</span> <span class="s">&#39;.sam&#39;</span><span class="p">,</span>
                      <span class="n">output_dir</span> <span class="o">=</span> <span class="s">&quot;output&quot;</span><span class="p">)</span>

<span class="hll"><span class="n">my_pipeline</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</span></pre></div>
</div>
</div></blockquote>
<p>This new syntax is fully compatible and inter-operates with traditional Ruffus syntax using decorators.</p>
<p>Apart from cosmetic changes, the new syntax allows different instances of modular Ruffus sub-pipelines
to be defined separately, in different python modules and then joined together flexible at runtime.</p>
<p>The new syntax and discussion are introduced <a class="reference internal" href="tutorials/new_syntax.html#new-syntax"><em>here</em></a>.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="version-2-5">
<h2>version 2.5<a class="headerlink" href="#version-2-5" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>6th August 2014</div></blockquote>
<div class="section" id="python3-compatability-but-at-least-python-2-6-is-now-required">
<h3>1) Python3 compatability (but at least python 2.6 is now required)<a class="headerlink" href="#python3-compatability-but-at-least-python-2-6-is-now-required" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Ruffus v2.5 is now python3 compatible. This has required surprisingly many changes to the codebase. Please report any bugs to me.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Ruffus now requires at least python 2.6</strong></p>
<p class="last">It proved to be impossible to support python 2.5 and python 3.x at the same time.</p>
</div>
</div></blockquote>
</div>
<div class="section" id="ctrl-c-interrupts">
<h3>2) Ctrl-C interrupts<a class="headerlink" href="#ctrl-c-interrupts" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Ruffus now mostly(!) terminates gracefully when interrupted by Ctrl-C .</p>
<p>Please send me bug reports for when this doesn&#8217;t work with a minimally reproducible case.</p>
<p>This means that, in general, if an <tt class="docutils literal"><span class="pre">Exception</span></tt> is thrown during your pipeline but you don&#8217;t want to wait for the rest of the jobs to complete, you can still press Ctrl-C at any point.
Note that you may still need to clean up spawned processes, for example, using <tt class="docutils literal"><span class="pre">qdel</span></tt> if you are using <tt class="docutils literal"><span class="pre">Ruffus.drmaa_wrapper</span></tt></p>
</div></blockquote>
</div>
<div class="section" id="customising-flowcharts-in-pipeline-printout-graph-with-graphviz">
<h3>3) Customising flowcharts in pipeline_printout_graph() with <tt class="docutils literal"><span class="pre">&#64;graphviz</span></tt><a class="headerlink" href="#customising-flowcharts-in-pipeline-printout-graph-with-graphviz" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p><em>Contributed by Sean Davis, with improved syntax via Jake Biesinger</em></p>
<p>The graphics for each task can have its own attributes (URL, shape, colour) etc. by adding
<a class="reference external" href="http://www.graphviz.org/doc/info/attrs.html">graphviz attributes</a>
using the <tt class="docutils literal"><span class="pre">&#64;graphviz</span></tt> decorator.</p>
<ul>
<li><p class="first">This allows HTML formatting in the task names (using the <tt class="docutils literal"><span class="pre">label</span></tt> parameter as in the following example).
HTML labels <strong>must</strong> be enclosed in <tt class="docutils literal"><span class="pre">&lt;</span></tt> and <tt class="docutils literal"><span class="pre">&gt;</span></tt>. E.g.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">label</span> <span class="o">=</span> <span class="s">&quot;&lt;Line &lt;BR/&gt; wrapped task_name()&gt;&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">You can also opt to keep the task name and wrap it with a prefix and suffix:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">label_suffix</span> <span class="o">=</span> <span class="s">&quot;??? &quot;</span><span class="p">,</span> <span class="n">label_prefix</span> <span class="o">=</span> <span class="s">&quot;: What is this?&quot;</span>
</pre></div>
</div>
</li>
<li><p class="first">The <tt class="docutils literal"><span class="pre">URL</span></tt> attribute allows the generation of clickable svg, and also client / server
side image maps usable in web pages.
See <a class="reference external" href="http://www.graphviz.org/content/output-formats#dimap">Graphviz documentation</a></p>
</li>
</ul>
<p>Example:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="nd">@graphviz</span><span class="p">(</span><span class="n">URL</span><span class="o">=</span><span class="s">&#39;&quot;http://cnn.com&quot;&#39;</span><span class="p">,</span> <span class="n">fillcolor</span> <span class="o">=</span> <span class="s">&#39;&quot;#FFCCCC&quot;&#39;</span><span class="p">,</span>
                <span class="n">color</span> <span class="o">=</span> <span class="s">&#39;&quot;#FF0000&quot;&#39;</span><span class="p">,</span> <span class="n">pencolor</span><span class="o">=</span><span class="s">&#39;&quot;#FF0000&quot;&#39;</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s">&#39;&quot;#4B6000&quot;&#39;</span><span class="p">,</span>
                <span class="n">label_suffix</span> <span class="o">=</span> <span class="s">&quot;???&quot;</span><span class="p">,</span> <span class="n">label_prefix</span> <span class="o">=</span> <span class="s">&quot;What is this?&lt;BR/&gt; &quot;</span><span class="p">,</span>
                <span class="n">label</span> <span class="o">=</span> <span class="s">&quot;&lt;What &lt;FONT COLOR=</span><span class="se">\&quot;</span><span class="s">red</span><span class="se">\&quot;</span><span class="s">&gt;is&lt;/FONT&gt;this&gt;&quot;</span><span class="p">,</span>
                <span class="n">shape</span><span class="o">=</span> <span class="s">&quot;component&quot;</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">,</span> <span class="n">peripheries</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
                <span class="n">style</span><span class="o">=</span><span class="s">&quot;dashed&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">Up_to_date_task2</span><span class="p">(</span><span class="n">infile</span><span class="p">,</span> <span class="n">outfile</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c">#   Can use dictionary if you wish...</span>
<span class="n">graphviz_params</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;URL&quot;</span><span class="p">:</span><span class="s">&quot;http://cnn.com&quot;</span><span class="p">,</span> <span class="s">&quot;fontcolor&quot;</span><span class="p">:</span> <span class="s">&#39;&quot;#FF00FF&quot;&#39;</span><span class="p">}</span>
<span class="nd">@graphviz</span><span class="p">(</span><span class="o">**</span><span class="n">graphviz_params</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">myTask</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span><span class="n">output</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/history_html_flowchart.png"><img alt="_images/history_html_flowchart.png" src="_images/history_html_flowchart.png" style="width: 336.6px; height: 316.5px;" /></a>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="consistent-verbosity-levels">
<h3>4. Consistent verbosity levels<a class="headerlink" href="#consistent-verbosity-levels" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The verbosity levels are now more fine-grained and consistent between pipeline_printout and pipeline_run.
Note that At verbosity &gt; 2, <tt class="docutils literal"><span class="pre">pipeline_run</span></tt>  outputs lists of up-to-date tasks before running the pipeline.
Many users who defaulted to using a verbosity of 3 may want to move up to <tt class="docutils literal"><span class="pre">verbose</span> <span class="pre">=</span> <span class="pre">4</span></tt>.</p>
<blockquote>
<div><ul class="simple">
<li><strong>level 0</strong> : <em>Nothing</em></li>
<li><strong>level 1</strong> : <em>Out-of-date Task names</em></li>
<li><strong>level 2</strong> : <em>All Tasks (including any task function docstrings)</em></li>
<li><strong>level 3</strong> : <em>Out-of-date Jobs in Out-of-date Tasks, no explanation</em></li>
<li><strong>level 4</strong> : <em>Out-of-date Jobs in Out-of-date Tasks, with explanations and warnings</em></li>
<li><strong>level 5</strong> : <em>All Jobs in Out-of-date Tasks,  (include only list of up-to-date tasks)</em></li>
<li><strong>level 6</strong> : <em>All jobs in All Tasks whether out of date or not</em></li>
<li><strong>level 10</strong>: <em>Logs messages useful only for debugging ruffus pipeline code</em></li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Defaults to <strong>level 4</strong> for pipeline_printout: <em>Out of date jobs, with explanations and warnings</em></li>
<li>Defaults to <strong>level 1</strong> for pipeline_run: <em>Out-of-date Task names</em></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="allow-abbreviated-paths-from-pipeline-run-or-pipeline-printout">
<h3>5. Allow abbreviated paths from <tt class="docutils literal"><span class="pre">pipeline_run</span></tt> or <tt class="docutils literal"><span class="pre">pipeline_printout</span></tt><a class="headerlink" href="#allow-abbreviated-paths-from-pipeline-run-or-pipeline-printout" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Please contact me with suggestions if you find the abbreviations useful but &#8220;aesthetically challenged&#8221;!</p>
</div>
<p>Some pipelines produce interminable lists of long filenames. It would be nice to be able to abbreviate this
to just enough information to follow the progress.</p>
<dl class="docutils">
<dt>Ruffus now allows either</dt>
<dd><ol class="first arabic">
<li><p class="first">Only the nth top level sub-directories to be included</p>
</li>
<li><p class="first">The message to be truncated to a specified number of characters (to fit on a line, for example)</p>
<p>Note that the number of characters specified is the separate length of the input and output parameters,
not the entire message. You many need to specify a smaller limit that you expect (e.g. <tt class="docutils literal"><span class="pre">60</span></tt> rather than <cite>80</cite>)</p>
</li>
</ol>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">pipeline_printout</span><span class="p">(</span><span class="n">verbose_abbreviated_path</span> <span class="o">=</span> <span class="n">NNN</span><span class="p">)</span>
<span class="n">pipeline_run</span><span class="p">(</span><span class="n">verbose_abbreviated_path</span> <span class="o">=</span> <span class="o">-</span><span class="n">MMM</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<p>The <tt class="docutils literal"><span class="pre">verbose_abbreviated_path</span></tt> parameter restricts the length of input / output file paths to either</p>
<blockquote>
<div><ul class="simple">
<li>NNN levels of nested paths</li>
<li>A total of MMM characters, MMM is specified by setting <tt class="docutils literal"><span class="pre">verbose_abbreviated_path</span></tt> to -MMM (i.e. negative values)</li>
</ul>
<p><tt class="docutils literal"><span class="pre">verbose_abbreviated_path</span></tt> defaults to <tt class="docutils literal"><span class="pre">2</span></tt></p>
</div></blockquote>
<p>For example:</p>
<blockquote>
<div><p>Given <tt class="docutils literal"><span class="pre">[&quot;aa/bb/cc/dddd.txt&quot;,</span> <span class="pre">&quot;aaa/bbbb/cccc/eeed/eeee/ffff/gggg.txt&quot;]</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="hll"> <span class="c"># Original relative paths</span>
</span> <span class="s">&quot;[aa/bb/cc/dddd.txt, aaa/bbbb/cccc/eeed/eeee/ffff/gggg.txt]&quot;</span>

<span class="hll"> <span class="c"># Full abspath</span>
</span> <span class="n">verbose_abbreviated_path</span> <span class="o">=</span> <span class="mi">0</span>
 <span class="s">&quot;[/test/ruffus/src/aa/bb/cc/dddd.txt, /test/ruffus/src/aaa/bbbb/cccc/eeed/eeee/ffff/gggg.txt]&quot;</span>

<span class="hll"> <span class="c"># Specifed level of nested directories</span>
</span> <span class="n">verbose_abbreviated_path</span> <span class="o">=</span> <span class="mi">1</span>
 <span class="s">&quot;[.../dddd.txt, .../gggg.txt]&quot;</span>

 <span class="n">verbose_abbreviated_path</span> <span class="o">=</span> <span class="mi">2</span>
 <span class="s">&quot;[.../cc/dddd.txt, .../ffff/gggg.txt]&quot;</span>

 <span class="n">verbose_abbreviated_path</span> <span class="o">=</span> <span class="mi">3</span>
 <span class="s">&quot;[.../bb/cc/dddd.txt, .../eeee/ffff/gggg.txt]&quot;</span>


<span class="hll"> <span class="c"># Truncated to MMM characters</span>
</span> <span class="n">verbose_abbreviated_path</span> <span class="o">=</span> <span class="o">-</span><span class="mi">60</span>
 <span class="s">&quot;&lt;???&gt; /bb/cc/dddd.txt, aaa/bbbb/cccc/eeed/eeee/ffff/gggg.txt]&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>If you are using <tt class="docutils literal"><span class="pre">ruffus.cmdline</span></tt>, the abbreviated path lengths can be specified on
the command line as an extension to the verbosity:</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre> <span class="c"># verbosity of 4</span>
 yourscript.py --verbose 4

<span class="hll"> <span class="c"># display three levels of nested directories</span>
</span> yourscript.py --verbose 4:3

<span class="hll"> <span class="c"># restrict input and output parameters to 60 letters</span>
</span> yourscript.py --verbose 4:-60
</pre></div>
</div>
<p>The number after the colon is the abbreviated path length</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="other-changes">
<h3>Other changes<a class="headerlink" href="#other-changes" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>BUG FIX: Output producing wild cards was not saved in the checksum files!!!</li>
<li>BUG FIX: &#64;mkdir bug under Windows. Thanks to Sean Turley. (Aargh! Different exceptions are thrown in Windows vs. Linux for the same condition!)</li>
<li>Added <a class="reference internal" href="pipeline_functions.html#pipeline-functions-pipeline-get-task-names"><em>pipeline_get_task_names(...)</em></a> which returns all task name as a list of strings. Thanks to Clare Sloggett</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="version-2-4-1">
<h2>version 2.4.1<a class="headerlink" href="#version-2-4-1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>26th April 2014</p>
<ul class="simple">
<li>Breaking changes to drmaa API suggested by Bernie Pope to ensure portability across different drmaa implementations (SGE, SLURM etc.)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-2-4">
<h2>version 2.4<a class="headerlink" href="#version-2-4" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>4th April 2014</div></blockquote>
<div class="section" id="additions-to-ruffus-namespace">
<h3>Additions to <tt class="docutils literal"><span class="pre">ruffus</span></tt> namespace<a class="headerlink" href="#additions-to-ruffus-namespace" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="tutorials/new_tutorial/output_file_names.html#new-manual-formatter"><em>formatter()</em></a> (<a class="reference internal" href="decorators/indicator_objects.html#decorators-formatter"><em>syntax</em></a>)</li>
<li><a class="reference internal" href="tutorials/new_tutorial/originate.html#new-manual-originate"><em>originate()</em></a> (<a class="reference internal" href="decorators/originate.html#decorators-originate"><em>syntax</em></a>)</li>
<li><a class="reference internal" href="tutorials/new_tutorial/subdivide_collate.html#new-manual-subdivide"><em>subdivide()</em></a> (<a class="reference internal" href="decorators/subdivide.html#decorators-subdivide"><em>syntax</em></a>)</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="installation-use-pip">
<h3>Installation: use pip<a class="headerlink" href="#installation-use-pip" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre>sudo pip install ruffus --upgrade
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="command-line-support">
<h3>1) Command Line support<a class="headerlink" href="#command-line-support" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The optional <tt class="docutils literal"><span class="pre">Ruffus.cmdline</span></tt> module provides support for a set of common command
line arguments which make writing <em>Ruffus</em> pipelines much more pleasant.
See <a class="reference internal" href="tutorials/new_tutorial/command_line.html#new-manual-cmdline"><em>manual</em></a></div></blockquote>
</div>
<div class="section" id="check-pointing">
<h3>2) Check pointing<a class="headerlink" href="#check-pointing" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul>
<li><p class="first">Contributed by <strong>Jake Biesinger</strong></p>
</li>
<li><p class="first">See <a class="reference internal" href="tutorials/new_tutorial/checkpointing.html#new-manual-checkpointing"><em>Manual</em></a></p>
</li>
<li><p class="first">Uses a fault resistant sqlite database file to log i/o files, and additional checksums</p>
</li>
<li><p class="first">defaults to checking file timestamps stored in the current directory (<tt class="docutils literal"><span class="pre">ruffus_utilility.RUFFUS_HISTORY_FILE</span> <span class="pre">=</span> <span class="pre">'.ruffus_history.sqlite'</span></tt>)</p>
</li>
<li><p class="first"><a class="reference internal" href="pipeline_functions.html#pipeline-functions-pipeline-run"><em>pipeline_run(..., checksum_level = N, ...)</em></a></p>
<blockquote>
<div><ul class="simple">
<li>level 0 = CHECKSUM_FILE_TIMESTAMPS      : Classic mode. Use only file timestamps (no checksum file will be created)</li>
<li>level 1 = CHECKSUM_HISTORY_TIMESTAMPS   : Also store timestamps in a database after successful job completion</li>
<li>level 2 = CHECKSUM_FUNCTIONS            : As above, plus a checksum of the pipeline function body</li>
<li>level 3 = CHECKSUM_FUNCTIONS_AND_PARAMS : As above, plus a checksum of the pipeline function default arguments and the additional arguments passed in by task decorators</li>
<li>defaults to level 1</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Can speed up trivial tasks: Previously Ruffus always added an extra 1 second pause between tasks
to guard against file systems (Ext3, FAT, some NFS) with low timestamp granularity.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="subdivide-syntax">
<h3>3) <a class="reference internal" href="tutorials/new_tutorial/subdivide_collate.html#new-manual-subdivide"><em>subdivide()</em></a> (<a class="reference internal" href="decorators/subdivide.html#decorators-subdivide"><em>syntax</em></a>)<a class="headerlink" href="#subdivide-syntax" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Take a list of input jobs (like <a class="reference internal" href="decorators/transform.html#decorators-transform"><em>&#64;transform</em></a>) but further splits each into multiple jobs, i.e. it is a <strong>many-&gt;even more</strong> relationship</li>
<li>synonym for the deprecated <tt class="docutils literal"><span class="pre">&#64;split(...,</span> <span class="pre">regex(),</span> <span class="pre">...)</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="mkdir-syntax-with-formatter-suffix-and-regex">
<h3>4) <a class="reference internal" href="tutorials/new_tutorial/mkdir.html#new-manual-mkdir"><em>mkdir()</em></a> (<a class="reference internal" href="decorators/mkdir.html#decorators-mkdir"><em>syntax</em></a>) with <a class="reference internal" href="tutorials/new_tutorial/output_file_names.html#new-manual-formatter"><em>formatter()</em></a>, <a class="reference internal" href="decorators/indicator_objects.html#decorators-suffix"><em>suffix()</em></a>  and <a class="reference internal" href="decorators/indicator_objects.html#decorators-regex"><em>regex()</em></a><a class="headerlink" href="#mkdir-syntax-with-formatter-suffix-and-regex" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>allows directories to be created depending on runtime parameters or the output of previous tasks</li>
<li>behaves just like <a class="reference internal" href="decorators/transform.html#decorators-transform"><em>&#64;transform</em></a> but with its own (internal) function which does the actual work of making a directory</li>
<li>Previous behavior is retained:<tt class="docutils literal"><span class="pre">mkdir</span></tt> continues to work seamlessly inside <a class="reference internal" href="decorators/follows.html#decorators-follows"><em>&#64;follows</em></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="originate-syntax">
<h3>5) <a class="reference internal" href="tutorials/new_tutorial/originate.html#new-manual-originate"><em>originate()</em></a> (<a class="reference internal" href="decorators/originate.html#decorators-originate"><em>syntax</em></a>)<a class="headerlink" href="#originate-syntax" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Generates output files without dependencies from scratch  (<em>ex nihilo</em>!)</li>
<li>For first step in a pipeline</li>
<li>Task function obviously only takes output and not input parameters. (There <em>are</em> no inputs!)</li>
<li>synonym for <a class="reference internal" href="decorators/split.html#decorators-split"><em>&#64;split(None,...)</em></a></li>
<li>See <a class="reference internal" href="decorators/originate.html#decorators-originate"><em>Summary</em></a> / <a class="reference internal" href="tutorials/new_tutorial/originate.html#new-manual-originate"><em>Manual</em></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="new-flexible-formatter-syntax-alternative-to-regex-suffix">
<h3>6) New flexible <a class="reference internal" href="tutorials/new_tutorial/output_file_names.html#new-manual-formatter"><em>formatter()</em></a> (<a class="reference internal" href="decorators/indicator_objects.html#decorators-formatter"><em>syntax</em></a>) alternative to <a class="reference internal" href="decorators/indicator_objects.html#decorators-regex"><em>regex()</em></a>  &amp; <a class="reference internal" href="decorators/indicator_objects.html#decorators-suffix"><em>suffix()</em></a><a class="headerlink" href="#new-flexible-formatter-syntax-alternative-to-regex-suffix" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Easy manipulation of path subcomponents in the style of <a class="reference external" href="http://docs.python.org/2/library/os.path.html#os.path.split">os.path.split()</a></li>
<li>Regular expressions are no longer necessary for path manipulation</li>
<li>Familiar python syntax</li>
<li>Optional regular expression matches</li>
<li>Can refer to any in the list of N input files (not only the first file as for <tt class="docutils literal"><span class="pre">regex(...)</span></tt>)</li>
<li>Can even refer to individual letters within a match</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="combinatorics-all-vs-all-decorators">
<h3>7) Combinatorics (all vs. all decorators)<a class="headerlink" href="#combinatorics-all-vs-all-decorators" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="tutorials/new_tutorial/combinatorics.html#new-manual-product"><em>&#64;product</em></a>  (See <a class="reference external" href="http://docs.python.org/2/library/itertools.html#itertools.product">itertools.product</a>)</li>
<li><a class="reference internal" href="tutorials/new_tutorial/combinatorics.html#new-manual-permutations"><em>&#64;permutations</em></a>  (See <a class="reference external" href="http://docs.python.org/2/library/itertools.html#itertools.permutations">itertools.permutations</a>)</li>
<li><a class="reference internal" href="tutorials/new_tutorial/combinatorics.html#new-manual-combinations"><em>&#64;combinations</em></a> (See <a class="reference external" href="http://docs.python.org/2/library/itertools.html#itertools.combinations">itertools.combinations</a>)</li>
<li><a class="reference internal" href="tutorials/new_tutorial/combinatorics.html#new-manual-combinations-with-replacement"><em>&#64;combinations_with_replacement</em></a> (See <a class="reference external" href="http://docs.python.org/2/library/itertools.html#itertools.combinations_with_replacement">itertools.combinations_with_replacement</a>)</li>
<li>in optional <a class="reference internal" href="tutorials/new_tutorial/combinatorics.html#new-manual-combinatorics"><em>combinatorics</em></a> module</li>
<li>Only <a class="reference internal" href="tutorials/new_tutorial/output_file_names.html#new-manual-formatter"><em>formatter()</em></a> provides the necessary flexibility to construct the output. (<a class="reference internal" href="decorators/indicator_objects.html#decorators-suffix"><em>suffix()</em></a> and <a class="reference internal" href="decorators/indicator_objects.html#decorators-regex"><em>regex()</em></a> are not supported.)</li>
<li>See <a class="reference internal" href="decorators/decorators.html#decorators-combinatorics"><em>Summary</em></a> / <a class="reference internal" href="tutorials/new_tutorial/combinatorics.html#new-manual-combinatorics"><em>Manual</em></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="drmaa-support-and-multithreading">
<h3>8) drmaa support and multithreading:<a class="headerlink" href="#drmaa-support-and-multithreading" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="tutorials/new_tutorial/multiprocessing.html#new-manual-ruffus-drmaa-wrapper-run-job"><em>ruffus.drmaa_wrapper.run_job()</em></a> (<a class="reference internal" href="drmaa_wrapper_functions.html#drmaa-wrapper-run-job"><em>syntax</em></a>)</li>
<li>Optional helper module allows jobs to dispatch work to a computational cluster and wait until it completes.</li>
<li>Requires <tt class="docutils literal"><span class="pre">multithread</span></tt> rather than <tt class="docutils literal"><span class="pre">multiprocess</span></tt></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="pipeline-run-and-exceptions">
<h3>9) <tt class="docutils literal"><span class="pre">pipeline_run(...)</span></tt> and exceptions<a class="headerlink" href="#pipeline-run-and-exceptions" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>See <a class="reference internal" href="tutorials/new_tutorial/exceptions.html#new-manual-exceptions"><em>Manual</em></a></p>
<ul class="simple">
<li>Optionally terminate pipeline after first exception</li>
<li>Display exceptions without delay</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="miscellaneous">
<h3>10) Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><dl class="docutils">
<dt>Better error messages for <tt class="docutils literal"><span class="pre">formatter()</span></tt>, <tt class="docutils literal"><span class="pre">suffix()</span></tt> and <tt class="docutils literal"><span class="pre">regex()</span></tt> for <tt class="docutils literal"><span class="pre">pipeline_printout(...,</span> <span class="pre">verbose</span> <span class="pre">&gt;=</span> <span class="pre">3,</span> <span class="pre">...)</span></tt></dt>
<dd><ul class="first last simple">
<li>Error messages for showing mismatching regular expression and offending file name</li>
<li>Wrong capture group names or out of range indices will raise informative Exception</li>
</ul>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="version-2-3">
<h2>version 2.3<a class="headerlink" href="#version-2-3" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>1st September, 2013</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">&#64;active_if</span></tt> turns off tasks at runtime</dt>
<dd><p class="first">The Design and initial implementation were contributed by Jacob Biesinger</p>
<p>Takes one or more parameters which can be either booleans or functions or callable objects which return True / False:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run_if_true_1</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">run_if_true_2</span> <span class="o">=</span> <span class="bp">False</span>

<span class="nd">@active_if</span><span class="p">(</span><span class="n">run_if_true</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">run_if_true_2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">this_task_might_be_inactive</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>The expressions inside &#64;active_if are evaluated each time
<tt class="docutils literal"><span class="pre">pipeline_run</span></tt>, <tt class="docutils literal"><span class="pre">pipeline_printout</span></tt> or <tt class="docutils literal"><span class="pre">pipeline_printout_graph</span></tt> is called.</p>
<p class="last">Dormant tasks behave as if they are up to date and have no output.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Command line parsing</dt>
<dd><ul class="first last simple">
<li>Supports both argparse (python 2.7) and optparse (python 2.6):</li>
<li><tt class="docutils literal"><span class="pre">Ruffus.cmdline</span></tt> module is optional.</li>
<li>See <a class="reference internal" href="tutorials/new_tutorial/command_line.html#new-manual-cmdline"><em>manual</em></a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Optionally terminate pipeline after first exception</dt>
<dd><p class="first">To have all exceptions interrupt immediately:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pipeline_run</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">exceptions_terminate_immediately</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>By default ruffus accumulates <tt class="docutils literal"><span class="pre">NN</span></tt> errors before interrupting the pipeline prematurely. <tt class="docutils literal"><span class="pre">NN</span></tt> is the specified parallelism for <tt class="docutils literal"><span class="pre">pipeline_run(...,</span> <span class="pre">multiprocess</span> <span class="pre">=</span> <span class="pre">NN)</span></tt>.</p>
<p class="last">Otherwise, a pipeline will only be interrupted immediately if exceptions of type <tt class="docutils literal"><span class="pre">ruffus.JobSignalledBreak</span></tt> are thrown.</p>
</dd>
</dl>
</li>
<li><p class="first">Display exceptions without delay</p>
<blockquote>
<div><p>By default, Ruffus re-throws exceptions in ensemble after pipeline termination.</p>
<p>To see exceptions as they occur:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pipeline_run</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">log_exceptions</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">logger.error(...)</span></tt> will be invoked with the string representation of the each exception, and associated stack trace.</p>
<p>The default logger prints to sys.stderr, but this can be changed to any class from the logging module or compatible object via <tt class="docutils literal"><span class="pre">pipeline_run(...,</span> <span class="pre">logger</span> <span class="pre">=</span> <span class="pre">???)</span></tt></p>
</div></blockquote>
</li>
<li><p class="first">Improved <tt class="docutils literal"><span class="pre">pipeline_printout()</span></tt></p>
<blockquote>
<div><ul>
<li><p class="first"><cite>&#64;split</cite> operations now show the 1-&gt;many output in pipeline_printout</p>
<blockquote>
<div><p>This make it clearer that <tt class="docutils literal"><span class="pre">&#64;split</span></tt> is creating multiple output parameters (rather than a single output parameter consisting of a list):</p>
<div class="highlight-python"><div class="highlight"><pre>Task = split_animals
     Job = [None
           -&gt; cows
           -&gt; horses
           -&gt; pigs
            , any_extra_parameters]
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">File date and time are displayed in human readable form and out of date files are flagged with asterisks.</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-2-2">
<h2>version 2.2<a class="headerlink" href="#version-2-2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>22nd July, 2010</p>
<ul>
<li><p class="first">Simplifying <strong>&#64;transform</strong> syntax with <strong>suffix(...)</strong></p>
<blockquote>
<div><p>Regular expressions within ruffus are very powerful, and can allow files to be moved
from one directory to another and renamed at will.</p>
<p>However, using consistent file extensions and
<tt class="docutils literal"><span class="pre">&#64;transform(...,</span> <span class="pre">suffix(...))</span></tt> makes the code much simpler and easier to read.</p>
<p>Previously, <tt class="docutils literal"><span class="pre">suffix(...)</span></tt> did not cooperate well with <tt class="docutils literal"><span class="pre">inputs(...)</span></tt>.
For example, finding the corresponding header file (&#8221;.h&#8221;) for the matching input
required a complicated <tt class="docutils literal"><span class="pre">regex(...)</span></tt> regular expression and <tt class="docutils literal"><span class="pre">input(...)</span></tt>. This simple case,
e.g. matching &#8220;something.c&#8221; with &#8220;something.h&#8221;, is now much easier in Ruffus.</p>
<dl class="docutils">
<dt>For example:</dt>
<dd><div class="first highlight-python"><div class="highlight"><pre><span class="n">source_files</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;something.c&quot;</span><span class="p">,</span> <span class="s">&quot;more_code.c&quot;</span><span class="p">]</span>
<span class="nd">@transform</span><span class="p">(</span><span class="n">source_files</span><span class="p">,</span> <span class="n">suffix</span><span class="p">(</span><span class="s">&quot;.c&quot;</span><span class="p">),</span> <span class="n">add_inputs</span><span class="p">(</span><span class="s">r&quot;\1.h&quot;</span><span class="p">,</span> <span class="s">&quot;common.h&quot;</span><span class="p">),</span> <span class="s">&quot;.o&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">compile</span><span class="p">(</span><span class="n">input_files</span><span class="p">,</span> <span class="n">output_file</span><span class="p">):</span>
    <span class="p">(</span> <span class="n">source_file</span><span class="p">,</span>
      <span class="n">header_file</span><span class="p">,</span>
      <span class="n">common_header</span><span class="p">)</span> <span class="o">=</span> <span class="n">input_files</span>
    <span class="c"># call compiler to make object file</span>
</pre></div>
</div>
<p>This is equivalent to calling:</p>
<blockquote class="last">
<div><div class="highlight-python"><div class="highlight"><pre><span class="nb">compile</span><span class="p">([</span><span class="s">&quot;something.c&quot;</span><span class="p">,</span> <span class="s">&quot;something.h&quot;</span><span class="p">,</span> <span class="s">&quot;common.h&quot;</span><span class="p">],</span> <span class="s">&quot;something.o&quot;</span><span class="p">)</span>
<span class="nb">compile</span><span class="p">([</span><span class="s">&quot;more_code.c&quot;</span><span class="p">,</span> <span class="s">&quot;more_code.h&quot;</span><span class="p">,</span> <span class="s">&quot;common.h&quot;</span><span class="p">],</span> <span class="s">&quot;more_code.o&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd>
</dl>
<p>The <tt class="docutils literal"><span class="pre">\1</span></tt> matches everything <em>but</em> the suffix and will be applied to both <tt class="docutils literal"><span class="pre">glob</span></tt>s and file names.</p>
</div></blockquote>
</li>
</ul>
<p>For simplicity and compatibility with previous versions, there is always an implied r&#8221;1&#8221; before
the output parameters. I.e. output parameters strings are <em>always</em> substituted.</p>
<ul>
<li><p class="first">Tasks and glob in <strong>inputs(...)</strong> and <strong>add_inputs(...)</strong></p>
<blockquote>
<div><p><tt class="docutils literal"><span class="pre">glob</span></tt>s and tasks can be added as the prerequisites / input files using
<tt class="docutils literal"><span class="pre">inputs(...)</span></tt> and <tt class="docutils literal"><span class="pre">add_inputs(...)</span></tt>. <tt class="docutils literal"><span class="pre">glob</span></tt> expansions will take place when the task
is run.</p>
</div></blockquote>
</li>
<li><p class="first">Advanced form of <strong>&#64;split</strong> with <strong>regex</strong>:</p>
<blockquote>
<div><p>The standard <tt class="docutils literal"><span class="pre">&#64;split</span></tt> divided one set of inputs into multiple outputs (the number of which
can be determined at runtime).</p>
<p>This is a <tt class="docutils literal"><span class="pre">one-&gt;many</span></tt> operation.</p>
<p>An advanced form of <tt class="docutils literal"><span class="pre">&#64;split</span></tt> has been added which can split each of several files further.</p>
<p>In other words, this is a <tt class="docutils literal"><span class="pre">many-&gt;&quot;many</span> <span class="pre">more&quot;</span></tt> operation.</p>
<dl class="docutils">
<dt>For example, given three starting files:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="n">original_files</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;original_0.file&quot;</span><span class="p">,</span>
                  <span class="s">&quot;original_1.file&quot;</span><span class="p">,</span>
                  <span class="s">&quot;original_2.file&quot;</span><span class="p">]</span>
</pre></div>
</div>
</dd>
<dt>We can split each into its own set of sub-sections:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="nd">@split</span><span class="p">(</span><span class="n">original_files</span><span class="p">,</span>
   <span class="n">regex</span><span class="p">(</span><span class="s">r&quot;starting_(\d+).fa&quot;</span><span class="p">),</span>                         <span class="c"># match starting files</span>
         <span class="s">r&quot;files.split.\1.*.fa&quot;</span>                         <span class="c"># glob pattern</span>
         <span class="s">r&quot;\1&quot;</span><span class="p">)</span>                                         <span class="c"># index of original file</span>
<span class="k">def</span> <span class="nf">split_files</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">output_files</span><span class="p">,</span> <span class="n">original_index</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Code to split each input_file</span>
<span class="sd">            &quot;original_0.file&quot; -&gt; &quot;files.split.0.*.fa&quot;</span>
<span class="sd">            &quot;original_1.file&quot; -&gt; &quot;files.split.1.*.fa&quot;</span>
<span class="sd">            &quot;original_2.file&quot; -&gt; &quot;files.split.2.*.fa&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
</dd>
</dl>
<p>This is, conceptually, the reverse of the &#64;collate(...) decorator</p>
</div></blockquote>
</li>
<li><p class="first">Ruffus will complain about unescaped regular expression special characters:</p>
<blockquote>
<div><p>Ruffus uses &#8220;\1&#8221; and &#8220;\2&#8221; in regular expression substitutions. Even seasoned python
users may not remember that these have to be &#8216;escaped&#8217; in strings. The best option is
to use &#8216;raw&#8217; python strings e.g.</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="s">r&quot;\1_substitutes\2correctly\3four\4times&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>Ruffus will throw an exception if it sees an unescaped &#8220;\1&#8221; or &#8220;\2&#8221; in a file name,
which should catch most of these bugs.</p>
</div></blockquote>
</li>
<li><p class="first">Prettier output from <em>pipeline_printout_graph</em></p>
<blockquote>
<div><p>Changed to nicer colours, symbols etc. for a more professional look.
&#64;split and &#64;merge tasks now look different from &#64;transform.
Colours, size and resolution are now fully customisable:</p>
<div class="highlight-python"><div class="highlight"><pre>pipeline_printout_graph( #...
                         user_colour_scheme = {
                                                &quot;colour_scheme_index&quot;:1,
                                                &quot;Task to run&quot;  : {&quot;fillcolor&quot;:&quot;blue&quot;},
                                                 pipeline_name : &quot;My flowchart&quot;,
                                                 size          : (11,8),
                                                 dpi           : 120)})
</pre></div>
</div>
<p>An SVG bug in firefox has been worked around so that font size are displayed correctly.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-2-1-1">
<h2>version 2.1.1<a class="headerlink" href="#version-2-1-1" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt><strong>&#64;transform(.., add_inputs(...))</strong></dt>
<dd><p class="first"><tt class="docutils literal"><span class="pre">add_inputs(...)</span></tt> allows the addition of extra input dependencies / parameters for each job.</p>
<dl class="docutils">
<dt>Unlike <tt class="docutils literal"><span class="pre">inputs(...)</span></tt>, the original input parameter is retained:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre>from ruffus import *
@transform([&quot;a.input&quot;, &quot;b.input&quot;], suffix(&quot;.input&quot;), add_inputs(&quot;just.1.more&quot;,&quot;just.2.more&quot;), &quot;.output&quot;)
def task(i, o):
&quot;&quot;
</pre></div>
</div>
</dd>
<dt>Produces:</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre>Job = [[a.input, just.1.more, just.2.more] -&gt;a.output]
Job = [[b.input, just.1.more, just.2.more] -&gt;b.output]
</pre></div>
</div>
</dd>
</dl>
<p class="last">Like <tt class="docutils literal"><span class="pre">inputs</span></tt>, <tt class="docutils literal"><span class="pre">add_inputs</span></tt> accepts strings, tasks and <tt class="docutils literal"><span class="pre">glob</span></tt> s
This minor syntactic change promises add much clarity to Ruffus code.
<tt class="docutils literal"><span class="pre">add_inputs()</span></tt> is available for <tt class="docutils literal"><span class="pre">&#64;transform</span></tt>, <tt class="docutils literal"><span class="pre">&#64;collate</span></tt> and <tt class="docutils literal"><span class="pre">&#64;split</span></tt></p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-2-1-0">
<h2>version 2.1.0<a class="headerlink" href="#version-2-1-0" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first"><strong>&#64;jobs_limit</strong>
Some tasks are resource intensive and too many jobs should not be run at the
same time. Examples include disk intensive operations such as unzipping, or
downloading from FTP sites.</p>
<p>Adding:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@jobs_limit</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nd">@transform</span><span class="p">(</span><span class="n">new_data_list</span><span class="p">,</span> <span class="n">suffix</span><span class="p">(</span><span class="s">&quot;.big_data.gz&quot;</span><span class="p">),</span> <span class="s">&quot;.big_data&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">unzip</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
  <span class="s">&quot;unzip code goes here&quot;</span>
</pre></div>
</div>
<p>would limit the unzip operation to 4 jobs at a time, even if the rest of the
pipeline runs highly in parallel.</p>
<p>(Thanks to Rob Young for suggesting this.)</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-2-0-10">
<h2>version 2.0.10<a class="headerlink" href="#version-2-0-10" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first"><strong>touch_files_only</strong> option for <strong>pipeline_run</strong></p>
<p>When the pipeline runs, task functions will not be run. Instead, the output files for
each job (in each task) will be <tt class="docutils literal"><span class="pre">touch</span></tt>-ed if necessary.
This can be useful for simulating a pipeline run so that all files look as
if they are up-to-date.</p>
<p>Caveats:</p>
<blockquote>
<div><ul class="simple">
<li>This may not work correctly where output files are only determined at runtime, e.g. with <strong>&#64;split</strong></li>
<li>Only the output from pipelined jobs which are currently out-of-date will be <tt class="docutils literal"><span class="pre">touch</span></tt>-ed.
In other words, the pipeline runs <em>as normal</em>, the only difference is that the
output files are <tt class="docutils literal"><span class="pre">touch</span></tt>-ed instead of being created by the python task functions
which would otherwise have been called.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Parameter substitution for <strong>inputs(...)</strong></p>
<p>The <strong>inputs(...)</strong> parameter in <strong>&#64;transform</strong>, <strong>&#64;collate</strong> can now take tasks and <tt class="docutils literal"><span class="pre">glob</span></tt> s,
and these will be expanded appropriately (after regular expression replacement).</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@transform</span><span class="p">(</span><span class="s">&quot;dir/a.input&quot;</span><span class="p">,</span> <span class="n">regex</span><span class="p">(</span><span class="s">r&quot;(.*)\/(.+).input&quot;</span><span class="p">),</span>
              <span class="n">inputs</span><span class="p">((</span><span class="s">r&quot;\1/\2.other&quot;</span><span class="p">,</span> <span class="s">r&quot;\1/*.more&quot;</span><span class="p">)),</span> <span class="s">r&quot;elsewhere/\2.output&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">task1</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Some pipeline task</span>
<span class="sd">  &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>Is equivalent to calling:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">task1</span><span class="p">((</span><span class="s">&quot;dir/a.other&quot;</span><span class="p">,</span> <span class="s">&quot;dir/1.more&quot;</span><span class="p">,</span> <span class="s">&quot;dir/2.more&quot;</span><span class="p">),</span> <span class="s">&quot;elsewhere/a.output&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p></p>
<blockquote>
<div><p>Here:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">r&quot;\1/*.more&quot;</span>
</pre></div>
</div>
<p>is first converted to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">r&quot;dir/*.more&quot;</span>
</pre></div>
</div>
<p>which matches:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&quot;dir/1.more&quot;</span>
<span class="s">&quot;dir/2.more&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-2-0-9">
<h2>version 2.0.9<a class="headerlink" href="#version-2-0-9" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">Better display of logging output</p>
</li>
<li><p class="first">Advanced form of <strong>&#64;split</strong>
This is an experimental feature.</p>
<p>Hitherto, <strong>&#64;split</strong> only takes 1 set of input (tasks/files/<tt class="docutils literal"><span class="pre">glob</span></tt> s) and split these
into an indeterminate number of output.</p>
<blockquote>
<div><p>This is a one-&gt;many operation.</p>
</div></blockquote>
<p>Sometimes it is desirable to take multiple input files, and split each of them further.</p>
<blockquote>
<div><p>This is a many-&gt;many (more) operation.</p>
</div></blockquote>
<p>It is possible to hack something together using <strong>&#64;transform</strong> but downstream tasks would not
aware that each job in <strong>&#64;transform</strong> produces multiple outputs (rather than one input,
one output per job).</p>
<p>The syntax looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@split</span><span class="p">(</span><span class="n">get_files</span><span class="p">,</span> <span class="n">regex</span><span class="p">(</span><span class="s">r&quot;(.+).original&quot;</span><span class="p">),</span> <span class="s">r&quot;\1.*.split&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">split_files</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
     <span class="k">pass</span>
</pre></div>
</div>
<p>If <tt class="docutils literal"><span class="pre">get_files()</span></tt> returned <tt class="docutils literal"><span class="pre">A.original</span></tt>, <tt class="docutils literal"><span class="pre">B.original</span></tt> and <tt class="docutils literal"><span class="pre">C.original</span></tt>,
<tt class="docutils literal"><span class="pre">split_files()</span></tt> might lead to the following operations:</p>
<div class="highlight-python"><div class="highlight"><pre>A.original
        -&gt; A.1.original
        -&gt; A.2.original
        -&gt; A.3.original
B.original
        -&gt; B.1.original
        -&gt; B.2.original
C.original
        -&gt; C.1.original
        -&gt; C.2.original
        -&gt; C.3.original
        -&gt; C.4.original
        -&gt; C.5.original
</pre></div>
</div>
<p>Note that each input (<tt class="docutils literal"><span class="pre">A/B/C.original</span></tt>) can produce a number of output, the exact
number of which does not have to be pre-determined.
This is similar to <strong>&#64;split</strong></p>
<p>Tasks following <tt class="docutils literal"><span class="pre">split_files</span></tt> will have ten inputs corresponding to each of the
output from <tt class="docutils literal"><span class="pre">split_files</span></tt>.</p>
<p>If <strong>&#64;transform</strong> was used instead of <strong>&#64;split</strong>, then tasks following <tt class="docutils literal"><span class="pre">split_files</span></tt>
would only have 3 inputs.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-2-0-8">
<h2>version 2.0.8<a class="headerlink" href="#version-2-0-8" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>File names can be in unicode</li>
<li>File systems with 1 second timestamp granularity no longer cause problems.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-2-0-2">
<h2>version 2.0.2<a class="headerlink" href="#version-2-0-2" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Much prettier /useful output from <a class="reference internal" href="pipeline_functions.html#pipeline-functions-pipeline-printout"><em>pipeline_printout</em></a></li>
<li>New tutorial / manual</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-2-0">
<h2>version 2.0<a class="headerlink" href="#version-2-0" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p class="first">Revamped documentation:</p>
<blockquote>
<div><ul class="simple">
<li>Rewritten tutorial</li>
<li>Comprehensive manual</li>
<li>New syntax help</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Major redesign. New decorators include</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="tutorials/new_tutorial/split.html#new-manual-split"><em>&#64;split</em></a></li>
<li><a class="reference internal" href="tutorials/new_tutorial/transform.html#new-manual-transform"><em>&#64;transform</em></a></li>
<li><a class="reference internal" href="tutorials/new_tutorial/merge.html#new-manual-merge"><em>&#64;merge</em></a></li>
<li><a class="reference internal" href="tutorials/new_tutorial/subdivide_collate.html#new-manual-collate"><em>&#64;collate</em></a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Major redesign. Decorator <em>inputs</em> can mix</p>
<blockquote>
<div><ul class="simple">
<li>Output from previous tasks</li>
<li><a class="reference external" href="http://docs.python.org/library/glob.html"><cite>glob</cite></a> patterns e.g. <tt class="docutils literal"><span class="pre">*.txt</span></tt></li>
<li>Files names</li>
<li>Any other data type</li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="version-1-1-4">
<h2>version 1.1.4<a class="headerlink" href="#version-1-1-4" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Tasks can get their input by automatically chaining to the output from one or more parent tasks using <a class="reference internal" href="decorators/files_re.html#decorators-files-re"><em>&#64;files_re</em></a></div></blockquote>
</div>
<div class="section" id="version-1-0-7">
<h2>version 1.0.7<a class="headerlink" href="#version-1-0-7" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Added <cite>proxy_logger</cite> module for accessing a shared log across multiple jobs in different processes.</div></blockquote>
</div>
<div class="section" id="version-1-0">
<h2>version 1.0<a class="headerlink" href="#version-1-0" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Initial Release in Oxford</div></blockquote>
</div>
</div>
<div class="section" id="fixed-bugs">
<h1>Fixed Bugs<a class="headerlink" href="#fixed-bugs" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div>Full list at <a class="reference external" href="http://code.google.com/p/ruffus/wiki/LatestChanges">&#8220;Latest Changes wiki entry&#8221;</a></div></blockquote>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Major Features added to Ruffus</a><ul>
<li><a class="reference internal" href="#version-2-6">version 2.6</a><ul>
<li><a class="reference internal" href="#bug-fixes">1) Bug fixes</a></li>
<li><a class="reference internal" href="#transform-suffix-xxx-output-dir-new-output-path">2) <cite>&#64;transform `(..., suffix(&#8220;xxx&#8221;),</cite> <span class="red">output_dir</span> <cite>= &#8220;/new/output/path&#8221;)</cite></a></li>
<li><a class="reference internal" href="#named-parameters">2) Named parameters</a></li>
<li><a class="reference internal" href="#new-object-orientated-syntax-for-ruffus">3) New object orientated syntax for Ruffus</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-5">version 2.5</a><ul>
<li><a class="reference internal" href="#python3-compatability-but-at-least-python-2-6-is-now-required">1) Python3 compatability (but at least python 2.6 is now required)</a></li>
<li><a class="reference internal" href="#ctrl-c-interrupts">2) Ctrl-C interrupts</a></li>
<li><a class="reference internal" href="#customising-flowcharts-in-pipeline-printout-graph-with-graphviz">3) Customising flowcharts in pipeline_printout_graph() with <tt class="docutils literal"><span class="pre">&#64;graphviz</span></tt></a></li>
<li><a class="reference internal" href="#consistent-verbosity-levels">4. Consistent verbosity levels</a></li>
<li><a class="reference internal" href="#allow-abbreviated-paths-from-pipeline-run-or-pipeline-printout">5. Allow abbreviated paths from <tt class="docutils literal"><span class="pre">pipeline_run</span></tt> or <tt class="docutils literal"><span class="pre">pipeline_printout</span></tt></a></li>
<li><a class="reference internal" href="#other-changes">Other changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-4-1">version 2.4.1</a></li>
<li><a class="reference internal" href="#version-2-4">version 2.4</a><ul>
<li><a class="reference internal" href="#additions-to-ruffus-namespace">Additions to <tt class="docutils literal"><span class="pre">ruffus</span></tt> namespace</a></li>
<li><a class="reference internal" href="#installation-use-pip">Installation: use pip</a></li>
<li><a class="reference internal" href="#command-line-support">1) Command Line support</a></li>
<li><a class="reference internal" href="#check-pointing">2) Check pointing</a></li>
<li><a class="reference internal" href="#subdivide-syntax">3) <tt class="docutils literal"><span class="pre">subdivide()</span></tt> (<tt class="docutils literal"><span class="pre">syntax</span></tt>)</a></li>
<li><a class="reference internal" href="#mkdir-syntax-with-formatter-suffix-and-regex">4) <tt class="docutils literal"><span class="pre">mkdir()</span></tt> (<tt class="docutils literal"><span class="pre">syntax</span></tt>) with <tt class="docutils literal"><span class="pre">formatter()</span></tt>, <tt class="docutils literal"><span class="pre">suffix()</span></tt>  and <tt class="docutils literal"><span class="pre">regex()</span></tt></a></li>
<li><a class="reference internal" href="#originate-syntax">5) <tt class="docutils literal"><span class="pre">originate()</span></tt> (<tt class="docutils literal"><span class="pre">syntax</span></tt>)</a></li>
<li><a class="reference internal" href="#new-flexible-formatter-syntax-alternative-to-regex-suffix">6) New flexible <tt class="docutils literal"><span class="pre">formatter()</span></tt> (<tt class="docutils literal"><span class="pre">syntax</span></tt>) alternative to <tt class="docutils literal"><span class="pre">regex()</span></tt>  &amp; <tt class="docutils literal"><span class="pre">suffix()</span></tt></a></li>
<li><a class="reference internal" href="#combinatorics-all-vs-all-decorators">7) Combinatorics (all vs. all decorators)</a></li>
<li><a class="reference internal" href="#drmaa-support-and-multithreading">8) drmaa support and multithreading:</a></li>
<li><a class="reference internal" href="#pipeline-run-and-exceptions">9) <tt class="docutils literal"><span class="pre">pipeline_run(...)</span></tt> and exceptions</a></li>
<li><a class="reference internal" href="#miscellaneous">10) Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-3">version 2.3</a></li>
<li><a class="reference internal" href="#version-2-2">version 2.2</a></li>
<li><a class="reference internal" href="#version-2-1-1">version 2.1.1</a></li>
<li><a class="reference internal" href="#version-2-1-0">version 2.1.0</a></li>
<li><a class="reference internal" href="#version-2-0-10">version 2.0.10</a></li>
<li><a class="reference internal" href="#version-2-0-9">version 2.0.9</a></li>
<li><a class="reference internal" href="#version-2-0-8">version 2.0.8</a></li>
<li><a class="reference internal" href="#version-2-0-2">version 2.0.2</a></li>
<li><a class="reference internal" href="#version-2-0">version 2.0</a></li>
<li><a class="reference internal" href="#version-1-1-4">version 1.1.4</a></li>
<li><a class="reference internal" href="#version-1-0-7">version 1.0.7</a></li>
<li><a class="reference internal" href="#version-1-0">version 1.0</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fixed-bugs">Fixed Bugs</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="design.html"
                        title="previous chapter">Design &amp; Architecture</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tutorials/new_syntax.html"
                        title="next chapter">New Object orientated syntax for Ruffus in Version 2.6</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/history.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
    
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <h3> Quick Reference:</h3>
    <ul>
        <h4><a href="decorators/decorators.html#core">Core:</a></h4>   
        <ul>
            <li><a href="decorators/originate.html">@originate</a>                           </li>
            <li><a href="decorators/split.html">@split</a>                                   </li>
            <li><a href="decorators/transform.html">@transform</a>                           </li>
            <li><a href="decorators/merge.html">@merge</a>                                   </li>
        </ul>

        <h4><a href="decorators/decorators.html#advanced">Advanced</a></h4>   
        <ul>
            <li><a href="decorators/subdivide.html">@subdivide</a>                           </li>
            <li><a href="decorators/transform_ex.html">@transform (add_inputs) </a>          </li>
            <li><a href="decorators/collate.html">@collate</a>                               </li>
            <li><a href="decorators/collate_ex.html">@collate (add_inputs)</a>               </li>
            <li><a href="decorators/graphviz.html">@graphviz</a>                             </li>
            <li><a href="decorators/mkdir.html">@mkdir</a>                                   </li>
            <li><a href="decorators/follows.html">@follows / mkdir</a>                       </li>
            <li><a href="decorators/posttask.html">@posttask touch_file</a>                  </li>
            <li><a href="decorators/active_if.html">@active_if</a>                           </li>
            <li><a href="decorators/jobs_limit.html">@jobs_limit</a>                         </li>
        </ul>
    
        <h4><a href="decorators/decorators.html#combinatorics">Combinatorial:</a></h4>   
        <ul>
            <li><a href="decorators/product.html">@product </a>                              </li>
            <li><a href="decorators/permutations.html">@permutations </a>                    </li>
            <li><a href="decorators/combinations.html">@combinations </a>                    </li>
            <li><a href="decorators/combinations_with_replacement.html">@combinations_ _with_replacement </a>                    </li>
        </ul>

                        
        <h4><a href="decorators/decorators.html#esoteric">Esoteric</a></h4>   
        <ul>
            <li><a href="decorators/files_ex.html">@files (on the fly)</a>                   </li>
            <li><a href="decorators/parallel.html">@parallel</a>                             </li>
            <li><a href="decorators/check_if_uptodate.html">@check_if_uptodate</a>           </li>
        </ul>


        <h4 ><a href="decorators/indicator_objects.html">Indicator objects</a></h4>
        <h4 >Pipeline functions</h4>
        <ul>
            <li><a href="pipeline_functions.html#pipeline-functions-pipeline-run">pipeline_run</a>                       </li>
            <li><a href="pipeline_functions.html#pipeline-functions-pipeline-printout">pipeline_printout</a>                      </li>
            <li><a href="pipeline_functions.html#pipeline-functions-pipeline-printout-graph">pipeline_printout_graph</a>          </li>
            <li><a href="pipeline_functions.html#pipeline-functions-pipeline-get-task-names">pipeline_get_task_names</a>          </li>
            <li><a href="drmaa_wrapper_functions.html#drmaa-wrapper-functions-drmaa_wrapper-run_job">drmaa_wrapper.run_job</a>          </li>
        </ul>

         <a href="todo.html">Future plans</a>
    </ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="tutorials/new_syntax.html" title="New Object orientated syntax for Ruffus in Version 2.6"
             >next</a> |</li>
        <li class="right" >
          <a href="design.html" title="Design &amp; Architecture"
             >previous</a> |</li>
        Ruffus v. 2.6
            <li><a href="index.html">Home</a> | </li>
            <li><a href="contents.html">Contents</a> | </li>
            <li><a href="installation.html">Install</a>  | </li>
            <li><a href="tutorials/new_tutorial/introduction.html">Manual</a>  / </li>
            <li><a href="tutorials/new_tutorial/manual_contents.html">(TOC)</a>  | </li>
            <li><a href="faq.html">FAQ</a>  | </li>
            <li><a href="cheatsheet.html">Cheat sheet</a> | </li>
            <li><a href="tutorials/new_tutorial/command_line.html">Command Line</a> | </li>
            <li><a href="gallery.html">Gallery</a> |  </li>
            <li><a href="new_syntax.html">New syntax in v 2.6</a> | </li>
            <li><a href="#">Latest Changes</a> &raquo; </li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2013 Leo Goodstadt.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>