<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Ruffus is a Computation Pipeline library for python. It is open-sourced, powerful and user-friendly, and widely used in science and bioinformatics" name="description" />
<meta content="python, pipeline, computation, cluster, Ruffus, bioinformatics, parallel' name='keywords" name="keywords" />
<meta content="Leo Goodstadt" name="Author" />
<meta content="Leo Goodstadt" name="Publisher" />
<meta content="ruffus&#64;llew.org.uk" name="Email" />
<meta content="index, follow" name="robots" />
<meta content="en-uk" name="language" />
<meta content="United Kingdom" name="country" />
<meta content="Leo Goodstadt 2009-2014" name="copyright" />

    <title>Worked Example for New Object orientated syntax for Ruffus in Version 2.6 &mdash; ruffus 2.6 documentation</title>
    
    <link rel="stylesheet" href="../_static/ruffus.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="ruffus 2.6 documentation" href="../index.html" />
    <link rel="next" title="Python Code for: New Object orientated syntax for Ruffus in Version 2.6" href="new_syntax_worked_example_code.html" />
    <link rel="prev" title="New Object orientated syntax for Ruffus in Version 2.6" href="new_syntax.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="new_syntax_worked_example_code.html" title="Python Code for: New Object orientated syntax for Ruffus in Version 2.6"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="new_syntax.html" title="New Object orientated syntax for Ruffus in Version 2.6"
             accesskey="P">previous</a> |</li>
        Ruffus v. 2.6
            <li><a href="../index.html">Home</a> | </li>
            <li><a href="../contents.html">Contents</a> | </li>
            <li><a href="../installation.html">Install</a>  | </li>
            <li><a href="new_tutorial/introduction.html">Manual</a>  / </li>
            <li><a href="new_tutorial/manual_contents.html">(TOC)</a>  | </li>
            <li><a href="../faq.html">FAQ</a>  | </li>
            <li><a href="../cheatsheet.html">Cheat sheet</a> | </li>
            <li><a href="new_tutorial/command_line.html">Command Line</a> | </li>
            <li><a href="../gallery.html">Gallery</a> |  </li>
            <li><a href="../new_syntax.html">New syntax in v 2.6</a> | </li>
            <li><a href="../history.html">Latest Changes</a> &raquo; </li>
 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <p><span class="raw-html"><style> .highlight-blue {color:blue} </style></span></p>
<p><span class="raw-html"><style> .highlight-red {color:red} </style></span></p>
<div class="section" id="worked-example-for-new-object-orientated-syntax-for-ruffus-in-version-2-6">
<span id="new-syntax-worked-example"></span><h1>Worked Example for New Object orientated syntax for Ruffus in Version 2.6<a class="headerlink" href="#worked-example-for-new-object-orientated-syntax-for-ruffus-in-version-2-6" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p>Ruffus Pipelines can now be created and manipulated directly using <span class="highlight-red">Pipeline</span> and <span class="highlight-red">Task</span> objects instead of via decorators.</p>
<p>For clarity, we use named parameters in this example. You can just as easily pass all parameters by position.</p>
</div></blockquote>
<div class="section" id="worked-example">
<h2>Worked example<a class="headerlink" href="#worked-example" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Remember to look at the example code:</p>
<blockquote class="last">
<div><ul class="simple">
<li><a class="reference internal" href="new_syntax_worked_example_code.html#new-syntax-worked-example-code"><em>Python Code for: New Object orientated syntax for Ruffus in Version 2.6</em></a></li>
</ul>
</div></blockquote>
</div>
<p>This example pipeline is a composite of three separately subpipelines each created by a python
function <tt class="docutils literal"><span class="pre">make_pipeline1()</span></tt> which is joined to another subpipeline created by <tt class="docutils literal"><span class="pre">make_pipeline2()</span></tt></p>
<a class="reference internal image-reference" href="../_images/subpipeline_example.png"><img alt="../_images/subpipeline_example.png" src="../_images/subpipeline_example.png" style="width: 925.5px; height: 369.0px;" /></a>
<p>Although there are 13 different stages to this pipeline, we are using the same three python functions
(but supplying them with different data).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">task_originate</span><span class="p">(</span><span class="n">o</span><span class="p">):</span>
    <span class="c">#   Makes new files</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">task_m_to_1</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
    <span class="c">#   Merges files together</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">task_1_to_1</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
    <span class="c"># One input per output</span>
    <span class="o">...</span>
</pre></div>
</div>
</div></blockquote>
<div class="section" id="pipeline-factory">
<h3>Pipeline factory<a class="headerlink" href="#pipeline-factory" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Let us start with a python function which makes a full formed sub pipeline useable as a modular building block</p>
<div class="highlight-python"><div class="highlight"><pre><span class="hll"><span class="c"># Pipelines need to have a unique name</span>
</span><span class="k">def</span> <span class="nf">make_pipeline1</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">,</span>
                   <span class="n">starting_file_names</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Note that we are passing the pipeline name as the first parameter.</p>
<p>All pipelines must have unique names</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">test_pipeline</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">)</span>

<span class="n">new_task</span> <span class="o">=</span> <span class="n">test_pipeline</span><span class="o">.</span><span class="n">originate</span><span class="p">(</span><span class="n">task_func</span> <span class="o">=</span> <span class="n">task_originate</span><span class="p">,</span>
                                   <span class="n">output</span> <span class="o">=</span> <span class="n">starting_file_names</span><span class="p">)</span>\
                        <span class="o">.</span><span class="n">follows</span><span class="p">(</span><span class="n">mkdir</span><span class="p">(</span><span class="n">tempdir</span><span class="p">),</span> <span class="n">mkdir</span><span class="p">(</span><span class="n">tempdir</span> <span class="o">+</span> <span class="s">&quot;testdir&quot;</span><span class="p">,</span> <span class="n">tempdir</span> <span class="o">+</span> <span class="s">&quot;testdir2&quot;</span><span class="p">))</span>\
                        <span class="o">.</span><span class="n">posttask</span><span class="p">(</span><span class="n">touch_file</span><span class="p">(</span><span class="n">tempdir</span> <span class="o">+</span> <span class="s">&quot;testdir/whatever.txt&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>A new task is returned from <tt class="docutils literal"><span class="pre">test_pipeline.originate(...)</span></tt> which is then modified via <tt class="docutils literal"><span class="pre">.follows(...)</span></tt>
and  <tt class="docutils literal"><span class="pre">.posttask(...)</span></tt>. This is familiar Ruffus syntax only slightly rearranged.</p>
<p>We can change the <tt class="docutils literal"><span class="pre">output=starting_file_names</span></tt> later using <tt class="docutils literal"><span class="pre">set_output()</span></tt> but sometimes it
is just more convenient to pass this as a parameter to the pipeline factory function.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The first, mandatory parameter is <tt class="docutils literal"><span class="pre">task_func</span> <span class="pre">=</span> <span class="pre">task_originate</span></tt> which is the python function for this task</p>
</div>
</div></blockquote>
</div>
<div class="section" id="three-different-ways-of-referring-to-input-tasks">
<h3>Three different ways of referring to input Tasks<a class="headerlink" href="#three-different-ways-of-referring-to-input-tasks" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Just as in traditional Ruffus, Pipelines are created by setting the <strong>input</strong> of one task to (the <strong>output</strong> of) its predecessor.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">test_pipeline</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">task_func</span>   <span class="o">=</span> <span class="n">task_m_to_1</span><span class="p">,</span>
                        <span class="n">name</span>        <span class="o">=</span> <span class="s">&quot;add_input&quot;</span><span class="p">,</span>
<span class="hll">                        <span class="c">#   Lookup Task from function task_originate()</span>
</span>                        <span class="c">#       Needs to be unique in the pipeline</span>
                        <span class="nb">input</span>       <span class="o">=</span> <span class="n">task_originate</span><span class="p">,</span>
                        <span class="nb">filter</span>      <span class="o">=</span> <span class="n">regex</span><span class="p">(</span><span class="s">r&quot;(.*)&quot;</span><span class="p">),</span>
                        <span class="n">add_inputs</span>  <span class="o">=</span> <span class="n">add_inputs</span><span class="p">(</span><span class="n">tempdir</span> <span class="o">+</span> <span class="s">&quot;testdir/whatever.txt&quot;</span><span class="p">),</span>
                        <span class="n">output</span>      <span class="o">=</span> <span class="s">r&quot;\1.22&quot;</span><span class="p">)</span>
<span class="n">test_pipeline</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">task_func</span>   <span class="o">=</span> <span class="n">task_1_to_1</span><span class="p">,</span>
                        <span class="n">name</span>        <span class="o">=</span> <span class="s">&quot;22_to_33&quot;</span><span class="p">,</span>
<span class="hll">                        <span class="c"># Lookup Task from unique Task name = &quot;add_input&quot;</span>
</span><span class="hll">                        <span class="c">#   Function name is not unique in the pipeline</span>
</span>                        <span class="nb">input</span>       <span class="o">=</span> <span class="n">output_from</span><span class="p">(</span><span class="s">&quot;add_input&quot;</span><span class="p">),</span>
                        <span class="nb">filter</span>      <span class="o">=</span> <span class="n">suffix</span><span class="p">(</span><span class="s">&quot;.22&quot;</span><span class="p">),</span>
                        <span class="n">output</span>      <span class="o">=</span> <span class="s">&quot;.33&quot;</span><span class="p">)</span>
<span class="n">tail_task</span> <span class="o">=</span> <span class="n">test_pipeline</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">task_func</span>   <span class="o">=</span> <span class="n">task_1_to_1</span><span class="p">,</span>
                                    <span class="n">name</span>        <span class="o">=</span> <span class="s">&quot;33_to_44&quot;</span><span class="p">,</span>
<span class="hll">                                    <span class="c"># Ask test_pipeline to lookup Task name = &quot;22_to_33&quot;</span>
</span>                                    <span class="nb">input</span>       <span class="o">=</span> <span class="n">test_pipeline</span><span class="p">[</span><span class="s">&quot;22_to_33&quot;</span><span class="p">],</span>
                                    <span class="nb">filter</span>      <span class="o">=</span> <span class="n">suffix</span><span class="p">(</span><span class="s">&quot;.33&quot;</span><span class="p">),</span>
                                    <span class="n">output</span>      <span class="o">=</span> <span class="s">&quot;.44&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="head-and-tail-tasks">
<h3>Head and Tail Tasks<a class="headerlink" href="#head-and-tail-tasks" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="hll"><span class="c">#   Set the tail task: test_pipeline can be used as an input</span>
</span><span class="c">#       without knowing the details of task names</span>
<span class="c">#</span>
<span class="c">#   Use Task object=tail_task directly</span>
<span class="n">test_pipeline</span><span class="o">.</span><span class="n">set_tail_tasks</span><span class="p">([</span><span class="n">tail_task</span><span class="p">])</span>

<span class="hll"><span class="c">#   Set the head task: we can feed input into test_pipeline</span>
</span><span class="c">#       without knowing the details of task names</span>
<span class="n">test_pipeline</span><span class="o">.</span><span class="n">set_head_tasks</span><span class="p">([</span><span class="n">test_pipeline</span><span class="p">[</span><span class="n">task_originate</span><span class="p">]])</span>

<span class="k">return</span> <span class="n">test_pipeline</span>
</pre></div>
</div>
<p>By calling <tt class="docutils literal"><span class="pre">set_tail_tasks</span></tt> and <tt class="docutils literal"><span class="pre">set_head_tasks</span></tt> to assign the first and last stages of
<tt class="docutils literal"><span class="pre">test_pipeline</span></tt>, we can later use <tt class="docutils literal"><span class="pre">test_pipeline</span></tt> without knowing its component Tasks.</p>
<p>The last step is to return the fully formed pipeline instance</p>
</div></blockquote>
</div>
<div class="section" id="another-pipeline-factory">
<h3>Another Pipeline factory<a class="headerlink" href="#another-pipeline-factory" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="c">#</span>
<span class="c">#   Returns a fully formed sub pipeline useable as a building block</span>
<span class="c">#</span>
<span class="k">def</span> <span class="nf">make_pipeline2</span><span class="p">(</span> <span class="n">pipeline_name</span> <span class="o">=</span> <span class="s">&quot;pipeline2&quot;</span><span class="p">,</span> <span class="n">do_not_define_head_task</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
    <span class="n">test_pipeline2</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">pipeline_name</span><span class="p">)</span>
    <span class="n">test_pipeline2</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">task_func</span>   <span class="o">=</span> <span class="n">task_1_to_1</span><span class="p">,</span>
                             <span class="c"># task name</span>
                            <span class="n">name</span>        <span class="o">=</span> <span class="s">&quot;44_to_55&quot;</span><span class="p">,</span>
<span class="hll">                             <span class="c"># placeholder: will be replaced later with set_input()</span>
</span>                            <span class="nb">input</span>       <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                            <span class="nb">filter</span>      <span class="o">=</span> <span class="n">suffix</span><span class="p">(</span><span class="s">&quot;.44&quot;</span><span class="p">),</span>
                            <span class="n">output</span>      <span class="o">=</span> <span class="s">&quot;.55&quot;</span><span class="p">)</span>
    <span class="n">test_pipeline2</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>   <span class="n">task_func</span>   <span class="o">=</span> <span class="n">task_m_to_1</span><span class="p">,</span>
                            <span class="nb">input</span>       <span class="o">=</span> <span class="n">test_pipeline2</span><span class="p">[</span><span class="s">&quot;44_to_55&quot;</span><span class="p">],</span>
                            <span class="n">output</span>      <span class="o">=</span> <span class="n">tempdir</span> <span class="o">+</span> <span class="s">&quot;final.output&quot;</span><span class="p">,)</span>
    <span class="c"># Lookup task using function name</span>
    <span class="c">#   This is unique within pipeline2</span>
    <span class="n">test_pipeline2</span><span class="o">.</span><span class="n">set_tail_tasks</span><span class="p">([</span><span class="n">test_pipeline2</span><span class="p">[</span><span class="n">task_m_to_1</span><span class="p">]])</span>

    <span class="c"># Lookup task using task name</span>
    <span class="n">test_pipeline2</span><span class="o">.</span><span class="n">set_head_tasks</span><span class="p">([</span><span class="n">test_pipeline2</span><span class="p">[</span><span class="s">&quot;44_to_55&quot;</span><span class="p">]])</span>

    <span class="k">return</span> <span class="n">test_pipeline2</span>
</pre></div>
</div>
<p>make_pipeline2() looks very similar to make_pipeline1 except that the input for the <strong>head</strong> task
is left blank for assigning later</p>
<p>Note that we can use <tt class="docutils literal"><span class="pre">task_m_to_1</span></tt> to look up a Task (<tt class="docutils literal"><span class="pre">test_pipeline2[task_m_to_1]</span></tt>) even
though this function is also used by test_pipeline. There is no ambiguity so long as only one
task in <tt class="docutils literal"><span class="pre">test_pipeline2</span></tt> uses this python function.</p>
</div></blockquote>
</div>
<div class="section" id="creating-multiple-copies-of-a-pipeline">
<h3>Creating multiple copies of a pipeline<a class="headerlink" href="#creating-multiple-copies-of-a-pipeline" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Let us call <tt class="docutils literal"><span class="pre">make_pipeline1()</span></tt> to make two completely independent pipelines (<tt class="docutils literal"><span class="pre">&quot;pipeline1a&quot;</span></tt> and <tt class="docutils literal"><span class="pre">&quot;pipeline1b&quot;</span></tt>)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="hll"><span class="c">#   First two pipelines are created as separate instances by make_pipeline1()</span>
</span><span class="n">pipeline1a</span> <span class="o">=</span> <span class="n">make_pipeline1</span><span class="p">(</span><span class="n">pipeline_name</span> <span class="o">=</span> <span class="s">&quot;pipeline1a&quot;</span><span class="p">,</span> <span class="n">starting_file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">tempdir</span> <span class="o">+</span> <span class="n">ss</span> <span class="k">for</span> <span class="n">ss</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;a.1&quot;</span><span class="p">,</span> <span class="s">&quot;b.1&quot;</span><span class="p">)])</span>
<span class="n">pipeline1b</span> <span class="o">=</span> <span class="n">make_pipeline1</span><span class="p">(</span><span class="n">pipeline_name</span> <span class="o">=</span> <span class="s">&quot;pipeline1b&quot;</span><span class="p">,</span> <span class="n">starting_file_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">tempdir</span> <span class="o">+</span> <span class="n">ss</span> <span class="k">for</span> <span class="n">ss</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;c.1&quot;</span><span class="p">,</span> <span class="s">&quot;d.1&quot;</span><span class="p">)])</span>
</pre></div>
</div>
<p>We can also create a new instance of a pipeline by <strong>&#8220;cloning&#8221;</strong> an existing pipeline</p>
<div class="highlight-python"><div class="highlight"><pre><span class="hll"><span class="c">#   pipeline1c is a clone of pipeline1b</span>
</span><span class="n">pipeline1c</span> <span class="o">=</span> <span class="n">pipeline1b</span><span class="o">.</span><span class="n">clone</span><span class="p">(</span><span class="n">new_name</span> <span class="o">=</span> <span class="s">&quot;pipeline1c&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Because <tt class="docutils literal"><span class="pre">&quot;pipeline1c&quot;</span></tt> is a clone of <tt class="docutils literal"><span class="pre">&quot;pipeline1b&quot;</span></tt>, it shares exactly the same parameters.
Let us change this by giving <tt class="docutils literal"><span class="pre">&quot;pipeline1c&quot;</span></tt> its own starting files.</p>
<p>We can do this for normal (e.g. <strong>transform</strong>, <strong>split</strong>, <strong>merge</strong> etc) tasks by calling</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="n">transform_task</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="nb">input</span> <span class="o">=</span> <span class="n">xxx</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>&#64;originate doesn&#8217;t take <strong>input</strong> but creates results specified in the <strong>output</strong> parameter.
To finish setting up <tt class="docutils literal"><span class="pre">pipeline1c</span></tt>:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="hll"><span class="c">#   Set the &quot;originate&quot; files for pipeline1c to (&quot;e.1&quot; and &quot;f.1&quot;)</span>
</span><span class="hll"><span class="c">#       Otherwise they would use the original (&quot;c.1&quot;, &quot;d.1&quot;)</span>
</span><span class="n">pipeline1c</span><span class="o">.</span><span class="n">set_output</span><span class="p">(</span><span class="n">output</span> <span class="o">=</span> <span class="p">[</span><span class="n">tempdir</span> <span class="o">+</span> <span class="n">ss</span> <span class="k">for</span> <span class="n">ss</span> <span class="ow">in</span> <span class="p">(</span><span class="s">&quot;e.1&quot;</span><span class="p">,</span> <span class="s">&quot;f.1&quot;</span><span class="p">)])</span>
</pre></div>
</div>
</div></blockquote>
<p>We only create one copy of <tt class="docutils literal"><span class="pre">pipeline2</span></tt></p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="n">pipeline2</span> <span class="o">=</span> <span class="n">make_pipeline2</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="connecting-pipelines-together">
<h3>Connecting pipelines together<a class="headerlink" href="#connecting-pipelines-together" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Because we have previously assigned <strong>head</strong> and <strong>tail</strong> tasks, we can easily join the pipelines together:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#   Join all pipeline1a-c to pipeline2</span>
<span class="n">pipeline2</span><span class="o">.</span><span class="n">set_input</span><span class="p">(</span><span class="nb">input</span> <span class="o">=</span> <span class="p">[</span><span class="n">pipeline1a</span><span class="p">,</span> <span class="n">pipeline1b</span><span class="p">,</span> <span class="n">pipeline1c</span><span class="p">])</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="running-a-composite-pipeline">
<h3>Running a composite pipeline<a class="headerlink" href="#running-a-composite-pipeline" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>Ruffus automatically follows the antecedent dependencies of each task even if they are from another
pipeline.</p>
<p>This means that you can run composite pipelines seamlessly, without any effort:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="hll"><span class="c"># Only runs pipeline1a</span>
</span><span class="n">pipeline1a</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>

<span class="hll"><span class="c"># Runs pipeline1a,b,c -&gt; pipeline2</span>
</span><span class="n">pipeline2</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">multiprocess</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">verbose</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Remember to look at the example code:</p>
<blockquote class="last">
<div><ul class="simple">
<li><a class="reference internal" href="new_syntax_worked_example_code.html#new-syntax-worked-example-code"><em>Python Code for: New Object orientated syntax for Ruffus in Version 2.6</em></a></li>
</ul>
</div></blockquote>
</div>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Worked Example for New Object orientated syntax for Ruffus in Version 2.6</a><ul>
<li><a class="reference internal" href="#worked-example">Worked example</a><ul>
<li><a class="reference internal" href="#pipeline-factory">Pipeline factory</a></li>
<li><a class="reference internal" href="#three-different-ways-of-referring-to-input-tasks">Three different ways of referring to input Tasks</a></li>
<li><a class="reference internal" href="#head-and-tail-tasks">Head and Tail Tasks</a></li>
<li><a class="reference internal" href="#another-pipeline-factory">Another Pipeline factory</a></li>
<li><a class="reference internal" href="#creating-multiple-copies-of-a-pipeline">Creating multiple copies of a pipeline</a></li>
<li><a class="reference internal" href="#connecting-pipelines-together">Connecting pipelines together</a></li>
<li><a class="reference internal" href="#running-a-composite-pipeline">Running a composite pipeline</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="new_syntax.html"
                        title="previous chapter">New Object orientated syntax for Ruffus in Version 2.6</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="new_syntax_worked_example_code.html"
                        title="next chapter">Python Code for: New Object orientated syntax for Ruffus in Version 2.6</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/tutorials/new_syntax_worked_example.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
    
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
    <h3> Quick Reference:</h3>
    <ul>
        <h4><a href="../decorators/decorators.html#core">Core:</a></h4>   
        <ul>
            <li><a href="../decorators/originate.html">@originate</a>                           </li>
            <li><a href="../decorators/split.html">@split</a>                                   </li>
            <li><a href="../decorators/transform.html">@transform</a>                           </li>
            <li><a href="../decorators/merge.html">@merge</a>                                   </li>
        </ul>

        <h4><a href="../decorators/decorators.html#advanced">Advanced</a></h4>   
        <ul>
            <li><a href="../decorators/subdivide.html">@subdivide</a>                           </li>
            <li><a href="../decorators/transform_ex.html">@transform (add_inputs) </a>          </li>
            <li><a href="../decorators/collate.html">@collate</a>                               </li>
            <li><a href="../decorators/collate_ex.html">@collate (add_inputs)</a>               </li>
            <li><a href="../decorators/graphviz.html">@graphviz</a>                             </li>
            <li><a href="../decorators/mkdir.html">@mkdir</a>                                   </li>
            <li><a href="../decorators/follows.html">@follows / mkdir</a>                       </li>
            <li><a href="../decorators/posttask.html">@posttask touch_file</a>                  </li>
            <li><a href="../decorators/active_if.html">@active_if</a>                           </li>
            <li><a href="../decorators/jobs_limit.html">@jobs_limit</a>                         </li>
        </ul>
    
        <h4><a href="../decorators/decorators.html#combinatorics">Combinatorial:</a></h4>   
        <ul>
            <li><a href="../decorators/product.html">@product </a>                              </li>
            <li><a href="../decorators/permutations.html">@permutations </a>                    </li>
            <li><a href="../decorators/combinations.html">@combinations </a>                    </li>
            <li><a href="../decorators/combinations_with_replacement.html">@combinations_ _with_replacement </a>                    </li>
        </ul>

                        
        <h4><a href="../decorators/decorators.html#esoteric">Esoteric</a></h4>   
        <ul>
            <li><a href="../decorators/files_ex.html">@files (on the fly)</a>                   </li>
            <li><a href="../decorators/parallel.html">@parallel</a>                             </li>
            <li><a href="../decorators/check_if_uptodate.html">@check_if_uptodate</a>           </li>
        </ul>


        <h4 ><a href="../decorators/indicator_objects.html">Indicator objects</a></h4>
        <h4 >Pipeline functions</h4>
        <ul>
            <li><a href="../pipeline_functions.html#pipeline-functions-pipeline-run">pipeline_run</a>                       </li>
            <li><a href="../pipeline_functions.html#pipeline-functions-pipeline-printout">pipeline_printout</a>                      </li>
            <li><a href="../pipeline_functions.html#pipeline-functions-pipeline-printout-graph">pipeline_printout_graph</a>          </li>
            <li><a href="../pipeline_functions.html#pipeline-functions-pipeline-get-task-names">pipeline_get_task_names</a>          </li>
            <li><a href="../drmaa_wrapper_functions.html#drmaa-wrapper-functions-drmaa_wrapper-run_job">drmaa_wrapper.run_job</a>          </li>
        </ul>

         <a href="../todo.html">Future plans</a>
    </ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="new_syntax_worked_example_code.html" title="Python Code for: New Object orientated syntax for Ruffus in Version 2.6"
             >next</a> |</li>
        <li class="right" >
          <a href="new_syntax.html" title="New Object orientated syntax for Ruffus in Version 2.6"
             >previous</a> |</li>
        Ruffus v. 2.6
            <li><a href="../index.html">Home</a> | </li>
            <li><a href="../contents.html">Contents</a> | </li>
            <li><a href="../installation.html">Install</a>  | </li>
            <li><a href="new_tutorial/introduction.html">Manual</a>  / </li>
            <li><a href="new_tutorial/manual_contents.html">(TOC)</a>  | </li>
            <li><a href="../faq.html">FAQ</a>  | </li>
            <li><a href="../cheatsheet.html">Cheat sheet</a> | </li>
            <li><a href="new_tutorial/command_line.html">Command Line</a> | </li>
            <li><a href="../gallery.html">Gallery</a> |  </li>
            <li><a href="../new_syntax.html">New syntax in v 2.6</a> | </li>
            <li><a href="../history.html">Latest Changes</a> &raquo; </li>
 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2013 Leo Goodstadt.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>